(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=s(a);fetch(a.href,o)}})();function z_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ex={exports:{}},tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c1;function rD(){if(c1)return tu;c1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(r,a,o){var c=null;if(o!==void 0&&(c=""+o),a.key!==void 0&&(c=""+a.key),"key"in a){o={};for(var u in a)u!=="key"&&(o[u]=a[u])}else o=a;return a=o.ref,{$$typeof:t,type:r,key:c,ref:a!==void 0?a:null,props:o}}return tu.Fragment=e,tu.jsx=s,tu.jsxs=s,tu}var d1;function aD(){return d1||(d1=1,ex.exports=rD()),ex.exports}var n=aD(),tx={exports:{}},Ge={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u1;function iD(){if(u1)return Ge;u1=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),v=Symbol.iterator;function y(B){return B===null||typeof B!="object"?null:(B=v&&B[v]||B["@@iterator"],typeof B=="function"?B:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,E={};function _(B,Q,ie){this.props=B,this.context=Q,this.refs=E,this.updater=ie||N}_.prototype.isReactComponent={},_.prototype.setState=function(B,Q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Q,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function R(){}R.prototype=_.prototype;function I(B,Q,ie){this.props=B,this.context=Q,this.refs=E,this.updater=ie||N}var V=I.prototype=new R;V.constructor=I,w(V,_.prototype),V.isPureReactComponent=!0;var z=Array.isArray,F={H:null,A:null,T:null,S:null,V:null},P=Object.prototype.hasOwnProperty;function C(B,Q,ie,ue,Ee,ge){return ie=ge.ref,{$$typeof:t,type:B,key:Q,ref:ie!==void 0?ie:null,props:ge}}function D(B,Q){return C(B.type,Q,void 0,void 0,void 0,B.props)}function k(B){return typeof B=="object"&&B!==null&&B.$$typeof===t}function O(B){var Q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ie){return Q[ie]})}var q=/\/+/g;function M(B,Q){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):Q.toString(36)}function L(){}function oe(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(L,L):(B.status="pending",B.then(function(Q){B.status==="pending"&&(B.status="fulfilled",B.value=Q)},function(Q){B.status==="pending"&&(B.status="rejected",B.reason=Q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function ve(B,Q,ie,ue,Ee){var ge=typeof B;(ge==="undefined"||ge==="boolean")&&(B=null);var Se=!1;if(B===null)Se=!0;else switch(ge){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(B.$$typeof){case t:case e:Se=!0;break;case x:return Se=B._init,ve(Se(B._payload),Q,ie,ue,Ee)}}if(Se)return Ee=Ee(B),Se=ue===""?"."+M(B,0):ue,z(Ee)?(ie="",Se!=null&&(ie=Se.replace(q,"$&/")+"/"),ve(Ee,Q,ie,"",function(Rs){return Rs})):Ee!=null&&(k(Ee)&&(Ee=D(Ee,ie+(Ee.key==null||B&&B.key===Ee.key?"":(""+Ee.key).replace(q,"$&/")+"/")+Se)),Q.push(Ee)),1;Se=0;var ct=ue===""?".":ue+":";if(z(B))for(var $e=0;$e<B.length;$e++)ue=B[$e],ge=ct+M(ue,$e),Se+=ve(ue,Q,ie,ge,Ee);else if($e=y(B),typeof $e=="function")for(B=$e.call(B),$e=0;!(ue=B.next()).done;)ue=ue.value,ge=ct+M(ue,$e++),Se+=ve(ue,Q,ie,ge,Ee);else if(ge==="object"){if(typeof B.then=="function")return ve(oe(B),Q,ie,ue,Ee);throw Q=String(B),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Se}function ee(B,Q,ie){if(B==null)return B;var ue=[],Ee=0;return ve(B,ue,"","",function(ge){return Q.call(ie,ge,Ee++)}),ue}function fe(B){if(B._status===-1){var Q=B._result;Q=Q(),Q.then(function(ie){(B._status===0||B._status===-1)&&(B._status=1,B._result=ie)},function(ie){(B._status===0||B._status===-1)&&(B._status=2,B._result=ie)}),B._status===-1&&(B._status=0,B._result=Q)}if(B._status===1)return B._result.default;throw B._result}var ye=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function Fe(){}return Ge.Children={map:ee,forEach:function(B,Q,ie){ee(B,function(){Q.apply(this,arguments)},ie)},count:function(B){var Q=0;return ee(B,function(){Q++}),Q},toArray:function(B){return ee(B,function(Q){return Q})||[]},only:function(B){if(!k(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Ge.Component=_,Ge.Fragment=s,Ge.Profiler=a,Ge.PureComponent=I,Ge.StrictMode=r,Ge.Suspense=m,Ge.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=F,Ge.__COMPILER_RUNTIME={__proto__:null,c:function(B){return F.H.useMemoCache(B)}},Ge.cache=function(B){return function(){return B.apply(null,arguments)}},Ge.cloneElement=function(B,Q,ie){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ue=w({},B.props),Ee=B.key,ge=void 0;if(Q!=null)for(Se in Q.ref!==void 0&&(ge=void 0),Q.key!==void 0&&(Ee=""+Q.key),Q)!P.call(Q,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&Q.ref===void 0||(ue[Se]=Q[Se]);var Se=arguments.length-2;if(Se===1)ue.children=ie;else if(1<Se){for(var ct=Array(Se),$e=0;$e<Se;$e++)ct[$e]=arguments[$e+2];ue.children=ct}return C(B.type,Ee,void 0,void 0,ge,ue)},Ge.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Ge.createElement=function(B,Q,ie){var ue,Ee={},ge=null;if(Q!=null)for(ue in Q.key!==void 0&&(ge=""+Q.key),Q)P.call(Q,ue)&&ue!=="key"&&ue!=="__self"&&ue!=="__source"&&(Ee[ue]=Q[ue]);var Se=arguments.length-2;if(Se===1)Ee.children=ie;else if(1<Se){for(var ct=Array(Se),$e=0;$e<Se;$e++)ct[$e]=arguments[$e+2];Ee.children=ct}if(B&&B.defaultProps)for(ue in Se=B.defaultProps,Se)Ee[ue]===void 0&&(Ee[ue]=Se[ue]);return C(B,ge,void 0,void 0,null,Ee)},Ge.createRef=function(){return{current:null}},Ge.forwardRef=function(B){return{$$typeof:u,render:B}},Ge.isValidElement=k,Ge.lazy=function(B){return{$$typeof:x,_payload:{_status:-1,_result:B},_init:fe}},Ge.memo=function(B,Q){return{$$typeof:f,type:B,compare:Q===void 0?null:Q}},Ge.startTransition=function(B){var Q=F.T,ie={};F.T=ie;try{var ue=B(),Ee=F.S;Ee!==null&&Ee(ie,ue),typeof ue=="object"&&ue!==null&&typeof ue.then=="function"&&ue.then(Fe,ye)}catch(ge){ye(ge)}finally{F.T=Q}},Ge.unstable_useCacheRefresh=function(){return F.H.useCacheRefresh()},Ge.use=function(B){return F.H.use(B)},Ge.useActionState=function(B,Q,ie){return F.H.useActionState(B,Q,ie)},Ge.useCallback=function(B,Q){return F.H.useCallback(B,Q)},Ge.useContext=function(B){return F.H.useContext(B)},Ge.useDebugValue=function(){},Ge.useDeferredValue=function(B,Q){return F.H.useDeferredValue(B,Q)},Ge.useEffect=function(B,Q,ie){var ue=F.H;if(typeof ie=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ue.useEffect(B,Q)},Ge.useId=function(){return F.H.useId()},Ge.useImperativeHandle=function(B,Q,ie){return F.H.useImperativeHandle(B,Q,ie)},Ge.useInsertionEffect=function(B,Q){return F.H.useInsertionEffect(B,Q)},Ge.useLayoutEffect=function(B,Q){return F.H.useLayoutEffect(B,Q)},Ge.useMemo=function(B,Q){return F.H.useMemo(B,Q)},Ge.useOptimistic=function(B,Q){return F.H.useOptimistic(B,Q)},Ge.useReducer=function(B,Q,ie){return F.H.useReducer(B,Q,ie)},Ge.useRef=function(B){return F.H.useRef(B)},Ge.useState=function(B){return F.H.useState(B)},Ge.useSyncExternalStore=function(B,Q,ie){return F.H.useSyncExternalStore(B,Q,ie)},Ge.useTransition=function(){return F.H.useTransition()},Ge.version="19.1.0",Ge}var h1;function ey(){return h1||(h1=1,tx.exports=iD()),tx.exports}var S=ey();const as=z_(S);var sx={exports:{}},su={},nx={exports:{}},rx={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m1;function lD(){return m1||(m1=1,function(t){function e(ee,fe){var ye=ee.length;ee.push(fe);e:for(;0<ye;){var Fe=ye-1>>>1,B=ee[Fe];if(0<a(B,fe))ee[Fe]=fe,ee[ye]=B,ye=Fe;else break e}}function s(ee){return ee.length===0?null:ee[0]}function r(ee){if(ee.length===0)return null;var fe=ee[0],ye=ee.pop();if(ye!==fe){ee[0]=ye;e:for(var Fe=0,B=ee.length,Q=B>>>1;Fe<Q;){var ie=2*(Fe+1)-1,ue=ee[ie],Ee=ie+1,ge=ee[Ee];if(0>a(ue,ye))Ee<B&&0>a(ge,ue)?(ee[Fe]=ge,ee[Ee]=ye,Fe=Ee):(ee[Fe]=ue,ee[ie]=ye,Fe=ie);else if(Ee<B&&0>a(ge,ye))ee[Fe]=ge,ee[Ee]=ye,Fe=Ee;else break e}}return fe}function a(ee,fe){var ye=ee.sortIndex-fe.sortIndex;return ye!==0?ye:ee.id-fe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var m=[],f=[],x=1,v=null,y=3,N=!1,w=!1,E=!1,_=!1,R=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;function z(ee){for(var fe=s(f);fe!==null;){if(fe.callback===null)r(f);else if(fe.startTime<=ee)r(f),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=s(f)}}function F(ee){if(E=!1,z(ee),!w)if(s(m)!==null)w=!0,P||(P=!0,M());else{var fe=s(f);fe!==null&&ve(F,fe.startTime-ee)}}var P=!1,C=-1,D=5,k=-1;function O(){return _?!0:!(t.unstable_now()-k<D)}function q(){if(_=!1,P){var ee=t.unstable_now();k=ee;var fe=!0;try{e:{w=!1,E&&(E=!1,I(C),C=-1),N=!0;var ye=y;try{t:{for(z(ee),v=s(m);v!==null&&!(v.expirationTime>ee&&O());){var Fe=v.callback;if(typeof Fe=="function"){v.callback=null,y=v.priorityLevel;var B=Fe(v.expirationTime<=ee);if(ee=t.unstable_now(),typeof B=="function"){v.callback=B,z(ee),fe=!0;break t}v===s(m)&&r(m),z(ee)}else r(m);v=s(m)}if(v!==null)fe=!0;else{var Q=s(f);Q!==null&&ve(F,Q.startTime-ee),fe=!1}}break e}finally{v=null,y=ye,N=!1}fe=void 0}}finally{fe?M():P=!1}}}var M;if(typeof V=="function")M=function(){V(q)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,oe=L.port2;L.port1.onmessage=q,M=function(){oe.postMessage(null)}}else M=function(){R(q,0)};function ve(ee,fe){C=R(function(){ee(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(ee){switch(y){case 1:case 2:case 3:var fe=3;break;default:fe=y}var ye=y;y=fe;try{return ee()}finally{y=ye}},t.unstable_requestPaint=function(){_=!0},t.unstable_runWithPriority=function(ee,fe){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var ye=y;y=ee;try{return fe()}finally{y=ye}},t.unstable_scheduleCallback=function(ee,fe,ye){var Fe=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Fe+ye:Fe):ye=Fe,ee){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=ye+B,ee={id:x++,callback:fe,priorityLevel:ee,startTime:ye,expirationTime:B,sortIndex:-1},ye>Fe?(ee.sortIndex=ye,e(f,ee),s(m)===null&&ee===s(f)&&(E?(I(C),C=-1):E=!0,ve(F,ye-Fe))):(ee.sortIndex=B,e(m,ee),w||N||(w=!0,P||(P=!0,M()))),ee},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(ee){var fe=y;return function(){var ye=y;y=fe;try{return ee.apply(this,arguments)}finally{y=ye}}}}(rx)),rx}var f1;function oD(){return f1||(f1=1,nx.exports=lD()),nx.exports}var ax={exports:{}},ks={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g1;function cD(){if(g1)return ks;g1=1;var t=ey();function e(m){var f="https://react.dev/errors/"+m;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var r={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(m,f,x){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:f,implementation:x}}var c=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(m,f){if(m==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return ks.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,ks.createPortal=function(m,f){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return o(m,f,null,x)},ks.flushSync=function(m){var f=c.T,x=r.p;try{if(c.T=null,r.p=2,m)return m()}finally{c.T=f,r.p=x,r.d.f()}},ks.preconnect=function(m,f){typeof m=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(m,f))},ks.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},ks.preinit=function(m,f){if(typeof m=="string"&&f&&typeof f.as=="string"){var x=f.as,v=u(x,f.crossOrigin),y=typeof f.integrity=="string"?f.integrity:void 0,N=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;x==="style"?r.d.S(m,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:v,integrity:y,fetchPriority:N}):x==="script"&&r.d.X(m,{crossOrigin:v,integrity:y,fetchPriority:N,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},ks.preinitModule=function(m,f){if(typeof m=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var x=u(f.as,f.crossOrigin);r.d.M(m,{crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(m)},ks.preload=function(m,f){if(typeof m=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var x=f.as,v=u(x,f.crossOrigin);r.d.L(m,x,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},ks.preloadModule=function(m,f){if(typeof m=="string")if(f){var x=u(f.as,f.crossOrigin);r.d.m(m,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:x,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(m)},ks.requestFormReset=function(m){r.d.r(m)},ks.unstable_batchedUpdates=function(m,f){return m(f)},ks.useFormState=function(m,f,x){return c.H.useFormState(m,f,x)},ks.useFormStatus=function(){return c.H.useHostTransitionStatus()},ks.version="19.1.0",ks}var p1;function q_(){if(p1)return ax.exports;p1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),ax.exports=cD(),ax.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x1;function dD(){if(x1)return su;x1=1;var t=oD(),e=ey(),s=q_();function r(i){var l="https://react.dev/errors/"+i;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+i+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var l=i,d=i;if(i.alternate)for(;l.return;)l=l.return;else{i=l;do l=i,(l.flags&4098)!==0&&(d=l.return),i=l.return;while(i)}return l.tag===3?d:null}function c(i){if(i.tag===13){var l=i.memoizedState;if(l===null&&(i=i.alternate,i!==null&&(l=i.memoizedState)),l!==null)return l.dehydrated}return null}function u(i){if(o(i)!==i)throw Error(r(188))}function m(i){var l=i.alternate;if(!l){if(l=o(i),l===null)throw Error(r(188));return l!==i?null:i}for(var d=i,h=l;;){var p=d.return;if(p===null)break;var b=p.alternate;if(b===null){if(h=p.return,h!==null){d=h;continue}break}if(p.child===b.child){for(b=p.child;b;){if(b===d)return u(p),i;if(b===h)return u(p),l;b=b.sibling}throw Error(r(188))}if(d.return!==h.return)d=p,h=b;else{for(var T=!1,U=p.child;U;){if(U===d){T=!0,d=p,h=b;break}if(U===h){T=!0,h=p,d=b;break}U=U.sibling}if(!T){for(U=b.child;U;){if(U===d){T=!0,d=b,h=p;break}if(U===h){T=!0,h=b,d=p;break}U=U.sibling}if(!T)throw Error(r(189))}}if(d.alternate!==h)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?i:l}function f(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i;for(i=i.child;i!==null;){if(l=f(i),l!==null)return l;i=i.sibling}return null}var x=Object.assign,v=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),I=Symbol.for("react.consumer"),V=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),k=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function M(i){return i===null||typeof i!="object"?null:(i=q&&i[q]||i["@@iterator"],typeof i=="function"?i:null)}var L=Symbol.for("react.client.reference");function oe(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===L?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case w:return"Fragment";case _:return"Profiler";case E:return"StrictMode";case F:return"Suspense";case P:return"SuspenseList";case k:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case N:return"Portal";case V:return(i.displayName||"Context")+".Provider";case I:return(i._context.displayName||"Context")+".Consumer";case z:var l=i.render;return i=i.displayName,i||(i=l.displayName||l.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case C:return l=i.displayName||null,l!==null?l:oe(i.type)||"Memo";case D:l=i._payload,i=i._init;try{return oe(i(l))}catch{}}return null}var ve=Array.isArray,ee=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,fe=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Fe=[],B=-1;function Q(i){return{current:i}}function ie(i){0>B||(i.current=Fe[B],Fe[B]=null,B--)}function ue(i,l){B++,Fe[B]=i.current,i.current=l}var Ee=Q(null),ge=Q(null),Se=Q(null),ct=Q(null);function $e(i,l){switch(ue(Se,l),ue(ge,i),ue(Ee,null),l.nodeType){case 9:case 11:i=(i=l.documentElement)&&(i=i.namespaceURI)?Lj(i):0;break;default:if(i=l.tagName,l=l.namespaceURI)l=Lj(l),i=Vj(l,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}ie(Ee),ue(Ee,i)}function Rs(){ie(Ee),ie(ge),ie(Se)}function ln(i){i.memoizedState!==null&&ue(ct,i);var l=Ee.current,d=Vj(l,i.type);l!==d&&(ue(ge,i),ue(Ee,d))}function Vr(i){ge.current===i&&(ie(Ee),ie(ge)),ct.current===i&&(ie(ct),Kd._currentValue=ye)}var $i=Object.prototype.hasOwnProperty,Gi=t.unstable_scheduleCallback,Wi=t.unstable_cancelCallback,Wc=t.unstable_shouldYield,ah=t.unstable_requestPaint,Sn=t.unstable_now,ep=t.unstable_getCurrentPriorityLevel,Qc=t.unstable_ImmediatePriority,ho=t.unstable_UserBlockingPriority,Qi=t.unstable_NormalPriority,tp=t.unstable_LowPriority,mo=t.unstable_IdlePriority,Yc=t.log,ih=t.unstable_setDisableYieldValue,Ft=null,gt=null;function on(i){if(typeof Yc=="function"&&ih(i),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(Ft,i)}catch{}}var Ds=Math.clz32?Math.clz32:Yi,lh=Math.log,sp=Math.LN2;function Yi(i){return i>>>=0,i===0?32:31-(lh(i)/sp|0)|0}var Ki=256,Xi=4194304;function Wn(i){var l=i&42;if(l!==0)return l;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fo(i,l,d){var h=i.pendingLanes;if(h===0)return 0;var p=0,b=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var U=h&134217727;return U!==0?(h=U&~b,h!==0?p=Wn(h):(T&=U,T!==0?p=Wn(T):d||(d=U&~i,d!==0&&(p=Wn(d))))):(U=h&~b,U!==0?p=Wn(U):T!==0?p=Wn(T):d||(d=h&~i,d!==0&&(p=Wn(d)))),p===0?0:l!==0&&l!==p&&(l&b)===0&&(b=p&-p,d=l&-l,b>=d||b===32&&(d&4194048)!==0)?l:p}function Zi(i,l){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&l)===0}function Kc(i,l){switch(i){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xc(){var i=Ki;return Ki<<=1,(Ki&4194048)===0&&(Ki=256),i}function Zc(){var i=Xi;return Xi<<=1,(Xi&62914560)===0&&(Xi=4194304),i}function Ur(i){for(var l=[],d=0;31>d;d++)l.push(i);return l}function Fr(i,l){i.pendingLanes|=l,l!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Jc(i,l,d,h,p,b){var T=i.pendingLanes;i.pendingLanes=d,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=d,i.entangledLanes&=d,i.errorRecoveryDisabledLanes&=d,i.shellSuspendCounter=0;var U=i.entanglements,$=i.expirationTimes,J=i.hiddenUpdates;for(d=T&~d;0<d;){var le=31-Ds(d),he=1<<le;U[le]=0,$[le]=-1;var te=J[le];if(te!==null)for(J[le]=null,le=0;le<te.length;le++){var se=te[le];se!==null&&(se.lane&=-536870913)}d&=~he}h!==0&&or(i,h,0),b!==0&&p===0&&i.tag!==0&&(i.suspendedLanes|=b&~(T&~l))}function or(i,l,d){i.pendingLanes|=l,i.suspendedLanes&=~l;var h=31-Ds(l);i.entangledLanes|=l,i.entanglements[h]=i.entanglements[h]|1073741824|d&4194090}function ed(i,l){var d=i.entangledLanes|=l;for(i=i.entanglements;d;){var h=31-Ds(d),p=1<<h;p&l|i[h]&l&&(i[h]|=l),d&=~p}}function Pa(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function go(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Oa(){var i=fe.p;return i!==0?i:(i=window.event,i===void 0?32:n1(i.type))}function oh(i,l){var d=fe.p;try{return fe.p=i,l()}finally{fe.p=d}}var It=Math.random().toString(36).slice(2),is="__reactFiber$"+It,Xt="__reactProps$"+It,An="__reactContainer$"+It,td="__reactEvents$"+It,np="__reactListeners$"+It,La="__reactHandles$"+It,ch="__reactResources$"+It,Ji="__reactMarker$"+It;function Va(i){delete i[is],delete i[Xt],delete i[td],delete i[np],delete i[La]}function Br(i){var l=i[is];if(l)return l;for(var d=i.parentNode;d;){if(l=d[An]||d[is]){if(d=l.alternate,l.child!==null||d!==null&&d.child!==null)for(i=Hj(i);i!==null;){if(d=i[is])return d;i=Hj(i)}return l}i=d,d=i.parentNode}return null}function cr(i){if(i=i[is]||i[An]){var l=i.tag;if(l===5||l===6||l===13||l===26||l===27||l===3)return i}return null}function dr(i){var l=i.tag;if(l===5||l===26||l===27||l===6)return i.stateNode;throw Error(r(33))}function Hs(i){var l=i[ch];return l||(l=i[ch]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Gt(i){i[Ji]=!0}var sd=new Set,po={};function Qn(i,l){Hr(i,l),Hr(i+"Capture",l)}function Hr(i,l){for(po[i]=l,i=0;i<l.length;i++)sd.add(l[i])}var dh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uh={},el={};function hh(i){return $i.call(el,i)?!0:$i.call(uh,i)?!1:dh.test(i)?el[i]=!0:(uh[i]=!0,!1)}function Ua(i,l,d){if(hh(l))if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":i.removeAttribute(l);return;case"boolean":var h=l.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){i.removeAttribute(l);return}}i.setAttribute(l,""+d)}}function ur(i,l,d){if(d===null)i.removeAttribute(l);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(l);return}i.setAttribute(l,""+d)}}function Ns(i,l,d,h){if(h===null)i.removeAttribute(d);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(d);return}i.setAttributeNS(l,d,""+h)}}var tl,mh;function zr(i){if(tl===void 0)try{throw Error()}catch(d){var l=d.stack.trim().match(/\n( *(at )?)/);tl=l&&l[1]||"",mh=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tl+i+mh}var xo=!1;function bo(i,l){if(!i||xo)return"";xo=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(l){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(se){var te=se}Reflect.construct(i,[],he)}else{try{he.call()}catch(se){te=se}i.call(he.prototype)}}else{try{throw Error()}catch(se){te=se}(he=i())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(se){if(se&&te&&typeof se.stack=="string")return[se.stack,te.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=h.DetermineComponentFrameRoot(),T=b[0],U=b[1];if(T&&U){var $=T.split(`
`),J=U.split(`
`);for(p=h=0;h<$.length&&!$[h].includes("DetermineComponentFrameRoot");)h++;for(;p<J.length&&!J[p].includes("DetermineComponentFrameRoot");)p++;if(h===$.length||p===J.length)for(h=$.length-1,p=J.length-1;1<=h&&0<=p&&$[h]!==J[p];)p--;for(;1<=h&&0<=p;h--,p--)if($[h]!==J[p]){if(h!==1||p!==1)do if(h--,p--,0>p||$[h]!==J[p]){var le=`
`+$[h].replace(" at new "," at ");return i.displayName&&le.includes("<anonymous>")&&(le=le.replace("<anonymous>",i.displayName)),le}while(1<=h&&0<=p);break}}}finally{xo=!1,Error.prepareStackTrace=d}return(d=i?i.displayName||i.name:"")?zr(d):""}function nd(i){switch(i.tag){case 26:case 27:case 5:return zr(i.type);case 16:return zr("Lazy");case 13:return zr("Suspense");case 19:return zr("SuspenseList");case 0:case 15:return bo(i.type,!1);case 11:return bo(i.type.render,!1);case 1:return bo(i.type,!0);case 31:return zr("Activity");default:return""}}function yo(i){try{var l="";do l+=nd(i),i=i.return;while(i);return l}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function zs(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function rd(i){var l=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function rp(i){var l=rd(i)?"checked":"value",d=Object.getOwnPropertyDescriptor(i.constructor.prototype,l),h=""+i[l];if(!i.hasOwnProperty(l)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var p=d.get,b=d.set;return Object.defineProperty(i,l,{configurable:!0,get:function(){return p.call(this)},set:function(T){h=""+T,b.call(this,T)}}),Object.defineProperty(i,l,{enumerable:d.enumerable}),{getValue:function(){return h},setValue:function(T){h=""+T},stopTracking:function(){i._valueTracker=null,delete i[l]}}}}function vo(i){i._valueTracker||(i._valueTracker=rp(i))}function ad(i){if(!i)return!1;var l=i._valueTracker;if(!l)return!0;var d=l.getValue(),h="";return i&&(h=rd(i)?i.checked?"true":"false":i.value),i=h,i!==d?(l.setValue(i),!0):!1}function sl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ap=/[\n"\\]/g;function Zt(i){return i.replace(ap,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function cn(i,l,d,h,p,b,T,U){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),l!=null?T==="number"?(l===0&&i.value===""||i.value!=l)&&(i.value=""+zs(l)):i.value!==""+zs(l)&&(i.value=""+zs(l)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),l!=null?Fa(i,T,zs(l)):d!=null?Fa(i,T,zs(d)):h!=null&&i.removeAttribute("value"),p==null&&b!=null&&(i.defaultChecked=!!b),p!=null&&(i.checked=p&&typeof p!="function"&&typeof p!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?i.name=""+zs(U):i.removeAttribute("name")}function nl(i,l,d,h,p,b,T,U){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),l!=null||d!=null){if(!(b!=="submit"&&b!=="reset"||l!=null))return;d=d!=null?""+zs(d):"",l=l!=null?""+zs(l):d,U||l===i.value||(i.value=l),i.defaultValue=l}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,i.checked=U?i.checked:!!h,i.defaultChecked=!!h,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Fa(i,l,d){l==="number"&&sl(i.ownerDocument)===i||i.defaultValue===""+d||(i.defaultValue=""+d)}function qr(i,l,d,h){if(i=i.options,l){l={};for(var p=0;p<d.length;p++)l["$"+d[p]]=!0;for(d=0;d<i.length;d++)p=l.hasOwnProperty("$"+i[d].value),i[d].selected!==p&&(i[d].selected=p),p&&h&&(i[d].defaultSelected=!0)}else{for(d=""+zs(d),l=null,p=0;p<i.length;p++){if(i[p].value===d){i[p].selected=!0,h&&(i[p].defaultSelected=!0);return}l!==null||i[p].disabled||(l=i[p])}l!==null&&(l.selected=!0)}}function bt(i,l,d){if(l!=null&&(l=""+zs(l),l!==i.value&&(i.value=l),d==null)){i.defaultValue!==l&&(i.defaultValue=l);return}i.defaultValue=d!=null?""+zs(d):""}function rl(i,l,d,h){if(l==null){if(h!=null){if(d!=null)throw Error(r(92));if(ve(h)){if(1<h.length)throw Error(r(93));h=h[0]}d=h}d==null&&(d=""),l=d}d=zs(l),i.defaultValue=d,h=i.textContent,h===d&&h!==""&&h!==null&&(i.value=h)}function Cn(i,l){if(l){var d=i.firstChild;if(d&&d===i.lastChild&&d.nodeType===3){d.nodeValue=l;return}}i.textContent=l}var al=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fh(i,l,d){var h=l.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?h?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="":h?i.setProperty(l,d):typeof d!="number"||d===0||al.has(l)?l==="float"?i.cssFloat=d:i[l]=(""+d).trim():i[l]=d+"px"}function id(i,l,d){if(l!=null&&typeof l!="object")throw Error(r(62));if(i=i.style,d!=null){for(var h in d)!d.hasOwnProperty(h)||l!=null&&l.hasOwnProperty(h)||(h.indexOf("--")===0?i.setProperty(h,""):h==="float"?i.cssFloat="":i[h]="");for(var p in l)h=l[p],l.hasOwnProperty(p)&&d[p]!==h&&fh(i,p,h)}else for(var b in l)l.hasOwnProperty(b)&&fh(i,b,l[b])}function ld(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ip=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function No(i){return lp.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var $r=null;function Tn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Gr=null,Wr=null;function od(i){var l=cr(i);if(l&&(i=l.stateNode)){var d=i[Xt]||null;e:switch(i=l.stateNode,l.type){case"input":if(cn(i,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),l=d.name,d.type==="radio"&&l!=null){for(d=i;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Zt(""+l)+'"][type="radio"]'),l=0;l<d.length;l++){var h=d[l];if(h!==i&&h.form===i.form){var p=h[Xt]||null;if(!p)throw Error(r(90));cn(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(l=0;l<d.length;l++)h=d[l],h.form===i.form&&ad(h)}break e;case"textarea":bt(i,d.value,d.defaultValue);break e;case"select":l=d.value,l!=null&&qr(i,!!d.multiple,l,!1)}}}var hr=!1;function gh(i,l,d){if(hr)return i(l,d);hr=!0;try{var h=i(l);return h}finally{if(hr=!1,(Gr!==null||Wr!==null)&&(om(),Gr&&(l=Gr,i=Wr,Wr=Gr=null,od(l),i)))for(l=0;l<i.length;l++)od(i[l])}}function il(i,l){var d=i.stateNode;if(d===null)return null;var h=d[Xt]||null;if(h===null)return null;d=h[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(i=i.type,h=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!h;break e;default:i=!1}if(i)return null;if(d&&typeof d!="function")throw Error(r(231,l,typeof d));return d}var Yn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rn=!1;if(Yn)try{var ll={};Object.defineProperty(ll,"passive",{get:function(){Rn=!0}}),window.addEventListener("test",ll,ll),window.removeEventListener("test",ll,ll)}catch{Rn=!1}var mr=null,Ba=null,Qr=null;function cd(){if(Qr)return Qr;var i,l=Ba,d=l.length,h,p="value"in mr?mr.value:mr.textContent,b=p.length;for(i=0;i<d&&l[i]===p[i];i++);var T=d-i;for(h=1;h<=T&&l[d-h]===p[b-h];h++);return Qr=p.slice(i,1<h?1-h:void 0)}function fr(i){var l=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&l===13&&(i=13)):i=l,i===10&&(i=13),32<=i||i===13?i:0}function gr(){return!0}function dd(){return!1}function gs(i){function l(d,h,p,b,T){this._reactName=d,this._targetInst=p,this.type=h,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var U in i)i.hasOwnProperty(U)&&(d=i[U],this[U]=d?d(b):b[U]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?gr:dd,this.isPropagationStopped=dd,this}return x(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=gr)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=gr)},persist:function(){},isPersistent:gr}),l}var ht={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wo=gs(ht),ol=x({},ht,{view:0,detail:0}),ph=gs(ol),jo,Eo,pr,cl=x({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hl,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==pr&&(pr&&i.type==="mousemove"?(jo=i.screenX-pr.screenX,Eo=i.screenY-pr.screenY):Eo=jo=0,pr=i),jo)},movementY:function(i){return"movementY"in i?i.movementY:Eo}}),Dn=gs(cl),xh=x({},cl,{dataTransfer:0}),op=gs(xh),dl=x({},ol,{relatedTarget:0}),_o=gs(dl),ud=x({},ht,{animationName:0,elapsedTime:0,pseudoElement:0}),So=gs(ud),bh=x({},ht,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ao=gs(bh),cp=x({},ht,{data:0}),hd=gs(cp),ul={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function md(i){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(i):(i=vh[i])?!!l[i]:!1}function hl(){return md}var Nh=x({},ol,{key:function(i){if(i.key){var l=ul[i.key]||i.key;if(l!=="Unidentified")return l}return i.type==="keypress"?(i=fr(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yh[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hl,charCode:function(i){return i.type==="keypress"?fr(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?fr(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Co=gs(Nh),wh=x({},cl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fd=gs(wh),Yr=x({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hl}),jh=gs(Yr),Eh=x({},ht,{propertyName:0,elapsedTime:0,pseudoElement:0}),_h=gs(Eh),Sh=x({},cl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),To=gs(Sh),qs=x({},ht,{newState:0,oldState:0}),Ah=gs(qs),Ch=[9,13,27,32],xr=Yn&&"CompositionEvent"in window,g=null;Yn&&"documentMode"in document&&(g=document.documentMode);var j=Yn&&"TextEvent"in window&&!g,A=Yn&&(!xr||g&&8<g&&11>=g),H=" ",X=!1;function ae(i,l){switch(i){case"keyup":return Ch.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xe(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var nt=!1;function ls(i,l){switch(i){case"compositionend":return xe(l);case"keypress":return l.which!==32?null:(X=!0,H);case"textInput":return i=l.data,i===H&&X?null:i;default:return null}}function rt(i,l){if(nt)return i==="compositionend"||!xr&&ae(i,l)?(i=cd(),Qr=Ba=mr=null,nt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return A&&l.locale!=="ko"?null:l.data;default:return null}}var ps={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function os(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l==="input"?!!ps[i.type]:l==="textarea"}function Kr(i,l,d,h){Gr?Wr?Wr.push(h):Wr=[h]:Gr=h,l=fm(l,"onChange"),0<l.length&&(d=new wo("onChange","change",null,d,h),i.push({event:d,listeners:l}))}var ws=null,br=null;function gd(i){Ij(i,0)}function Th(i){var l=dr(i);if(ad(l))return i}function Jv(i,l){if(i==="change")return l}var eN=!1;if(Yn){var dp;if(Yn){var up="oninput"in document;if(!up){var tN=document.createElement("div");tN.setAttribute("oninput","return;"),up=typeof tN.oninput=="function"}dp=up}else dp=!1;eN=dp&&(!document.documentMode||9<document.documentMode)}function sN(){ws&&(ws.detachEvent("onpropertychange",nN),br=ws=null)}function nN(i){if(i.propertyName==="value"&&Th(br)){var l=[];Kr(l,br,i,Tn(i)),gh(gd,l)}}function MR(i,l,d){i==="focusin"?(sN(),ws=l,br=d,ws.attachEvent("onpropertychange",nN)):i==="focusout"&&sN()}function PR(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Th(br)}function OR(i,l){if(i==="click")return Th(l)}function LR(i,l){if(i==="input"||i==="change")return Th(l)}function VR(i,l){return i===l&&(i!==0||1/i===1/l)||i!==i&&l!==l}var dn=typeof Object.is=="function"?Object.is:VR;function pd(i,l){if(dn(i,l))return!0;if(typeof i!="object"||i===null||typeof l!="object"||l===null)return!1;var d=Object.keys(i),h=Object.keys(l);if(d.length!==h.length)return!1;for(h=0;h<d.length;h++){var p=d[h];if(!$i.call(l,p)||!dn(i[p],l[p]))return!1}return!0}function rN(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function aN(i,l){var d=rN(i);i=0;for(var h;d;){if(d.nodeType===3){if(h=i+d.textContent.length,i<=l&&h>=l)return{node:d,offset:l-i};i=h}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=rN(d)}}function iN(i,l){return i&&l?i===l?!0:i&&i.nodeType===3?!1:l&&l.nodeType===3?iN(i,l.parentNode):"contains"in i?i.contains(l):i.compareDocumentPosition?!!(i.compareDocumentPosition(l)&16):!1:!1}function lN(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var l=sl(i.document);l instanceof i.HTMLIFrameElement;){try{var d=typeof l.contentWindow.location.href=="string"}catch{d=!1}if(d)i=l.contentWindow;else break;l=sl(i.document)}return l}function hp(i){var l=i&&i.nodeName&&i.nodeName.toLowerCase();return l&&(l==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||l==="textarea"||i.contentEditable==="true")}var UR=Yn&&"documentMode"in document&&11>=document.documentMode,Ro=null,mp=null,xd=null,fp=!1;function oN(i,l,d){var h=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;fp||Ro==null||Ro!==sl(h)||(h=Ro,"selectionStart"in h&&hp(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),xd&&pd(xd,h)||(xd=h,h=fm(mp,"onSelect"),0<h.length&&(l=new wo("onSelect","select",null,l,d),i.push({event:l,listeners:h}),l.target=Ro)))}function ml(i,l){var d={};return d[i.toLowerCase()]=l.toLowerCase(),d["Webkit"+i]="webkit"+l,d["Moz"+i]="moz"+l,d}var Do={animationend:ml("Animation","AnimationEnd"),animationiteration:ml("Animation","AnimationIteration"),animationstart:ml("Animation","AnimationStart"),transitionrun:ml("Transition","TransitionRun"),transitionstart:ml("Transition","TransitionStart"),transitioncancel:ml("Transition","TransitionCancel"),transitionend:ml("Transition","TransitionEnd")},gp={},cN={};Yn&&(cN=document.createElement("div").style,"AnimationEvent"in window||(delete Do.animationend.animation,delete Do.animationiteration.animation,delete Do.animationstart.animation),"TransitionEvent"in window||delete Do.transitionend.transition);function fl(i){if(gp[i])return gp[i];if(!Do[i])return i;var l=Do[i],d;for(d in l)if(l.hasOwnProperty(d)&&d in cN)return gp[i]=l[d];return i}var dN=fl("animationend"),uN=fl("animationiteration"),hN=fl("animationstart"),FR=fl("transitionrun"),BR=fl("transitionstart"),HR=fl("transitioncancel"),mN=fl("transitionend"),fN=new Map,pp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");pp.push("scrollEnd");function Kn(i,l){fN.set(i,l),Qn(l,[i])}var gN=new WeakMap;function In(i,l){if(typeof i=="object"&&i!==null){var d=gN.get(i);return d!==void 0?d:(l={value:i,source:l,stack:yo(l)},gN.set(i,l),l)}return{value:i,source:l,stack:yo(l)}}var kn=[],Io=0,xp=0;function Rh(){for(var i=Io,l=xp=Io=0;l<i;){var d=kn[l];kn[l++]=null;var h=kn[l];kn[l++]=null;var p=kn[l];kn[l++]=null;var b=kn[l];if(kn[l++]=null,h!==null&&p!==null){var T=h.pending;T===null?p.next=p:(p.next=T.next,T.next=p),h.pending=p}b!==0&&pN(d,p,b)}}function Dh(i,l,d,h){kn[Io++]=i,kn[Io++]=l,kn[Io++]=d,kn[Io++]=h,xp|=h,i.lanes|=h,i=i.alternate,i!==null&&(i.lanes|=h)}function bp(i,l,d,h){return Dh(i,l,d,h),Ih(i)}function ko(i,l){return Dh(i,null,null,l),Ih(i)}function pN(i,l,d){i.lanes|=d;var h=i.alternate;h!==null&&(h.lanes|=d);for(var p=!1,b=i.return;b!==null;)b.childLanes|=d,h=b.alternate,h!==null&&(h.childLanes|=d),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(p=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,p&&l!==null&&(p=31-Ds(d),i=b.hiddenUpdates,h=i[p],h===null?i[p]=[l]:h.push(l),l.lane=d|536870912),b):null}function Ih(i){if(50<Hd)throw Hd=0,E0=null,Error(r(185));for(var l=i.return;l!==null;)i=l,l=i.return;return i.tag===3?i.stateNode:null}var Mo={};function zR(i,l,d,h){this.tag=i,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function un(i,l,d,h){return new zR(i,l,d,h)}function yp(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Xr(i,l){var d=i.alternate;return d===null?(d=un(i.tag,l,i.key,i.mode),d.elementType=i.elementType,d.type=i.type,d.stateNode=i.stateNode,d.alternate=i,i.alternate=d):(d.pendingProps=l,d.type=i.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=i.flags&65011712,d.childLanes=i.childLanes,d.lanes=i.lanes,d.child=i.child,d.memoizedProps=i.memoizedProps,d.memoizedState=i.memoizedState,d.updateQueue=i.updateQueue,l=i.dependencies,d.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},d.sibling=i.sibling,d.index=i.index,d.ref=i.ref,d.refCleanup=i.refCleanup,d}function xN(i,l){i.flags&=65011714;var d=i.alternate;return d===null?(i.childLanes=0,i.lanes=l,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=d.childLanes,i.lanes=d.lanes,i.child=d.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=d.memoizedProps,i.memoizedState=d.memoizedState,i.updateQueue=d.updateQueue,i.type=d.type,l=d.dependencies,i.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),i}function kh(i,l,d,h,p,b){var T=0;if(h=i,typeof i=="function")yp(i)&&(T=1);else if(typeof i=="string")T=$4(i,d,Ee.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case k:return i=un(31,d,l,p),i.elementType=k,i.lanes=b,i;case w:return gl(d.children,p,b,l);case E:T=8,p|=24;break;case _:return i=un(12,d,l,p|2),i.elementType=_,i.lanes=b,i;case F:return i=un(13,d,l,p),i.elementType=F,i.lanes=b,i;case P:return i=un(19,d,l,p),i.elementType=P,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case R:case V:T=10;break e;case I:T=9;break e;case z:T=11;break e;case C:T=14;break e;case D:T=16,h=null;break e}T=29,d=Error(r(130,i===null?"null":typeof i,"")),h=null}return l=un(T,d,l,p),l.elementType=i,l.type=h,l.lanes=b,l}function gl(i,l,d,h){return i=un(7,i,h,l),i.lanes=d,i}function vp(i,l,d){return i=un(6,i,null,l),i.lanes=d,i}function Np(i,l,d){return l=un(4,i.children!==null?i.children:[],i.key,l),l.lanes=d,l.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},l}var Po=[],Oo=0,Mh=null,Ph=0,Mn=[],Pn=0,pl=null,Zr=1,Jr="";function xl(i,l){Po[Oo++]=Ph,Po[Oo++]=Mh,Mh=i,Ph=l}function bN(i,l,d){Mn[Pn++]=Zr,Mn[Pn++]=Jr,Mn[Pn++]=pl,pl=i;var h=Zr;i=Jr;var p=32-Ds(h)-1;h&=~(1<<p),d+=1;var b=32-Ds(l)+p;if(30<b){var T=p-p%5;b=(h&(1<<T)-1).toString(32),h>>=T,p-=T,Zr=1<<32-Ds(l)+p|d<<p|h,Jr=b+i}else Zr=1<<b|d<<p|h,Jr=i}function wp(i){i.return!==null&&(xl(i,1),bN(i,1,0))}function jp(i){for(;i===Mh;)Mh=Po[--Oo],Po[Oo]=null,Ph=Po[--Oo],Po[Oo]=null;for(;i===pl;)pl=Mn[--Pn],Mn[Pn]=null,Jr=Mn[--Pn],Mn[Pn]=null,Zr=Mn[--Pn],Mn[Pn]=null}var $s=null,Bt=null,ut=!1,bl=null,yr=!1,Ep=Error(r(519));function yl(i){var l=Error(r(418,""));throw vd(In(l,i)),Ep}function yN(i){var l=i.stateNode,d=i.type,h=i.memoizedProps;switch(l[is]=i,l[Xt]=h,d){case"dialog":Ze("cancel",l),Ze("close",l);break;case"iframe":case"object":case"embed":Ze("load",l);break;case"video":case"audio":for(d=0;d<qd.length;d++)Ze(qd[d],l);break;case"source":Ze("error",l);break;case"img":case"image":case"link":Ze("error",l),Ze("load",l);break;case"details":Ze("toggle",l);break;case"input":Ze("invalid",l),nl(l,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),vo(l);break;case"select":Ze("invalid",l);break;case"textarea":Ze("invalid",l),rl(l,h.value,h.defaultValue,h.children),vo(l)}d=h.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||l.textContent===""+d||h.suppressHydrationWarning===!0||Oj(l.textContent,d)?(h.popover!=null&&(Ze("beforetoggle",l),Ze("toggle",l)),h.onScroll!=null&&Ze("scroll",l),h.onScrollEnd!=null&&Ze("scrollend",l),h.onClick!=null&&(l.onclick=gm),l=!0):l=!1,l||yl(i)}function vN(i){for($s=i.return;$s;)switch($s.tag){case 5:case 13:yr=!1;return;case 27:case 3:yr=!0;return;default:$s=$s.return}}function bd(i){if(i!==$s)return!1;if(!ut)return vN(i),ut=!0,!1;var l=i.tag,d;if((d=l!==3&&l!==27)&&((d=l===5)&&(d=i.type,d=!(d!=="form"&&d!=="button")||F0(i.type,i.memoizedProps)),d=!d),d&&Bt&&yl(i),vN(i),l===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,l=0;i;){if(i.nodeType===8)if(d=i.data,d==="/$"){if(l===0){Bt=Zn(i.nextSibling);break e}l--}else d!=="$"&&d!=="$!"&&d!=="$?"||l++;i=i.nextSibling}Bt=null}}else l===27?(l=Bt,ni(i.type)?(i=q0,q0=null,Bt=i):Bt=l):Bt=$s?Zn(i.stateNode.nextSibling):null;return!0}function yd(){Bt=$s=null,ut=!1}function NN(){var i=bl;return i!==null&&(Zs===null?Zs=i:Zs.push.apply(Zs,i),bl=null),i}function vd(i){bl===null?bl=[i]:bl.push(i)}var _p=Q(null),vl=null,ea=null;function Ha(i,l,d){ue(_p,l._currentValue),l._currentValue=d}function ta(i){i._currentValue=_p.current,ie(_p)}function Sp(i,l,d){for(;i!==null;){var h=i.alternate;if((i.childLanes&l)!==l?(i.childLanes|=l,h!==null&&(h.childLanes|=l)):h!==null&&(h.childLanes&l)!==l&&(h.childLanes|=l),i===d)break;i=i.return}}function Ap(i,l,d,h){var p=i.child;for(p!==null&&(p.return=i);p!==null;){var b=p.dependencies;if(b!==null){var T=p.child;b=b.firstContext;e:for(;b!==null;){var U=b;b=p;for(var $=0;$<l.length;$++)if(U.context===l[$]){b.lanes|=d,U=b.alternate,U!==null&&(U.lanes|=d),Sp(b.return,d,i),h||(T=null);break e}b=U.next}}else if(p.tag===18){if(T=p.return,T===null)throw Error(r(341));T.lanes|=d,b=T.alternate,b!==null&&(b.lanes|=d),Sp(T,d,i),T=null}else T=p.child;if(T!==null)T.return=p;else for(T=p;T!==null;){if(T===i){T=null;break}if(p=T.sibling,p!==null){p.return=T.return,T=p;break}T=T.return}p=T}}function Nd(i,l,d,h){i=null;for(var p=l,b=!1;p!==null;){if(!b){if((p.flags&524288)!==0)b=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var T=p.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var U=p.type;dn(p.pendingProps.value,T.value)||(i!==null?i.push(U):i=[U])}}else if(p===ct.current){if(T=p.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(i!==null?i.push(Kd):i=[Kd])}p=p.return}i!==null&&Ap(l,i,d,h),l.flags|=262144}function Oh(i){for(i=i.firstContext;i!==null;){if(!dn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Nl(i){vl=i,ea=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Is(i){return wN(vl,i)}function Lh(i,l){return vl===null&&Nl(i),wN(i,l)}function wN(i,l){var d=l._currentValue;if(l={context:l,memoizedValue:d,next:null},ea===null){if(i===null)throw Error(r(308));ea=l,i.dependencies={lanes:0,firstContext:l},i.flags|=524288}else ea=ea.next=l;return d}var qR=typeof AbortController<"u"?AbortController:function(){var i=[],l=this.signal={aborted:!1,addEventListener:function(d,h){i.push(h)}};this.abort=function(){l.aborted=!0,i.forEach(function(d){return d()})}},$R=t.unstable_scheduleCallback,GR=t.unstable_NormalPriority,cs={$$typeof:V,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Cp(){return{controller:new qR,data:new Map,refCount:0}}function wd(i){i.refCount--,i.refCount===0&&$R(GR,function(){i.controller.abort()})}var jd=null,Tp=0,Lo=0,Vo=null;function WR(i,l){if(jd===null){var d=jd=[];Tp=0,Lo=D0(),Vo={status:"pending",value:void 0,then:function(h){d.push(h)}}}return Tp++,l.then(jN,jN),l}function jN(){if(--Tp===0&&jd!==null){Vo!==null&&(Vo.status="fulfilled");var i=jd;jd=null,Lo=0,Vo=null;for(var l=0;l<i.length;l++)(0,i[l])()}}function QR(i,l){var d=[],h={status:"pending",value:null,reason:null,then:function(p){d.push(p)}};return i.then(function(){h.status="fulfilled",h.value=l;for(var p=0;p<d.length;p++)(0,d[p])(l)},function(p){for(h.status="rejected",h.reason=p,p=0;p<d.length;p++)(0,d[p])(void 0)}),h}var EN=ee.S;ee.S=function(i,l){typeof l=="object"&&l!==null&&typeof l.then=="function"&&WR(i,l),EN!==null&&EN(i,l)};var wl=Q(null);function Rp(){var i=wl.current;return i!==null?i:Et.pooledCache}function Vh(i,l){l===null?ue(wl,wl.current):ue(wl,l.pool)}function _N(){var i=Rp();return i===null?null:{parent:cs._currentValue,pool:i}}var Ed=Error(r(460)),SN=Error(r(474)),Uh=Error(r(542)),Dp={then:function(){}};function AN(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Fh(){}function CN(i,l,d){switch(d=i[d],d===void 0?i.push(l):d!==l&&(l.then(Fh,Fh),l=d),l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,RN(i),i;default:if(typeof l.status=="string")l.then(Fh,Fh);else{if(i=Et,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=l,i.status="pending",i.then(function(h){if(l.status==="pending"){var p=l;p.status="fulfilled",p.value=h}},function(h){if(l.status==="pending"){var p=l;p.status="rejected",p.reason=h}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw i=l.reason,RN(i),i}throw _d=l,Ed}}var _d=null;function TN(){if(_d===null)throw Error(r(459));var i=_d;return _d=null,i}function RN(i){if(i===Ed||i===Uh)throw Error(r(483))}var za=!1;function Ip(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function kp(i,l){i=i.updateQueue,l.updateQueue===i&&(l.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function qa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function $a(i,l,d){var h=i.updateQueue;if(h===null)return null;if(h=h.shared,(pt&2)!==0){var p=h.pending;return p===null?l.next=l:(l.next=p.next,p.next=l),h.pending=l,l=Ih(i),pN(i,null,d),l}return Dh(i,h,l,d),Ih(i)}function Sd(i,l,d){if(l=l.updateQueue,l!==null&&(l=l.shared,(d&4194048)!==0)){var h=l.lanes;h&=i.pendingLanes,d|=h,l.lanes=d,ed(i,d)}}function Mp(i,l){var d=i.updateQueue,h=i.alternate;if(h!==null&&(h=h.updateQueue,d===h)){var p=null,b=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};b===null?p=b=T:b=b.next=T,d=d.next}while(d!==null);b===null?p=b=l:b=b.next=l}else p=b=l;d={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:b,shared:h.shared,callbacks:h.callbacks},i.updateQueue=d;return}i=d.lastBaseUpdate,i===null?d.firstBaseUpdate=l:i.next=l,d.lastBaseUpdate=l}var Pp=!1;function Ad(){if(Pp){var i=Vo;if(i!==null)throw i}}function Cd(i,l,d,h){Pp=!1;var p=i.updateQueue;za=!1;var b=p.firstBaseUpdate,T=p.lastBaseUpdate,U=p.shared.pending;if(U!==null){p.shared.pending=null;var $=U,J=$.next;$.next=null,T===null?b=J:T.next=J,T=$;var le=i.alternate;le!==null&&(le=le.updateQueue,U=le.lastBaseUpdate,U!==T&&(U===null?le.firstBaseUpdate=J:U.next=J,le.lastBaseUpdate=$))}if(b!==null){var he=p.baseState;T=0,le=J=$=null,U=b;do{var te=U.lane&-536870913,se=te!==U.lane;if(se?(at&te)===te:(h&te)===te){te!==0&&te===Lo&&(Pp=!0),le!==null&&(le=le.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var Ue=i,ke=U;te=l;var Nt=d;switch(ke.tag){case 1:if(Ue=ke.payload,typeof Ue=="function"){he=Ue.call(Nt,he,te);break e}he=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=ke.payload,te=typeof Ue=="function"?Ue.call(Nt,he,te):Ue,te==null)break e;he=x({},he,te);break e;case 2:za=!0}}te=U.callback,te!==null&&(i.flags|=64,se&&(i.flags|=8192),se=p.callbacks,se===null?p.callbacks=[te]:se.push(te))}else se={lane:te,tag:U.tag,payload:U.payload,callback:U.callback,next:null},le===null?(J=le=se,$=he):le=le.next=se,T|=te;if(U=U.next,U===null){if(U=p.shared.pending,U===null)break;se=U,U=se.next,se.next=null,p.lastBaseUpdate=se,p.shared.pending=null}}while(!0);le===null&&($=he),p.baseState=$,p.firstBaseUpdate=J,p.lastBaseUpdate=le,b===null&&(p.shared.lanes=0),Ja|=T,i.lanes=T,i.memoizedState=he}}function DN(i,l){if(typeof i!="function")throw Error(r(191,i));i.call(l)}function IN(i,l){var d=i.callbacks;if(d!==null)for(i.callbacks=null,i=0;i<d.length;i++)DN(d[i],l)}var Uo=Q(null),Bh=Q(0);function kN(i,l){i=oa,ue(Bh,i),ue(Uo,l),oa=i|l.baseLanes}function Op(){ue(Bh,oa),ue(Uo,Uo.current)}function Lp(){oa=Bh.current,ie(Uo),ie(Bh)}var Ga=0,We=null,yt=null,Jt=null,Hh=!1,Fo=!1,jl=!1,zh=0,Td=0,Bo=null,YR=0;function Wt(){throw Error(r(321))}function Vp(i,l){if(l===null)return!1;for(var d=0;d<l.length&&d<i.length;d++)if(!dn(i[d],l[d]))return!1;return!0}function Up(i,l,d,h,p,b){return Ga=b,We=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,ee.H=i===null||i.memoizedState===null?pw:xw,jl=!1,b=d(h,p),jl=!1,Fo&&(b=PN(l,d,h,p)),MN(i),b}function MN(i){ee.H=Yh;var l=yt!==null&&yt.next!==null;if(Ga=0,Jt=yt=We=null,Hh=!1,Td=0,Bo=null,l)throw Error(r(300));i===null||xs||(i=i.dependencies,i!==null&&Oh(i)&&(xs=!0))}function PN(i,l,d,h){We=i;var p=0;do{if(Fo&&(Bo=null),Td=0,Fo=!1,25<=p)throw Error(r(301));if(p+=1,Jt=yt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}ee.H=s4,b=l(d,h)}while(Fo);return b}function KR(){var i=ee.H,l=i.useState()[0];return l=typeof l.then=="function"?Rd(l):l,i=i.useState()[0],(yt!==null?yt.memoizedState:null)!==i&&(We.flags|=1024),l}function Fp(){var i=zh!==0;return zh=0,i}function Bp(i,l,d){l.updateQueue=i.updateQueue,l.flags&=-2053,i.lanes&=~d}function Hp(i){if(Hh){for(i=i.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Hh=!1}Ga=0,Jt=yt=We=null,Fo=!1,Td=zh=0,Bo=null}function Ks(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?We.memoizedState=Jt=i:Jt=Jt.next=i,Jt}function es(){if(yt===null){var i=We.alternate;i=i!==null?i.memoizedState:null}else i=yt.next;var l=Jt===null?We.memoizedState:Jt.next;if(l!==null)Jt=l,yt=i;else{if(i===null)throw We.alternate===null?Error(r(467)):Error(r(310));yt=i,i={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Jt===null?We.memoizedState=Jt=i:Jt=Jt.next=i}return Jt}function zp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rd(i){var l=Td;return Td+=1,Bo===null&&(Bo=[]),i=CN(Bo,i,l),l=We,(Jt===null?l.memoizedState:Jt.next)===null&&(l=l.alternate,ee.H=l===null||l.memoizedState===null?pw:xw),i}function qh(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Rd(i);if(i.$$typeof===V)return Is(i)}throw Error(r(438,String(i)))}function qp(i){var l=null,d=We.updateQueue;if(d!==null&&(l=d.memoCache),l==null){var h=We.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(l={data:h.data.map(function(p){return p.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),d===null&&(d=zp(),We.updateQueue=d),d.memoCache=l,d=l.data[l.index],d===void 0)for(d=l.data[l.index]=Array(i),h=0;h<i;h++)d[h]=O;return l.index++,d}function sa(i,l){return typeof l=="function"?l(i):l}function $h(i){var l=es();return $p(l,yt,i)}function $p(i,l,d){var h=i.queue;if(h===null)throw Error(r(311));h.lastRenderedReducer=d;var p=i.baseQueue,b=h.pending;if(b!==null){if(p!==null){var T=p.next;p.next=b.next,b.next=T}l.baseQueue=p=b,h.pending=null}if(b=i.baseState,p===null)i.memoizedState=b;else{l=p.next;var U=T=null,$=null,J=l,le=!1;do{var he=J.lane&-536870913;if(he!==J.lane?(at&he)===he:(Ga&he)===he){var te=J.revertLane;if(te===0)$!==null&&($=$.next={lane:0,revertLane:0,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),he===Lo&&(le=!0);else if((Ga&te)===te){J=J.next,te===Lo&&(le=!0);continue}else he={lane:0,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(U=$=he,T=b):$=$.next=he,We.lanes|=te,Ja|=te;he=J.action,jl&&d(b,he),b=J.hasEagerState?J.eagerState:d(b,he)}else te={lane:he,revertLane:J.revertLane,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},$===null?(U=$=te,T=b):$=$.next=te,We.lanes|=he,Ja|=he;J=J.next}while(J!==null&&J!==l);if($===null?T=b:$.next=U,!dn(b,i.memoizedState)&&(xs=!0,le&&(d=Vo,d!==null)))throw d;i.memoizedState=b,i.baseState=T,i.baseQueue=$,h.lastRenderedState=b}return p===null&&(h.lanes=0),[i.memoizedState,h.dispatch]}function Gp(i){var l=es(),d=l.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=i;var h=d.dispatch,p=d.pending,b=l.memoizedState;if(p!==null){d.pending=null;var T=p=p.next;do b=i(b,T.action),T=T.next;while(T!==p);dn(b,l.memoizedState)||(xs=!0),l.memoizedState=b,l.baseQueue===null&&(l.baseState=b),d.lastRenderedState=b}return[b,h]}function ON(i,l,d){var h=We,p=es(),b=ut;if(b){if(d===void 0)throw Error(r(407));d=d()}else d=l();var T=!dn((yt||p).memoizedState,d);T&&(p.memoizedState=d,xs=!0),p=p.queue;var U=UN.bind(null,h,p,i);if(Dd(2048,8,U,[i]),p.getSnapshot!==l||T||Jt!==null&&Jt.memoizedState.tag&1){if(h.flags|=2048,Ho(9,Gh(),VN.bind(null,h,p,d,l),null),Et===null)throw Error(r(349));b||(Ga&124)!==0||LN(h,l,d)}return d}function LN(i,l,d){i.flags|=16384,i={getSnapshot:l,value:d},l=We.updateQueue,l===null?(l=zp(),We.updateQueue=l,l.stores=[i]):(d=l.stores,d===null?l.stores=[i]:d.push(i))}function VN(i,l,d,h){l.value=d,l.getSnapshot=h,FN(l)&&BN(i)}function UN(i,l,d){return d(function(){FN(l)&&BN(i)})}function FN(i){var l=i.getSnapshot;i=i.value;try{var d=l();return!dn(i,d)}catch{return!0}}function BN(i){var l=ko(i,2);l!==null&&pn(l,i,2)}function Wp(i){var l=Ks();if(typeof i=="function"){var d=i;if(i=d(),jl){on(!0);try{d()}finally{on(!1)}}}return l.memoizedState=l.baseState=i,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:i},l}function HN(i,l,d,h){return i.baseState=d,$p(i,yt,typeof h=="function"?h:sa)}function XR(i,l,d,h,p){if(Qh(i))throw Error(r(485));if(i=l.action,i!==null){var b={payload:p,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};ee.T!==null?d(!0):b.isTransition=!1,h(b),d=l.pending,d===null?(b.next=l.pending=b,zN(l,b)):(b.next=d.next,l.pending=d.next=b)}}function zN(i,l){var d=l.action,h=l.payload,p=i.state;if(l.isTransition){var b=ee.T,T={};ee.T=T;try{var U=d(p,h),$=ee.S;$!==null&&$(T,U),qN(i,l,U)}catch(J){Qp(i,l,J)}finally{ee.T=b}}else try{b=d(p,h),qN(i,l,b)}catch(J){Qp(i,l,J)}}function qN(i,l,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(h){$N(i,l,h)},function(h){return Qp(i,l,h)}):$N(i,l,d)}function $N(i,l,d){l.status="fulfilled",l.value=d,GN(l),i.state=d,l=i.pending,l!==null&&(d=l.next,d===l?i.pending=null:(d=d.next,l.next=d,zN(i,d)))}function Qp(i,l,d){var h=i.pending;if(i.pending=null,h!==null){h=h.next;do l.status="rejected",l.reason=d,GN(l),l=l.next;while(l!==h)}i.action=null}function GN(i){i=i.listeners;for(var l=0;l<i.length;l++)(0,i[l])()}function WN(i,l){return l}function QN(i,l){if(ut){var d=Et.formState;if(d!==null){e:{var h=We;if(ut){if(Bt){t:{for(var p=Bt,b=yr;p.nodeType!==8;){if(!b){p=null;break t}if(p=Zn(p.nextSibling),p===null){p=null;break t}}b=p.data,p=b==="F!"||b==="F"?p:null}if(p){Bt=Zn(p.nextSibling),h=p.data==="F!";break e}}yl(h)}h=!1}h&&(l=d[0])}}return d=Ks(),d.memoizedState=d.baseState=l,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WN,lastRenderedState:l},d.queue=h,d=mw.bind(null,We,h),h.dispatch=d,h=Wp(!1),b=Jp.bind(null,We,!1,h.queue),h=Ks(),p={state:l,dispatch:null,action:i,pending:null},h.queue=p,d=XR.bind(null,We,p,b,d),p.dispatch=d,h.memoizedState=i,[l,d,!1]}function YN(i){var l=es();return KN(l,yt,i)}function KN(i,l,d){if(l=$p(i,l,WN)[0],i=$h(sa)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var h=Rd(l)}catch(T){throw T===Ed?Uh:T}else h=l;l=es();var p=l.queue,b=p.dispatch;return d!==l.memoizedState&&(We.flags|=2048,Ho(9,Gh(),ZR.bind(null,p,d),null)),[h,b,i]}function ZR(i,l){i.action=l}function XN(i){var l=es(),d=yt;if(d!==null)return KN(l,d,i);es(),l=l.memoizedState,d=es();var h=d.queue.dispatch;return d.memoizedState=i,[l,h,!1]}function Ho(i,l,d,h){return i={tag:i,create:d,deps:h,inst:l,next:null},l=We.updateQueue,l===null&&(l=zp(),We.updateQueue=l),d=l.lastEffect,d===null?l.lastEffect=i.next=i:(h=d.next,d.next=i,i.next=h,l.lastEffect=i),i}function Gh(){return{destroy:void 0,resource:void 0}}function ZN(){return es().memoizedState}function Wh(i,l,d,h){var p=Ks();h=h===void 0?null:h,We.flags|=i,p.memoizedState=Ho(1|l,Gh(),d,h)}function Dd(i,l,d,h){var p=es();h=h===void 0?null:h;var b=p.memoizedState.inst;yt!==null&&h!==null&&Vp(h,yt.memoizedState.deps)?p.memoizedState=Ho(l,b,d,h):(We.flags|=i,p.memoizedState=Ho(1|l,b,d,h))}function JN(i,l){Wh(8390656,8,i,l)}function ew(i,l){Dd(2048,8,i,l)}function tw(i,l){return Dd(4,2,i,l)}function sw(i,l){return Dd(4,4,i,l)}function nw(i,l){if(typeof l=="function"){i=i();var d=l(i);return function(){typeof d=="function"?d():l(null)}}if(l!=null)return i=i(),l.current=i,function(){l.current=null}}function rw(i,l,d){d=d!=null?d.concat([i]):null,Dd(4,4,nw.bind(null,l,i),d)}function Yp(){}function aw(i,l){var d=es();l=l===void 0?null:l;var h=d.memoizedState;return l!==null&&Vp(l,h[1])?h[0]:(d.memoizedState=[i,l],i)}function iw(i,l){var d=es();l=l===void 0?null:l;var h=d.memoizedState;if(l!==null&&Vp(l,h[1]))return h[0];if(h=i(),jl){on(!0);try{i()}finally{on(!1)}}return d.memoizedState=[h,l],h}function Kp(i,l,d){return d===void 0||(Ga&1073741824)!==0?i.memoizedState=l:(i.memoizedState=d,i=cj(),We.lanes|=i,Ja|=i,d)}function lw(i,l,d,h){return dn(d,l)?d:Uo.current!==null?(i=Kp(i,d,h),dn(i,l)||(xs=!0),i):(Ga&42)===0?(xs=!0,i.memoizedState=d):(i=cj(),We.lanes|=i,Ja|=i,l)}function ow(i,l,d,h,p){var b=fe.p;fe.p=b!==0&&8>b?b:8;var T=ee.T,U={};ee.T=U,Jp(i,!1,l,d);try{var $=p(),J=ee.S;if(J!==null&&J(U,$),$!==null&&typeof $=="object"&&typeof $.then=="function"){var le=QR($,h);Id(i,l,le,gn(i))}else Id(i,l,h,gn(i))}catch(he){Id(i,l,{then:function(){},status:"rejected",reason:he},gn())}finally{fe.p=b,ee.T=T}}function JR(){}function Xp(i,l,d,h){if(i.tag!==5)throw Error(r(476));var p=cw(i).queue;ow(i,p,l,ye,d===null?JR:function(){return dw(i),d(h)})}function cw(i){var l=i.memoizedState;if(l!==null)return l;l={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:ye},next:null};var d={};return l.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:d},next:null},i.memoizedState=l,i=i.alternate,i!==null&&(i.memoizedState=l),l}function dw(i){var l=cw(i).next.queue;Id(i,l,{},gn())}function Zp(){return Is(Kd)}function uw(){return es().memoizedState}function hw(){return es().memoizedState}function e4(i){for(var l=i.return;l!==null;){switch(l.tag){case 24:case 3:var d=gn();i=qa(d);var h=$a(l,i,d);h!==null&&(pn(h,l,d),Sd(h,l,d)),l={cache:Cp()},i.payload=l;return}l=l.return}}function t4(i,l,d){var h=gn();d={lane:h,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Qh(i)?fw(l,d):(d=bp(i,l,d,h),d!==null&&(pn(d,i,h),gw(d,l,h)))}function mw(i,l,d){var h=gn();Id(i,l,d,h)}function Id(i,l,d,h){var p={lane:h,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Qh(i))fw(l,p);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=l.lastRenderedReducer,b!==null))try{var T=l.lastRenderedState,U=b(T,d);if(p.hasEagerState=!0,p.eagerState=U,dn(U,T))return Dh(i,l,p,0),Et===null&&Rh(),!1}catch{}finally{}if(d=bp(i,l,p,h),d!==null)return pn(d,i,h),gw(d,l,h),!0}return!1}function Jp(i,l,d,h){if(h={lane:2,revertLane:D0(),action:h,hasEagerState:!1,eagerState:null,next:null},Qh(i)){if(l)throw Error(r(479))}else l=bp(i,d,h,2),l!==null&&pn(l,i,2)}function Qh(i){var l=i.alternate;return i===We||l!==null&&l===We}function fw(i,l){Fo=Hh=!0;var d=i.pending;d===null?l.next=l:(l.next=d.next,d.next=l),i.pending=l}function gw(i,l,d){if((d&4194048)!==0){var h=l.lanes;h&=i.pendingLanes,d|=h,l.lanes=d,ed(i,d)}}var Yh={readContext:Is,use:qh,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useLayoutEffect:Wt,useInsertionEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useSyncExternalStore:Wt,useId:Wt,useHostTransitionStatus:Wt,useFormState:Wt,useActionState:Wt,useOptimistic:Wt,useMemoCache:Wt,useCacheRefresh:Wt},pw={readContext:Is,use:qh,useCallback:function(i,l){return Ks().memoizedState=[i,l===void 0?null:l],i},useContext:Is,useEffect:JN,useImperativeHandle:function(i,l,d){d=d!=null?d.concat([i]):null,Wh(4194308,4,nw.bind(null,l,i),d)},useLayoutEffect:function(i,l){return Wh(4194308,4,i,l)},useInsertionEffect:function(i,l){Wh(4,2,i,l)},useMemo:function(i,l){var d=Ks();l=l===void 0?null:l;var h=i();if(jl){on(!0);try{i()}finally{on(!1)}}return d.memoizedState=[h,l],h},useReducer:function(i,l,d){var h=Ks();if(d!==void 0){var p=d(l);if(jl){on(!0);try{d(l)}finally{on(!1)}}}else p=l;return h.memoizedState=h.baseState=p,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:p},h.queue=i,i=i.dispatch=t4.bind(null,We,i),[h.memoizedState,i]},useRef:function(i){var l=Ks();return i={current:i},l.memoizedState=i},useState:function(i){i=Wp(i);var l=i.queue,d=mw.bind(null,We,l);return l.dispatch=d,[i.memoizedState,d]},useDebugValue:Yp,useDeferredValue:function(i,l){var d=Ks();return Kp(d,i,l)},useTransition:function(){var i=Wp(!1);return i=ow.bind(null,We,i.queue,!0,!1),Ks().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,l,d){var h=We,p=Ks();if(ut){if(d===void 0)throw Error(r(407));d=d()}else{if(d=l(),Et===null)throw Error(r(349));(at&124)!==0||LN(h,l,d)}p.memoizedState=d;var b={value:d,getSnapshot:l};return p.queue=b,JN(UN.bind(null,h,b,i),[i]),h.flags|=2048,Ho(9,Gh(),VN.bind(null,h,b,d,l),null),d},useId:function(){var i=Ks(),l=Et.identifierPrefix;if(ut){var d=Jr,h=Zr;d=(h&~(1<<32-Ds(h)-1)).toString(32)+d,l="«"+l+"R"+d,d=zh++,0<d&&(l+="H"+d.toString(32)),l+="»"}else d=YR++,l="«"+l+"r"+d.toString(32)+"»";return i.memoizedState=l},useHostTransitionStatus:Zp,useFormState:QN,useActionState:QN,useOptimistic:function(i){var l=Ks();l.memoizedState=l.baseState=i;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=d,l=Jp.bind(null,We,!0,d),d.dispatch=l,[i,l]},useMemoCache:qp,useCacheRefresh:function(){return Ks().memoizedState=e4.bind(null,We)}},xw={readContext:Is,use:qh,useCallback:aw,useContext:Is,useEffect:ew,useImperativeHandle:rw,useInsertionEffect:tw,useLayoutEffect:sw,useMemo:iw,useReducer:$h,useRef:ZN,useState:function(){return $h(sa)},useDebugValue:Yp,useDeferredValue:function(i,l){var d=es();return lw(d,yt.memoizedState,i,l)},useTransition:function(){var i=$h(sa)[0],l=es().memoizedState;return[typeof i=="boolean"?i:Rd(i),l]},useSyncExternalStore:ON,useId:uw,useHostTransitionStatus:Zp,useFormState:YN,useActionState:YN,useOptimistic:function(i,l){var d=es();return HN(d,yt,i,l)},useMemoCache:qp,useCacheRefresh:hw},s4={readContext:Is,use:qh,useCallback:aw,useContext:Is,useEffect:ew,useImperativeHandle:rw,useInsertionEffect:tw,useLayoutEffect:sw,useMemo:iw,useReducer:Gp,useRef:ZN,useState:function(){return Gp(sa)},useDebugValue:Yp,useDeferredValue:function(i,l){var d=es();return yt===null?Kp(d,i,l):lw(d,yt.memoizedState,i,l)},useTransition:function(){var i=Gp(sa)[0],l=es().memoizedState;return[typeof i=="boolean"?i:Rd(i),l]},useSyncExternalStore:ON,useId:uw,useHostTransitionStatus:Zp,useFormState:XN,useActionState:XN,useOptimistic:function(i,l){var d=es();return yt!==null?HN(d,yt,i,l):(d.baseState=i,[i,d.queue.dispatch])},useMemoCache:qp,useCacheRefresh:hw},zo=null,kd=0;function Kh(i){var l=kd;return kd+=1,zo===null&&(zo=[]),CN(zo,i,l)}function Md(i,l){l=l.props.ref,i.ref=l!==void 0?l:null}function Xh(i,l){throw l.$$typeof===v?Error(r(525)):(i=Object.prototype.toString.call(l),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":i)))}function bw(i){var l=i._init;return l(i._payload)}function yw(i){function l(K,Y){if(i){var Z=K.deletions;Z===null?(K.deletions=[Y],K.flags|=16):Z.push(Y)}}function d(K,Y){if(!i)return null;for(;Y!==null;)l(K,Y),Y=Y.sibling;return null}function h(K){for(var Y=new Map;K!==null;)K.key!==null?Y.set(K.key,K):Y.set(K.index,K),K=K.sibling;return Y}function p(K,Y){return K=Xr(K,Y),K.index=0,K.sibling=null,K}function b(K,Y,Z){return K.index=Z,i?(Z=K.alternate,Z!==null?(Z=Z.index,Z<Y?(K.flags|=67108866,Y):Z):(K.flags|=67108866,Y)):(K.flags|=1048576,Y)}function T(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function U(K,Y,Z,ce){return Y===null||Y.tag!==6?(Y=vp(Z,K.mode,ce),Y.return=K,Y):(Y=p(Y,Z),Y.return=K,Y)}function $(K,Y,Z,ce){var Ae=Z.type;return Ae===w?le(K,Y,Z.props.children,ce,Z.key):Y!==null&&(Y.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===D&&bw(Ae)===Y.type)?(Y=p(Y,Z.props),Md(Y,Z),Y.return=K,Y):(Y=kh(Z.type,Z.key,Z.props,null,K.mode,ce),Md(Y,Z),Y.return=K,Y)}function J(K,Y,Z,ce){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==Z.containerInfo||Y.stateNode.implementation!==Z.implementation?(Y=Np(Z,K.mode,ce),Y.return=K,Y):(Y=p(Y,Z.children||[]),Y.return=K,Y)}function le(K,Y,Z,ce,Ae){return Y===null||Y.tag!==7?(Y=gl(Z,K.mode,ce,Ae),Y.return=K,Y):(Y=p(Y,Z),Y.return=K,Y)}function he(K,Y,Z){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=vp(""+Y,K.mode,Z),Y.return=K,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case y:return Z=kh(Y.type,Y.key,Y.props,null,K.mode,Z),Md(Z,Y),Z.return=K,Z;case N:return Y=Np(Y,K.mode,Z),Y.return=K,Y;case D:var ce=Y._init;return Y=ce(Y._payload),he(K,Y,Z)}if(ve(Y)||M(Y))return Y=gl(Y,K.mode,Z,null),Y.return=K,Y;if(typeof Y.then=="function")return he(K,Kh(Y),Z);if(Y.$$typeof===V)return he(K,Lh(K,Y),Z);Xh(K,Y)}return null}function te(K,Y,Z,ce){var Ae=Y!==null?Y.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Ae!==null?null:U(K,Y,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:return Z.key===Ae?$(K,Y,Z,ce):null;case N:return Z.key===Ae?J(K,Y,Z,ce):null;case D:return Ae=Z._init,Z=Ae(Z._payload),te(K,Y,Z,ce)}if(ve(Z)||M(Z))return Ae!==null?null:le(K,Y,Z,ce,null);if(typeof Z.then=="function")return te(K,Y,Kh(Z),ce);if(Z.$$typeof===V)return te(K,Y,Lh(K,Z),ce);Xh(K,Z)}return null}function se(K,Y,Z,ce,Ae){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return K=K.get(Z)||null,U(Y,K,""+ce,Ae);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return K=K.get(ce.key===null?Z:ce.key)||null,$(Y,K,ce,Ae);case N:return K=K.get(ce.key===null?Z:ce.key)||null,J(Y,K,ce,Ae);case D:var Ye=ce._init;return ce=Ye(ce._payload),se(K,Y,Z,ce,Ae)}if(ve(ce)||M(ce))return K=K.get(Z)||null,le(Y,K,ce,Ae,null);if(typeof ce.then=="function")return se(K,Y,Z,Kh(ce),Ae);if(ce.$$typeof===V)return se(K,Y,Z,Lh(Y,ce),Ae);Xh(Y,ce)}return null}function Ue(K,Y,Z,ce){for(var Ae=null,Ye=null,Te=Y,Pe=Y=0,ys=null;Te!==null&&Pe<Z.length;Pe++){Te.index>Pe?(ys=Te,Te=null):ys=Te.sibling;var dt=te(K,Te,Z[Pe],ce);if(dt===null){Te===null&&(Te=ys);break}i&&Te&&dt.alternate===null&&l(K,Te),Y=b(dt,Y,Pe),Ye===null?Ae=dt:Ye.sibling=dt,Ye=dt,Te=ys}if(Pe===Z.length)return d(K,Te),ut&&xl(K,Pe),Ae;if(Te===null){for(;Pe<Z.length;Pe++)Te=he(K,Z[Pe],ce),Te!==null&&(Y=b(Te,Y,Pe),Ye===null?Ae=Te:Ye.sibling=Te,Ye=Te);return ut&&xl(K,Pe),Ae}for(Te=h(Te);Pe<Z.length;Pe++)ys=se(Te,K,Pe,Z[Pe],ce),ys!==null&&(i&&ys.alternate!==null&&Te.delete(ys.key===null?Pe:ys.key),Y=b(ys,Y,Pe),Ye===null?Ae=ys:Ye.sibling=ys,Ye=ys);return i&&Te.forEach(function(oi){return l(K,oi)}),ut&&xl(K,Pe),Ae}function ke(K,Y,Z,ce){if(Z==null)throw Error(r(151));for(var Ae=null,Ye=null,Te=Y,Pe=Y=0,ys=null,dt=Z.next();Te!==null&&!dt.done;Pe++,dt=Z.next()){Te.index>Pe?(ys=Te,Te=null):ys=Te.sibling;var oi=te(K,Te,dt.value,ce);if(oi===null){Te===null&&(Te=ys);break}i&&Te&&oi.alternate===null&&l(K,Te),Y=b(oi,Y,Pe),Ye===null?Ae=oi:Ye.sibling=oi,Ye=oi,Te=ys}if(dt.done)return d(K,Te),ut&&xl(K,Pe),Ae;if(Te===null){for(;!dt.done;Pe++,dt=Z.next())dt=he(K,dt.value,ce),dt!==null&&(Y=b(dt,Y,Pe),Ye===null?Ae=dt:Ye.sibling=dt,Ye=dt);return ut&&xl(K,Pe),Ae}for(Te=h(Te);!dt.done;Pe++,dt=Z.next())dt=se(Te,K,Pe,dt.value,ce),dt!==null&&(i&&dt.alternate!==null&&Te.delete(dt.key===null?Pe:dt.key),Y=b(dt,Y,Pe),Ye===null?Ae=dt:Ye.sibling=dt,Ye=dt);return i&&Te.forEach(function(nD){return l(K,nD)}),ut&&xl(K,Pe),Ae}function Nt(K,Y,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===w&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case y:e:{for(var Ae=Z.key;Y!==null;){if(Y.key===Ae){if(Ae=Z.type,Ae===w){if(Y.tag===7){d(K,Y.sibling),ce=p(Y,Z.props.children),ce.return=K,K=ce;break e}}else if(Y.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===D&&bw(Ae)===Y.type){d(K,Y.sibling),ce=p(Y,Z.props),Md(ce,Z),ce.return=K,K=ce;break e}d(K,Y);break}else l(K,Y);Y=Y.sibling}Z.type===w?(ce=gl(Z.props.children,K.mode,ce,Z.key),ce.return=K,K=ce):(ce=kh(Z.type,Z.key,Z.props,null,K.mode,ce),Md(ce,Z),ce.return=K,K=ce)}return T(K);case N:e:{for(Ae=Z.key;Y!==null;){if(Y.key===Ae)if(Y.tag===4&&Y.stateNode.containerInfo===Z.containerInfo&&Y.stateNode.implementation===Z.implementation){d(K,Y.sibling),ce=p(Y,Z.children||[]),ce.return=K,K=ce;break e}else{d(K,Y);break}else l(K,Y);Y=Y.sibling}ce=Np(Z,K.mode,ce),ce.return=K,K=ce}return T(K);case D:return Ae=Z._init,Z=Ae(Z._payload),Nt(K,Y,Z,ce)}if(ve(Z))return Ue(K,Y,Z,ce);if(M(Z)){if(Ae=M(Z),typeof Ae!="function")throw Error(r(150));return Z=Ae.call(Z),ke(K,Y,Z,ce)}if(typeof Z.then=="function")return Nt(K,Y,Kh(Z),ce);if(Z.$$typeof===V)return Nt(K,Y,Lh(K,Z),ce);Xh(K,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,Y!==null&&Y.tag===6?(d(K,Y.sibling),ce=p(Y,Z),ce.return=K,K=ce):(d(K,Y),ce=vp(Z,K.mode,ce),ce.return=K,K=ce),T(K)):d(K,Y)}return function(K,Y,Z,ce){try{kd=0;var Ae=Nt(K,Y,Z,ce);return zo=null,Ae}catch(Te){if(Te===Ed||Te===Uh)throw Te;var Ye=un(29,Te,null,K.mode);return Ye.lanes=ce,Ye.return=K,Ye}finally{}}}var qo=yw(!0),vw=yw(!1),On=Q(null),vr=null;function Wa(i){var l=i.alternate;ue(ds,ds.current&1),ue(On,i),vr===null&&(l===null||Uo.current!==null||l.memoizedState!==null)&&(vr=i)}function Nw(i){if(i.tag===22){if(ue(ds,ds.current),ue(On,i),vr===null){var l=i.alternate;l!==null&&l.memoizedState!==null&&(vr=i)}}else Qa()}function Qa(){ue(ds,ds.current),ue(On,On.current)}function na(i){ie(On),vr===i&&(vr=null),ie(ds)}var ds=Q(0);function Zh(i){for(var l=i;l!==null;){if(l.tag===13){var d=l.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||z0(d)))return l}else if(l.tag===19&&l.memoizedProps.revealOrder!==void 0){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}function e0(i,l,d,h){l=i.memoizedState,d=d(h,l),d=d==null?l:x({},l,d),i.memoizedState=d,i.lanes===0&&(i.updateQueue.baseState=d)}var t0={enqueueSetState:function(i,l,d){i=i._reactInternals;var h=gn(),p=qa(h);p.payload=l,d!=null&&(p.callback=d),l=$a(i,p,h),l!==null&&(pn(l,i,h),Sd(l,i,h))},enqueueReplaceState:function(i,l,d){i=i._reactInternals;var h=gn(),p=qa(h);p.tag=1,p.payload=l,d!=null&&(p.callback=d),l=$a(i,p,h),l!==null&&(pn(l,i,h),Sd(l,i,h))},enqueueForceUpdate:function(i,l){i=i._reactInternals;var d=gn(),h=qa(d);h.tag=2,l!=null&&(h.callback=l),l=$a(i,h,d),l!==null&&(pn(l,i,d),Sd(l,i,d))}};function ww(i,l,d,h,p,b,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(h,b,T):l.prototype&&l.prototype.isPureReactComponent?!pd(d,h)||!pd(p,b):!0}function jw(i,l,d,h){i=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(d,h),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(d,h),l.state!==i&&t0.enqueueReplaceState(l,l.state,null)}function El(i,l){var d=l;if("ref"in l){d={};for(var h in l)h!=="ref"&&(d[h]=l[h])}if(i=i.defaultProps){d===l&&(d=x({},d));for(var p in i)d[p]===void 0&&(d[p]=i[p])}return d}var Jh=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function Ew(i){Jh(i)}function _w(i){console.error(i)}function Sw(i){Jh(i)}function em(i,l){try{var d=i.onUncaughtError;d(l.value,{componentStack:l.stack})}catch(h){setTimeout(function(){throw h})}}function Aw(i,l,d){try{var h=i.onCaughtError;h(d.value,{componentStack:d.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function s0(i,l,d){return d=qa(d),d.tag=3,d.payload={element:null},d.callback=function(){em(i,l)},d}function Cw(i){return i=qa(i),i.tag=3,i}function Tw(i,l,d,h){var p=d.type.getDerivedStateFromError;if(typeof p=="function"){var b=h.value;i.payload=function(){return p(b)},i.callback=function(){Aw(l,d,h)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Aw(l,d,h),typeof p!="function"&&(ei===null?ei=new Set([this]):ei.add(this));var U=h.stack;this.componentDidCatch(h.value,{componentStack:U!==null?U:""})})}function n4(i,l,d,h,p){if(d.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(l=d.alternate,l!==null&&Nd(l,d,p,!0),d=On.current,d!==null){switch(d.tag){case 13:return vr===null?S0():d.alternate===null&&Ht===0&&(Ht=3),d.flags&=-257,d.flags|=65536,d.lanes=p,h===Dp?d.flags|=16384:(l=d.updateQueue,l===null?d.updateQueue=new Set([h]):l.add(h),C0(i,h,p)),!1;case 22:return d.flags|=65536,h===Dp?d.flags|=16384:(l=d.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([h])},d.updateQueue=l):(d=l.retryQueue,d===null?l.retryQueue=new Set([h]):d.add(h)),C0(i,h,p)),!1}throw Error(r(435,d.tag))}return C0(i,h,p),S0(),!1}if(ut)return l=On.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=p,h!==Ep&&(i=Error(r(422),{cause:h}),vd(In(i,d)))):(h!==Ep&&(l=Error(r(423),{cause:h}),vd(In(l,d))),i=i.current.alternate,i.flags|=65536,p&=-p,i.lanes|=p,h=In(h,d),p=s0(i.stateNode,h,p),Mp(i,p),Ht!==4&&(Ht=2)),!1;var b=Error(r(520),{cause:h});if(b=In(b,d),Bd===null?Bd=[b]:Bd.push(b),Ht!==4&&(Ht=2),l===null)return!0;h=In(h,d),d=l;do{switch(d.tag){case 3:return d.flags|=65536,i=p&-p,d.lanes|=i,i=s0(d.stateNode,h,i),Mp(d,i),!1;case 1:if(l=d.type,b=d.stateNode,(d.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ei===null||!ei.has(b))))return d.flags|=65536,p&=-p,d.lanes|=p,p=Cw(p),Tw(p,i,d,h),Mp(d,p),!1}d=d.return}while(d!==null);return!1}var Rw=Error(r(461)),xs=!1;function js(i,l,d,h){l.child=i===null?vw(l,null,d,h):qo(l,i.child,d,h)}function Dw(i,l,d,h,p){d=d.render;var b=l.ref;if("ref"in h){var T={};for(var U in h)U!=="ref"&&(T[U]=h[U])}else T=h;return Nl(l),h=Up(i,l,d,T,b,p),U=Fp(),i!==null&&!xs?(Bp(i,l,p),ra(i,l,p)):(ut&&U&&wp(l),l.flags|=1,js(i,l,h,p),l.child)}function Iw(i,l,d,h,p){if(i===null){var b=d.type;return typeof b=="function"&&!yp(b)&&b.defaultProps===void 0&&d.compare===null?(l.tag=15,l.type=b,kw(i,l,b,h,p)):(i=kh(d.type,null,h,l,l.mode,p),i.ref=l.ref,i.return=l,l.child=i)}if(b=i.child,!d0(i,p)){var T=b.memoizedProps;if(d=d.compare,d=d!==null?d:pd,d(T,h)&&i.ref===l.ref)return ra(i,l,p)}return l.flags|=1,i=Xr(b,h),i.ref=l.ref,i.return=l,l.child=i}function kw(i,l,d,h,p){if(i!==null){var b=i.memoizedProps;if(pd(b,h)&&i.ref===l.ref)if(xs=!1,l.pendingProps=h=b,d0(i,p))(i.flags&131072)!==0&&(xs=!0);else return l.lanes=i.lanes,ra(i,l,p)}return n0(i,l,d,h,p)}function Mw(i,l,d){var h=l.pendingProps,p=h.children,b=i!==null?i.memoizedState:null;if(h.mode==="hidden"){if((l.flags&128)!==0){if(h=b!==null?b.baseLanes|d:d,i!==null){for(p=l.child=i.child,b=0;p!==null;)b=b|p.lanes|p.childLanes,p=p.sibling;l.childLanes=b&~h}else l.childLanes=0,l.child=null;return Pw(i,l,h,d)}if((d&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vh(l,b!==null?b.cachePool:null),b!==null?kN(l,b):Op(),Nw(l);else return l.lanes=l.childLanes=536870912,Pw(i,l,b!==null?b.baseLanes|d:d,d)}else b!==null?(Vh(l,b.cachePool),kN(l,b),Qa(),l.memoizedState=null):(i!==null&&Vh(l,null),Op(),Qa());return js(i,l,p,d),l.child}function Pw(i,l,d,h){var p=Rp();return p=p===null?null:{parent:cs._currentValue,pool:p},l.memoizedState={baseLanes:d,cachePool:p},i!==null&&Vh(l,null),Op(),Nw(l),i!==null&&Nd(i,l,h,!0),null}function tm(i,l){var d=l.ref;if(d===null)i!==null&&i.ref!==null&&(l.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(i===null||i.ref!==d)&&(l.flags|=4194816)}}function n0(i,l,d,h,p){return Nl(l),d=Up(i,l,d,h,void 0,p),h=Fp(),i!==null&&!xs?(Bp(i,l,p),ra(i,l,p)):(ut&&h&&wp(l),l.flags|=1,js(i,l,d,p),l.child)}function Ow(i,l,d,h,p,b){return Nl(l),l.updateQueue=null,d=PN(l,h,d,p),MN(i),h=Fp(),i!==null&&!xs?(Bp(i,l,b),ra(i,l,b)):(ut&&h&&wp(l),l.flags|=1,js(i,l,d,b),l.child)}function Lw(i,l,d,h,p){if(Nl(l),l.stateNode===null){var b=Mo,T=d.contextType;typeof T=="object"&&T!==null&&(b=Is(T)),b=new d(h,b),l.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=t0,l.stateNode=b,b._reactInternals=l,b=l.stateNode,b.props=h,b.state=l.memoizedState,b.refs={},Ip(l),T=d.contextType,b.context=typeof T=="object"&&T!==null?Is(T):Mo,b.state=l.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(e0(l,d,T,h),b.state=l.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&t0.enqueueReplaceState(b,b.state,null),Cd(l,h,b,p),Ad(),b.state=l.memoizedState),typeof b.componentDidMount=="function"&&(l.flags|=4194308),h=!0}else if(i===null){b=l.stateNode;var U=l.memoizedProps,$=El(d,U);b.props=$;var J=b.context,le=d.contextType;T=Mo,typeof le=="object"&&le!==null&&(T=Is(le));var he=d.getDerivedStateFromProps;le=typeof he=="function"||typeof b.getSnapshotBeforeUpdate=="function",U=l.pendingProps!==U,le||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(U||J!==T)&&jw(l,b,h,T),za=!1;var te=l.memoizedState;b.state=te,Cd(l,h,b,p),Ad(),J=l.memoizedState,U||te!==J||za?(typeof he=="function"&&(e0(l,d,he,h),J=l.memoizedState),($=za||ww(l,d,$,h,te,J,T))?(le||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(l.flags|=4194308)):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=h,l.memoizedState=J),b.props=h,b.state=J,b.context=T,h=$):(typeof b.componentDidMount=="function"&&(l.flags|=4194308),h=!1)}else{b=l.stateNode,kp(i,l),T=l.memoizedProps,le=El(d,T),b.props=le,he=l.pendingProps,te=b.context,J=d.contextType,$=Mo,typeof J=="object"&&J!==null&&($=Is(J)),U=d.getDerivedStateFromProps,(J=typeof U=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==he||te!==$)&&jw(l,b,h,$),za=!1,te=l.memoizedState,b.state=te,Cd(l,h,b,p),Ad();var se=l.memoizedState;T!==he||te!==se||za||i!==null&&i.dependencies!==null&&Oh(i.dependencies)?(typeof U=="function"&&(e0(l,d,U,h),se=l.memoizedState),(le=za||ww(l,d,le,h,te,se,$)||i!==null&&i.dependencies!==null&&Oh(i.dependencies))?(J||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(h,se,$),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(h,se,$)),typeof b.componentDidUpdate=="function"&&(l.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&te===i.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&te===i.memoizedState||(l.flags|=1024),l.memoizedProps=h,l.memoizedState=se),b.props=h,b.state=se,b.context=$,h=le):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&te===i.memoizedState||(l.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&te===i.memoizedState||(l.flags|=1024),h=!1)}return b=h,tm(i,l),h=(l.flags&128)!==0,b||h?(b=l.stateNode,d=h&&typeof d.getDerivedStateFromError!="function"?null:b.render(),l.flags|=1,i!==null&&h?(l.child=qo(l,i.child,null,p),l.child=qo(l,null,d,p)):js(i,l,d,p),l.memoizedState=b.state,i=l.child):i=ra(i,l,p),i}function Vw(i,l,d,h){return yd(),l.flags|=256,js(i,l,d,h),l.child}var r0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function a0(i){return{baseLanes:i,cachePool:_N()}}function i0(i,l,d){return i=i!==null?i.childLanes&~d:0,l&&(i|=Ln),i}function Uw(i,l,d){var h=l.pendingProps,p=!1,b=(l.flags&128)!==0,T;if((T=b)||(T=i!==null&&i.memoizedState===null?!1:(ds.current&2)!==0),T&&(p=!0,l.flags&=-129),T=(l.flags&32)!==0,l.flags&=-33,i===null){if(ut){if(p?Wa(l):Qa(),ut){var U=Bt,$;if($=U){e:{for($=U,U=yr;$.nodeType!==8;){if(!U){U=null;break e}if($=Zn($.nextSibling),$===null){U=null;break e}}U=$}U!==null?(l.memoizedState={dehydrated:U,treeContext:pl!==null?{id:Zr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},$=un(18,null,null,0),$.stateNode=U,$.return=l,l.child=$,$s=l,Bt=null,$=!0):$=!1}$||yl(l)}if(U=l.memoizedState,U!==null&&(U=U.dehydrated,U!==null))return z0(U)?l.lanes=32:l.lanes=536870912,null;na(l)}return U=h.children,h=h.fallback,p?(Qa(),p=l.mode,U=sm({mode:"hidden",children:U},p),h=gl(h,p,d,null),U.return=l,h.return=l,U.sibling=h,l.child=U,p=l.child,p.memoizedState=a0(d),p.childLanes=i0(i,T,d),l.memoizedState=r0,h):(Wa(l),l0(l,U))}if($=i.memoizedState,$!==null&&(U=$.dehydrated,U!==null)){if(b)l.flags&256?(Wa(l),l.flags&=-257,l=o0(i,l,d)):l.memoizedState!==null?(Qa(),l.child=i.child,l.flags|=128,l=null):(Qa(),p=h.fallback,U=l.mode,h=sm({mode:"visible",children:h.children},U),p=gl(p,U,d,null),p.flags|=2,h.return=l,p.return=l,h.sibling=p,l.child=h,qo(l,i.child,null,d),h=l.child,h.memoizedState=a0(d),h.childLanes=i0(i,T,d),l.memoizedState=r0,l=p);else if(Wa(l),z0(U)){if(T=U.nextSibling&&U.nextSibling.dataset,T)var J=T.dgst;T=J,h=Error(r(419)),h.stack="",h.digest=T,vd({value:h,source:null,stack:null}),l=o0(i,l,d)}else if(xs||Nd(i,l,d,!1),T=(d&i.childLanes)!==0,xs||T){if(T=Et,T!==null&&(h=d&-d,h=(h&42)!==0?1:Pa(h),h=(h&(T.suspendedLanes|d))!==0?0:h,h!==0&&h!==$.retryLane))throw $.retryLane=h,ko(i,h),pn(T,i,h),Rw;U.data==="$?"||S0(),l=o0(i,l,d)}else U.data==="$?"?(l.flags|=192,l.child=i.child,l=null):(i=$.treeContext,Bt=Zn(U.nextSibling),$s=l,ut=!0,bl=null,yr=!1,i!==null&&(Mn[Pn++]=Zr,Mn[Pn++]=Jr,Mn[Pn++]=pl,Zr=i.id,Jr=i.overflow,pl=l),l=l0(l,h.children),l.flags|=4096);return l}return p?(Qa(),p=h.fallback,U=l.mode,$=i.child,J=$.sibling,h=Xr($,{mode:"hidden",children:h.children}),h.subtreeFlags=$.subtreeFlags&65011712,J!==null?p=Xr(J,p):(p=gl(p,U,d,null),p.flags|=2),p.return=l,h.return=l,h.sibling=p,l.child=h,h=p,p=l.child,U=i.child.memoizedState,U===null?U=a0(d):($=U.cachePool,$!==null?(J=cs._currentValue,$=$.parent!==J?{parent:J,pool:J}:$):$=_N(),U={baseLanes:U.baseLanes|d,cachePool:$}),p.memoizedState=U,p.childLanes=i0(i,T,d),l.memoizedState=r0,h):(Wa(l),d=i.child,i=d.sibling,d=Xr(d,{mode:"visible",children:h.children}),d.return=l,d.sibling=null,i!==null&&(T=l.deletions,T===null?(l.deletions=[i],l.flags|=16):T.push(i)),l.child=d,l.memoizedState=null,d)}function l0(i,l){return l=sm({mode:"visible",children:l},i.mode),l.return=i,i.child=l}function sm(i,l){return i=un(22,i,null,l),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function o0(i,l,d){return qo(l,i.child,null,d),i=l0(l,l.pendingProps.children),i.flags|=2,l.memoizedState=null,i}function Fw(i,l,d){i.lanes|=l;var h=i.alternate;h!==null&&(h.lanes|=l),Sp(i.return,l,d)}function c0(i,l,d,h,p){var b=i.memoizedState;b===null?i.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:h,tail:d,tailMode:p}:(b.isBackwards=l,b.rendering=null,b.renderingStartTime=0,b.last=h,b.tail=d,b.tailMode=p)}function Bw(i,l,d){var h=l.pendingProps,p=h.revealOrder,b=h.tail;if(js(i,l,h.children,d),h=ds.current,(h&2)!==0)h=h&1|2,l.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=l.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Fw(i,d,l);else if(i.tag===19)Fw(i,d,l);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===l)break e;for(;i.sibling===null;){if(i.return===null||i.return===l)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}h&=1}switch(ue(ds,h),p){case"forwards":for(d=l.child,p=null;d!==null;)i=d.alternate,i!==null&&Zh(i)===null&&(p=d),d=d.sibling;d=p,d===null?(p=l.child,l.child=null):(p=d.sibling,d.sibling=null),c0(l,!1,p,d,b);break;case"backwards":for(d=null,p=l.child,l.child=null;p!==null;){if(i=p.alternate,i!==null&&Zh(i)===null){l.child=p;break}i=p.sibling,p.sibling=d,d=p,p=i}c0(l,!0,d,null,b);break;case"together":c0(l,!1,null,null,void 0);break;default:l.memoizedState=null}return l.child}function ra(i,l,d){if(i!==null&&(l.dependencies=i.dependencies),Ja|=l.lanes,(d&l.childLanes)===0)if(i!==null){if(Nd(i,l,d,!1),(d&l.childLanes)===0)return null}else return null;if(i!==null&&l.child!==i.child)throw Error(r(153));if(l.child!==null){for(i=l.child,d=Xr(i,i.pendingProps),l.child=d,d.return=l;i.sibling!==null;)i=i.sibling,d=d.sibling=Xr(i,i.pendingProps),d.return=l;d.sibling=null}return l.child}function d0(i,l){return(i.lanes&l)!==0?!0:(i=i.dependencies,!!(i!==null&&Oh(i)))}function r4(i,l,d){switch(l.tag){case 3:$e(l,l.stateNode.containerInfo),Ha(l,cs,i.memoizedState.cache),yd();break;case 27:case 5:ln(l);break;case 4:$e(l,l.stateNode.containerInfo);break;case 10:Ha(l,l.type,l.memoizedProps.value);break;case 13:var h=l.memoizedState;if(h!==null)return h.dehydrated!==null?(Wa(l),l.flags|=128,null):(d&l.child.childLanes)!==0?Uw(i,l,d):(Wa(l),i=ra(i,l,d),i!==null?i.sibling:null);Wa(l);break;case 19:var p=(i.flags&128)!==0;if(h=(d&l.childLanes)!==0,h||(Nd(i,l,d,!1),h=(d&l.childLanes)!==0),p){if(h)return Bw(i,l,d);l.flags|=128}if(p=l.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),ue(ds,ds.current),h)break;return null;case 22:case 23:return l.lanes=0,Mw(i,l,d);case 24:Ha(l,cs,i.memoizedState.cache)}return ra(i,l,d)}function Hw(i,l,d){if(i!==null)if(i.memoizedProps!==l.pendingProps)xs=!0;else{if(!d0(i,d)&&(l.flags&128)===0)return xs=!1,r4(i,l,d);xs=(i.flags&131072)!==0}else xs=!1,ut&&(l.flags&1048576)!==0&&bN(l,Ph,l.index);switch(l.lanes=0,l.tag){case 16:e:{i=l.pendingProps;var h=l.elementType,p=h._init;if(h=p(h._payload),l.type=h,typeof h=="function")yp(h)?(i=El(h,i),l.tag=1,l=Lw(null,l,h,i,d)):(l.tag=0,l=n0(null,l,h,i,d));else{if(h!=null){if(p=h.$$typeof,p===z){l.tag=11,l=Dw(null,l,h,i,d);break e}else if(p===C){l.tag=14,l=Iw(null,l,h,i,d);break e}}throw l=oe(h)||h,Error(r(306,l,""))}}return l;case 0:return n0(i,l,l.type,l.pendingProps,d);case 1:return h=l.type,p=El(h,l.pendingProps),Lw(i,l,h,p,d);case 3:e:{if($e(l,l.stateNode.containerInfo),i===null)throw Error(r(387));h=l.pendingProps;var b=l.memoizedState;p=b.element,kp(i,l),Cd(l,h,null,d);var T=l.memoizedState;if(h=T.cache,Ha(l,cs,h),h!==b.cache&&Ap(l,[cs],d,!0),Ad(),h=T.element,b.isDehydrated)if(b={element:h,isDehydrated:!1,cache:T.cache},l.updateQueue.baseState=b,l.memoizedState=b,l.flags&256){l=Vw(i,l,h,d);break e}else if(h!==p){p=In(Error(r(424)),l),vd(p),l=Vw(i,l,h,d);break e}else{switch(i=l.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Bt=Zn(i.firstChild),$s=l,ut=!0,bl=null,yr=!0,d=vw(l,null,h,d),l.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(yd(),h===p){l=ra(i,l,d);break e}js(i,l,h,d)}l=l.child}return l;case 26:return tm(i,l),i===null?(d=Gj(l.type,null,l.pendingProps,null))?l.memoizedState=d:ut||(d=l.type,i=l.pendingProps,h=pm(Se.current).createElement(d),h[is]=l,h[Xt]=i,_s(h,d,i),Gt(h),l.stateNode=h):l.memoizedState=Gj(l.type,i.memoizedProps,l.pendingProps,i.memoizedState),null;case 27:return ln(l),i===null&&ut&&(h=l.stateNode=zj(l.type,l.pendingProps,Se.current),$s=l,yr=!0,p=Bt,ni(l.type)?(q0=p,Bt=Zn(h.firstChild)):Bt=p),js(i,l,l.pendingProps.children,d),tm(i,l),i===null&&(l.flags|=4194304),l.child;case 5:return i===null&&ut&&((p=h=Bt)&&(h=I4(h,l.type,l.pendingProps,yr),h!==null?(l.stateNode=h,$s=l,Bt=Zn(h.firstChild),yr=!1,p=!0):p=!1),p||yl(l)),ln(l),p=l.type,b=l.pendingProps,T=i!==null?i.memoizedProps:null,h=b.children,F0(p,b)?h=null:T!==null&&F0(p,T)&&(l.flags|=32),l.memoizedState!==null&&(p=Up(i,l,KR,null,null,d),Kd._currentValue=p),tm(i,l),js(i,l,h,d),l.child;case 6:return i===null&&ut&&((i=d=Bt)&&(d=k4(d,l.pendingProps,yr),d!==null?(l.stateNode=d,$s=l,Bt=null,i=!0):i=!1),i||yl(l)),null;case 13:return Uw(i,l,d);case 4:return $e(l,l.stateNode.containerInfo),h=l.pendingProps,i===null?l.child=qo(l,null,h,d):js(i,l,h,d),l.child;case 11:return Dw(i,l,l.type,l.pendingProps,d);case 7:return js(i,l,l.pendingProps,d),l.child;case 8:return js(i,l,l.pendingProps.children,d),l.child;case 12:return js(i,l,l.pendingProps.children,d),l.child;case 10:return h=l.pendingProps,Ha(l,l.type,h.value),js(i,l,h.children,d),l.child;case 9:return p=l.type._context,h=l.pendingProps.children,Nl(l),p=Is(p),h=h(p),l.flags|=1,js(i,l,h,d),l.child;case 14:return Iw(i,l,l.type,l.pendingProps,d);case 15:return kw(i,l,l.type,l.pendingProps,d);case 19:return Bw(i,l,d);case 31:return h=l.pendingProps,d=l.mode,h={mode:h.mode,children:h.children},i===null?(d=sm(h,d),d.ref=l.ref,l.child=d,d.return=l,l=d):(d=Xr(i.child,h),d.ref=l.ref,l.child=d,d.return=l,l=d),l;case 22:return Mw(i,l,d);case 24:return Nl(l),h=Is(cs),i===null?(p=Rp(),p===null&&(p=Et,b=Cp(),p.pooledCache=b,b.refCount++,b!==null&&(p.pooledCacheLanes|=d),p=b),l.memoizedState={parent:h,cache:p},Ip(l),Ha(l,cs,p)):((i.lanes&d)!==0&&(kp(i,l),Cd(l,null,null,d),Ad()),p=i.memoizedState,b=l.memoizedState,p.parent!==h?(p={parent:h,cache:h},l.memoizedState=p,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=p),Ha(l,cs,h)):(h=b.cache,Ha(l,cs,h),h!==p.cache&&Ap(l,[cs],d,!0))),js(i,l,l.pendingProps.children,d),l.child;case 29:throw l.pendingProps}throw Error(r(156,l.tag))}function aa(i){i.flags|=4}function zw(i,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Xj(l)){if(l=On.current,l!==null&&((at&4194048)===at?vr!==null:(at&62914560)!==at&&(at&536870912)===0||l!==vr))throw _d=Dp,SN;i.flags|=8192}}function nm(i,l){l!==null&&(i.flags|=4),i.flags&16384&&(l=i.tag!==22?Zc():536870912,i.lanes|=l,Qo|=l)}function Pd(i,l){if(!ut)switch(i.tailMode){case"hidden":l=i.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?i.tail=null:d.sibling=null;break;case"collapsed":d=i.tail;for(var h=null;d!==null;)d.alternate!==null&&(h=d),d=d.sibling;h===null?l||i.tail===null?i.tail=null:i.tail.sibling=null:h.sibling=null}}function Ot(i){var l=i.alternate!==null&&i.alternate.child===i.child,d=0,h=0;if(l)for(var p=i.child;p!==null;)d|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=i,p=p.sibling;else for(p=i.child;p!==null;)d|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=i,p=p.sibling;return i.subtreeFlags|=h,i.childLanes=d,l}function a4(i,l,d){var h=l.pendingProps;switch(jp(l),l.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(l),null;case 1:return Ot(l),null;case 3:return d=l.stateNode,h=null,i!==null&&(h=i.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),ta(cs),Rs(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(i===null||i.child===null)&&(bd(l)?aa(l):i===null||i.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,NN())),Ot(l),null;case 26:return d=l.memoizedState,i===null?(aa(l),d!==null?(Ot(l),zw(l,d)):(Ot(l),l.flags&=-16777217)):d?d!==i.memoizedState?(aa(l),Ot(l),zw(l,d)):(Ot(l),l.flags&=-16777217):(i.memoizedProps!==h&&aa(l),Ot(l),l.flags&=-16777217),null;case 27:Vr(l),d=Se.current;var p=l.type;if(i!==null&&l.stateNode!=null)i.memoizedProps!==h&&aa(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Ot(l),null}i=Ee.current,bd(l)?yN(l):(i=zj(p,h,d),l.stateNode=i,aa(l))}return Ot(l),null;case 5:if(Vr(l),d=l.type,i!==null&&l.stateNode!=null)i.memoizedProps!==h&&aa(l);else{if(!h){if(l.stateNode===null)throw Error(r(166));return Ot(l),null}if(i=Ee.current,bd(l))yN(l);else{switch(p=pm(Se.current),i){case 1:i=p.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:i=p.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":i=p.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":i=p.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":i=p.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof h.is=="string"?p.createElement("select",{is:h.is}):p.createElement("select"),h.multiple?i.multiple=!0:h.size&&(i.size=h.size);break;default:i=typeof h.is=="string"?p.createElement(d,{is:h.is}):p.createElement(d)}}i[is]=l,i[Xt]=h;e:for(p=l.child;p!==null;){if(p.tag===5||p.tag===6)i.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===l)break e;for(;p.sibling===null;){if(p.return===null||p.return===l)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}l.stateNode=i;e:switch(_s(i,d,h),d){case"button":case"input":case"select":case"textarea":i=!!h.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&aa(l)}}return Ot(l),l.flags&=-16777217,null;case 6:if(i&&l.stateNode!=null)i.memoizedProps!==h&&aa(l);else{if(typeof h!="string"&&l.stateNode===null)throw Error(r(166));if(i=Se.current,bd(l)){if(i=l.stateNode,d=l.memoizedProps,h=null,p=$s,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}i[is]=l,i=!!(i.nodeValue===d||h!==null&&h.suppressHydrationWarning===!0||Oj(i.nodeValue,d)),i||yl(l)}else i=pm(i).createTextNode(h),i[is]=l,l.stateNode=i}return Ot(l),null;case 13:if(h=l.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(p=bd(l),h!==null&&h.dehydrated!==null){if(i===null){if(!p)throw Error(r(318));if(p=l.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(r(317));p[is]=l}else yd(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Ot(l),p=!1}else p=NN(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=p),p=!0;if(!p)return l.flags&256?(na(l),l):(na(l),null)}if(na(l),(l.flags&128)!==0)return l.lanes=d,l;if(d=h!==null,i=i!==null&&i.memoizedState!==null,d){h=l.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool);var b=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(b=h.memoizedState.cachePool.pool),b!==p&&(h.flags|=2048)}return d!==i&&d&&(l.child.flags|=8192),nm(l,l.updateQueue),Ot(l),null;case 4:return Rs(),i===null&&P0(l.stateNode.containerInfo),Ot(l),null;case 10:return ta(l.type),Ot(l),null;case 19:if(ie(ds),p=l.memoizedState,p===null)return Ot(l),null;if(h=(l.flags&128)!==0,b=p.rendering,b===null)if(h)Pd(p,!1);else{if(Ht!==0||i!==null&&(i.flags&128)!==0)for(i=l.child;i!==null;){if(b=Zh(i),b!==null){for(l.flags|=128,Pd(p,!1),i=b.updateQueue,l.updateQueue=i,nm(l,i),l.subtreeFlags=0,i=d,d=l.child;d!==null;)xN(d,i),d=d.sibling;return ue(ds,ds.current&1|2),l.child}i=i.sibling}p.tail!==null&&Sn()>im&&(l.flags|=128,h=!0,Pd(p,!1),l.lanes=4194304)}else{if(!h)if(i=Zh(b),i!==null){if(l.flags|=128,h=!0,i=i.updateQueue,l.updateQueue=i,nm(l,i),Pd(p,!0),p.tail===null&&p.tailMode==="hidden"&&!b.alternate&&!ut)return Ot(l),null}else 2*Sn()-p.renderingStartTime>im&&d!==536870912&&(l.flags|=128,h=!0,Pd(p,!1),l.lanes=4194304);p.isBackwards?(b.sibling=l.child,l.child=b):(i=p.last,i!==null?i.sibling=b:l.child=b,p.last=b)}return p.tail!==null?(l=p.tail,p.rendering=l,p.tail=l.sibling,p.renderingStartTime=Sn(),l.sibling=null,i=ds.current,ue(ds,h?i&1|2:i&1),l):(Ot(l),null);case 22:case 23:return na(l),Lp(),h=l.memoizedState!==null,i!==null?i.memoizedState!==null!==h&&(l.flags|=8192):h&&(l.flags|=8192),h?(d&536870912)!==0&&(l.flags&128)===0&&(Ot(l),l.subtreeFlags&6&&(l.flags|=8192)):Ot(l),d=l.updateQueue,d!==null&&nm(l,d.retryQueue),d=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),h=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(h=l.memoizedState.cachePool.pool),h!==d&&(l.flags|=2048),i!==null&&ie(wl),null;case 24:return d=null,i!==null&&(d=i.memoizedState.cache),l.memoizedState.cache!==d&&(l.flags|=2048),ta(cs),Ot(l),null;case 25:return null;case 30:return null}throw Error(r(156,l.tag))}function i4(i,l){switch(jp(l),l.tag){case 1:return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 3:return ta(cs),Rs(),i=l.flags,(i&65536)!==0&&(i&128)===0?(l.flags=i&-65537|128,l):null;case 26:case 27:case 5:return Vr(l),null;case 13:if(na(l),i=l.memoizedState,i!==null&&i.dehydrated!==null){if(l.alternate===null)throw Error(r(340));yd()}return i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 19:return ie(ds),null;case 4:return Rs(),null;case 10:return ta(l.type),null;case 22:case 23:return na(l),Lp(),i!==null&&ie(wl),i=l.flags,i&65536?(l.flags=i&-65537|128,l):null;case 24:return ta(cs),null;case 25:return null;default:return null}}function qw(i,l){switch(jp(l),l.tag){case 3:ta(cs),Rs();break;case 26:case 27:case 5:Vr(l);break;case 4:Rs();break;case 13:na(l);break;case 19:ie(ds);break;case 10:ta(l.type);break;case 22:case 23:na(l),Lp(),i!==null&&ie(wl);break;case 24:ta(cs)}}function Od(i,l){try{var d=l.updateQueue,h=d!==null?d.lastEffect:null;if(h!==null){var p=h.next;d=p;do{if((d.tag&i)===i){h=void 0;var b=d.create,T=d.inst;h=b(),T.destroy=h}d=d.next}while(d!==p)}}catch(U){jt(l,l.return,U)}}function Ya(i,l,d){try{var h=l.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var b=p.next;h=b;do{if((h.tag&i)===i){var T=h.inst,U=T.destroy;if(U!==void 0){T.destroy=void 0,p=l;var $=d,J=U;try{J()}catch(le){jt(p,$,le)}}}h=h.next}while(h!==b)}}catch(le){jt(l,l.return,le)}}function $w(i){var l=i.updateQueue;if(l!==null){var d=i.stateNode;try{IN(l,d)}catch(h){jt(i,i.return,h)}}}function Gw(i,l,d){d.props=El(i.type,i.memoizedProps),d.state=i.memoizedState;try{d.componentWillUnmount()}catch(h){jt(i,l,h)}}function Ld(i,l){try{var d=i.ref;if(d!==null){switch(i.tag){case 26:case 27:case 5:var h=i.stateNode;break;case 30:h=i.stateNode;break;default:h=i.stateNode}typeof d=="function"?i.refCleanup=d(h):d.current=h}}catch(p){jt(i,l,p)}}function Nr(i,l){var d=i.ref,h=i.refCleanup;if(d!==null)if(typeof h=="function")try{h()}catch(p){jt(i,l,p)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(p){jt(i,l,p)}else d.current=null}function Ww(i){var l=i.type,d=i.memoizedProps,h=i.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":d.autoFocus&&h.focus();break e;case"img":d.src?h.src=d.src:d.srcSet&&(h.srcset=d.srcSet)}}catch(p){jt(i,i.return,p)}}function u0(i,l,d){try{var h=i.stateNode;A4(h,i.type,d,l),h[Xt]=l}catch(p){jt(i,i.return,p)}}function Qw(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ni(i.type)||i.tag===4}function h0(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Qw(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ni(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function m0(i,l,d){var h=i.tag;if(h===5||h===6)i=i.stateNode,l?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(i,l):(l=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,l.appendChild(i),d=d._reactRootContainer,d!=null||l.onclick!==null||(l.onclick=gm));else if(h!==4&&(h===27&&ni(i.type)&&(d=i.stateNode,l=null),i=i.child,i!==null))for(m0(i,l,d),i=i.sibling;i!==null;)m0(i,l,d),i=i.sibling}function rm(i,l,d){var h=i.tag;if(h===5||h===6)i=i.stateNode,l?d.insertBefore(i,l):d.appendChild(i);else if(h!==4&&(h===27&&ni(i.type)&&(d=i.stateNode),i=i.child,i!==null))for(rm(i,l,d),i=i.sibling;i!==null;)rm(i,l,d),i=i.sibling}function Yw(i){var l=i.stateNode,d=i.memoizedProps;try{for(var h=i.type,p=l.attributes;p.length;)l.removeAttributeNode(p[0]);_s(l,h,d),l[is]=i,l[Xt]=d}catch(b){jt(i,i.return,b)}}var ia=!1,Qt=!1,f0=!1,Kw=typeof WeakSet=="function"?WeakSet:Set,bs=null;function l4(i,l){if(i=i.containerInfo,V0=wm,i=lN(i),hp(i)){if("selectionStart"in i)var d={start:i.selectionStart,end:i.selectionEnd};else e:{d=(d=i.ownerDocument)&&d.defaultView||window;var h=d.getSelection&&d.getSelection();if(h&&h.rangeCount!==0){d=h.anchorNode;var p=h.anchorOffset,b=h.focusNode;h=h.focusOffset;try{d.nodeType,b.nodeType}catch{d=null;break e}var T=0,U=-1,$=-1,J=0,le=0,he=i,te=null;t:for(;;){for(var se;he!==d||p!==0&&he.nodeType!==3||(U=T+p),he!==b||h!==0&&he.nodeType!==3||($=T+h),he.nodeType===3&&(T+=he.nodeValue.length),(se=he.firstChild)!==null;)te=he,he=se;for(;;){if(he===i)break t;if(te===d&&++J===p&&(U=T),te===b&&++le===h&&($=T),(se=he.nextSibling)!==null)break;he=te,te=he.parentNode}he=se}d=U===-1||$===-1?null:{start:U,end:$}}else d=null}d=d||{start:0,end:0}}else d=null;for(U0={focusedElem:i,selectionRange:d},wm=!1,bs=l;bs!==null;)if(l=bs,i=l.child,(l.subtreeFlags&1024)!==0&&i!==null)i.return=l,bs=i;else for(;bs!==null;){switch(l=bs,b=l.alternate,i=l.flags,l.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,d=l,p=b.memoizedProps,b=b.memoizedState,h=d.stateNode;try{var Ue=El(d.type,p,d.elementType===d.type);i=h.getSnapshotBeforeUpdate(Ue,b),h.__reactInternalSnapshotBeforeUpdate=i}catch(ke){jt(d,d.return,ke)}}break;case 3:if((i&1024)!==0){if(i=l.stateNode.containerInfo,d=i.nodeType,d===9)H0(i);else if(d===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":H0(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=l.sibling,i!==null){i.return=l.return,bs=i;break}bs=l.return}}function Xw(i,l,d){var h=d.flags;switch(d.tag){case 0:case 11:case 15:Ka(i,d),h&4&&Od(5,d);break;case 1:if(Ka(i,d),h&4)if(i=d.stateNode,l===null)try{i.componentDidMount()}catch(T){jt(d,d.return,T)}else{var p=El(d.type,l.memoizedProps);l=l.memoizedState;try{i.componentDidUpdate(p,l,i.__reactInternalSnapshotBeforeUpdate)}catch(T){jt(d,d.return,T)}}h&64&&$w(d),h&512&&Ld(d,d.return);break;case 3:if(Ka(i,d),h&64&&(i=d.updateQueue,i!==null)){if(l=null,d.child!==null)switch(d.child.tag){case 27:case 5:l=d.child.stateNode;break;case 1:l=d.child.stateNode}try{IN(i,l)}catch(T){jt(d,d.return,T)}}break;case 27:l===null&&h&4&&Yw(d);case 26:case 5:Ka(i,d),l===null&&h&4&&Ww(d),h&512&&Ld(d,d.return);break;case 12:Ka(i,d);break;case 13:Ka(i,d),h&4&&ej(i,d),h&64&&(i=d.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(d=p4.bind(null,d),M4(i,d))));break;case 22:if(h=d.memoizedState!==null||ia,!h){l=l!==null&&l.memoizedState!==null||Qt,p=ia;var b=Qt;ia=h,(Qt=l)&&!b?Xa(i,d,(d.subtreeFlags&8772)!==0):Ka(i,d),ia=p,Qt=b}break;case 30:break;default:Ka(i,d)}}function Zw(i){var l=i.alternate;l!==null&&(i.alternate=null,Zw(l)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(l=i.stateNode,l!==null&&Va(l)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var kt=null,Xs=!1;function la(i,l,d){for(d=d.child;d!==null;)Jw(i,l,d),d=d.sibling}function Jw(i,l,d){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(Ft,d)}catch{}switch(d.tag){case 26:Qt||Nr(d,l),la(i,l,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Qt||Nr(d,l);var h=kt,p=Xs;ni(d.type)&&(kt=d.stateNode,Xs=!1),la(i,l,d),Gd(d.stateNode),kt=h,Xs=p;break;case 5:Qt||Nr(d,l);case 6:if(h=kt,p=Xs,kt=null,la(i,l,d),kt=h,Xs=p,kt!==null)if(Xs)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(d.stateNode)}catch(b){jt(d,l,b)}else try{kt.removeChild(d.stateNode)}catch(b){jt(d,l,b)}break;case 18:kt!==null&&(Xs?(i=kt,Bj(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,d.stateNode),eu(i)):Bj(kt,d.stateNode));break;case 4:h=kt,p=Xs,kt=d.stateNode.containerInfo,Xs=!0,la(i,l,d),kt=h,Xs=p;break;case 0:case 11:case 14:case 15:Qt||Ya(2,d,l),Qt||Ya(4,d,l),la(i,l,d);break;case 1:Qt||(Nr(d,l),h=d.stateNode,typeof h.componentWillUnmount=="function"&&Gw(d,l,h)),la(i,l,d);break;case 21:la(i,l,d);break;case 22:Qt=(h=Qt)||d.memoizedState!==null,la(i,l,d),Qt=h;break;default:la(i,l,d)}}function ej(i,l){if(l.memoizedState===null&&(i=l.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{eu(i)}catch(d){jt(l,l.return,d)}}function o4(i){switch(i.tag){case 13:case 19:var l=i.stateNode;return l===null&&(l=i.stateNode=new Kw),l;case 22:return i=i.stateNode,l=i._retryCache,l===null&&(l=i._retryCache=new Kw),l;default:throw Error(r(435,i.tag))}}function g0(i,l){var d=o4(i);l.forEach(function(h){var p=x4.bind(null,i,h);d.has(h)||(d.add(h),h.then(p,p))})}function hn(i,l){var d=l.deletions;if(d!==null)for(var h=0;h<d.length;h++){var p=d[h],b=i,T=l,U=T;e:for(;U!==null;){switch(U.tag){case 27:if(ni(U.type)){kt=U.stateNode,Xs=!1;break e}break;case 5:kt=U.stateNode,Xs=!1;break e;case 3:case 4:kt=U.stateNode.containerInfo,Xs=!0;break e}U=U.return}if(kt===null)throw Error(r(160));Jw(b,T,p),kt=null,Xs=!1,b=p.alternate,b!==null&&(b.return=null),p.return=null}if(l.subtreeFlags&13878)for(l=l.child;l!==null;)tj(l,i),l=l.sibling}var Xn=null;function tj(i,l){var d=i.alternate,h=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:hn(l,i),mn(i),h&4&&(Ya(3,i,i.return),Od(3,i),Ya(5,i,i.return));break;case 1:hn(l,i),mn(i),h&512&&(Qt||d===null||Nr(d,d.return)),h&64&&ia&&(i=i.updateQueue,i!==null&&(h=i.callbacks,h!==null&&(d=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=d===null?h:d.concat(h))));break;case 26:var p=Xn;if(hn(l,i),mn(i),h&512&&(Qt||d===null||Nr(d,d.return)),h&4){var b=d!==null?d.memoizedState:null;if(h=i.memoizedState,d===null)if(h===null)if(i.stateNode===null){e:{h=i.type,d=i.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":b=p.getElementsByTagName("title")[0],(!b||b[Ji]||b[is]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=p.createElement(h),p.head.insertBefore(b,p.querySelector("head > title"))),_s(b,h,d),b[is]=i,Gt(b),h=b;break e;case"link":var T=Yj("link","href",p).get(h+(d.href||""));if(T){for(var U=0;U<T.length;U++)if(b=T[U],b.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&b.getAttribute("rel")===(d.rel==null?null:d.rel)&&b.getAttribute("title")===(d.title==null?null:d.title)&&b.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(U,1);break t}}b=p.createElement(h),_s(b,h,d),p.head.appendChild(b);break;case"meta":if(T=Yj("meta","content",p).get(h+(d.content||""))){for(U=0;U<T.length;U++)if(b=T[U],b.getAttribute("content")===(d.content==null?null:""+d.content)&&b.getAttribute("name")===(d.name==null?null:d.name)&&b.getAttribute("property")===(d.property==null?null:d.property)&&b.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&b.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(U,1);break t}}b=p.createElement(h),_s(b,h,d),p.head.appendChild(b);break;default:throw Error(r(468,h))}b[is]=i,Gt(b),h=b}i.stateNode=h}else Kj(p,i.type,i.stateNode);else i.stateNode=Qj(p,h,i.memoizedProps);else b!==h?(b===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):b.count--,h===null?Kj(p,i.type,i.stateNode):Qj(p,h,i.memoizedProps)):h===null&&i.stateNode!==null&&u0(i,i.memoizedProps,d.memoizedProps)}break;case 27:hn(l,i),mn(i),h&512&&(Qt||d===null||Nr(d,d.return)),d!==null&&h&4&&u0(i,i.memoizedProps,d.memoizedProps);break;case 5:if(hn(l,i),mn(i),h&512&&(Qt||d===null||Nr(d,d.return)),i.flags&32){p=i.stateNode;try{Cn(p,"")}catch(se){jt(i,i.return,se)}}h&4&&i.stateNode!=null&&(p=i.memoizedProps,u0(i,p,d!==null?d.memoizedProps:p)),h&1024&&(f0=!0);break;case 6:if(hn(l,i),mn(i),h&4){if(i.stateNode===null)throw Error(r(162));h=i.memoizedProps,d=i.stateNode;try{d.nodeValue=h}catch(se){jt(i,i.return,se)}}break;case 3:if(ym=null,p=Xn,Xn=xm(l.containerInfo),hn(l,i),Xn=p,mn(i),h&4&&d!==null&&d.memoizedState.isDehydrated)try{eu(l.containerInfo)}catch(se){jt(i,i.return,se)}f0&&(f0=!1,sj(i));break;case 4:h=Xn,Xn=xm(i.stateNode.containerInfo),hn(l,i),mn(i),Xn=h;break;case 12:hn(l,i),mn(i);break;case 13:hn(l,i),mn(i),i.child.flags&8192&&i.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(N0=Sn()),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,g0(i,h)));break;case 22:p=i.memoizedState!==null;var $=d!==null&&d.memoizedState!==null,J=ia,le=Qt;if(ia=J||p,Qt=le||$,hn(l,i),Qt=le,ia=J,mn(i),h&8192)e:for(l=i.stateNode,l._visibility=p?l._visibility&-2:l._visibility|1,p&&(d===null||$||ia||Qt||_l(i)),d=null,l=i;;){if(l.tag===5||l.tag===26){if(d===null){$=d=l;try{if(b=$.stateNode,p)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{U=$.stateNode;var he=$.memoizedProps.style,te=he!=null&&he.hasOwnProperty("display")?he.display:null;U.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(se){jt($,$.return,se)}}}else if(l.tag===6){if(d===null){$=l;try{$.stateNode.nodeValue=p?"":$.memoizedProps}catch(se){jt($,$.return,se)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===i)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===i)break e;for(;l.sibling===null;){if(l.return===null||l.return===i)break e;d===l&&(d=null),l=l.return}d===l&&(d=null),l.sibling.return=l.return,l=l.sibling}h&4&&(h=i.updateQueue,h!==null&&(d=h.retryQueue,d!==null&&(h.retryQueue=null,g0(i,d))));break;case 19:hn(l,i),mn(i),h&4&&(h=i.updateQueue,h!==null&&(i.updateQueue=null,g0(i,h)));break;case 30:break;case 21:break;default:hn(l,i),mn(i)}}function mn(i){var l=i.flags;if(l&2){try{for(var d,h=i.return;h!==null;){if(Qw(h)){d=h;break}h=h.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var p=d.stateNode,b=h0(i);rm(i,b,p);break;case 5:var T=d.stateNode;d.flags&32&&(Cn(T,""),d.flags&=-33);var U=h0(i);rm(i,U,T);break;case 3:case 4:var $=d.stateNode.containerInfo,J=h0(i);m0(i,J,$);break;default:throw Error(r(161))}}catch(le){jt(i,i.return,le)}i.flags&=-3}l&4096&&(i.flags&=-4097)}function sj(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var l=i;sj(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),i=i.sibling}}function Ka(i,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Xw(i,l.alternate,l),l=l.sibling}function _l(i){for(i=i.child;i!==null;){var l=i;switch(l.tag){case 0:case 11:case 14:case 15:Ya(4,l,l.return),_l(l);break;case 1:Nr(l,l.return);var d=l.stateNode;typeof d.componentWillUnmount=="function"&&Gw(l,l.return,d),_l(l);break;case 27:Gd(l.stateNode);case 26:case 5:Nr(l,l.return),_l(l);break;case 22:l.memoizedState===null&&_l(l);break;case 30:_l(l);break;default:_l(l)}i=i.sibling}}function Xa(i,l,d){for(d=d&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var h=l.alternate,p=i,b=l,T=b.flags;switch(b.tag){case 0:case 11:case 15:Xa(p,b,d),Od(4,b);break;case 1:if(Xa(p,b,d),h=b,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(J){jt(h,h.return,J)}if(h=b,p=h.updateQueue,p!==null){var U=h.stateNode;try{var $=p.shared.hiddenCallbacks;if($!==null)for(p.shared.hiddenCallbacks=null,p=0;p<$.length;p++)DN($[p],U)}catch(J){jt(h,h.return,J)}}d&&T&64&&$w(b),Ld(b,b.return);break;case 27:Yw(b);case 26:case 5:Xa(p,b,d),d&&h===null&&T&4&&Ww(b),Ld(b,b.return);break;case 12:Xa(p,b,d);break;case 13:Xa(p,b,d),d&&T&4&&ej(p,b);break;case 22:b.memoizedState===null&&Xa(p,b,d),Ld(b,b.return);break;case 30:break;default:Xa(p,b,d)}l=l.sibling}}function p0(i,l){var d=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(d=i.memoizedState.cachePool.pool),i=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(i=l.memoizedState.cachePool.pool),i!==d&&(i!=null&&i.refCount++,d!=null&&wd(d))}function x0(i,l){i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&wd(i))}function wr(i,l,d,h){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)nj(i,l,d,h),l=l.sibling}function nj(i,l,d,h){var p=l.flags;switch(l.tag){case 0:case 11:case 15:wr(i,l,d,h),p&2048&&Od(9,l);break;case 1:wr(i,l,d,h);break;case 3:wr(i,l,d,h),p&2048&&(i=null,l.alternate!==null&&(i=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==i&&(l.refCount++,i!=null&&wd(i)));break;case 12:if(p&2048){wr(i,l,d,h),i=l.stateNode;try{var b=l.memoizedProps,T=b.id,U=b.onPostCommit;typeof U=="function"&&U(T,l.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch($){jt(l,l.return,$)}}else wr(i,l,d,h);break;case 13:wr(i,l,d,h);break;case 23:break;case 22:b=l.stateNode,T=l.alternate,l.memoizedState!==null?b._visibility&2?wr(i,l,d,h):Vd(i,l):b._visibility&2?wr(i,l,d,h):(b._visibility|=2,$o(i,l,d,h,(l.subtreeFlags&10256)!==0)),p&2048&&p0(T,l);break;case 24:wr(i,l,d,h),p&2048&&x0(l.alternate,l);break;default:wr(i,l,d,h)}}function $o(i,l,d,h,p){for(p=p&&(l.subtreeFlags&10256)!==0,l=l.child;l!==null;){var b=i,T=l,U=d,$=h,J=T.flags;switch(T.tag){case 0:case 11:case 15:$o(b,T,U,$,p),Od(8,T);break;case 23:break;case 22:var le=T.stateNode;T.memoizedState!==null?le._visibility&2?$o(b,T,U,$,p):Vd(b,T):(le._visibility|=2,$o(b,T,U,$,p)),p&&J&2048&&p0(T.alternate,T);break;case 24:$o(b,T,U,$,p),p&&J&2048&&x0(T.alternate,T);break;default:$o(b,T,U,$,p)}l=l.sibling}}function Vd(i,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var d=i,h=l,p=h.flags;switch(h.tag){case 22:Vd(d,h),p&2048&&p0(h.alternate,h);break;case 24:Vd(d,h),p&2048&&x0(h.alternate,h);break;default:Vd(d,h)}l=l.sibling}}var Ud=8192;function Go(i){if(i.subtreeFlags&Ud)for(i=i.child;i!==null;)rj(i),i=i.sibling}function rj(i){switch(i.tag){case 26:Go(i),i.flags&Ud&&i.memoizedState!==null&&W4(Xn,i.memoizedState,i.memoizedProps);break;case 5:Go(i);break;case 3:case 4:var l=Xn;Xn=xm(i.stateNode.containerInfo),Go(i),Xn=l;break;case 22:i.memoizedState===null&&(l=i.alternate,l!==null&&l.memoizedState!==null?(l=Ud,Ud=16777216,Go(i),Ud=l):Go(i));break;default:Go(i)}}function aj(i){var l=i.alternate;if(l!==null&&(i=l.child,i!==null)){l.child=null;do l=i.sibling,i.sibling=null,i=l;while(i!==null)}}function Fd(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var h=l[d];bs=h,lj(h,i)}aj(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)ij(i),i=i.sibling}function ij(i){switch(i.tag){case 0:case 11:case 15:Fd(i),i.flags&2048&&Ya(9,i,i.return);break;case 3:Fd(i);break;case 12:Fd(i);break;case 22:var l=i.stateNode;i.memoizedState!==null&&l._visibility&2&&(i.return===null||i.return.tag!==13)?(l._visibility&=-3,am(i)):Fd(i);break;default:Fd(i)}}function am(i){var l=i.deletions;if((i.flags&16)!==0){if(l!==null)for(var d=0;d<l.length;d++){var h=l[d];bs=h,lj(h,i)}aj(i)}for(i=i.child;i!==null;){switch(l=i,l.tag){case 0:case 11:case 15:Ya(8,l,l.return),am(l);break;case 22:d=l.stateNode,d._visibility&2&&(d._visibility&=-3,am(l));break;default:am(l)}i=i.sibling}}function lj(i,l){for(;bs!==null;){var d=bs;switch(d.tag){case 0:case 11:case 15:Ya(8,d,l);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var h=d.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:wd(d.memoizedState.cache)}if(h=d.child,h!==null)h.return=d,bs=h;else e:for(d=i;bs!==null;){h=bs;var p=h.sibling,b=h.return;if(Zw(h),h===d){bs=null;break e}if(p!==null){p.return=b,bs=p;break e}bs=b}}}var c4={getCacheForType:function(i){var l=Is(cs),d=l.data.get(i);return d===void 0&&(d=i(),l.data.set(i,d)),d}},d4=typeof WeakMap=="function"?WeakMap:Map,pt=0,Et=null,Xe=null,at=0,xt=0,fn=null,Za=!1,Wo=!1,b0=!1,oa=0,Ht=0,Ja=0,Sl=0,y0=0,Ln=0,Qo=0,Bd=null,Zs=null,v0=!1,N0=0,im=1/0,lm=null,ei=null,Es=0,ti=null,Yo=null,Ko=0,w0=0,j0=null,oj=null,Hd=0,E0=null;function gn(){if((pt&2)!==0&&at!==0)return at&-at;if(ee.T!==null){var i=Lo;return i!==0?i:D0()}return Oa()}function cj(){Ln===0&&(Ln=(at&536870912)===0||ut?Xc():536870912);var i=On.current;return i!==null&&(i.flags|=32),Ln}function pn(i,l,d){(i===Et&&(xt===2||xt===9)||i.cancelPendingCommit!==null)&&(Xo(i,0),si(i,at,Ln,!1)),Fr(i,d),((pt&2)===0||i!==Et)&&(i===Et&&((pt&2)===0&&(Sl|=d),Ht===4&&si(i,at,Ln,!1)),jr(i))}function dj(i,l,d){if((pt&6)!==0)throw Error(r(327));var h=!d&&(l&124)===0&&(l&i.expiredLanes)===0||Zi(i,l),p=h?m4(i,l):A0(i,l,!0),b=h;do{if(p===0){Wo&&!h&&si(i,l,0,!1);break}else{if(d=i.current.alternate,b&&!u4(d)){p=A0(i,l,!1),b=!1;continue}if(p===2){if(b=l,i.errorRecoveryDisabledLanes&b)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){l=T;e:{var U=i;p=Bd;var $=U.current.memoizedState.isDehydrated;if($&&(Xo(U,T).flags|=256),T=A0(U,T,!1),T!==2){if(b0&&!$){U.errorRecoveryDisabledLanes|=b,Sl|=b,p=4;break e}b=Zs,Zs=p,b!==null&&(Zs===null?Zs=b:Zs.push.apply(Zs,b))}p=T}if(b=!1,p!==2)continue}}if(p===1){Xo(i,0),si(i,l,0,!0);break}e:{switch(h=i,b=p,b){case 0:case 1:throw Error(r(345));case 4:if((l&4194048)!==l)break;case 6:si(h,l,Ln,!Za);break e;case 2:Zs=null;break;case 3:case 5:break;default:throw Error(r(329))}if((l&62914560)===l&&(p=N0+300-Sn(),10<p)){if(si(h,l,Ln,!Za),fo(h,0,!0)!==0)break e;h.timeoutHandle=Uj(uj.bind(null,h,d,Zs,lm,v0,l,Ln,Sl,Qo,Za,b,2,-0,0),p);break e}uj(h,d,Zs,lm,v0,l,Ln,Sl,Qo,Za,b,0,-0,0)}}break}while(!0);jr(i)}function uj(i,l,d,h,p,b,T,U,$,J,le,he,te,se){if(i.timeoutHandle=-1,he=l.subtreeFlags,(he&8192||(he&16785408)===16785408)&&(Yd={stylesheets:null,count:0,unsuspend:G4},rj(l),he=Q4(),he!==null)){i.cancelPendingCommit=he(bj.bind(null,i,l,b,d,h,p,T,U,$,le,1,te,se)),si(i,b,T,!J);return}bj(i,l,b,d,h,p,T,U,$)}function u4(i){for(var l=i;;){var d=l.tag;if((d===0||d===11||d===15)&&l.flags&16384&&(d=l.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var h=0;h<d.length;h++){var p=d[h],b=p.getSnapshot;p=p.value;try{if(!dn(b(),p))return!1}catch{return!1}}if(d=l.child,l.subtreeFlags&16384&&d!==null)d.return=l,l=d;else{if(l===i)break;for(;l.sibling===null;){if(l.return===null||l.return===i)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function si(i,l,d,h){l&=~y0,l&=~Sl,i.suspendedLanes|=l,i.pingedLanes&=~l,h&&(i.warmLanes|=l),h=i.expirationTimes;for(var p=l;0<p;){var b=31-Ds(p),T=1<<b;h[b]=-1,p&=~T}d!==0&&or(i,d,l)}function om(){return(pt&6)===0?(zd(0),!1):!0}function _0(){if(Xe!==null){if(xt===0)var i=Xe.return;else i=Xe,ea=vl=null,Hp(i),zo=null,kd=0,i=Xe;for(;i!==null;)qw(i.alternate,i),i=i.return;Xe=null}}function Xo(i,l){var d=i.timeoutHandle;d!==-1&&(i.timeoutHandle=-1,T4(d)),d=i.cancelPendingCommit,d!==null&&(i.cancelPendingCommit=null,d()),_0(),Et=i,Xe=d=Xr(i.current,null),at=l,xt=0,fn=null,Za=!1,Wo=Zi(i,l),b0=!1,Qo=Ln=y0=Sl=Ja=Ht=0,Zs=Bd=null,v0=!1,(l&8)!==0&&(l|=l&32);var h=i.entangledLanes;if(h!==0)for(i=i.entanglements,h&=l;0<h;){var p=31-Ds(h),b=1<<p;l|=i[p],h&=~b}return oa=l,Rh(),d}function hj(i,l){We=null,ee.H=Yh,l===Ed||l===Uh?(l=TN(),xt=3):l===SN?(l=TN(),xt=4):xt=l===Rw?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,fn=l,Xe===null&&(Ht=1,em(i,In(l,i.current)))}function mj(){var i=ee.H;return ee.H=Yh,i===null?Yh:i}function fj(){var i=ee.A;return ee.A=c4,i}function S0(){Ht=4,Za||(at&4194048)!==at&&On.current!==null||(Wo=!0),(Ja&134217727)===0&&(Sl&134217727)===0||Et===null||si(Et,at,Ln,!1)}function A0(i,l,d){var h=pt;pt|=2;var p=mj(),b=fj();(Et!==i||at!==l)&&(lm=null,Xo(i,l)),l=!1;var T=Ht;e:do try{if(xt!==0&&Xe!==null){var U=Xe,$=fn;switch(xt){case 8:_0(),T=6;break e;case 3:case 2:case 9:case 6:On.current===null&&(l=!0);var J=xt;if(xt=0,fn=null,Zo(i,U,$,J),d&&Wo){T=0;break e}break;default:J=xt,xt=0,fn=null,Zo(i,U,$,J)}}h4(),T=Ht;break}catch(le){hj(i,le)}while(!0);return l&&i.shellSuspendCounter++,ea=vl=null,pt=h,ee.H=p,ee.A=b,Xe===null&&(Et=null,at=0,Rh()),T}function h4(){for(;Xe!==null;)gj(Xe)}function m4(i,l){var d=pt;pt|=2;var h=mj(),p=fj();Et!==i||at!==l?(lm=null,im=Sn()+500,Xo(i,l)):Wo=Zi(i,l);e:do try{if(xt!==0&&Xe!==null){l=Xe;var b=fn;t:switch(xt){case 1:xt=0,fn=null,Zo(i,l,b,1);break;case 2:case 9:if(AN(b)){xt=0,fn=null,pj(l);break}l=function(){xt!==2&&xt!==9||Et!==i||(xt=7),jr(i)},b.then(l,l);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:AN(b)?(xt=0,fn=null,pj(l)):(xt=0,fn=null,Zo(i,l,b,7));break;case 5:var T=null;switch(Xe.tag){case 26:T=Xe.memoizedState;case 5:case 27:var U=Xe;if(!T||Xj(T)){xt=0,fn=null;var $=U.sibling;if($!==null)Xe=$;else{var J=U.return;J!==null?(Xe=J,cm(J)):Xe=null}break t}}xt=0,fn=null,Zo(i,l,b,5);break;case 6:xt=0,fn=null,Zo(i,l,b,6);break;case 8:_0(),Ht=6;break e;default:throw Error(r(462))}}f4();break}catch(le){hj(i,le)}while(!0);return ea=vl=null,ee.H=h,ee.A=p,pt=d,Xe!==null?0:(Et=null,at=0,Rh(),Ht)}function f4(){for(;Xe!==null&&!Wc();)gj(Xe)}function gj(i){var l=Hw(i.alternate,i,oa);i.memoizedProps=i.pendingProps,l===null?cm(i):Xe=l}function pj(i){var l=i,d=l.alternate;switch(l.tag){case 15:case 0:l=Ow(d,l,l.pendingProps,l.type,void 0,at);break;case 11:l=Ow(d,l,l.pendingProps,l.type.render,l.ref,at);break;case 5:Hp(l);default:qw(d,l),l=Xe=xN(l,oa),l=Hw(d,l,oa)}i.memoizedProps=i.pendingProps,l===null?cm(i):Xe=l}function Zo(i,l,d,h){ea=vl=null,Hp(l),zo=null,kd=0;var p=l.return;try{if(n4(i,p,l,d,at)){Ht=1,em(i,In(d,i.current)),Xe=null;return}}catch(b){if(p!==null)throw Xe=p,b;Ht=1,em(i,In(d,i.current)),Xe=null;return}l.flags&32768?(ut||h===1?i=!0:Wo||(at&536870912)!==0?i=!1:(Za=i=!0,(h===2||h===9||h===3||h===6)&&(h=On.current,h!==null&&h.tag===13&&(h.flags|=16384))),xj(l,i)):cm(l)}function cm(i){var l=i;do{if((l.flags&32768)!==0){xj(l,Za);return}i=l.return;var d=a4(l.alternate,l,oa);if(d!==null){Xe=d;return}if(l=l.sibling,l!==null){Xe=l;return}Xe=l=i}while(l!==null);Ht===0&&(Ht=5)}function xj(i,l){do{var d=i4(i.alternate,i);if(d!==null){d.flags&=32767,Xe=d;return}if(d=i.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!l&&(i=i.sibling,i!==null)){Xe=i;return}Xe=i=d}while(i!==null);Ht=6,Xe=null}function bj(i,l,d,h,p,b,T,U,$){i.cancelPendingCommit=null;do dm();while(Es!==0);if((pt&6)!==0)throw Error(r(327));if(l!==null){if(l===i.current)throw Error(r(177));if(b=l.lanes|l.childLanes,b|=xp,Jc(i,d,b,T,U,$),i===Et&&(Xe=Et=null,at=0),Yo=l,ti=i,Ko=d,w0=b,j0=p,oj=h,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,b4(Qi,function(){return jj(),null})):(i.callbackNode=null,i.callbackPriority=0),h=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||h){h=ee.T,ee.T=null,p=fe.p,fe.p=2,T=pt,pt|=4;try{l4(i,l,d)}finally{pt=T,fe.p=p,ee.T=h}}Es=1,yj(),vj(),Nj()}}function yj(){if(Es===1){Es=0;var i=ti,l=Yo,d=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||d){d=ee.T,ee.T=null;var h=fe.p;fe.p=2;var p=pt;pt|=4;try{tj(l,i);var b=U0,T=lN(i.containerInfo),U=b.focusedElem,$=b.selectionRange;if(T!==U&&U&&U.ownerDocument&&iN(U.ownerDocument.documentElement,U)){if($!==null&&hp(U)){var J=$.start,le=$.end;if(le===void 0&&(le=J),"selectionStart"in U)U.selectionStart=J,U.selectionEnd=Math.min(le,U.value.length);else{var he=U.ownerDocument||document,te=he&&he.defaultView||window;if(te.getSelection){var se=te.getSelection(),Ue=U.textContent.length,ke=Math.min($.start,Ue),Nt=$.end===void 0?ke:Math.min($.end,Ue);!se.extend&&ke>Nt&&(T=Nt,Nt=ke,ke=T);var K=aN(U,ke),Y=aN(U,Nt);if(K&&Y&&(se.rangeCount!==1||se.anchorNode!==K.node||se.anchorOffset!==K.offset||se.focusNode!==Y.node||se.focusOffset!==Y.offset)){var Z=he.createRange();Z.setStart(K.node,K.offset),se.removeAllRanges(),ke>Nt?(se.addRange(Z),se.extend(Y.node,Y.offset)):(Z.setEnd(Y.node,Y.offset),se.addRange(Z))}}}}for(he=[],se=U;se=se.parentNode;)se.nodeType===1&&he.push({element:se,left:se.scrollLeft,top:se.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<he.length;U++){var ce=he[U];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}wm=!!V0,U0=V0=null}finally{pt=p,fe.p=h,ee.T=d}}i.current=l,Es=2}}function vj(){if(Es===2){Es=0;var i=ti,l=Yo,d=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||d){d=ee.T,ee.T=null;var h=fe.p;fe.p=2;var p=pt;pt|=4;try{Xw(i,l.alternate,l)}finally{pt=p,fe.p=h,ee.T=d}}Es=3}}function Nj(){if(Es===4||Es===3){Es=0,ah();var i=ti,l=Yo,d=Ko,h=oj;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Es=5:(Es=0,Yo=ti=null,wj(i,i.pendingLanes));var p=i.pendingLanes;if(p===0&&(ei=null),go(d),l=l.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(Ft,l,void 0,(l.current.flags&128)===128)}catch{}if(h!==null){l=ee.T,p=fe.p,fe.p=2,ee.T=null;try{for(var b=i.onRecoverableError,T=0;T<h.length;T++){var U=h[T];b(U.value,{componentStack:U.stack})}}finally{ee.T=l,fe.p=p}}(Ko&3)!==0&&dm(),jr(i),p=i.pendingLanes,(d&4194090)!==0&&(p&42)!==0?i===E0?Hd++:(Hd=0,E0=i):Hd=0,zd(0)}}function wj(i,l){(i.pooledCacheLanes&=l)===0&&(l=i.pooledCache,l!=null&&(i.pooledCache=null,wd(l)))}function dm(i){return yj(),vj(),Nj(),jj()}function jj(){if(Es!==5)return!1;var i=ti,l=w0;w0=0;var d=go(Ko),h=ee.T,p=fe.p;try{fe.p=32>d?32:d,ee.T=null,d=j0,j0=null;var b=ti,T=Ko;if(Es=0,Yo=ti=null,Ko=0,(pt&6)!==0)throw Error(r(331));var U=pt;if(pt|=4,ij(b.current),nj(b,b.current,T,d),pt=U,zd(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(Ft,b)}catch{}return!0}finally{fe.p=p,ee.T=h,wj(i,l)}}function Ej(i,l,d){l=In(d,l),l=s0(i.stateNode,l,2),i=$a(i,l,2),i!==null&&(Fr(i,2),jr(i))}function jt(i,l,d){if(i.tag===3)Ej(i,i,d);else for(;l!==null;){if(l.tag===3){Ej(l,i,d);break}else if(l.tag===1){var h=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(ei===null||!ei.has(h))){i=In(d,i),d=Cw(2),h=$a(l,d,2),h!==null&&(Tw(d,h,l,i),Fr(h,2),jr(h));break}}l=l.return}}function C0(i,l,d){var h=i.pingCache;if(h===null){h=i.pingCache=new d4;var p=new Set;h.set(l,p)}else p=h.get(l),p===void 0&&(p=new Set,h.set(l,p));p.has(d)||(b0=!0,p.add(d),i=g4.bind(null,i,l,d),l.then(i,i))}function g4(i,l,d){var h=i.pingCache;h!==null&&h.delete(l),i.pingedLanes|=i.suspendedLanes&d,i.warmLanes&=~d,Et===i&&(at&d)===d&&(Ht===4||Ht===3&&(at&62914560)===at&&300>Sn()-N0?(pt&2)===0&&Xo(i,0):y0|=d,Qo===at&&(Qo=0)),jr(i)}function _j(i,l){l===0&&(l=Zc()),i=ko(i,l),i!==null&&(Fr(i,l),jr(i))}function p4(i){var l=i.memoizedState,d=0;l!==null&&(d=l.retryLane),_j(i,d)}function x4(i,l){var d=0;switch(i.tag){case 13:var h=i.stateNode,p=i.memoizedState;p!==null&&(d=p.retryLane);break;case 19:h=i.stateNode;break;case 22:h=i.stateNode._retryCache;break;default:throw Error(r(314))}h!==null&&h.delete(l),_j(i,d)}function b4(i,l){return Gi(i,l)}var um=null,Jo=null,T0=!1,hm=!1,R0=!1,Al=0;function jr(i){i!==Jo&&i.next===null&&(Jo===null?um=Jo=i:Jo=Jo.next=i),hm=!0,T0||(T0=!0,v4())}function zd(i,l){if(!R0&&hm){R0=!0;do for(var d=!1,h=um;h!==null;){if(i!==0){var p=h.pendingLanes;if(p===0)var b=0;else{var T=h.suspendedLanes,U=h.pingedLanes;b=(1<<31-Ds(42|i)+1)-1,b&=p&~(T&~U),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(d=!0,Tj(h,b))}else b=at,b=fo(h,h===Et?b:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(b&3)===0||Zi(h,b)||(d=!0,Tj(h,b));h=h.next}while(d);R0=!1}}function y4(){Sj()}function Sj(){hm=T0=!1;var i=0;Al!==0&&(C4()&&(i=Al),Al=0);for(var l=Sn(),d=null,h=um;h!==null;){var p=h.next,b=Aj(h,l);b===0?(h.next=null,d===null?um=p:d.next=p,p===null&&(Jo=d)):(d=h,(i!==0||(b&3)!==0)&&(hm=!0)),h=p}zd(i)}function Aj(i,l){for(var d=i.suspendedLanes,h=i.pingedLanes,p=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var T=31-Ds(b),U=1<<T,$=p[T];$===-1?((U&d)===0||(U&h)!==0)&&(p[T]=Kc(U,l)):$<=l&&(i.expiredLanes|=U),b&=~U}if(l=Et,d=at,d=fo(i,i===l?d:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h=i.callbackNode,d===0||i===l&&(xt===2||xt===9)||i.cancelPendingCommit!==null)return h!==null&&h!==null&&Wi(h),i.callbackNode=null,i.callbackPriority=0;if((d&3)===0||Zi(i,d)){if(l=d&-d,l===i.callbackPriority)return l;switch(h!==null&&Wi(h),go(d)){case 2:case 8:d=ho;break;case 32:d=Qi;break;case 268435456:d=mo;break;default:d=Qi}return h=Cj.bind(null,i),d=Gi(d,h),i.callbackPriority=l,i.callbackNode=d,l}return h!==null&&h!==null&&Wi(h),i.callbackPriority=2,i.callbackNode=null,2}function Cj(i,l){if(Es!==0&&Es!==5)return i.callbackNode=null,i.callbackPriority=0,null;var d=i.callbackNode;if(dm()&&i.callbackNode!==d)return null;var h=at;return h=fo(i,i===Et?h:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),h===0?null:(dj(i,h,l),Aj(i,Sn()),i.callbackNode!=null&&i.callbackNode===d?Cj.bind(null,i):null)}function Tj(i,l){if(dm())return null;dj(i,l,!0)}function v4(){R4(function(){(pt&6)!==0?Gi(Qc,y4):Sj()})}function D0(){return Al===0&&(Al=Xc()),Al}function Rj(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:No(""+i)}function Dj(i,l){var d=l.ownerDocument.createElement("input");return d.name=l.name,d.value=l.value,i.id&&d.setAttribute("form",i.id),l.parentNode.insertBefore(d,l),i=new FormData(i),d.parentNode.removeChild(d),i}function N4(i,l,d,h,p){if(l==="submit"&&d&&d.stateNode===p){var b=Rj((p[Xt]||null).action),T=h.submitter;T&&(l=(l=T[Xt]||null)?Rj(l.formAction):T.getAttribute("formAction"),l!==null&&(b=l,T=null));var U=new wo("action","action",null,h,p);i.push({event:U,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Al!==0){var $=T?Dj(p,T):new FormData(p);Xp(d,{pending:!0,data:$,method:p.method,action:b},null,$)}}else typeof b=="function"&&(U.preventDefault(),$=T?Dj(p,T):new FormData(p),Xp(d,{pending:!0,data:$,method:p.method,action:b},b,$))},currentTarget:p}]})}}for(var I0=0;I0<pp.length;I0++){var k0=pp[I0],w4=k0.toLowerCase(),j4=k0[0].toUpperCase()+k0.slice(1);Kn(w4,"on"+j4)}Kn(dN,"onAnimationEnd"),Kn(uN,"onAnimationIteration"),Kn(hN,"onAnimationStart"),Kn("dblclick","onDoubleClick"),Kn("focusin","onFocus"),Kn("focusout","onBlur"),Kn(FR,"onTransitionRun"),Kn(BR,"onTransitionStart"),Kn(HR,"onTransitionCancel"),Kn(mN,"onTransitionEnd"),Hr("onMouseEnter",["mouseout","mouseover"]),Hr("onMouseLeave",["mouseout","mouseover"]),Hr("onPointerEnter",["pointerout","pointerover"]),Hr("onPointerLeave",["pointerout","pointerover"]),Qn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),E4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qd));function Ij(i,l){l=(l&4)!==0;for(var d=0;d<i.length;d++){var h=i[d],p=h.event;h=h.listeners;e:{var b=void 0;if(l)for(var T=h.length-1;0<=T;T--){var U=h[T],$=U.instance,J=U.currentTarget;if(U=U.listener,$!==b&&p.isPropagationStopped())break e;b=U,p.currentTarget=J;try{b(p)}catch(le){Jh(le)}p.currentTarget=null,b=$}else for(T=0;T<h.length;T++){if(U=h[T],$=U.instance,J=U.currentTarget,U=U.listener,$!==b&&p.isPropagationStopped())break e;b=U,p.currentTarget=J;try{b(p)}catch(le){Jh(le)}p.currentTarget=null,b=$}}}}function Ze(i,l){var d=l[td];d===void 0&&(d=l[td]=new Set);var h=i+"__bubble";d.has(h)||(kj(l,i,2,!1),d.add(h))}function M0(i,l,d){var h=0;l&&(h|=4),kj(d,i,h,l)}var mm="_reactListening"+Math.random().toString(36).slice(2);function P0(i){if(!i[mm]){i[mm]=!0,sd.forEach(function(d){d!=="selectionchange"&&(E4.has(d)||M0(d,!1,i),M0(d,!0,i))});var l=i.nodeType===9?i:i.ownerDocument;l===null||l[mm]||(l[mm]=!0,M0("selectionchange",!1,l))}}function kj(i,l,d,h){switch(n1(l)){case 2:var p=X4;break;case 8:p=Z4;break;default:p=Y0}d=p.bind(null,l,d,i),p=void 0,!Rn||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(p=!0),h?p!==void 0?i.addEventListener(l,d,{capture:!0,passive:p}):i.addEventListener(l,d,!0):p!==void 0?i.addEventListener(l,d,{passive:p}):i.addEventListener(l,d,!1)}function O0(i,l,d,h,p){var b=h;if((l&1)===0&&(l&2)===0&&h!==null)e:for(;;){if(h===null)return;var T=h.tag;if(T===3||T===4){var U=h.stateNode.containerInfo;if(U===p)break;if(T===4)for(T=h.return;T!==null;){var $=T.tag;if(($===3||$===4)&&T.stateNode.containerInfo===p)return;T=T.return}for(;U!==null;){if(T=Br(U),T===null)return;if($=T.tag,$===5||$===6||$===26||$===27){h=b=T;continue e}U=U.parentNode}}h=h.return}gh(function(){var J=b,le=Tn(d),he=[];e:{var te=fN.get(i);if(te!==void 0){var se=wo,Ue=i;switch(i){case"keypress":if(fr(d)===0)break e;case"keydown":case"keyup":se=Co;break;case"focusin":Ue="focus",se=_o;break;case"focusout":Ue="blur",se=_o;break;case"beforeblur":case"afterblur":se=_o;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":se=Dn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":se=op;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":se=jh;break;case dN:case uN:case hN:se=So;break;case mN:se=_h;break;case"scroll":case"scrollend":se=ph;break;case"wheel":se=To;break;case"copy":case"cut":case"paste":se=Ao;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":se=fd;break;case"toggle":case"beforetoggle":se=Ah}var ke=(l&4)!==0,Nt=!ke&&(i==="scroll"||i==="scrollend"),K=ke?te!==null?te+"Capture":null:te;ke=[];for(var Y=J,Z;Y!==null;){var ce=Y;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||K===null||(ce=il(Y,K),ce!=null&&ke.push($d(Y,ce,Z))),Nt)break;Y=Y.return}0<ke.length&&(te=new se(te,Ue,null,d,le),he.push({event:te,listeners:ke}))}}if((l&7)===0){e:{if(te=i==="mouseover"||i==="pointerover",se=i==="mouseout"||i==="pointerout",te&&d!==$r&&(Ue=d.relatedTarget||d.fromElement)&&(Br(Ue)||Ue[An]))break e;if((se||te)&&(te=le.window===le?le:(te=le.ownerDocument)?te.defaultView||te.parentWindow:window,se?(Ue=d.relatedTarget||d.toElement,se=J,Ue=Ue?Br(Ue):null,Ue!==null&&(Nt=o(Ue),ke=Ue.tag,Ue!==Nt||ke!==5&&ke!==27&&ke!==6)&&(Ue=null)):(se=null,Ue=J),se!==Ue)){if(ke=Dn,ce="onMouseLeave",K="onMouseEnter",Y="mouse",(i==="pointerout"||i==="pointerover")&&(ke=fd,ce="onPointerLeave",K="onPointerEnter",Y="pointer"),Nt=se==null?te:dr(se),Z=Ue==null?te:dr(Ue),te=new ke(ce,Y+"leave",se,d,le),te.target=Nt,te.relatedTarget=Z,ce=null,Br(le)===J&&(ke=new ke(K,Y+"enter",Ue,d,le),ke.target=Z,ke.relatedTarget=Nt,ce=ke),Nt=ce,se&&Ue)t:{for(ke=se,K=Ue,Y=0,Z=ke;Z;Z=ec(Z))Y++;for(Z=0,ce=K;ce;ce=ec(ce))Z++;for(;0<Y-Z;)ke=ec(ke),Y--;for(;0<Z-Y;)K=ec(K),Z--;for(;Y--;){if(ke===K||K!==null&&ke===K.alternate)break t;ke=ec(ke),K=ec(K)}ke=null}else ke=null;se!==null&&Mj(he,te,se,ke,!1),Ue!==null&&Nt!==null&&Mj(he,Nt,Ue,ke,!0)}}e:{if(te=J?dr(J):window,se=te.nodeName&&te.nodeName.toLowerCase(),se==="select"||se==="input"&&te.type==="file")var Ae=Jv;else if(os(te))if(eN)Ae=LR;else{Ae=PR;var Ye=MR}else se=te.nodeName,!se||se.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&ld(J.elementType)&&(Ae=Jv):Ae=OR;if(Ae&&(Ae=Ae(i,J))){Kr(he,Ae,d,le);break e}Ye&&Ye(i,te,J),i==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Fa(te,"number",te.value)}switch(Ye=J?dr(J):window,i){case"focusin":(os(Ye)||Ye.contentEditable==="true")&&(Ro=Ye,mp=J,xd=null);break;case"focusout":xd=mp=Ro=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,oN(he,d,le);break;case"selectionchange":if(UR)break;case"keydown":case"keyup":oN(he,d,le)}var Te;if(xr)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else nt?ae(i,d)&&(Pe="onCompositionEnd"):i==="keydown"&&d.keyCode===229&&(Pe="onCompositionStart");Pe&&(A&&d.locale!=="ko"&&(nt||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&nt&&(Te=cd()):(mr=le,Ba="value"in mr?mr.value:mr.textContent,nt=!0)),Ye=fm(J,Pe),0<Ye.length&&(Pe=new hd(Pe,i,null,d,le),he.push({event:Pe,listeners:Ye}),Te?Pe.data=Te:(Te=xe(d),Te!==null&&(Pe.data=Te)))),(Te=j?ls(i,d):rt(i,d))&&(Pe=fm(J,"onBeforeInput"),0<Pe.length&&(Ye=new hd("onBeforeInput","beforeinput",null,d,le),he.push({event:Ye,listeners:Pe}),Ye.data=Te)),N4(he,i,J,d,le)}Ij(he,l)})}function $d(i,l,d){return{instance:i,listener:l,currentTarget:d}}function fm(i,l){for(var d=l+"Capture",h=[];i!==null;){var p=i,b=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||b===null||(p=il(i,d),p!=null&&h.unshift($d(i,p,b)),p=il(i,l),p!=null&&h.push($d(i,p,b))),i.tag===3)return h;i=i.return}return[]}function ec(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function Mj(i,l,d,h,p){for(var b=l._reactName,T=[];d!==null&&d!==h;){var U=d,$=U.alternate,J=U.stateNode;if(U=U.tag,$!==null&&$===h)break;U!==5&&U!==26&&U!==27||J===null||($=J,p?(J=il(d,b),J!=null&&T.unshift($d(d,J,$))):p||(J=il(d,b),J!=null&&T.push($d(d,J,$)))),d=d.return}T.length!==0&&i.push({event:l,listeners:T})}var _4=/\r\n?/g,S4=/\u0000|\uFFFD/g;function Pj(i){return(typeof i=="string"?i:""+i).replace(_4,`
`).replace(S4,"")}function Oj(i,l){return l=Pj(l),Pj(i)===l}function gm(){}function vt(i,l,d,h,p,b){switch(d){case"children":typeof h=="string"?l==="body"||l==="textarea"&&h===""||Cn(i,h):(typeof h=="number"||typeof h=="bigint")&&l!=="body"&&Cn(i,""+h);break;case"className":ur(i,"class",h);break;case"tabIndex":ur(i,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":ur(i,d,h);break;case"style":id(i,h,b);break;case"data":if(l!=="object"){ur(i,"data",h);break}case"src":case"href":if(h===""&&(l!=="a"||d!=="href")){i.removeAttribute(d);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(d);break}h=No(""+h),i.setAttribute(d,h);break;case"action":case"formAction":if(typeof h=="function"){i.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(d==="formAction"?(l!=="input"&&vt(i,l,"name",p.name,p,null),vt(i,l,"formEncType",p.formEncType,p,null),vt(i,l,"formMethod",p.formMethod,p,null),vt(i,l,"formTarget",p.formTarget,p,null)):(vt(i,l,"encType",p.encType,p,null),vt(i,l,"method",p.method,p,null),vt(i,l,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){i.removeAttribute(d);break}h=No(""+h),i.setAttribute(d,h);break;case"onClick":h!=null&&(i.onclick=gm);break;case"onScroll":h!=null&&Ze("scroll",i);break;case"onScrollEnd":h!=null&&Ze("scrollend",i);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(d=h.__html,d!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"multiple":i.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":i.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){i.removeAttribute("xlink:href");break}d=No(""+h),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(d,""+h):i.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(d,""):i.removeAttribute(d);break;case"capture":case"download":h===!0?i.setAttribute(d,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?i.setAttribute(d,h):i.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?i.setAttribute(d,h):i.removeAttribute(d);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?i.removeAttribute(d):i.setAttribute(d,h);break;case"popover":Ze("beforetoggle",i),Ze("toggle",i),Ua(i,"popover",h);break;case"xlinkActuate":Ns(i,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ns(i,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ns(i,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ns(i,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ns(i,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ns(i,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ns(i,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ns(i,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ns(i,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ua(i,"is",h);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=ip.get(d)||d,Ua(i,d,h))}}function L0(i,l,d,h,p,b){switch(d){case"style":id(i,h,b);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(r(61));if(d=h.__html,d!=null){if(p.children!=null)throw Error(r(60));i.innerHTML=d}}break;case"children":typeof h=="string"?Cn(i,h):(typeof h=="number"||typeof h=="bigint")&&Cn(i,""+h);break;case"onScroll":h!=null&&Ze("scroll",i);break;case"onScrollEnd":h!=null&&Ze("scrollend",i);break;case"onClick":h!=null&&(i.onclick=gm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!po.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(p=d.endsWith("Capture"),l=d.slice(2,p?d.length-7:void 0),b=i[Xt]||null,b=b!=null?b[d]:null,typeof b=="function"&&i.removeEventListener(l,b,p),typeof h=="function")){typeof b!="function"&&b!==null&&(d in i?i[d]=null:i.hasAttribute(d)&&i.removeAttribute(d)),i.addEventListener(l,h,p);break e}d in i?i[d]=h:h===!0?i.setAttribute(d,""):Ua(i,d,h)}}}function _s(i,l,d){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ze("error",i),Ze("load",i);var h=!1,p=!1,b;for(b in d)if(d.hasOwnProperty(b)){var T=d[b];if(T!=null)switch(b){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vt(i,l,b,T,d,null)}}p&&vt(i,l,"srcSet",d.srcSet,d,null),h&&vt(i,l,"src",d.src,d,null);return;case"input":Ze("invalid",i);var U=b=T=p=null,$=null,J=null;for(h in d)if(d.hasOwnProperty(h)){var le=d[h];if(le!=null)switch(h){case"name":p=le;break;case"type":T=le;break;case"checked":$=le;break;case"defaultChecked":J=le;break;case"value":b=le;break;case"defaultValue":U=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,l));break;default:vt(i,l,h,le,d,null)}}nl(i,b,U,$,J,T,p,!1),vo(i);return;case"select":Ze("invalid",i),h=T=b=null;for(p in d)if(d.hasOwnProperty(p)&&(U=d[p],U!=null))switch(p){case"value":b=U;break;case"defaultValue":T=U;break;case"multiple":h=U;default:vt(i,l,p,U,d,null)}l=b,d=T,i.multiple=!!h,l!=null?qr(i,!!h,l,!1):d!=null&&qr(i,!!h,d,!0);return;case"textarea":Ze("invalid",i),b=p=h=null;for(T in d)if(d.hasOwnProperty(T)&&(U=d[T],U!=null))switch(T){case"value":h=U;break;case"defaultValue":p=U;break;case"children":b=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(r(91));break;default:vt(i,l,T,U,d,null)}rl(i,h,p,b),vo(i);return;case"option":for($ in d)if(d.hasOwnProperty($)&&(h=d[$],h!=null))switch($){case"selected":i.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:vt(i,l,$,h,d,null)}return;case"dialog":Ze("beforetoggle",i),Ze("toggle",i),Ze("cancel",i),Ze("close",i);break;case"iframe":case"object":Ze("load",i);break;case"video":case"audio":for(h=0;h<qd.length;h++)Ze(qd[h],i);break;case"image":Ze("error",i),Ze("load",i);break;case"details":Ze("toggle",i);break;case"embed":case"source":case"link":Ze("error",i),Ze("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in d)if(d.hasOwnProperty(J)&&(h=d[J],h!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,l));default:vt(i,l,J,h,d,null)}return;default:if(ld(l)){for(le in d)d.hasOwnProperty(le)&&(h=d[le],h!==void 0&&L0(i,l,le,h,d,void 0));return}}for(U in d)d.hasOwnProperty(U)&&(h=d[U],h!=null&&vt(i,l,U,h,d,null))}function A4(i,l,d,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,b=null,T=null,U=null,$=null,J=null,le=null;for(se in d){var he=d[se];if(d.hasOwnProperty(se)&&he!=null)switch(se){case"checked":break;case"value":break;case"defaultValue":$=he;default:h.hasOwnProperty(se)||vt(i,l,se,null,h,he)}}for(var te in h){var se=h[te];if(he=d[te],h.hasOwnProperty(te)&&(se!=null||he!=null))switch(te){case"type":b=se;break;case"name":p=se;break;case"checked":J=se;break;case"defaultChecked":le=se;break;case"value":T=se;break;case"defaultValue":U=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,l));break;default:se!==he&&vt(i,l,te,se,h,he)}}cn(i,T,U,$,J,le,b,p);return;case"select":se=T=U=te=null;for(b in d)if($=d[b],d.hasOwnProperty(b)&&$!=null)switch(b){case"value":break;case"multiple":se=$;default:h.hasOwnProperty(b)||vt(i,l,b,null,h,$)}for(p in h)if(b=h[p],$=d[p],h.hasOwnProperty(p)&&(b!=null||$!=null))switch(p){case"value":te=b;break;case"defaultValue":U=b;break;case"multiple":T=b;default:b!==$&&vt(i,l,p,b,h,$)}l=U,d=T,h=se,te!=null?qr(i,!!d,te,!1):!!h!=!!d&&(l!=null?qr(i,!!d,l,!0):qr(i,!!d,d?[]:"",!1));return;case"textarea":se=te=null;for(U in d)if(p=d[U],d.hasOwnProperty(U)&&p!=null&&!h.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:vt(i,l,U,null,h,p)}for(T in h)if(p=h[T],b=d[T],h.hasOwnProperty(T)&&(p!=null||b!=null))switch(T){case"value":te=p;break;case"defaultValue":se=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(r(91));break;default:p!==b&&vt(i,l,T,p,h,b)}bt(i,te,se);return;case"option":for(var Ue in d)if(te=d[Ue],d.hasOwnProperty(Ue)&&te!=null&&!h.hasOwnProperty(Ue))switch(Ue){case"selected":i.selected=!1;break;default:vt(i,l,Ue,null,h,te)}for($ in h)if(te=h[$],se=d[$],h.hasOwnProperty($)&&te!==se&&(te!=null||se!=null))switch($){case"selected":i.selected=te&&typeof te!="function"&&typeof te!="symbol";break;default:vt(i,l,$,te,h,se)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in d)te=d[ke],d.hasOwnProperty(ke)&&te!=null&&!h.hasOwnProperty(ke)&&vt(i,l,ke,null,h,te);for(J in h)if(te=h[J],se=d[J],h.hasOwnProperty(J)&&te!==se&&(te!=null||se!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,l));break;default:vt(i,l,J,te,h,se)}return;default:if(ld(l)){for(var Nt in d)te=d[Nt],d.hasOwnProperty(Nt)&&te!==void 0&&!h.hasOwnProperty(Nt)&&L0(i,l,Nt,void 0,h,te);for(le in h)te=h[le],se=d[le],!h.hasOwnProperty(le)||te===se||te===void 0&&se===void 0||L0(i,l,le,te,h,se);return}}for(var K in d)te=d[K],d.hasOwnProperty(K)&&te!=null&&!h.hasOwnProperty(K)&&vt(i,l,K,null,h,te);for(he in h)te=h[he],se=d[he],!h.hasOwnProperty(he)||te===se||te==null&&se==null||vt(i,l,he,te,h,se)}var V0=null,U0=null;function pm(i){return i.nodeType===9?i:i.ownerDocument}function Lj(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vj(i,l){if(i===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&l==="foreignObject"?0:i}function F0(i,l){return i==="textarea"||i==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var B0=null;function C4(){var i=window.event;return i&&i.type==="popstate"?i===B0?!1:(B0=i,!0):(B0=null,!1)}var Uj=typeof setTimeout=="function"?setTimeout:void 0,T4=typeof clearTimeout=="function"?clearTimeout:void 0,Fj=typeof Promise=="function"?Promise:void 0,R4=typeof queueMicrotask=="function"?queueMicrotask:typeof Fj<"u"?function(i){return Fj.resolve(null).then(i).catch(D4)}:Uj;function D4(i){setTimeout(function(){throw i})}function ni(i){return i==="head"}function Bj(i,l){var d=l,h=0,p=0;do{var b=d.nextSibling;if(i.removeChild(d),b&&b.nodeType===8)if(d=b.data,d==="/$"){if(0<h&&8>h){d=h;var T=i.ownerDocument;if(d&1&&Gd(T.documentElement),d&2&&Gd(T.body),d&4)for(d=T.head,Gd(d),T=d.firstChild;T;){var U=T.nextSibling,$=T.nodeName;T[Ji]||$==="SCRIPT"||$==="STYLE"||$==="LINK"&&T.rel.toLowerCase()==="stylesheet"||d.removeChild(T),T=U}}if(p===0){i.removeChild(b),eu(l);return}p--}else d==="$"||d==="$?"||d==="$!"?p++:h=d.charCodeAt(0)-48;else h=0;d=b}while(d);eu(l)}function H0(i){var l=i.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var d=l;switch(l=l.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":H0(d),Va(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}i.removeChild(d)}}function I4(i,l,d,h){for(;i.nodeType===1;){var p=d;if(i.nodeName.toLowerCase()!==l.toLowerCase()){if(!h&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(h){if(!i[Ji])switch(l){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==p.rel||i.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||i.getAttribute("title")!==(p.title==null?null:p.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(p.src==null?null:p.src)||i.getAttribute("type")!==(p.type==null?null:p.type)||i.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(l==="input"&&i.type==="hidden"){var b=p.name==null?null:""+p.name;if(p.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Zn(i.nextSibling),i===null)break}return null}function k4(i,l,d){if(l==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!d||(i=Zn(i.nextSibling),i===null))return null;return i}function z0(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function M4(i,l){var d=i.ownerDocument;if(i.data!=="$?"||d.readyState==="complete")l();else{var h=function(){l(),d.removeEventListener("DOMContentLoaded",h)};d.addEventListener("DOMContentLoaded",h),i._reactRetry=h}}function Zn(i){for(;i!=null;i=i.nextSibling){var l=i.nodeType;if(l===1||l===3)break;if(l===8){if(l=i.data,l==="$"||l==="$!"||l==="$?"||l==="F!"||l==="F")break;if(l==="/$")return null}}return i}var q0=null;function Hj(i){i=i.previousSibling;for(var l=0;i;){if(i.nodeType===8){var d=i.data;if(d==="$"||d==="$!"||d==="$?"){if(l===0)return i;l--}else d==="/$"&&l++}i=i.previousSibling}return null}function zj(i,l,d){switch(l=pm(d),i){case"html":if(i=l.documentElement,!i)throw Error(r(452));return i;case"head":if(i=l.head,!i)throw Error(r(453));return i;case"body":if(i=l.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Gd(i){for(var l=i.attributes;l.length;)i.removeAttributeNode(l[0]);Va(i)}var Vn=new Map,qj=new Set;function xm(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ca=fe.d;fe.d={f:P4,r:O4,D:L4,C:V4,L:U4,m:F4,X:H4,S:B4,M:z4};function P4(){var i=ca.f(),l=om();return i||l}function O4(i){var l=cr(i);l!==null&&l.tag===5&&l.type==="form"?dw(l):ca.r(i)}var tc=typeof document>"u"?null:document;function $j(i,l,d){var h=tc;if(h&&typeof l=="string"&&l){var p=Zt(l);p='link[rel="'+i+'"][href="'+p+'"]',typeof d=="string"&&(p+='[crossorigin="'+d+'"]'),qj.has(p)||(qj.add(p),i={rel:i,crossOrigin:d,href:l},h.querySelector(p)===null&&(l=h.createElement("link"),_s(l,"link",i),Gt(l),h.head.appendChild(l)))}}function L4(i){ca.D(i),$j("dns-prefetch",i,null)}function V4(i,l){ca.C(i,l),$j("preconnect",i,l)}function U4(i,l,d){ca.L(i,l,d);var h=tc;if(h&&i&&l){var p='link[rel="preload"][as="'+Zt(l)+'"]';l==="image"&&d&&d.imageSrcSet?(p+='[imagesrcset="'+Zt(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(p+='[imagesizes="'+Zt(d.imageSizes)+'"]')):p+='[href="'+Zt(i)+'"]';var b=p;switch(l){case"style":b=sc(i);break;case"script":b=nc(i)}Vn.has(b)||(i=x({rel:"preload",href:l==="image"&&d&&d.imageSrcSet?void 0:i,as:l},d),Vn.set(b,i),h.querySelector(p)!==null||l==="style"&&h.querySelector(Wd(b))||l==="script"&&h.querySelector(Qd(b))||(l=h.createElement("link"),_s(l,"link",i),Gt(l),h.head.appendChild(l)))}}function F4(i,l){ca.m(i,l);var d=tc;if(d&&i){var h=l&&typeof l.as=="string"?l.as:"script",p='link[rel="modulepreload"][as="'+Zt(h)+'"][href="'+Zt(i)+'"]',b=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=nc(i)}if(!Vn.has(b)&&(i=x({rel:"modulepreload",href:i},l),Vn.set(b,i),d.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Qd(b)))return}h=d.createElement("link"),_s(h,"link",i),Gt(h),d.head.appendChild(h)}}}function B4(i,l,d){ca.S(i,l,d);var h=tc;if(h&&i){var p=Hs(h).hoistableStyles,b=sc(i);l=l||"default";var T=p.get(b);if(!T){var U={loading:0,preload:null};if(T=h.querySelector(Wd(b)))U.loading=5;else{i=x({rel:"stylesheet",href:i,"data-precedence":l},d),(d=Vn.get(b))&&$0(i,d);var $=T=h.createElement("link");Gt($),_s($,"link",i),$._p=new Promise(function(J,le){$.onload=J,$.onerror=le}),$.addEventListener("load",function(){U.loading|=1}),$.addEventListener("error",function(){U.loading|=2}),U.loading|=4,bm(T,l,h)}T={type:"stylesheet",instance:T,count:1,state:U},p.set(b,T)}}}function H4(i,l){ca.X(i,l);var d=tc;if(d&&i){var h=Hs(d).hoistableScripts,p=nc(i),b=h.get(p);b||(b=d.querySelector(Qd(p)),b||(i=x({src:i,async:!0},l),(l=Vn.get(p))&&G0(i,l),b=d.createElement("script"),Gt(b),_s(b,"link",i),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(p,b))}}function z4(i,l){ca.M(i,l);var d=tc;if(d&&i){var h=Hs(d).hoistableScripts,p=nc(i),b=h.get(p);b||(b=d.querySelector(Qd(p)),b||(i=x({src:i,async:!0,type:"module"},l),(l=Vn.get(p))&&G0(i,l),b=d.createElement("script"),Gt(b),_s(b,"link",i),d.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},h.set(p,b))}}function Gj(i,l,d,h){var p=(p=Se.current)?xm(p):null;if(!p)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(l=sc(d.href),d=Hs(p).hoistableStyles,h=d.get(l),h||(h={type:"style",instance:null,count:0,state:null},d.set(l,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){i=sc(d.href);var b=Hs(p).hoistableStyles,T=b.get(i);if(T||(p=p.ownerDocument||p,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,T),(b=p.querySelector(Wd(i)))&&!b._p&&(T.instance=b,T.state.loading=5),Vn.has(i)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Vn.set(i,d),b||q4(p,i,d,T.state))),l&&h===null)throw Error(r(528,""));return T}if(l&&h!==null)throw Error(r(529,""));return null;case"script":return l=d.async,d=d.src,typeof d=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=nc(d),d=Hs(p).hoistableScripts,h=d.get(l),h||(h={type:"script",instance:null,count:0,state:null},d.set(l,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function sc(i){return'href="'+Zt(i)+'"'}function Wd(i){return'link[rel="stylesheet"]['+i+"]"}function Wj(i){return x({},i,{"data-precedence":i.precedence,precedence:null})}function q4(i,l,d,h){i.querySelector('link[rel="preload"][as="style"]['+l+"]")?h.loading=1:(l=i.createElement("link"),h.preload=l,l.addEventListener("load",function(){return h.loading|=1}),l.addEventListener("error",function(){return h.loading|=2}),_s(l,"link",d),Gt(l),i.head.appendChild(l))}function nc(i){return'[src="'+Zt(i)+'"]'}function Qd(i){return"script[async]"+i}function Qj(i,l,d){if(l.count++,l.instance===null)switch(l.type){case"style":var h=i.querySelector('style[data-href~="'+Zt(d.href)+'"]');if(h)return l.instance=h,Gt(h),h;var p=x({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return h=(i.ownerDocument||i).createElement("style"),Gt(h),_s(h,"style",p),bm(h,d.precedence,i),l.instance=h;case"stylesheet":p=sc(d.href);var b=i.querySelector(Wd(p));if(b)return l.state.loading|=4,l.instance=b,Gt(b),b;h=Wj(d),(p=Vn.get(p))&&$0(h,p),b=(i.ownerDocument||i).createElement("link"),Gt(b);var T=b;return T._p=new Promise(function(U,$){T.onload=U,T.onerror=$}),_s(b,"link",h),l.state.loading|=4,bm(b,d.precedence,i),l.instance=b;case"script":return b=nc(d.src),(p=i.querySelector(Qd(b)))?(l.instance=p,Gt(p),p):(h=d,(p=Vn.get(b))&&(h=x({},d),G0(h,p)),i=i.ownerDocument||i,p=i.createElement("script"),Gt(p),_s(p,"link",h),i.head.appendChild(p),l.instance=p);case"void":return null;default:throw Error(r(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(h=l.instance,l.state.loading|=4,bm(h,d.precedence,i));return l.instance}function bm(i,l,d){for(var h=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,b=p,T=0;T<h.length;T++){var U=h[T];if(U.dataset.precedence===l)b=U;else if(b!==p)break}b?b.parentNode.insertBefore(i,b.nextSibling):(l=d.nodeType===9?d.head:d,l.insertBefore(i,l.firstChild))}function $0(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.title==null&&(i.title=l.title)}function G0(i,l){i.crossOrigin==null&&(i.crossOrigin=l.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=l.referrerPolicy),i.integrity==null&&(i.integrity=l.integrity)}var ym=null;function Yj(i,l,d){if(ym===null){var h=new Map,p=ym=new Map;p.set(d,h)}else p=ym,h=p.get(d),h||(h=new Map,p.set(d,h));if(h.has(i))return h;for(h.set(i,null),d=d.getElementsByTagName(i),p=0;p<d.length;p++){var b=d[p];if(!(b[Ji]||b[is]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(l)||"";T=i+T;var U=h.get(T);U?U.push(b):h.set(T,[b])}}return h}function Kj(i,l,d){i=i.ownerDocument||i,i.head.insertBefore(d,l==="title"?i.querySelector("head > title"):null)}function $4(i,l,d){if(d===1||l.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return i=l.disabled,typeof l.precedence=="string"&&i==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Xj(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var Yd=null;function G4(){}function W4(i,l,d){if(Yd===null)throw Error(r(475));var h=Yd;if(l.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(l.state.loading&4)===0){if(l.instance===null){var p=sc(d.href),b=i.querySelector(Wd(p));if(b){i=b._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(h.count++,h=vm.bind(h),i.then(h,h)),l.state.loading|=4,l.instance=b,Gt(b);return}b=i.ownerDocument||i,d=Wj(d),(p=Vn.get(p))&&$0(d,p),b=b.createElement("link"),Gt(b);var T=b;T._p=new Promise(function(U,$){T.onload=U,T.onerror=$}),_s(b,"link",d),l.instance=b}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(l,i),(i=l.state.preload)&&(l.state.loading&3)===0&&(h.count++,l=vm.bind(h),i.addEventListener("load",l),i.addEventListener("error",l))}}function Q4(){if(Yd===null)throw Error(r(475));var i=Yd;return i.stylesheets&&i.count===0&&W0(i,i.stylesheets),0<i.count?function(l){var d=setTimeout(function(){if(i.stylesheets&&W0(i,i.stylesheets),i.unsuspend){var h=i.unsuspend;i.unsuspend=null,h()}},6e4);return i.unsuspend=l,function(){i.unsuspend=null,clearTimeout(d)}}:null}function vm(){if(this.count--,this.count===0){if(this.stylesheets)W0(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Nm=null;function W0(i,l){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Nm=new Map,l.forEach(Y4,i),Nm=null,vm.call(i))}function Y4(i,l){if(!(l.state.loading&4)){var d=Nm.get(i);if(d)var h=d.get(null);else{d=new Map,Nm.set(i,d);for(var p=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<p.length;b++){var T=p[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),h=T)}h&&d.set(null,h)}p=l.instance,T=p.getAttribute("data-precedence"),b=d.get(T)||h,b===h&&d.set(null,p),d.set(T,p),this.count++,h=vm.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),b?b.parentNode.insertBefore(p,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(p,i.firstChild)),l.state.loading|=4}}var Kd={$$typeof:V,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function K4(i,l,d,h,p,b,T,U){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ur(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ur(0),this.hiddenUpdates=Ur(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function Zj(i,l,d,h,p,b,T,U,$,J,le,he){return i=new K4(i,l,d,T,U,$,J,he),l=1,b===!0&&(l|=24),b=un(3,null,null,l),i.current=b,b.stateNode=i,l=Cp(),l.refCount++,i.pooledCache=l,l.refCount++,b.memoizedState={element:h,isDehydrated:d,cache:l},Ip(b),i}function Jj(i){return i?(i=Mo,i):Mo}function e1(i,l,d,h,p,b){p=Jj(p),h.context===null?h.context=p:h.pendingContext=p,h=qa(l),h.payload={element:d},b=b===void 0?null:b,b!==null&&(h.callback=b),d=$a(i,h,l),d!==null&&(pn(d,i,l),Sd(d,i,l))}function t1(i,l){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var d=i.retryLane;i.retryLane=d!==0&&d<l?d:l}}function Q0(i,l){t1(i,l),(i=i.alternate)&&t1(i,l)}function s1(i){if(i.tag===13){var l=ko(i,67108864);l!==null&&pn(l,i,67108864),Q0(i,67108864)}}var wm=!0;function X4(i,l,d,h){var p=ee.T;ee.T=null;var b=fe.p;try{fe.p=2,Y0(i,l,d,h)}finally{fe.p=b,ee.T=p}}function Z4(i,l,d,h){var p=ee.T;ee.T=null;var b=fe.p;try{fe.p=8,Y0(i,l,d,h)}finally{fe.p=b,ee.T=p}}function Y0(i,l,d,h){if(wm){var p=K0(h);if(p===null)O0(i,l,h,jm,d),r1(i,h);else if(eD(p,i,l,d,h))h.stopPropagation();else if(r1(i,h),l&4&&-1<J4.indexOf(i)){for(;p!==null;){var b=cr(p);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=Wn(b.pendingLanes);if(T!==0){var U=b;for(U.pendingLanes|=2,U.entangledLanes|=2;T;){var $=1<<31-Ds(T);U.entanglements[1]|=$,T&=~$}jr(b),(pt&6)===0&&(im=Sn()+500,zd(0))}}break;case 13:U=ko(b,2),U!==null&&pn(U,b,2),om(),Q0(b,2)}if(b=K0(h),b===null&&O0(i,l,h,jm,d),b===p)break;p=b}p!==null&&h.stopPropagation()}else O0(i,l,h,null,d)}}function K0(i){return i=Tn(i),X0(i)}var jm=null;function X0(i){if(jm=null,i=Br(i),i!==null){var l=o(i);if(l===null)i=null;else{var d=l.tag;if(d===13){if(i=c(l),i!==null)return i;i=null}else if(d===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;i=null}else l!==i&&(i=null)}}return jm=i,null}function n1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ep()){case Qc:return 2;case ho:return 8;case Qi:case tp:return 32;case mo:return 268435456;default:return 32}default:return 32}}var Z0=!1,ri=null,ai=null,ii=null,Xd=new Map,Zd=new Map,li=[],J4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function r1(i,l){switch(i){case"focusin":case"focusout":ri=null;break;case"dragenter":case"dragleave":ai=null;break;case"mouseover":case"mouseout":ii=null;break;case"pointerover":case"pointerout":Xd.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zd.delete(l.pointerId)}}function Jd(i,l,d,h,p,b){return i===null||i.nativeEvent!==b?(i={blockedOn:l,domEventName:d,eventSystemFlags:h,nativeEvent:b,targetContainers:[p]},l!==null&&(l=cr(l),l!==null&&s1(l)),i):(i.eventSystemFlags|=h,l=i.targetContainers,p!==null&&l.indexOf(p)===-1&&l.push(p),i)}function eD(i,l,d,h,p){switch(l){case"focusin":return ri=Jd(ri,i,l,d,h,p),!0;case"dragenter":return ai=Jd(ai,i,l,d,h,p),!0;case"mouseover":return ii=Jd(ii,i,l,d,h,p),!0;case"pointerover":var b=p.pointerId;return Xd.set(b,Jd(Xd.get(b)||null,i,l,d,h,p)),!0;case"gotpointercapture":return b=p.pointerId,Zd.set(b,Jd(Zd.get(b)||null,i,l,d,h,p)),!0}return!1}function a1(i){var l=Br(i.target);if(l!==null){var d=o(l);if(d!==null){if(l=d.tag,l===13){if(l=c(d),l!==null){i.blockedOn=l,oh(i.priority,function(){if(d.tag===13){var h=gn();h=Pa(h);var p=ko(d,h);p!==null&&pn(p,d,h),Q0(d,h)}});return}}else if(l===3&&d.stateNode.current.memoizedState.isDehydrated){i.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Em(i){if(i.blockedOn!==null)return!1;for(var l=i.targetContainers;0<l.length;){var d=K0(i.nativeEvent);if(d===null){d=i.nativeEvent;var h=new d.constructor(d.type,d);$r=h,d.target.dispatchEvent(h),$r=null}else return l=cr(d),l!==null&&s1(l),i.blockedOn=d,!1;l.shift()}return!0}function i1(i,l,d){Em(i)&&d.delete(l)}function tD(){Z0=!1,ri!==null&&Em(ri)&&(ri=null),ai!==null&&Em(ai)&&(ai=null),ii!==null&&Em(ii)&&(ii=null),Xd.forEach(i1),Zd.forEach(i1)}function _m(i,l){i.blockedOn===l&&(i.blockedOn=null,Z0||(Z0=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,tD)))}var Sm=null;function l1(i){Sm!==i&&(Sm=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Sm===i&&(Sm=null);for(var l=0;l<i.length;l+=3){var d=i[l],h=i[l+1],p=i[l+2];if(typeof h!="function"){if(X0(h||d)===null)continue;break}var b=cr(d);b!==null&&(i.splice(l,3),l-=3,Xp(b,{pending:!0,data:p,method:d.method,action:h},h,p))}}))}function eu(i){function l($){return _m($,i)}ri!==null&&_m(ri,i),ai!==null&&_m(ai,i),ii!==null&&_m(ii,i),Xd.forEach(l),Zd.forEach(l);for(var d=0;d<li.length;d++){var h=li[d];h.blockedOn===i&&(h.blockedOn=null)}for(;0<li.length&&(d=li[0],d.blockedOn===null);)a1(d),d.blockedOn===null&&li.shift();if(d=(i.ownerDocument||i).$$reactFormReplay,d!=null)for(h=0;h<d.length;h+=3){var p=d[h],b=d[h+1],T=p[Xt]||null;if(typeof b=="function")T||l1(d);else if(T){var U=null;if(b&&b.hasAttribute("formAction")){if(p=b,T=b[Xt]||null)U=T.formAction;else if(X0(p)!==null)continue}else U=T.action;typeof U=="function"?d[h+1]=U:(d.splice(h,3),h-=3),l1(d)}}}function J0(i){this._internalRoot=i}Am.prototype.render=J0.prototype.render=function(i){var l=this._internalRoot;if(l===null)throw Error(r(409));var d=l.current,h=gn();e1(d,h,i,l,null,null)},Am.prototype.unmount=J0.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var l=i.containerInfo;e1(i.current,2,null,i,null,null),om(),l[An]=null}};function Am(i){this._internalRoot=i}Am.prototype.unstable_scheduleHydration=function(i){if(i){var l=Oa();i={blockedOn:null,target:i,priority:l};for(var d=0;d<li.length&&l!==0&&l<li[d].priority;d++);li.splice(d,0,i),d===0&&a1(i)}};var o1=e.version;if(o1!=="19.1.0")throw Error(r(527,o1,"19.1.0"));fe.findDOMNode=function(i){var l=i._reactInternals;if(l===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=m(l),i=i!==null?f(i):null,i=i===null?null:i.stateNode,i};var sD={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:ee,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cm.isDisabled&&Cm.supportsFiber)try{Ft=Cm.inject(sD),gt=Cm}catch{}}return su.createRoot=function(i,l){if(!a(i))throw Error(r(299));var d=!1,h="",p=Ew,b=_w,T=Sw,U=null;return l!=null&&(l.unstable_strictMode===!0&&(d=!0),l.identifierPrefix!==void 0&&(h=l.identifierPrefix),l.onUncaughtError!==void 0&&(p=l.onUncaughtError),l.onCaughtError!==void 0&&(b=l.onCaughtError),l.onRecoverableError!==void 0&&(T=l.onRecoverableError),l.unstable_transitionCallbacks!==void 0&&(U=l.unstable_transitionCallbacks)),l=Zj(i,1,!1,null,null,d,h,p,b,T,U,null),i[An]=l.current,P0(i),new J0(l)},su.hydrateRoot=function(i,l,d){if(!a(i))throw Error(r(299));var h=!1,p="",b=Ew,T=_w,U=Sw,$=null,J=null;return d!=null&&(d.unstable_strictMode===!0&&(h=!0),d.identifierPrefix!==void 0&&(p=d.identifierPrefix),d.onUncaughtError!==void 0&&(b=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&($=d.unstable_transitionCallbacks),d.formState!==void 0&&(J=d.formState)),l=Zj(i,1,!0,l,d??null,h,p,b,T,U,$,J),l.context=Jj(null),d=l.current,h=gn(),h=Pa(h),p=qa(h),p.callback=null,$a(d,p,h),d=h,l.current.lanes=d,Fr(l,d),jr(l),i[An]=l.current,P0(i),new Am(l)},su.version="19.1.0",su}var b1;function uD(){if(b1)return sx.exports;b1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sx.exports=dD(),sx.exports}var hD=uD();const mD=z_(hD);function fD(t={}){const{strict:e=!0,errorMessage:s="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:r}=t,a=S.createContext(void 0);a.displayName=r;function o(){var c;const u=S.useContext(a);if(!u&&e){const m=new Error(s);throw m.name="ContextError",(c=Error.captureStackTrace)==null||c.call(Error,m,o),m}return u}return[a.Provider,o,a]}var[gD,CQ]=fD({name:"ProviderContext",strict:!1});const pD=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),xD=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function $_(t){if(Intl.Locale){let s=new Intl.Locale(t).maximize(),r=typeof s.getTextInfo=="function"?s.getTextInfo():s.textInfo;if(r)return r.direction==="rtl";if(s.script)return pD.has(s.script)}let e=t.split("-")[0];return xD.has(e)}const G_={prefix:String(Math.round(Math.random()*1e10)),current:0},W_=as.createContext(G_),bD=as.createContext(!1);let ix=new WeakMap;function yD(t=!1){let e=S.useContext(W_),s=S.useRef(null);if(s.current===null&&!t){var r,a;let o=(a=as.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||a===void 0||(r=a.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(o){let c=ix.get(o);c==null?ix.set(o,{id:e.current,state:o.memoizedState}):o.memoizedState!==c.state&&(e.current=c.id,ix.delete(o))}s.current=++e.current}return s.current}function vD(t){let e=S.useContext(W_),s=yD(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${s}`}function ND(t){let e=as.useId(),[s]=S.useState(Q_()),r=s?"react-aria":`react-aria${G_.prefix}`;return t||`${r}-${e}`}as.useId;function wD(){return!1}function jD(){return!0}function ED(t){return()=>{}}function Q_(){return typeof as.useSyncExternalStore=="function"?as.useSyncExternalStore(ED,wD,jD):S.useContext(bD)}const _D=Symbol.for("react-aria.i18n.locale");function Y_(){let t=typeof window<"u"&&window[_D]||typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch{t="en-US"}return{locale:t,direction:$_(t)?"rtl":"ltr"}}let Kx=Y_(),lu=new Set;function y1(){Kx=Y_();for(let t of lu)t(Kx)}function SD(){let t=Q_(),[e,s]=S.useState(Kx);return S.useEffect(()=>(lu.size===0&&window.addEventListener("languagechange",y1),lu.add(s),()=>{lu.delete(s),lu.size===0&&window.removeEventListener("languagechange",y1)}),[]),t?{locale:"en-US",direction:"ltr"}:e}const AD=as.createContext(null);function CD(t){let{locale:e,children:s}=t,r=SD(),a=as.useMemo(()=>e?{locale:e,direction:$_(e)?"rtl":"ltr"}:r,[r,e]);return as.createElement(AD.Provider,{value:a},s)}function ty(t,e){var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(s[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(t);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(t,r[a])&&(s[r[a]]=t[r[a]]);return s}function TD(t){if(RD())t.focus({preventScroll:!0});else{let e=DD(t);t.focus(),ID(e)}}let Tm=null;function RD(){if(Tm==null){Tm=!1;try{document.createElement("div").focus({get preventScroll(){return Tm=!0,!0}})}catch{}}return Tm}function DD(t){let e=t.parentNode,s=[],r=document.scrollingElement||document.documentElement;for(;e instanceof HTMLElement&&e!==r;)(e.offsetHeight<e.scrollHeight||e.offsetWidth<e.scrollWidth)&&s.push({element:e,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),e=e.parentNode;return r instanceof HTMLElement&&s.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),s}function ID(t){for(let{element:e,scrollTop:s,scrollLeft:r}of t)e.scrollTop=s,e.scrollLeft=r}function sy(t){var e;return typeof window>"u"||window.navigator==null?!1:((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.brands.some(s=>t.test(s.brand)))||t.test(window.navigator.userAgent)}function K_(t){var e;return typeof window<"u"&&window.navigator!=null?t.test(((e=window.navigator.userAgentData)===null||e===void 0?void 0:e.platform)||window.navigator.platform):!1}function Bu(t){let e=null;return()=>(e==null&&(e=t()),e)}const Xx=Bu(function(){return K_(/^Mac/i)}),kD=Bu(function(){return K_(/^iPad/i)||Xx()&&navigator.maxTouchPoints>1}),MD=Bu(function(){return sy(/AppleWebKit/i)&&!PD()}),PD=Bu(function(){return sy(/Chrome/i)}),OD=Bu(function(){return sy(/Firefox/i)}),LD=S.createContext({isNative:!0,open:FD,useHref:t=>t});function VD(t){let{children:e,navigate:s,useHref:r}=t,a=S.useMemo(()=>({isNative:!1,open:(o,c,u,m)=>{X_(o,f=>{UD(f,c)?s(u,m):Su(f,c)})},useHref:r||(o=>o)}),[s,r]);return as.createElement(LD.Provider,{value:a},e)}function UD(t,e){let s=t.getAttribute("target");return(!s||s==="_self")&&t.origin===location.origin&&!t.hasAttribute("download")&&!e.metaKey&&!e.ctrlKey&&!e.altKey&&!e.shiftKey}function Su(t,e,s=!0){var r,a;let{metaKey:o,ctrlKey:c,altKey:u,shiftKey:m}=e;OD()&&(!((a=window.event)===null||a===void 0||(r=a.type)===null||r===void 0)&&r.startsWith("key"))&&t.target==="_blank"&&(Xx()?o=!0:c=!0);let f=MD()&&Xx()&&!kD()?new KeyboardEvent("keydown",{keyIdentifier:"Enter",metaKey:o,ctrlKey:c,altKey:u,shiftKey:m}):new MouseEvent("click",{metaKey:o,ctrlKey:c,altKey:u,shiftKey:m,bubbles:!0,cancelable:!0});Su.isOpening=s,TD(t),t.dispatchEvent(f),Su.isOpening=!1}Su.isOpening=!1;function X_(t,e){if(t instanceof HTMLAnchorElement)e(t);else if(t.hasAttribute("data-href")){let s=document.createElement("a");s.href=t.getAttribute("data-href"),t.hasAttribute("data-target")&&(s.target=t.getAttribute("data-target")),t.hasAttribute("data-rel")&&(s.rel=t.getAttribute("data-rel")),t.hasAttribute("data-download")&&(s.download=t.getAttribute("data-download")),t.hasAttribute("data-ping")&&(s.ping=t.getAttribute("data-ping")),t.hasAttribute("data-referrer-policy")&&(s.referrerPolicy=t.getAttribute("data-referrer-policy")),t.appendChild(s),e(s),t.removeChild(s)}}function FD(t,e){X_(t,s=>Su(s,e))}var Zx=q_();const Jx=as.createContext(null);function BD(t){let{children:e}=t,s=S.useContext(Jx),[r,a]=S.useState(0),o=S.useMemo(()=>({parent:s,modalCount:r,addModal(){a(c=>c+1),s&&s.addModal()},removeModal(){a(c=>c-1),s&&s.removeModal()}}),[s,r]);return as.createElement(Jx.Provider,{value:o},e)}function HD(){let t=S.useContext(Jx);return{modalProviderProps:{"aria-hidden":t&&t.modalCount>0?!0:void 0}}}function zD(t){let{modalProviderProps:e}=HD();return as.createElement("div",{"data-overlay-container":!0,...t,...e})}function qD(t){return as.createElement(BD,null,as.createElement(zD,t))}function $D(t){const e=S.useRef(null);return e.current===null&&(e.current=t()),e.current}const v1=S.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function GD({children:t,isValidProp:e,...s}){s={...S.useContext(v1),...s},s.isStatic=$D(()=>s.isStatic);const r=S.useMemo(()=>s,[JSON.stringify(s.transition),s.transformPagePoint,s.reducedMotion]);return n.jsx(v1.Provider,{value:r,children:t})}var WD=({children:t,navigate:e,disableAnimation:s,useHref:r,disableRipple:a=!1,skipFramerMotionAnimations:o=s,reducedMotion:c="never",validationBehavior:u,locale:m="en-US",labelPlacement:f,defaultDates:x,createCalendar:v,spinnerVariant:y,...N})=>{let w=t;e&&(w=n.jsx(VD,{navigate:e,useHref:r,children:w}));const E=S.useMemo(()=>({createCalendar:v,defaultDates:x,disableAnimation:s,disableRipple:a,validationBehavior:u,labelPlacement:f,spinnerVariant:y}),[v,x==null?void 0:x.maxDate,x==null?void 0:x.minDate,s,a,u,f,y]);return n.jsx(gD,{value:E,children:n.jsx(CD,{locale:m,children:n.jsx(GD,{reducedMotion:c,children:n.jsx(qD,{...N,children:w})})})})},nu={},N1;function QD(){if(N1)return nu;N1=1,Object.defineProperty(nu,"__esModule",{value:!0}),nu.parse=c,nu.serialize=f;const t=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,s=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,o=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function c(y,N){const w=new o,E=y.length;if(E<2)return w;const _=(N==null?void 0:N.decode)||x;let R=0;do{const I=y.indexOf("=",R);if(I===-1)break;const V=y.indexOf(";",R),z=V===-1?E:V;if(I>z){R=y.lastIndexOf(";",I-1)+1;continue}const F=u(y,R,I),P=m(y,I,F),C=y.slice(F,P);if(w[C]===void 0){let D=u(y,I+1,z),k=m(y,z,D);const O=_(y.slice(D,k));w[C]=O}R=z+1}while(R<E);return w}function u(y,N,w){do{const E=y.charCodeAt(N);if(E!==32&&E!==9)return N}while(++N<w);return w}function m(y,N,w){for(;N>w;){const E=y.charCodeAt(--N);if(E!==32&&E!==9)return N+1}return w}function f(y,N,w){const E=(w==null?void 0:w.encode)||encodeURIComponent;if(!t.test(y))throw new TypeError(`argument name is invalid: ${y}`);const _=E(N);if(!e.test(_))throw new TypeError(`argument val is invalid: ${N}`);let R=y+"="+_;if(!w)return R;if(w.maxAge!==void 0){if(!Number.isInteger(w.maxAge))throw new TypeError(`option maxAge is invalid: ${w.maxAge}`);R+="; Max-Age="+w.maxAge}if(w.domain){if(!s.test(w.domain))throw new TypeError(`option domain is invalid: ${w.domain}`);R+="; Domain="+w.domain}if(w.path){if(!r.test(w.path))throw new TypeError(`option path is invalid: ${w.path}`);R+="; Path="+w.path}if(w.expires){if(!v(w.expires)||!Number.isFinite(w.expires.valueOf()))throw new TypeError(`option expires is invalid: ${w.expires}`);R+="; Expires="+w.expires.toUTCString()}if(w.httpOnly&&(R+="; HttpOnly"),w.secure&&(R+="; Secure"),w.partitioned&&(R+="; Partitioned"),w.priority)switch(typeof w.priority=="string"?w.priority.toLowerCase():void 0){case"low":R+="; Priority=Low";break;case"medium":R+="; Priority=Medium";break;case"high":R+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${w.priority}`)}if(w.sameSite)switch(typeof w.sameSite=="string"?w.sameSite.toLowerCase():w.sameSite){case!0:case"strict":R+="; SameSite=Strict";break;case"lax":R+="; SameSite=Lax";break;case"none":R+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${w.sameSite}`)}return R}function x(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function v(y){return a.call(y)==="[object Date]"}return nu}QD();var w1="popstate";function YD(t={}){function e(r,a){let{pathname:o,search:c,hash:u}=r.location;return eb("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(r,a){return typeof a=="string"?a:Au(a)}return XD(e,s,null,t)}function Pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function KD(){return Math.random().toString(36).substring(2,10)}function j1(t,e){return{usr:t.state,key:t.key,idx:e}}function eb(t,e,s=null,r){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Mc(e):e,state:s,key:e&&e.key||r||KD()}}function Au({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Mc(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let r=t.indexOf("?");r>=0&&(e.search=t.substring(r),t=t.substring(0,r)),t&&(e.pathname=t)}return e}function XD(t,e,s,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,c=a.history,u="POP",m=null,f=x();f==null&&(f=0,c.replaceState({...c.state,idx:f},""));function x(){return(c.state||{idx:null}).idx}function v(){u="POP";let _=x(),R=_==null?null:_-f;f=_,m&&m({action:u,location:E.location,delta:R})}function y(_,R){u="PUSH";let I=eb(E.location,_,R);f=x()+1;let V=j1(I,f),z=E.createHref(I);try{c.pushState(V,"",z)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;a.location.assign(z)}o&&m&&m({action:u,location:E.location,delta:1})}function N(_,R){u="REPLACE";let I=eb(E.location,_,R);f=x();let V=j1(I,f),z=E.createHref(I);c.replaceState(V,"",z),o&&m&&m({action:u,location:E.location,delta:0})}function w(_){return ZD(_)}let E={get action(){return u},get location(){return t(a,c)},listen(_){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(w1,v),m=_,()=>{a.removeEventListener(w1,v),m=null}},createHref(_){return e(a,_)},createURL:w,encodeLocation(_){let R=w(_);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:y,replace:N,go(_){return c.go(_)}};return E}function ZD(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Pt(s,"No window.location.(origin|href) available to create URL");let r=typeof t=="string"?t:Au(t);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function Z_(t,e,s="/"){return JD(t,e,s,!1)}function JD(t,e,s,r){let a=typeof e=="string"?Mc(e):e,o=Na(a.pathname||"/",s);if(o==null)return null;let c=J_(t);eI(c);let u=null;for(let m=0;u==null&&m<c.length;++m){let f=uI(o);u=cI(c[m],f,r)}return u}function J_(t,e=[],s=[],r=""){let a=(o,c,u)=>{let m={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};m.relativePath.startsWith("/")&&(Pt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length));let f=pa([r,m.relativePath]),x=s.concat(m);o.children&&o.children.length>0&&(Pt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),J_(o.children,e,x,f)),!(o.path==null&&!o.index)&&e.push({path:f,score:lI(f,o.index),routesMeta:x})};return t.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let m of eS(o.path))a(o,c,m)}),e}function eS(t){let e=t.split("/");if(e.length===0)return[];let[s,...r]=e,a=s.endsWith("?"),o=s.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let c=eS(r.join("/")),u=[];return u.push(...c.map(m=>m===""?o:[o,m].join("/"))),a&&u.push(...c),u.map(m=>t.startsWith("/")&&m===""?"/":m)}function eI(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:oI(e.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var tI=/^:[\w-]+$/,sI=3,nI=2,rI=1,aI=10,iI=-2,E1=t=>t==="*";function lI(t,e){let s=t.split("/"),r=s.length;return s.some(E1)&&(r+=iI),e&&(r+=nI),s.filter(a=>!E1(a)).reduce((a,o)=>a+(tI.test(o)?sI:o===""?rI:aI),r)}function oI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,a)=>r===e[a])?t[t.length-1]-e[e.length-1]:0}function cI(t,e,s=!1){let{routesMeta:r}=t,a={},o="/",c=[];for(let u=0;u<r.length;++u){let m=r[u],f=u===r.length-1,x=o==="/"?e:e.slice(o.length)||"/",v=vf({path:m.relativePath,caseSensitive:m.caseSensitive,end:f},x),y=m.route;if(!v&&f&&s&&!r[r.length-1].route.index&&(v=vf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!v)return null;Object.assign(a,v.params),c.push({params:a,pathname:pa([o,v.pathname]),pathnameBase:gI(pa([o,v.pathnameBase])),route:y}),v.pathnameBase!=="/"&&(o=pa([o,v.pathnameBase]))}return c}function vf(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,r]=dI(t.path,t.caseSensitive,t.end),a=e.match(s);if(!a)return null;let o=a[0],c=o.replace(/(.)\/+$/,"$1"),u=a.slice(1);return{params:r.reduce((f,{paramName:x,isOptional:v},y)=>{if(x==="*"){let w=u[y]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const N=u[y];return v&&!N?f[x]=void 0:f[x]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:o,pathnameBase:c,pattern:t}}function dI(t,e=!1,s=!0){zn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let r=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,m)=>(r.push({paramName:u,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function uI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Na(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,r=t.charAt(s);return r&&r!=="/"?null:t.slice(s)||"/"}function hI(t,e="/"){let{pathname:s,search:r="",hash:a=""}=typeof t=="string"?Mc(t):t;return{pathname:s?s.startsWith("/")?s:mI(s,e):e,search:pI(r),hash:xI(a)}}function mI(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function lx(t,e,s,r){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fI(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function ny(t){let e=fI(t);return e.map((s,r)=>r===e.length-1?s.pathname:s.pathnameBase)}function ry(t,e,s,r=!1){let a;typeof t=="string"?a=Mc(t):(a={...t},Pt(!a.pathname||!a.pathname.includes("?"),lx("?","pathname","search",a)),Pt(!a.pathname||!a.pathname.includes("#"),lx("#","pathname","hash",a)),Pt(!a.search||!a.search.includes("#"),lx("#","search","hash",a)));let o=t===""||a.pathname==="",c=o?"/":a.pathname,u;if(c==null)u=s;else{let v=e.length-1;if(!r&&c.startsWith("..")){let y=c.split("/");for(;y[0]==="..";)y.shift(),v-=1;a.pathname=y.join("/")}u=v>=0?e[v]:"/"}let m=hI(a,u),f=c&&c!=="/"&&c.endsWith("/"),x=(o||c===".")&&s.endsWith("/");return!m.pathname.endsWith("/")&&(f||x)&&(m.pathname+="/"),m}var pa=t=>t.join("/").replace(/\/\/+/g,"/"),gI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function bI(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var tS=["POST","PUT","PATCH","DELETE"];new Set(tS);var yI=["GET",...tS];new Set(yI);var Pc=S.createContext(null);Pc.displayName="DataRouter";var og=S.createContext(null);og.displayName="DataRouterState";var sS=S.createContext({isTransitioning:!1});sS.displayName="ViewTransition";var vI=S.createContext(new Map);vI.displayName="Fetchers";var NI=S.createContext(null);NI.displayName="Await";var ir=S.createContext(null);ir.displayName="Navigation";var Hu=S.createContext(null);Hu.displayName="Location";var lr=S.createContext({outlet:null,matches:[],isDataRoute:!1});lr.displayName="Route";var ay=S.createContext(null);ay.displayName="RouteError";function wI(t,{relative:e}={}){Pt(Oc(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=S.useContext(ir),{hash:a,pathname:o,search:c}=zu(t,{relative:e}),u=o;return s!=="/"&&(u=o==="/"?s:pa([s,o])),r.createHref({pathname:u,search:c,hash:a})}function Oc(){return S.useContext(Hu)!=null}function Or(){return Pt(Oc(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(Hu).location}var nS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function rS(t){S.useContext(ir).static||S.useLayoutEffect(t)}function Je(){let{isDataRoute:t}=S.useContext(lr);return t?PI():jI()}function jI(){Pt(Oc(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Pc),{basename:e,navigator:s}=S.useContext(ir),{matches:r}=S.useContext(lr),{pathname:a}=Or(),o=JSON.stringify(ny(r)),c=S.useRef(!1);return rS(()=>{c.current=!0}),S.useCallback((m,f={})=>{if(zn(c.current,nS),!c.current)return;if(typeof m=="number"){s.go(m);return}let x=ry(m,JSON.parse(o),a,f.relative==="path");t==null&&e!=="/"&&(x.pathname=x.pathname==="/"?e:pa([e,x.pathname])),(f.replace?s.replace:s.push)(x,f.state,f)},[e,s,o,a,t])}S.createContext(null);function En(){let{matches:t}=S.useContext(lr),e=t[t.length-1];return e?e.params:{}}function zu(t,{relative:e}={}){let{matches:s}=S.useContext(lr),{pathname:r}=Or(),a=JSON.stringify(ny(s));return S.useMemo(()=>ry(t,JSON.parse(a),r,e==="path"),[t,a,r,e])}function EI(t,e){return aS(t,e)}function aS(t,e,s,r){var R;Pt(Oc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=S.useContext(ir),{matches:o}=S.useContext(lr),c=o[o.length-1],u=c?c.params:{},m=c?c.pathname:"/",f=c?c.pathnameBase:"/",x=c&&c.route;{let I=x&&x.path||"";iS(m,!x||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let v=Or(),y;if(e){let I=typeof e=="string"?Mc(e):e;Pt(f==="/"||((R=I.pathname)==null?void 0:R.startsWith(f)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${I.pathname}" was given in the \`location\` prop.`),y=I}else y=v;let N=y.pathname||"/",w=N;if(f!=="/"){let I=f.replace(/^\//,"").split("/");w="/"+N.replace(/^\//,"").split("/").slice(I.length).join("/")}let E=Z_(t,{pathname:w});zn(x||E!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),zn(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=TI(E&&E.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:pa([f,a.encodeLocation?a.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?f:pa([f,a.encodeLocation?a.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),o,s,r);return e&&_?S.createElement(Hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},_):_}function _I(){let t=MI(),e=bI(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},c=null;return console.error("Error handled by React Router default ErrorBoundary:",t),c=S.createElement(S.Fragment,null,S.createElement("p",null,"💿 Hey developer 👋"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:o},"ErrorBoundary")," or"," ",S.createElement("code",{style:o},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),s?S.createElement("pre",{style:a},s):null,c)}var SI=S.createElement(_I,null),AI=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?S.createElement(lr.Provider,{value:this.props.routeContext},S.createElement(ay.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CI({routeContext:t,match:e,children:s}){let r=S.useContext(Pc);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(lr.Provider,{value:t},s)}function TI(t,e=[],s=null,r=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let a=t,o=s==null?void 0:s.errors;if(o!=null){let m=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);Pt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,u=-1;if(s)for(let m=0;m<a.length;m++){let f=a[m];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=m),f.route.id){let{loaderData:x,errors:v}=s,y=f.route.loader&&!x.hasOwnProperty(f.route.id)&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((m,f,x)=>{let v,y=!1,N=null,w=null;s&&(v=o&&f.route.id?o[f.route.id]:void 0,N=f.route.errorElement||SI,c&&(u<0&&x===0?(iS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,w=null):u===x&&(y=!0,w=f.route.hydrateFallbackElement||null)));let E=e.concat(a.slice(0,x+1)),_=()=>{let R;return v?R=N:y?R=w:f.route.Component?R=S.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=m,S.createElement(CI,{match:f,routeContext:{outlet:m,matches:E,isDataRoute:s!=null},children:R})};return s&&(f.route.ErrorBoundary||f.route.errorElement||x===0)?S.createElement(AI,{location:s.location,revalidation:s.revalidation,component:N,error:v,children:_(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):_()},null)}function iy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RI(t){let e=S.useContext(Pc);return Pt(e,iy(t)),e}function DI(t){let e=S.useContext(og);return Pt(e,iy(t)),e}function II(t){let e=S.useContext(lr);return Pt(e,iy(t)),e}function ly(t){let e=II(t),s=e.matches[e.matches.length-1];return Pt(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function kI(){return ly("useRouteId")}function MI(){var r;let t=S.useContext(ay),e=DI("useRouteError"),s=ly("useRouteError");return t!==void 0?t:(r=e.errors)==null?void 0:r[s]}function PI(){let{router:t}=RI("useNavigate"),e=ly("useNavigate"),s=S.useRef(!1);return rS(()=>{s.current=!0}),S.useCallback(async(a,o={})=>{zn(s.current,nS),s.current&&(typeof a=="number"?t.navigate(a):await t.navigate(a,{fromRouteId:e,...o}))},[t,e])}var _1={};function iS(t,e,s){!e&&!_1[t]&&(_1[t]=!0,zn(!1,s))}S.memo(OI);function OI({routes:t,future:e,state:s}){return aS(t,void 0,s,e)}function rc({to:t,replace:e,state:s,relative:r}){Pt(Oc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=S.useContext(ir);zn(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=S.useContext(lr),{pathname:c}=Or(),u=Je(),m=ry(t,ny(o),c,r==="path"),f=JSON.stringify(m);return S.useEffect(()=>{u(JSON.parse(f),{replace:e,state:s,relative:r})},[u,f,r,e,s]),null}function pe(t){Pt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LI({basename:t="/",children:e=null,location:s,navigationType:r="POP",navigator:a,static:o=!1}){Pt(!Oc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=t.replace(/^\/*/,"/"),u=S.useMemo(()=>({basename:c,navigator:a,static:o,future:{}}),[c,a,o]);typeof s=="string"&&(s=Mc(s));let{pathname:m="/",search:f="",hash:x="",state:v=null,key:y="default"}=s,N=S.useMemo(()=>{let w=Na(m,c);return w==null?null:{location:{pathname:w,search:f,hash:x,state:v,key:y},navigationType:r}},[c,m,f,x,v,y,r]);return zn(N!=null,`<Router basename="${c}"> is not able to match the URL "${m}${f}${x}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:S.createElement(ir.Provider,{value:u},S.createElement(Hu.Provider,{children:e,value:N}))}function S1({children:t,location:e}){return EI(tb(t),e)}function tb(t,e=[]){let s=[];return S.Children.forEach(t,(r,a)=>{if(!S.isValidElement(r))return;let o=[...e,a];if(r.type===S.Fragment){s.push.apply(s,tb(r.props.children,o));return}Pt(r.type===pe,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Pt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let c={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(c.children=tb(r.props.children,o)),s.push(c)}),s}var Zm="get",Jm="application/x-www-form-urlencoded";function cg(t){return t!=null&&typeof t.tagName=="string"}function VI(t){return cg(t)&&t.tagName.toLowerCase()==="button"}function UI(t){return cg(t)&&t.tagName.toLowerCase()==="form"}function FI(t){return cg(t)&&t.tagName.toLowerCase()==="input"}function BI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function HI(t,e){return t.button===0&&(!e||e==="_self")&&!BI(t)}function sb(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,s)=>{let r=t[s];return e.concat(Array.isArray(r)?r.map(a=>[s,a]):[[s,r]])},[]))}function zI(t,e){let s=sb(t);return e&&e.forEach((r,a)=>{s.has(a)||e.getAll(a).forEach(o=>{s.append(a,o)})}),s}var Rm=null;function qI(){if(Rm===null)try{new FormData(document.createElement("form"),0),Rm=!1}catch{Rm=!0}return Rm}var $I=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ox(t){return t!=null&&!$I.has(t)?(zn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Jm}"`),null):t}function GI(t,e){let s,r,a,o,c;if(UI(t)){let u=t.getAttribute("action");r=u?Na(u,e):null,s=t.getAttribute("method")||Zm,a=ox(t.getAttribute("enctype"))||Jm,o=new FormData(t)}else if(VI(t)||FI(t)&&(t.type==="submit"||t.type==="image")){let u=t.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=t.getAttribute("formaction")||u.getAttribute("action");if(r=m?Na(m,e):null,s=t.getAttribute("formmethod")||u.getAttribute("method")||Zm,a=ox(t.getAttribute("formenctype"))||ox(u.getAttribute("enctype"))||Jm,o=new FormData(u,t),!qI()){let{name:f,type:x,value:v}=t;if(x==="image"){let y=f?`${f}.`:"";o.append(`${y}x`,"0"),o.append(`${y}y`,"0")}else f&&o.append(f,v)}}else{if(cg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Zm,r=null,a=Jm,c=t}return o&&a==="text/plain"&&(c=o,o=void 0),{action:r,method:s.toLowerCase(),encType:a,formData:o,body:c}}function oy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function WI(t,e){if(t.id in e)return e[t.id];try{let s=await import(t.module);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function QI(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function YI(t,e,s){let r=await Promise.all(t.map(async a=>{let o=e.routes[a.route.id];if(o){let c=await WI(o,s);return c.links?c.links():[]}return[]}));return JI(r.flat(1).filter(QI).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function A1(t,e,s,r,a,o){let c=(m,f)=>s[f]?m.route.id!==s[f].route.id:!0,u=(m,f)=>{var x;return s[f].pathname!==m.pathname||((x=s[f].route.path)==null?void 0:x.endsWith("*"))&&s[f].params["*"]!==m.params["*"]};return o==="assets"?e.filter((m,f)=>c(m,f)||u(m,f)):o==="data"?e.filter((m,f)=>{var v;let x=r.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(c(m,f)||u(m,f))return!0;if(m.route.shouldRevalidate){let y=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=s[0])==null?void 0:v.params)||{},nextUrl:new URL(t,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function KI(t,e,{includeHydrateFallback:s}={}){return XI(t.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function XI(t){return[...new Set(t)]}function ZI(t){let e={},s=Object.keys(t).sort();for(let r of s)e[r]=t[r];return e}function JI(t,e){let s=new Set;return new Set(e),t.reduce((r,a)=>{let o=JSON.stringify(ZI(a));return s.has(o)||(s.add(o),r.push({key:o,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e5=new Set([100,101,204,205]);function t5(t,e){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname="_root.data":e&&Na(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function lS(){let t=S.useContext(Pc);return oy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function s5(){let t=S.useContext(og);return oy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var cy=S.createContext(void 0);cy.displayName="FrameworkContext";function oS(){let t=S.useContext(cy);return oy(t,"You must render this element inside a <HydratedRouter> element"),t}function n5(t,e){let s=S.useContext(cy),[r,a]=S.useState(!1),[o,c]=S.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:f,onMouseLeave:x,onTouchStart:v}=e,y=S.useRef(null);S.useEffect(()=>{if(t==="render"&&c(!0),t==="viewport"){let E=R=>{R.forEach(I=>{c(I.isIntersecting)})},_=new IntersectionObserver(E,{threshold:.5});return y.current&&_.observe(y.current),()=>{_.disconnect()}}},[t]),S.useEffect(()=>{if(r){let E=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(E)}}},[r]);let N=()=>{a(!0)},w=()=>{a(!1),c(!1)};return s?t!=="intent"?[o,y,{}]:[o,y,{onFocus:ru(u,N),onBlur:ru(m,w),onMouseEnter:ru(f,N),onMouseLeave:ru(x,w),onTouchStart:ru(v,N)}]:[!1,y,{}]}function ru(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function r5({page:t,...e}){let{router:s}=lS(),r=S.useMemo(()=>Z_(s.routes,t,s.basename),[s.routes,t,s.basename]);return r?S.createElement(i5,{page:t,matches:r,...e}):null}function a5(t){let{manifest:e,routeModules:s}=oS(),[r,a]=S.useState([]);return S.useEffect(()=>{let o=!1;return YI(t,e,s).then(c=>{o||a(c)}),()=>{o=!0}},[t,e,s]),r}function i5({page:t,matches:e,...s}){let r=Or(),{manifest:a,routeModules:o}=oS(),{basename:c}=lS(),{loaderData:u,matches:m}=s5(),f=S.useMemo(()=>A1(t,e,m,a,r,"data"),[t,e,m,a,r]),x=S.useMemo(()=>A1(t,e,m,a,r,"assets"),[t,e,m,a,r]),v=S.useMemo(()=>{if(t===r.pathname+r.search+r.hash)return[];let w=new Set,E=!1;if(e.forEach(R=>{var V;let I=a.routes[R.route.id];!I||!I.hasLoader||(!f.some(z=>z.route.id===R.route.id)&&R.route.id in u&&((V=o[R.route.id])!=null&&V.shouldRevalidate)||I.hasClientLoader?E=!0:w.add(R.route.id))}),w.size===0)return[];let _=t5(t,c);return E&&w.size>0&&_.searchParams.set("_routes",e.filter(R=>w.has(R.route.id)).map(R=>R.route.id).join(",")),[_.pathname+_.search]},[c,u,r,a,f,e,t,o]),y=S.useMemo(()=>KI(x,a),[x,a]),N=a5(x);return S.createElement(S.Fragment,null,v.map(w=>S.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...s})),y.map(w=>S.createElement("link",{key:w,rel:"modulepreload",href:w,...s})),N.map(({key:w,link:E})=>S.createElement("link",{key:w,...E})))}function l5(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var cS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cS&&(window.__reactRouterVersion="7.6.3")}catch{}function o5({basename:t,children:e,window:s}){let r=S.useRef();r.current==null&&(r.current=YD({window:s,v5Compat:!0}));let a=r.current,[o,c]=S.useState({action:a.action,location:a.location}),u=S.useCallback(m=>{S.startTransition(()=>c(m))},[c]);return S.useLayoutEffect(()=>a.listen(u),[a,u]),S.createElement(LI,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:a})}var dS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Os=S.forwardRef(function({onClick:e,discover:s="render",prefetch:r="none",relative:a,reloadDocument:o,replace:c,state:u,target:m,to:f,preventScrollReset:x,viewTransition:v,...y},N){let{basename:w}=S.useContext(ir),E=typeof f=="string"&&dS.test(f),_,R=!1;if(typeof f=="string"&&E&&(_=f,cS))try{let k=new URL(window.location.href),O=f.startsWith("//")?new URL(k.protocol+f):new URL(f),q=Na(O.pathname,w);O.origin===k.origin&&q!=null?f=q+O.search+O.hash:R=!0}catch{zn(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let I=wI(f,{relative:a}),[V,z,F]=n5(r,y),P=h5(f,{replace:c,state:u,target:m,preventScrollReset:x,relative:a,viewTransition:v});function C(k){e&&e(k),k.defaultPrevented||P(k)}let D=S.createElement("a",{...y,...F,href:_||I,onClick:R||o?e:C,ref:l5(N,z),target:m,"data-discover":!E&&s==="render"?"true":void 0});return V&&!E?S.createElement(S.Fragment,null,D,S.createElement(r5,{page:I})):D});Os.displayName="Link";var c5=S.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:r="",end:a=!1,style:o,to:c,viewTransition:u,children:m,...f},x){let v=zu(c,{relative:f.relative}),y=Or(),N=S.useContext(og),{navigator:w,basename:E}=S.useContext(ir),_=N!=null&&b5(v)&&u===!0,R=w.encodeLocation?w.encodeLocation(v).pathname:v.pathname,I=y.pathname,V=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;s||(I=I.toLowerCase(),V=V?V.toLowerCase():null,R=R.toLowerCase()),V&&E&&(V=Na(V,E)||V);const z=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let F=I===R||!a&&I.startsWith(R)&&I.charAt(z)==="/",P=V!=null&&(V===R||!a&&V.startsWith(R)&&V.charAt(R.length)==="/"),C={isActive:F,isPending:P,isTransitioning:_},D=F?e:void 0,k;typeof r=="function"?k=r(C):k=[r,F?"active":null,P?"pending":null,_?"transitioning":null].filter(Boolean).join(" ");let O=typeof o=="function"?o(C):o;return S.createElement(Os,{...f,"aria-current":D,className:k,ref:x,style:O,to:c,viewTransition:u},typeof m=="function"?m(C):m)});c5.displayName="NavLink";var d5=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:r,replace:a,state:o,method:c=Zm,action:u,onSubmit:m,relative:f,preventScrollReset:x,viewTransition:v,...y},N)=>{let w=p5(),E=x5(u,{relative:f}),_=c.toLowerCase()==="get"?"get":"post",R=typeof u=="string"&&dS.test(u),I=V=>{if(m&&m(V),V.defaultPrevented)return;V.preventDefault();let z=V.nativeEvent.submitter,F=(z==null?void 0:z.getAttribute("formmethod"))||c;w(z||V.currentTarget,{fetcherKey:e,method:F,navigate:s,replace:a,state:o,relative:f,preventScrollReset:x,viewTransition:v})};return S.createElement("form",{ref:N,method:_,action:E,onSubmit:r?m:I,...y,"data-discover":!R&&t==="render"?"true":void 0})});d5.displayName="Form";function u5(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uS(t){let e=S.useContext(Pc);return Pt(e,u5(t)),e}function h5(t,{target:e,replace:s,state:r,preventScrollReset:a,relative:o,viewTransition:c}={}){let u=Je(),m=Or(),f=zu(t,{relative:o});return S.useCallback(x=>{if(HI(x,e)){x.preventDefault();let v=s!==void 0?s:Au(m)===Au(f);u(t,{replace:v,state:r,preventScrollReset:a,relative:o,viewTransition:c})}},[m,u,f,s,r,e,t,a,o,c])}function m5(t){zn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=S.useRef(sb(t)),s=S.useRef(!1),r=Or(),a=S.useMemo(()=>zI(r.search,s.current?null:e.current),[r.search]),o=Je(),c=S.useCallback((u,m)=>{const f=sb(typeof u=="function"?u(a):u);s.current=!0,o("?"+f,m)},[o,a]);return[a,c]}var f5=0,g5=()=>`__${String(++f5)}__`;function p5(){let{router:t}=uS("useSubmit"),{basename:e}=S.useContext(ir),s=kI();return S.useCallback(async(r,a={})=>{let{action:o,method:c,encType:u,formData:m,body:f}=GI(r,e);if(a.navigate===!1){let x=a.fetcherKey||g5();await t.fetch(x,s,a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:f,formMethod:a.method||c,formEncType:a.encType||u,flushSync:a.flushSync})}else await t.navigate(a.action||o,{preventScrollReset:a.preventScrollReset,formData:m,body:f,formMethod:a.method||c,formEncType:a.encType||u,replace:a.replace,state:a.state,fromRouteId:s,flushSync:a.flushSync,viewTransition:a.viewTransition})},[t,e,s])}function x5(t,{relative:e}={}){let{basename:s}=S.useContext(ir),r=S.useContext(lr);Pt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...zu(t||".",{relative:e})},c=Or();if(t==null){o.search=c.search;let u=new URLSearchParams(o.search),m=u.getAll("index");if(m.some(x=>x==="")){u.delete("index"),m.filter(v=>v).forEach(v=>u.append("index",v));let x=u.toString();o.search=x?`?${x}`:""}}return(!t||t===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(o.pathname=o.pathname==="/"?s:pa([s,o.pathname])),Au(o)}function b5(t,e={}){let s=S.useContext(sS);Pt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uS("useViewTransitionState"),a=zu(t,{relative:e.relative});if(!s.isTransitioning)return!1;let o=Na(s.currentLocation.pathname,r)||s.currentLocation.pathname,c=Na(s.nextLocation.pathname,r)||s.nextLocation.pathname;return vf(a.pathname,c)!=null||vf(a.pathname,o)!=null}[...e5];let y5={data:""},v5=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||y5,N5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,w5=/\/\*[^]*?\*\/|  +/g,C1=/\n+/g,di=(t,e)=>{let s="",r="",a="";for(let o in t){let c=t[o];o[0]=="@"?o[1]=="i"?s=o+" "+c+";":r+=o[1]=="f"?di(c,o):o+"{"+di(c,o[1]=="k"?"":e)+"}":typeof c=="object"?r+=di(c,e?e.replace(/([^,])+/g,u=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,m=>/&/.test(m)?m.replace(/&/g,u):u?u+" "+m:m)):o):c!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=di.p?di.p(o,c):o+":"+c+";")}return s+(e&&a?e+"{"+a+"}":a)+r},da={},hS=t=>{if(typeof t=="object"){let e="";for(let s in t)e+=s+hS(t[s]);return e}return t},j5=(t,e,s,r,a)=>{let o=hS(t),c=da[o]||(da[o]=(m=>{let f=0,x=11;for(;f<m.length;)x=101*x+m.charCodeAt(f++)>>>0;return"go"+x})(o));if(!da[c]){let m=o!==t?t:(f=>{let x,v,y=[{}];for(;x=N5.exec(f.replace(w5,""));)x[4]?y.shift():x[3]?(v=x[3].replace(C1," ").trim(),y.unshift(y[0][v]=y[0][v]||{})):y[0][x[1]]=x[2].replace(C1," ").trim();return y[0]})(t);da[c]=di(a?{["@keyframes "+c]:m}:m,s?"":"."+c)}let u=s&&da.g?da.g:null;return s&&(da.g=da[c]),((m,f,x,v)=>{v?f.data=f.data.replace(v,m):f.data.indexOf(m)===-1&&(f.data=x?m+f.data:f.data+m)})(da[c],e,r,u),c},E5=(t,e,s)=>t.reduce((r,a,o)=>{let c=e[o];if(c&&c.call){let u=c(s),m=u&&u.props&&u.props.className||/^go/.test(u)&&u;c=m?"."+m:u&&typeof u=="object"?u.props?"":di(u,""):u===!1?"":u}return r+a+(c??"")},"");function dg(t){let e=this||{},s=t.call?t(e.p):t;return j5(s.unshift?s.raw?E5(s,[].slice.call(arguments,1),e.p):s.reduce((r,a)=>Object.assign(r,a&&a.call?a(e.p):a),{}):s,v5(e.target),e.g,e.o,e.k)}let mS,nb,rb;dg.bind({g:1});let wa=dg.bind({k:1});function _5(t,e,s,r){di.p=e,mS=t,nb=s,rb=r}function Oi(t,e){let s=this||{};return function(){let r=arguments;function a(o,c){let u=Object.assign({},o),m=u.className||a.className;s.p=Object.assign({theme:nb&&nb()},u),s.o=/ *go\d+/.test(m),u.className=dg.apply(s,r)+(m?" "+m:"");let f=t;return t[0]&&(f=u.as||t,delete u.as),rb&&f[0]&&rb(u),mS(f,u)}return a}}var S5=t=>typeof t=="function",Nf=(t,e)=>S5(t)?t(e):t,A5=(()=>{let t=0;return()=>(++t).toString()})(),fS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),C5=20,gS=(t,e)=>{switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,C5)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:s}=e;return gS(t,{type:t.toasts.find(o=>o.id===s.id)?1:0,toast:s});case 3:let{toastId:r}=e;return{...t,toasts:t.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let a=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+a}))}}},ef=[],Il={toasts:[],pausedAt:void 0},to=t=>{Il=gS(Il,t),ef.forEach(e=>{e(Il)})},T5={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},R5=(t={})=>{let[e,s]=S.useState(Il),r=S.useRef(Il);S.useEffect(()=>(r.current!==Il&&s(Il),ef.push(s),()=>{let o=ef.indexOf(s);o>-1&&ef.splice(o,1)}),[]);let a=e.toasts.map(o=>{var c,u,m;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((c=t[o.type])==null?void 0:c.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((u=t[o.type])==null?void 0:u.duration)||(t==null?void 0:t.duration)||T5[o.type],style:{...t.style,...(m=t[o.type])==null?void 0:m.style,...o.style}}});return{...e,toasts:a}},D5=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:(s==null?void 0:s.id)||A5()}),qu=t=>(e,s)=>{let r=D5(e,t,s);return to({type:2,toast:r}),r.id},Ws=(t,e)=>qu("blank")(t,e);Ws.error=qu("error");Ws.success=qu("success");Ws.loading=qu("loading");Ws.custom=qu("custom");Ws.dismiss=t=>{to({type:3,toastId:t})};Ws.remove=t=>to({type:4,toastId:t});Ws.promise=(t,e,s)=>{let r=Ws.loading(e.loading,{...s,...s==null?void 0:s.loading});return typeof t=="function"&&(t=t()),t.then(a=>{let o=e.success?Nf(e.success,a):void 0;return o?Ws.success(o,{id:r,...s,...s==null?void 0:s.success}):Ws.dismiss(r),a}).catch(a=>{let o=e.error?Nf(e.error,a):void 0;o?Ws.error(o,{id:r,...s,...s==null?void 0:s.error}):Ws.dismiss(r)}),t};var I5=(t,e)=>{to({type:1,toast:{id:t,height:e}})},k5=()=>{to({type:5,time:Date.now()})},fu=new Map,M5=1e3,P5=(t,e=M5)=>{if(fu.has(t))return;let s=setTimeout(()=>{fu.delete(t),to({type:4,toastId:t})},e);fu.set(t,s)},O5=t=>{let{toasts:e,pausedAt:s}=R5(t);S.useEffect(()=>{if(s)return;let o=Date.now(),c=e.map(u=>{if(u.duration===1/0)return;let m=(u.duration||0)+u.pauseDuration-(o-u.createdAt);if(m<0){u.visible&&Ws.dismiss(u.id);return}return setTimeout(()=>Ws.dismiss(u.id),m)});return()=>{c.forEach(u=>u&&clearTimeout(u))}},[e,s]);let r=S.useCallback(()=>{s&&to({type:6,time:Date.now()})},[s]),a=S.useCallback((o,c)=>{let{reverseOrder:u=!1,gutter:m=8,defaultPosition:f}=c||{},x=e.filter(N=>(N.position||f)===(o.position||f)&&N.height),v=x.findIndex(N=>N.id===o.id),y=x.filter((N,w)=>w<v&&N.visible).length;return x.filter(N=>N.visible).slice(...u?[y+1]:[0,y]).reduce((N,w)=>N+(w.height||0)+m,0)},[e]);return S.useEffect(()=>{e.forEach(o=>{if(o.dismissed)P5(o.id,o.removeDelay);else{let c=fu.get(o.id);c&&(clearTimeout(c),fu.delete(o.id))}})},[e]),{toasts:e,handlers:{updateHeight:I5,startPause:k5,endPause:r,calculateOffset:a}}},L5=wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,V5=wa`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,U5=wa`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,F5=Oi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${L5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${V5} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${U5} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,B5=wa`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,H5=Oi("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${B5} 1s linear infinite;
`,z5=wa`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,q5=wa`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,$5=Oi("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${z5} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${q5} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,G5=Oi("div")`
  position: absolute;
`,W5=Oi("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Q5=wa`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Y5=Oi("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Q5} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,K5=({toast:t})=>{let{icon:e,type:s,iconTheme:r}=t;return e!==void 0?typeof e=="string"?S.createElement(Y5,null,e):e:s==="blank"?null:S.createElement(W5,null,S.createElement(H5,{...r}),s!=="loading"&&S.createElement(G5,null,s==="error"?S.createElement(F5,{...r}):S.createElement($5,{...r})))},X5=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Z5=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,J5="0%{opacity:0;} 100%{opacity:1;}",e3="0%{opacity:1;} 100%{opacity:0;}",t3=Oi("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,s3=Oi("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,n3=(t,e)=>{let s=t.includes("top")?1:-1,[r,a]=fS()?[J5,e3]:[X5(s),Z5(s)];return{animation:e?`${wa(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${wa(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},r3=S.memo(({toast:t,position:e,style:s,children:r})=>{let a=t.height?n3(t.position||e||"top-center",t.visible):{opacity:0},o=S.createElement(K5,{toast:t}),c=S.createElement(s3,{...t.ariaProps},Nf(t.message,t));return S.createElement(t3,{className:t.className,style:{...a,...s,...t.style}},typeof r=="function"?r({icon:o,message:c}):S.createElement(S.Fragment,null,o,c))});_5(S.createElement);var a3=({id:t,className:e,style:s,onHeightUpdate:r,children:a})=>{let o=S.useCallback(c=>{if(c){let u=()=>{let m=c.getBoundingClientRect().height;r(t,m)};u(),new MutationObserver(u).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return S.createElement("div",{ref:o,className:e,style:s},a)},i3=(t,e)=>{let s=t.includes("top"),r=s?{top:0}:{bottom:0},a=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:fS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(s?1:-1)}px)`,...r,...a}},l3=dg`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Dm=16,o3=({reverseOrder:t,position:e="top-center",toastOptions:s,gutter:r,children:a,containerStyle:o,containerClassName:c})=>{let{toasts:u,handlers:m}=O5(s);return S.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Dm,left:Dm,right:Dm,bottom:Dm,pointerEvents:"none",...o},className:c,onMouseEnter:m.startPause,onMouseLeave:m.endPause},u.map(f=>{let x=f.position||e,v=m.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:e}),y=i3(x,v);return S.createElement(a3,{id:f.id,key:f.id,onHeightUpdate:m.updateHeight,className:f.visible?l3:"",style:y},f.type==="custom"?Nf(f.message,f):a?a(f):S.createElement(r3,{toast:f,position:x}))}))},W=Ws;const c3=()=>{};var T1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS=function(t){const e=[];let s=0;for(let r=0;r<t.length;r++){let a=t.charCodeAt(r);a<128?e[s++]=a:a<2048?(e[s++]=a>>6|192,e[s++]=a&63|128):(a&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++r)&1023),e[s++]=a>>18|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128,e[s++]=a&63|128):(e[s++]=a>>12|224,e[s++]=a>>6&63|128,e[s++]=a&63|128)}return e},d3=function(t){const e=[];let s=0,r=0;for(;s<t.length;){const a=t[s++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const o=t[s++];e[r++]=String.fromCharCode((a&31)<<6|o&63)}else if(a>239&&a<365){const o=t[s++],c=t[s++],u=t[s++],m=((a&7)<<18|(o&63)<<12|(c&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const o=t[s++],c=t[s++];e[r++]=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63)}}return e.join("")},xS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<t.length;a+=3){const o=t[a],c=a+1<t.length,u=c?t[a+1]:0,m=a+2<t.length,f=m?t[a+2]:0,x=o>>2,v=(o&3)<<4|u>>4;let y=(u&15)<<2|f>>6,N=f&63;m||(N=64,c||(y=64)),r.push(s[x],s[v],s[y],s[N])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(pS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<t.length;){const o=s[t.charAt(a++)],u=a<t.length?s[t.charAt(a)]:0;++a;const f=a<t.length?s[t.charAt(a)]:64;++a;const v=a<t.length?s[t.charAt(a)]:64;if(++a,o==null||u==null||f==null||v==null)throw new u3;const y=o<<2|u>>4;if(r.push(y),f!==64){const N=u<<4&240|f>>2;if(r.push(N),v!==64){const w=f<<6&192|v;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class u3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h3=function(t){const e=pS(t);return xS.encodeByteArray(e,!0)},wf=function(t){return h3(t).replace(/\./g,"")},bS=function(t){try{return xS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=()=>m3().__FIREBASE_DEFAULTS__,g3=()=>{if(typeof process>"u"||typeof T1>"u")return;const t=T1.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},p3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&bS(t[1]);return e&&JSON.parse(e)},ug=()=>{try{return c3()||f3()||g3()||p3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},yS=t=>{var e,s;return(s=(e=ug())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[t]},vS=t=>{const e=yS(t);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),r]:[e.substring(0,s),r]},NS=()=>{var t;return(t=ug())===null||t===void 0?void 0:t.config},wS=t=>{var e;return(e=ug())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,r)=>{s?this.reject(s):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function dy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},r=e||"demo-project",a=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[wf(JSON.stringify(s)),wf(JSON.stringify(c)),""].join(".")}const gu={};function b3(){const t={prod:[],emulator:[]};for(const e of Object.keys(gu))gu[e]?t.emulator.push(e):t.prod.push(e);return t}function y3(t){let e=document.getElementById(t),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),s=!0),{created:s,element:e}}let R1=!1;function uy(t,e){if(typeof window>"u"||typeof document>"u"||!Li(window.location.host)||gu[t]===e||gu[t]||R1)return;gu[t]=e;function s(y){return`__firebase__banner__${y}`}const r="__firebase__banner",o=b3().prod.length>0;function c(){const y=document.getElementById(r);y&&y.remove()}function u(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function m(y,N){y.setAttribute("width","24"),y.setAttribute("id",N),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function f(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{R1=!0,c()},y}function x(y,N){y.setAttribute("id",N),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function v(){const y=y3(r),N=s("text"),w=document.getElementById(N)||document.createElement("span"),E=s("learnmore"),_=document.getElementById(E)||document.createElement("a"),R=s("preprendIcon"),I=document.getElementById(R)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const V=y.element;u(V),x(_,E);const z=f();m(I,R),V.append(I,w,_,z),document.body.appendChild(V)}o?(w.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,w.innerText="Preview backend running in this workspace."),w.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bs())}function N3(){var t;const e=(t=ug())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function w3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ES(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function j3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function E3(){const t=Bs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function _3(){return!N3()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _S(){try{return typeof indexedDB=="object"}catch{return!1}}function SS(){return new Promise((t,e)=>{try{let s=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(r),t(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var o;e(((o=a.error)===null||o===void 0?void 0:o.message)||"")}}catch(s){e(s)}})}function S3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A3="FirebaseError";class Gn extends Error{constructor(e,s,r){super(s),this.code=e,this.customData=r,this.name=A3,Object.setPrototypeOf(this,Gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,so.prototype.create)}}class so{constructor(e,s,r){this.service=e,this.serviceName=s,this.errors=r}create(e,...s){const r=s[0]||{},a=`${this.service}/${e}`,o=this.errors[e],c=o?C3(o,r):"Error",u=`${this.serviceName}: ${c} (${a}).`;return new Gn(a,u,r)}}function C3(t,e){return t.replace(T3,(s,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const T3=/\{\$([^}]+)}/g;function R3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ja(t,e){if(t===e)return!0;const s=Object.keys(t),r=Object.keys(e);for(const a of s){if(!r.includes(a))return!1;const o=t[a],c=e[a];if(D1(o)&&D1(c)){if(!ja(o,c))return!1}else if(o!==c)return!1}for(const a of r)if(!s.includes(a))return!1;return!0}function D1(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){const e=[];for(const[s,r]of Object.entries(t))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(s)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(s)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ou(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,o]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(o)}}),e}function cu(t){const e=t.indexOf("?");if(!e)return"";const s=t.indexOf("#",e);return t.substring(e,s>0?s:void 0)}function D3(t,e){const s=new I3(t,e);return s.subscribe.bind(s)}class I3{constructor(e,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(s=>{s.next(e)})}error(e){this.forEachObserver(s=>{s.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,s,r){let a;if(e===void 0&&s===void 0&&r===void 0)throw new Error("Missing Observer.");k3(e,["next","error","complete"])?a=e:a={next:e,error:s,complete:r},a.next===void 0&&(a.next=cx),a.error===void 0&&(a.error=cx),a.complete===void 0&&(a.complete=cx);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,e)}sendOne(e,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{s(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function k3(t,e){if(typeof t!="object"||t===null)return!1;for(const s of e)if(s in t&&typeof t[s]=="function")return!0;return!1}function cx(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M3=1e3,P3=2,O3=4*60*60*1e3,L3=.5;function I1(t,e=M3,s=P3){const r=e*Math.pow(s,t),a=Math.round(L3*r*(Math.random()-.5)*2);return Math.min(O3,r+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t){return t&&t._delegate?t._delegate:t}class qn{constructor(e,s,r){this.name=e,this.instanceFactory=s,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const r=new x3;if(this.instancesDeferred.set(s,r),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(s=e==null?void 0:e.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(F3(e))try{this.getOrInitializeService({instanceIdentifier:Cl})}catch{}for(const[s,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const o=this.getOrInitializeService({instanceIdentifier:a});r.resolve(o)}catch{}}}}clearInstance(e=Cl){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cl){return this.instances.has(e)}getOptions(e=Cl){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:s});for(const[o,c]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&c.resolve(a)}return a}onInit(e,s){var r;const a=this.normalizeInstanceIdentifier(s),o=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,s){const r=this.onInitCallbacks.get(s);if(r)for(const a of r)try{a(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U3(e),options:s}),this.instances.set(e,r),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cl){return this.component?this.component.multipleInstances?e:Cl:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U3(t){return t===Cl?void 0:t}function F3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new V3(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(et||(et={}));const H3={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},z3=et.INFO,q3={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},$3=(t,e,...s)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),a=q3[e];if(a)console[a](`[${r}]  ${t.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hg{constructor(e){this.name=e,this._logLevel=z3,this._logHandler=$3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?H3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const G3=(t,e)=>e.some(s=>t instanceof s);let k1,M1;function W3(){return k1||(k1=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Q3(){return M1||(M1=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const AS=new WeakMap,ab=new WeakMap,CS=new WeakMap,dx=new WeakMap,hy=new WeakMap;function Y3(t){const e=new Promise((s,r)=>{const a=()=>{t.removeEventListener("success",o),t.removeEventListener("error",c)},o=()=>{s(Ni(t.result)),a()},c=()=>{r(t.error),a()};t.addEventListener("success",o),t.addEventListener("error",c)});return e.then(s=>{s instanceof IDBCursor&&AS.set(s,t)}).catch(()=>{}),hy.set(e,t),e}function K3(t){if(ab.has(t))return;const e=new Promise((s,r)=>{const a=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",c),t.removeEventListener("abort",c)},o=()=>{s(),a()},c=()=>{r(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",o),t.addEventListener("error",c),t.addEventListener("abort",c)});ab.set(t,e)}let ib={get(t,e,s){if(t instanceof IDBTransaction){if(e==="done")return ab.get(t);if(e==="objectStoreNames")return t.objectStoreNames||CS.get(t);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return Ni(t[e])},set(t,e,s){return t[e]=s,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function X3(t){ib=t(ib)}function Z3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const r=t.call(ux(this),e,...s);return CS.set(r,e.sort?e.sort():[e]),Ni(r)}:Q3().includes(t)?function(...e){return t.apply(ux(this),e),Ni(AS.get(this))}:function(...e){return Ni(t.apply(ux(this),e))}}function J3(t){return typeof t=="function"?Z3(t):(t instanceof IDBTransaction&&K3(t),G3(t,W3())?new Proxy(t,ib):t)}function Ni(t){if(t instanceof IDBRequest)return Y3(t);if(dx.has(t))return dx.get(t);const e=J3(t);return e!==t&&(dx.set(t,e),hy.set(e,t)),e}const ux=t=>hy.get(t);function TS(t,e,{blocked:s,upgrade:r,blocking:a,terminated:o}={}){const c=indexedDB.open(t,e),u=Ni(c);return r&&c.addEventListener("upgradeneeded",m=>{r(Ni(c.result),m.oldVersion,m.newVersion,Ni(c.transaction),m)}),s&&c.addEventListener("blocked",m=>s(m.oldVersion,m.newVersion,m)),u.then(m=>{o&&m.addEventListener("close",()=>o()),a&&m.addEventListener("versionchange",f=>a(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const ek=["get","getKey","getAll","getAllKeys","count"],tk=["put","add","delete","clear"],hx=new Map;function P1(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hx.get(e))return hx.get(e);const s=e.replace(/FromIndex$/,""),r=e!==s,a=tk.includes(s);if(!(s in(r?IDBIndex:IDBObjectStore).prototype)||!(a||ek.includes(s)))return;const o=async function(c,...u){const m=this.transaction(c,a?"readwrite":"readonly");let f=m.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[s](...u),a&&m.done]))[0]};return hx.set(e,o),o}X3(t=>({...t,get:(e,s,r)=>P1(e,s)||t.get(e,s,r),has:(e,s)=>!!P1(e,s)||t.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(nk(s)){const r=s.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(s=>s).join(" ")}}function nk(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const lb="@firebase/app",O1="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new hg("@firebase/app"),rk="@firebase/app-compat",ak="@firebase/analytics-compat",ik="@firebase/analytics",lk="@firebase/app-check-compat",ok="@firebase/app-check",ck="@firebase/auth",dk="@firebase/auth-compat",uk="@firebase/database",hk="@firebase/data-connect",mk="@firebase/database-compat",fk="@firebase/functions",gk="@firebase/functions-compat",pk="@firebase/installations",xk="@firebase/installations-compat",bk="@firebase/messaging",yk="@firebase/messaging-compat",vk="@firebase/performance",Nk="@firebase/performance-compat",wk="@firebase/remote-config",jk="@firebase/remote-config-compat",Ek="@firebase/storage",_k="@firebase/storage-compat",Sk="@firebase/firestore",Ak="@firebase/ai",Ck="@firebase/firestore-compat",Tk="firebase",Rk="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="[DEFAULT]",Dk={[lb]:"fire-core",[rk]:"fire-core-compat",[ik]:"fire-analytics",[ak]:"fire-analytics-compat",[ok]:"fire-app-check",[lk]:"fire-app-check-compat",[ck]:"fire-auth",[dk]:"fire-auth-compat",[uk]:"fire-rtdb",[hk]:"fire-data-connect",[mk]:"fire-rtdb-compat",[fk]:"fire-fn",[gk]:"fire-fn-compat",[pk]:"fire-iid",[xk]:"fire-iid-compat",[bk]:"fire-fcm",[yk]:"fire-fcm-compat",[vk]:"fire-perf",[Nk]:"fire-perf-compat",[wk]:"fire-rc",[jk]:"fire-rc-compat",[Ek]:"fire-gcs",[_k]:"fire-gcs-compat",[Sk]:"fire-fst",[Ck]:"fire-fst-compat",[Ak]:"fire-vertex","fire-js":"fire-js",[Tk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Map,Ik=new Map,cb=new Map;function L1(t,e){try{t.container.addComponent(e)}catch(s){Ea.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,s)}}function sr(t){const e=t.name;if(cb.has(e))return Ea.debug(`There were multiple attempts to register component ${e}.`),!1;cb.set(e,t);for(const s of jf.values())L1(s,t);for(const s of Ik.values())L1(s,t);return!0}function Vi(t,e){const s=t.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),t.container.getProvider(e)}function tn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wi=new so("app","Firebase",kk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,s,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new qn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=Rk;function RS(t,e={}){let s=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ob,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw wi.create("bad-app-name",{appName:String(a)});if(s||(s=NS()),!s)throw wi.create("no-options");const o=jf.get(a);if(o){if(ja(s,o.options)&&ja(r,o.config))return o;throw wi.create("duplicate-app",{appName:a})}const c=new B3(a);for(const m of cb.values())c.addComponent(m);const u=new Mk(s,r,c);return jf.set(a,u),u}function mg(t=ob){const e=jf.get(t);if(!e&&t===ob&&NS())return RS();if(!e)throw wi.create("no-app",{appName:t});return e}function rn(t,e,s){var r;let a=(r=Dk[t])!==null&&r!==void 0?r:t;s&&(a+=`-${s}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${a}" with version "${e}":`];o&&u.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ea.warn(u.join(" "));return}sr(new qn(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="firebase-heartbeat-database",Ok=1,Cu="firebase-heartbeat-store";let mx=null;function DS(){return mx||(mx=TS(Pk,Ok,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(s){console.warn(s)}}}}).catch(t=>{throw wi.create("idb-open",{originalErrorMessage:t.message})})),mx}async function Lk(t){try{const s=(await DS()).transaction(Cu),r=await s.objectStore(Cu).get(IS(t));return await s.done,r}catch(e){if(e instanceof Gn)Ea.warn(e.message);else{const s=wi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ea.warn(s.message)}}}async function V1(t,e){try{const r=(await DS()).transaction(Cu,"readwrite");await r.objectStore(Cu).put(e,IS(t)),await r.done}catch(s){if(s instanceof Gn)Ea.warn(s.message);else{const r=wi.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});Ea.warn(r.message)}}}function IS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=1024,Uk=30;class Fk{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new Hk(s),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,s;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=U1();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:a}),this._heartbeatsCache.heartbeats.length>Uk){const c=zk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ea.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=U1(),{heartbeatsToSend:r,unsentEntries:a}=Bk(this._heartbeatsCache.heartbeats),o=wf(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(s){return Ea.warn(s),""}}}function U1(){return new Date().toISOString().substring(0,10)}function Bk(t,e=Vk){const s=[];let r=t.slice();for(const a of t){const o=s.find(c=>c.agent===a.agent);if(o){if(o.dates.push(a.date),F1(s)>e){o.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),F1(s)>e){s.pop();break}r=r.slice(1)}return{heartbeatsToSend:s,unsentEntries:r}}class Hk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return _S()?SS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await Lk(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return V1(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return V1(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function F1(t){return wf(JSON.stringify({version:2,heartbeats:t})).length}function zk(t){if(t.length===0)return-1;let e=0,s=t[0].date;for(let r=1;r<t.length;r++)t[r].date<s&&(s=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(t){sr(new qn("platform-logger",e=>new sk(e),"PRIVATE")),sr(new qn("heartbeat",e=>new Fk(e),"PRIVATE")),rn(lb,O1,t),rn(lb,O1,"esm2017"),rn("fire-js","")}qk("");function kS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const $k=kS,MS=new so("auth","Firebase",kS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef=new hg("@firebase/auth");function Gk(t,...e){Ef.logLevel<=et.WARN&&Ef.warn(`Auth (${no}): ${t}`,...e)}function tf(t,...e){Ef.logLevel<=et.ERROR&&Ef.error(`Auth (${no}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,...e){throw fy(t,...e)}function tr(t,...e){return fy(t,...e)}function my(t,e,s){const r=Object.assign(Object.assign({},$k()),{[e]:s});return new so("auth","Firebase",r).create(e,{appName:t.name})}function xa(t){return my(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wk(t,e,s){const r=s;if(!(e instanceof r))throw r.name!==e.constructor.name&&$n(t,"argument-error"),my(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fy(t,...e){if(typeof t!="string"){const s=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(s,...r)}return MS.create(t,...e)}function Le(t,e,...s){if(!t)throw fy(e,...s)}function ma(t){const e="INTERNAL ASSERTION FAILED: "+t;throw tf(e),new Error(e)}function _a(t,e){t||ma(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Qk(){return B1()==="http:"||B1()==="https:"}function B1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Qk()||ES()||"connection"in navigator)?navigator.onLine:!0}function Kk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu{constructor(e,s){this.shortDelay=e,this.longDelay=s,_a(s>e,"Short delay should be less than long delay!"),this.isMobile=v3()||j3()}get(){return Yk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gy(t,e){_a(t.emulator,"Emulator should always be set here");const{url:s}=t.emulator;return e?`${s}${e.startsWith("/")?e.slice(1):e}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{static initialize(e,s,r){this.fetchImpl=e,s&&(this.headersImpl=s),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ma("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ma("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ma("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Jk=new Gu(3e4,6e4);function Ui(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ia(t,e,s,r,a={}){return OS(t,a,async()=>{let o={},c={};r&&(e==="GET"?c=r:o={body:JSON.stringify(r)});const u=$u(Object.assign({key:t.config.apiKey},c)).slice(1),m=await t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);const f=Object.assign({method:e,headers:m},o);return w3()||(f.referrerPolicy="no-referrer"),t.emulatorConfig&&Li(t.emulatorConfig.host)&&(f.credentials="include"),PS.fetch()(await LS(t,t.config.apiHost,s,u),f)})}async function OS(t,e,s){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Xk),e);try{const a=new tM(t),o=await Promise.race([s(),a.promise]);a.clearNetworkTimeout();const c=await o.json();if("needConfirmation"in c)throw Im(t,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{const u=o.ok?c.errorMessage:c.error.message,[m,f]=u.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Im(t,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Im(t,"email-already-in-use",c);if(m==="USER_DISABLED")throw Im(t,"user-disabled",c);const x=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw my(t,x,f);$n(t,x)}}catch(a){if(a instanceof Gn)throw a;$n(t,"network-request-failed",{message:String(a)})}}async function Wu(t,e,s,r,a={}){const o=await Ia(t,e,s,r,a);return"mfaPendingCredential"in o&&$n(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function LS(t,e,s,r){const a=`${e}${s}?${r}`,o=t,c=o.config.emulator?gy(t.config,a):`${t.config.apiScheme}://${a}`;return Zk.includes(s)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(c).toString():c}function eM(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((s,r)=>{this.timer=setTimeout(()=>r(tr(this.auth,"network-request-failed")),Jk.get())})}}function Im(t,e,s){const r={appName:t.name};s.email&&(r.email=s.email),s.phoneNumber&&(r.phoneNumber=s.phoneNumber);const a=tr(t,e,r);return a.customData._tokenResponse=s,a}function H1(t){return t!==void 0&&t.enterprise!==void 0}class sM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===e)return eM(s.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function nM(t,e){return Ia(t,"GET","/v2/recaptchaConfig",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rM(t,e){return Ia(t,"POST","/v1/accounts:delete",e)}async function _f(t,e){return Ia(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function aM(t,e=!1){const s=Rt(t),r=await s.getIdToken(e),a=py(r);Le(a&&a.exp&&a.auth_time&&a.iat,s.auth,"internal-error");const o=typeof a.firebase=="object"?a.firebase:void 0,c=o==null?void 0:o.sign_in_provider;return{claims:a,token:r,authTime:pu(fx(a.auth_time)),issuedAtTime:pu(fx(a.iat)),expirationTime:pu(fx(a.exp)),signInProvider:c||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function fx(t){return Number(t)*1e3}function py(t){const[e,s,r]=t.split(".");if(e===void 0||s===void 0||r===void 0)return tf("JWT malformed, contained fewer than 3 sections"),null;try{const a=bS(s);return a?JSON.parse(a):(tf("Failed to decode base64 JWT payload"),null)}catch(a){return tf("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function z1(t){const e=py(t);return Le(e,"internal-error"),Le(typeof e.exp<"u","internal-error"),Le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nc(t,e,s=!1){if(s)return e;try{return await e}catch(r){throw r instanceof Gn&&iM(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function iM({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var s;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const s=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,s){this.createdAt=e,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=pu(this.lastLoginAt),this.creationTime=pu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sf(t){var e;const s=t.auth,r=await t.getIdToken(),a=await Nc(t,_f(s,{idToken:r}));Le(a==null?void 0:a.users.length,s,"internal-error");const o=a.users[0];t._notifyReloadListener(o);const c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?VS(o.providerUserInfo):[],u=cM(t.providerData,c),m=t.isAnonymous,f=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),x=m?f:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ub(o.createdAt,o.lastLoginAt),isAnonymous:x};Object.assign(t,v)}async function oM(t){const e=Rt(t);await Sf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function cM(t,e){return[...t.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function VS(t){return t.map(e=>{var{providerId:s}=e,r=ty(e,["providerId"]);return{providerId:s,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dM(t,e){const s=await OS(t,{},async()=>{const r=$u({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:o}=t.config,c=await LS(t,a,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:u,body:r};return t.emulatorConfig&&Li(t.emulatorConfig.host)&&(m.credentials="include"),PS.fetch()(c,m)});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function uM(t,e){return Ia(t,"POST","/v2/accounts:revokeToken",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Le(e.idToken,"internal-error"),Le(typeof e.idToken<"u","internal-error"),Le(typeof e.refreshToken<"u","internal-error");const s="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):z1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,s)}updateFromIdToken(e){Le(e.length!==0,"internal-error");const s=z1(e);this.updateTokensAndExpiration(e,null,s)}async getToken(e,s=!1){return!s&&this.accessToken&&!this.isExpired?this.accessToken:(Le(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,s){const{accessToken:r,refreshToken:a,expiresIn:o}=await dM(e,s);this.updateTokensAndExpiration(r,a,Number(o))}updateTokensAndExpiration(e,s,r){this.refreshToken=s||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,s){const{refreshToken:r,accessToken:a,expirationTime:o}=s,c=new uc;return r&&(Le(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),a&&(Le(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),o&&(Le(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new uc,this.toJSON())}_performRefresh(){return ma("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t,e){Le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:s,auth:r,stsTokenManager:a}=e,o=ty(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new lM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ub(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const s=await Nc(this,this.stsTokenManager.getToken(this.auth,e));return Le(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(e){return aM(this,e)}reload(){return oM(this)}_assign(e){this!==e&&(Le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(s=>Object.assign({},s)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const s=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(e){Le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,s=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),s&&await Sf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tn(this.auth.app))return Promise.reject(xa(this.auth));const e=await this.getIdToken();return await Nc(this,rM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,s){var r,a,o,c,u,m,f,x;const v=(r=s.displayName)!==null&&r!==void 0?r:void 0,y=(a=s.email)!==null&&a!==void 0?a:void 0,N=(o=s.phoneNumber)!==null&&o!==void 0?o:void 0,w=(c=s.photoURL)!==null&&c!==void 0?c:void 0,E=(u=s.tenantId)!==null&&u!==void 0?u:void 0,_=(m=s._redirectEventId)!==null&&m!==void 0?m:void 0,R=(f=s.createdAt)!==null&&f!==void 0?f:void 0,I=(x=s.lastLoginAt)!==null&&x!==void 0?x:void 0,{uid:V,emailVerified:z,isAnonymous:F,providerData:P,stsTokenManager:C}=s;Le(V&&C,e,"internal-error");const D=uc.fromJSON(this.name,C);Le(typeof V=="string",e,"internal-error"),ci(v,e.name),ci(y,e.name),Le(typeof z=="boolean",e,"internal-error"),Le(typeof F=="boolean",e,"internal-error"),ci(N,e.name),ci(w,e.name),ci(E,e.name),ci(_,e.name),ci(R,e.name),ci(I,e.name);const k=new Jn({uid:V,auth:e,email:y,emailVerified:z,displayName:v,isAnonymous:F,photoURL:w,phoneNumber:N,tenantId:E,stsTokenManager:D,createdAt:R,lastLoginAt:I});return P&&Array.isArray(P)&&(k.providerData=P.map(O=>Object.assign({},O))),_&&(k._redirectEventId=_),k}static async _fromIdTokenResponse(e,s,r=!1){const a=new uc;a.updateFromServerResponse(s);const o=new Jn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Sf(o),o}static async _fromGetAccountInfoResponse(e,s,r){const a=s.users[0];Le(a.localId!==void 0,"internal-error");const o=a.providerUserInfo!==void 0?VS(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!(o!=null&&o.length),u=new uc;u.updateFromIdToken(r);const m=new Jn({uid:a.localId,auth:e,stsTokenManager:u,isAnonymous:c}),f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:o,metadata:new ub(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(o!=null&&o.length)};return Object.assign(m,f),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1=new Map;function fa(t){_a(t instanceof Function,"Expected a class definition");let e=q1.get(t);return e?(_a(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,q1.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,s){this.storage[e]=s}async _get(e){const s=this.storage[e];return s===void 0?null:s}async _remove(e){delete this.storage[e]}_addListener(e,s){}_removeListener(e,s){}}US.type="NONE";const $1=US;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sf(t,e,s){return`firebase:${t}:${e}:${s}`}class hc{constructor(e,s,r){this.persistence=e,this.auth=s,this.userKey=r;const{config:a,name:o}=this.auth;this.fullUserKey=sf(this.userKey,a.apiKey,o),this.fullPersistenceKey=sf("persistence",a.apiKey,o),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const s=await _f(this.auth,{idToken:e}).catch(()=>{});return s?Jn._fromGetAccountInfoResponse(this.auth,s,e):null}return Jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,s,r="authUser"){if(!s.length)return new hc(fa($1),e,r);const a=(await Promise.all(s.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let o=a[0]||fa($1);const c=sf(r,e.config.apiKey,e.name);let u=null;for(const f of s)try{const x=await f._get(c);if(x){let v;if(typeof x=="string"){const y=await _f(e,{idToken:x}).catch(()=>{});if(!y)break;v=await Jn._fromGetAccountInfoResponse(e,y,x)}else v=Jn._fromJSON(e,x);f!==o&&(u=v),o=f;break}}catch{}const m=a.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!m.length?new hc(o,e,r):(o=m[0],u&&await o._set(c,u.toJSON()),await Promise.all(s.map(async f=>{if(f!==o)try{await f._remove(c)}catch{}})),new hc(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(FS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($S(e))return"Blackberry";if(GS(e))return"Webos";if(BS(e))return"Safari";if((e.includes("chrome/")||HS(e))&&!e.includes("edge/"))return"Chrome";if(qS(e))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(s);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function FS(t=Bs()){return/firefox\//i.test(t)}function BS(t=Bs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function HS(t=Bs()){return/crios\//i.test(t)}function zS(t=Bs()){return/iemobile/i.test(t)}function qS(t=Bs()){return/android/i.test(t)}function $S(t=Bs()){return/blackberry/i.test(t)}function GS(t=Bs()){return/webos/i.test(t)}function xy(t=Bs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hM(t=Bs()){var e;return xy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function mM(){return E3()&&document.documentMode===10}function WS(t=Bs()){return xy(t)||qS(t)||GS(t)||$S(t)||/windows phone/i.test(t)||zS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e=[]){let s;switch(t){case"Browser":s=G1(Bs());break;case"Worker":s=`${G1(Bs())}-${t}`;break;default:s=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${s}/JsCore/${no}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,s){const r=o=>new Promise((c,u)=>{try{const m=e(o);c(m)}catch(m){u(m)}});r.onAbort=s,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const s=[];try{for(const r of this.queue)await r(e),r.onAbort&&s.push(r.onAbort)}catch(r){s.reverse();for(const a of s)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e={}){return Ia(t,"GET","/v2/passwordPolicy",Ui(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=6;class xM{constructor(e){var s,r,a,o;const c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=c.minPasswordLength)!==null&&s!==void 0?s:pM,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var s,r,a,o,c,u;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(s=m.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(o=m.containsUppercaseLetter)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(c=m.containsNumericCharacter)!==null&&c!==void 0?c:!0),m.isValid&&(m.isValid=(u=m.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),m}validatePasswordLengthOptions(e,s){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(s.meetsMinPasswordLength=e.length>=r),a&&(s.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(s,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,s,r,a,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,s,r,a){this.app=e,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new W1(this),this.idTokenSubscription=new W1(this),this.beforeStateQueue=new fM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=MS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,s){return s&&(this._popupRedirectResolver=fa(s)),this._initializationPromise=this.queue(async()=>{var r,a,o;if(!this._deleted&&(this.persistenceManager=await hc.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const s=await _f(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,s,e);await this.directlySetCurrentUser(r)}catch(s){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",s),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(tn(this.app)){const c=this.app.settings.authIdToken;return c?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const c=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,u=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!c||c===u)&&(m!=null&&m.user)&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(c){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(e){try{await Sf(e)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tn(this.app))return Promise.reject(xa(this));const s=e?Rt(e):null;return s&&Le(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(e,s=!1){if(!this._deleted)return e&&Le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tn(this.app)?Promise.reject(xa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tn(this.app)?Promise.reject(xa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await gM(this),s=new xM(e);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new so("auth","Firebase",e())}onAuthStateChanged(e,s,r){return this.registerStateListener(this.authStateSubscription,e,s,r)}beforeAuthStateChanged(e,s){return this.beforeStateQueue.pushCallback(e,s)}onIdTokenChanged(e,s,r){return this.registerStateListener(this.idTokenSubscription,e,s,r)}authStateReady(){return new Promise((e,s)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},s)}})}async revokeAccessToken(e){if(this.currentUser){const s=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:s};this.tenantId!=null&&(r.tenantId=this.tenantId),await uM(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,s){const r=await this.getOrInitRedirectPersistenceManager(s);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const s=e&&fa(e)||this._popupRedirectResolver;Le(s,this,"argument-error"),this.redirectPersistenceManager=await hc.create(this,[fa(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var s,r;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(s=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,s,r,a){if(this._deleted)return()=>{};const o=typeof s=="function"?s:s.next.bind(s);let c=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Le(u,this,"internal-error"),u.then(()=>{c||o(this.currentUser)}),typeof s=="function"){const m=e.addObserver(s,r,a);return()=>{c=!0,m()}}else{const m=e.addObserver(s);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=QS(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(s["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(s["X-Firebase-AppCheck"]=a),s}async _getAppCheckToken(){var e;if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const s=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return s!=null&&s.error&&Gk(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function Fi(t){return Rt(t)}class W1{constructor(e){this.auth=e,this.observer=null,this.addObserver=D3(s=>this.observer=s)}get next(){return Le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function yM(t){fg=t}function YS(t){return fg.loadJS(t)}function vM(){return fg.recaptchaEnterpriseScript}function NM(){return fg.gapiScript}function wM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class jM{constructor(){this.enterprise=new EM}ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}class EM{ready(e){e()}execute(e,s){return Promise.resolve("token")}render(e,s){return""}}const _M="recaptcha-enterprise",KS="NO_RECAPTCHA";class SM{constructor(e){this.type=_M,this.auth=Fi(e)}async verify(e="verify",s=!1){async function r(o){if(!s){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(c,u)=>{nM(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const f=new sM(m);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(m=>{u(m)})})}function a(o,c,u){const m=window.grecaptcha;H1(m)?m.enterprise.ready(()=>{m.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(KS)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new jM().execute("siteKey",{action:"verify"}):new Promise((o,c)=>{r(this.auth).then(u=>{if(!s&&H1(window.grecaptcha))a(u,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let m=vM();m.length!==0&&(m+=u),YS(m).then(()=>{a(u,o,c)}).catch(f=>{c(f)})}}).catch(u=>{c(u)})})}}async function Q1(t,e,s,r=!1,a=!1){const o=new SM(t);let c;if(a)c=KS;else try{c=await o.verify(s)}catch{c=await o.verify(s,!0)}const u=Object.assign({},e);if(s==="mfaSmsEnrollment"||s==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in u){const m=u.phoneEnrollmentInfo.phoneNumber,f=u.phoneEnrollmentInfo.recaptchaToken;Object.assign(u,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:f,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in u){const m=u.phoneSignInInfo.recaptchaToken;Object.assign(u,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return u}return r?Object.assign(u,{captchaResp:c}):Object.assign(u,{captchaResponse:c}),Object.assign(u,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(u,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),u}async function hb(t,e,s,r,a){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const c=await Q1(t,e,s,s==="getOobCode");return r(t,c)}else return r(t,e).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Q1(t,e,s,s==="getOobCode");return r(t,u)}else return Promise.reject(c)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t,e){const s=Vi(t,"auth");if(s.isInitialized()){const a=s.getImmediate(),o=s.getOptions();if(ja(o,e??{}))return a;$n(a,"already-initialized")}return s.initialize({options:e})}function CM(t,e){const s=(e==null?void 0:e.persistence)||[],r=(Array.isArray(s)?s:[s]).map(fa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TM(t,e,s){const r=Fi(t);Le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,o=XS(e),{host:c,port:u}=RM(e),m=u===null?"":`:${u}`,f={url:`${o}//${c}${m}/`},x=Object.freeze({host:c,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Le(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Le(ja(f,r.config.emulator)&&ja(x,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=f,r.emulatorConfig=x,r.settings.appVerificationDisabledForTesting=!0,Li(c)?(dy(`${o}//${c}${m}`),uy("Auth",!0)):DM()}function XS(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function RM(t){const e=XS(t),s=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!s)return{host:"",port:null};const r=s[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const o=a[1];return{host:o,port:Y1(r.substr(o.length+1))}}else{const[o,c]=r.split(":");return{host:o,port:Y1(c)}}}function Y1(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function DM(){function t(){const e=document.createElement("p"),s=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e,s){this.providerId=e,this.signInMethod=s}toJSON(){return ma("not implemented")}_getIdTokenResponse(e){return ma("not implemented")}_linkToIdToken(e,s){return ma("not implemented")}_getReauthenticationResolver(e){return ma("not implemented")}}async function IM(t,e){return Ia(t,"POST","/v1/accounts:update",e)}async function kM(t,e){return Ia(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MM(t,e){return Wu(t,"POST","/v1/accounts:signInWithPassword",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PM(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",Ui(t,e))}async function OM(t,e){return Wu(t,"POST","/v1/accounts:signInWithEmailLink",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tu extends by{constructor(e,s,r,a=null){super("password",r),this._email=e,this._password=s,this._tenantId=a}static _fromEmailAndPassword(e,s){return new Tu(e,s,"password")}static _fromEmailAndCode(e,s,r=null){return new Tu(e,s,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e;if(s!=null&&s.email&&(s!=null&&s.password)){if(s.signInMethod==="password")return this._fromEmailAndPassword(s.email,s.password);if(s.signInMethod==="emailLink")return this._fromEmailAndCode(s.email,s.password,s.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const s={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,s,"signInWithPassword",MM);case"emailLink":return PM(e,{email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}async _linkToIdToken(e,s){switch(this.signInMethod){case"password":const r={idToken:s,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,r,"signUpPassword",kM);case"emailLink":return OM(e,{idToken:s,email:this._email,oobCode:this._password});default:$n(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mc(t,e){return Wu(t,"POST","/v1/accounts:signInWithIdp",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LM="http://localhost";class Hl extends by{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const s=new Hl(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(s.idToken=e.idToken),e.accessToken&&(s.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(s.nonce=e.nonce),e.pendingToken&&(s.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(s.accessToken=e.oauthToken,s.secret=e.oauthTokenSecret):$n("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const s=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=s,o=ty(s,["providerId","signInMethod"]);if(!r||!a)return null;const c=new Hl(r,a);return c.idToken=o.idToken||void 0,c.accessToken=o.accessToken||void 0,c.secret=o.secret,c.nonce=o.nonce,c.pendingToken=o.pendingToken||null,c}_getIdTokenResponse(e){const s=this.buildRequest();return mc(e,s)}_linkToIdToken(e,s){const r=this.buildRequest();return r.idToken=s,mc(e,r)}_getReauthenticationResolver(e){const s=this.buildRequest();return s.autoCreate=!1,mc(e,s)}buildRequest(){const e={requestUri:LM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),e.postBody=$u(s)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VM(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function UM(t){const e=ou(cu(t)).link,s=e?ou(cu(e)).deep_link_id:null,r=ou(cu(t)).deep_link_id;return(r?ou(cu(r)).link:null)||r||s||e||t}class yy{constructor(e){var s,r,a,o,c,u;const m=ou(cu(e)),f=(s=m.apiKey)!==null&&s!==void 0?s:null,x=(r=m.oobCode)!==null&&r!==void 0?r:null,v=VM((a=m.mode)!==null&&a!==void 0?a:null);Le(f&&x&&v,"argument-error"),this.apiKey=f,this.operation=v,this.code=x,this.continueUrl=(o=m.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=m.lang)!==null&&c!==void 0?c:null,this.tenantId=(u=m.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const s=UM(e);try{return new yy(s)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lc{constructor(){this.providerId=Lc.PROVIDER_ID}static credential(e,s){return Tu._fromEmailAndPassword(e,s)}static credentialWithLink(e,s){const r=yy.parseLink(s);return Le(r,"argument-error"),Tu._fromEmailAndCode(e,r.code,r.tenantId)}}Lc.PROVIDER_ID="password";Lc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends vy{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui extends Qu{constructor(){super("facebook.com")}static credential(e){return Hl._fromParams({providerId:ui.PROVIDER_ID,signInMethod:ui.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ui.credentialFromTaggedObject(e)}static credentialFromError(e){return ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ui.credential(e.oauthAccessToken)}catch{return null}}}ui.FACEBOOK_SIGN_IN_METHOD="facebook.com";ui.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,s){return Hl._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:s})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:s,oauthAccessToken:r}=e;if(!s&&!r)return null;try{return ua.credential(s,r)}catch{return null}}}ua.GOOGLE_SIGN_IN_METHOD="google.com";ua.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi extends Qu{constructor(){super("github.com")}static credential(e){return Hl._fromParams({providerId:hi.PROVIDER_ID,signInMethod:hi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hi.credentialFromTaggedObject(e)}static credentialFromError(e){return hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hi.credential(e.oauthAccessToken)}catch{return null}}}hi.GITHUB_SIGN_IN_METHOD="github.com";hi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Qu{constructor(){super("twitter.com")}static credential(e,s){return Hl._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:s})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:s,oauthTokenSecret:r}=e;if(!s||!r)return null;try{return mi.credential(s,r)}catch{return null}}}mi.TWITTER_SIGN_IN_METHOD="twitter.com";mi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FM(t,e){return Wu(t,"POST","/v1/accounts:signUp",Ui(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,s,r,a=!1){const o=await Jn._fromIdTokenResponse(e,r,a),c=K1(r);return new zl({user:o,providerId:c,_tokenResponse:r,operationType:s})}static async _forOperation(e,s,r){await e._updateTokensIfNecessary(r,!0);const a=K1(r);return new zl({user:e,providerId:a,_tokenResponse:r,operationType:s})}}function K1(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Gn{constructor(e,s,r,a){var o;super(s.code,s.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Af.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:s.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,s,r,a){return new Af(e,s,r,a)}}function ZS(t,e,s,r){return(e==="reauthenticate"?s._getReauthenticationResolver(t):s._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Af._fromErrorAndOperation(t,o,e,r):o})}async function BM(t,e,s=!1){const r=await Nc(t,e._linkToIdToken(t.auth,await t.getIdToken()),s);return zl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HM(t,e,s=!1){const{auth:r}=t;if(tn(r.app))return Promise.reject(xa(r));const a="reauthenticate";try{const o=await Nc(t,ZS(r,a,e,t),s);Le(o.idToken,r,"internal-error");const c=py(o.idToken);Le(c,r,"internal-error");const{sub:u}=c;return Le(t.uid===u,r,"user-mismatch"),zl._forOperation(t,a,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&$n(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JS(t,e,s=!1){if(tn(t.app))return Promise.reject(xa(t));const r="signIn",a=await ZS(t,r,e),o=await zl._fromIdTokenResponse(t,r,a);return s||await t._updateCurrentUser(o.user),o}async function zM(t,e){return JS(Fi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(t){const e=Fi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Ny(t,e,s){if(tn(t.app))return Promise.reject(xa(t));const r=Fi(t),c=await hb(r,{returnSecureToken:!0,email:e,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",FM).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&eA(t),m}),u=await zl._fromIdTokenResponse(r,"signIn",c);return await r._updateCurrentUser(u.user),u}function qM(t,e,s){return tn(t.app)?Promise.reject(xa(t)):zM(Rt(t),Lc.credential(e,s)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&eA(t),r})}function tA(t,e){return $M(Rt(t),null,e)}async function $M(t,e,s){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};s&&(o.password=s);const c=await Nc(t,IM(r,o));await t._updateTokensIfNecessary(c,!0)}function GM(t,e,s,r){return Rt(t).onIdTokenChanged(e,s,r)}function WM(t,e,s){return Rt(t).beforeAuthStateChanged(e,s)}function QM(t,e,s,r){return Rt(t).onAuthStateChanged(e,s,r)}function YM(t){return Rt(t).signOut()}const Cf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e,s){this.storageRetriever=e,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(Cf,"1"),this.storage.removeItem(Cf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,s){return this.storage.setItem(e,JSON.stringify(s)),Promise.resolve()}_get(e){const s=this.storage.getItem(e);return Promise.resolve(s?JSON.parse(s):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KM=1e3,XM=10;class nA extends sA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,s)=>this.onStorageEvent(e,s),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WS(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const s of Object.keys(this.listeners)){const r=this.storage.getItem(s),a=this.localCache[s];r!==a&&e(s,a,r)}}onStorageEvent(e,s=!1){if(!e.key){this.forAllChangedKeys((c,u,m)=>{this.notifyListeners(c,m)});return}const r=e.key;s?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(r);!s&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);mM()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,XM):a()}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,s,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:s,newValue:r}),!0)})},KM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,s){await super._set(e,s),this.localCache[e]=JSON.stringify(s)}async _get(e){const s=await super._get(e);return this.localCache[e]=JSON.stringify(s),s}async _remove(e){await super._remove(e),delete this.localCache[e]}}nA.type="LOCAL";const ZM=nA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA extends sA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,s){}_removeListener(e,s){}}rA.type="SESSION";const aA=rA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JM(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const s=this.receivers.find(a=>a.isListeningto(e));if(s)return s;const r=new gg(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const s=e,{eventId:r,eventType:a,data:o}=s.data,c=this.handlersMap[a];if(!(c!=null&&c.size))return;s.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const u=Array.from(c).map(async f=>f(s.origin,o)),m=await JM(u);s.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(s)}_unsubscribe(e,s){this.handlersMap[e]&&s&&this.handlersMap[e].delete(s),(!s||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}gg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wy(t="",e=10){let s="";for(let r=0;r<e;r++)s+=Math.floor(Math.random()*10);return t+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,s,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let o,c;return new Promise((u,m)=>{const f=wy("",20);a.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},r);c={messageChannel:a,onMessage(v){const y=v;if(y.data.eventId===f)switch(y.data.status){case"ack":clearTimeout(x),o=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(y.data.response);break;default:clearTimeout(x),clearTimeout(o),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:s},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(){return window}function tP(t){Ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(){return typeof Ar().WorkerGlobalScope<"u"&&typeof Ar().importScripts=="function"}async function sP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function nP(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function rP(){return iA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA="firebaseLocalStorageDb",aP=1,Tf="firebaseLocalStorage",oA="fbase_key";class Yu{constructor(e){this.request=e}toPromise(){return new Promise((e,s)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function pg(t,e){return t.transaction([Tf],e?"readwrite":"readonly").objectStore(Tf)}function iP(){const t=indexedDB.deleteDatabase(lA);return new Yu(t).toPromise()}function mb(){const t=indexedDB.open(lA,aP);return new Promise((e,s)=>{t.addEventListener("error",()=>{s(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Tf,{keyPath:oA})}catch(a){s(a)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Tf)?e(r):(r.close(),await iP(),e(await mb()))})})}async function X1(t,e,s){const r=pg(t,!0).put({[oA]:e,value:s});return new Yu(r).toPromise()}async function lP(t,e){const s=pg(t,!1).get(e),r=await new Yu(s).toPromise();return r===void 0?null:r.value}function Z1(t,e){const s=pg(t,!0).delete(e);return new Yu(s).toPromise()}const oP=800,cP=3;class cA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mb(),this.db)}async _withRetries(e){let s=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(s++>cP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return iA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=gg._getInstance(rP()),this.receiver._subscribe("keyChanged",async(e,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(e,s)=>["keyChanged"])}async initializeSender(){var e,s;if(this.activeServiceWorker=await sP(),!this.activeServiceWorker)return;this.sender=new eP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((s=r[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||nP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mb();return await X1(e,Cf,"1"),await Z1(e,Cf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,s){return this._withPendingWrite(async()=>(await this._withRetries(r=>X1(r,e,s)),this.localCache[e]=s,this.notifyServiceWorker(e)))}async _get(e){const s=await this._withRetries(r=>lP(r,e));return this.localCache[e]=s,s}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(s=>Z1(s,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const o=pg(a,!1).getAll();return new Yu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const s=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:o}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(o)&&(this.notifyListeners(a,o),s.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),s.push(a));return s}notifyListeners(e,s){this.localCache[e]=s;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),oP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(s)}_removeListener(e,s){this.listeners[e]&&(this.listeners[e].delete(s),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}cA.type="LOCAL";const dP=cA;new Gu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dA(t,e){return e?fa(e):(Le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy extends by{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mc(e,this._buildIdpRequest())}_linkToIdToken(e,s){return mc(e,this._buildIdpRequest(s))}_getReauthenticationResolver(e){return mc(e,this._buildIdpRequest())}_buildIdpRequest(e){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(s.idToken=e),s}}function uP(t){return JS(t.auth,new jy(t),t.bypassAuthState)}function hP(t){const{auth:e,user:s}=t;return Le(s,e,"internal-error"),HM(s,new jy(t),t.bypassAuthState)}async function mP(t){const{auth:e,user:s}=t;return Le(s,e,"internal-error"),BM(s,new jy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,s,r,a,o=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(e,s)=>{this.pendingPromise={resolve:e,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:s,sessionId:r,postBody:a,tenantId:o,error:c,type:u}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:s,sessionId:r,tenantId:o||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(m))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return uP;case"linkViaPopup":case"linkViaRedirect":return mP;case"reauthViaPopup":case"reauthViaRedirect":return hP;default:$n(this.auth,"internal-error")}}resolve(e){_a(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_a(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new Gu(2e3,1e4);async function gP(t,e,s){if(tn(t.app))return Promise.reject(tr(t,"operation-not-supported-in-this-environment"));const r=Fi(t);Wk(t,e,vy);const a=dA(r,s);return new kl(r,"signInViaPopup",e,a).executeNotNull()}class kl extends uA{constructor(e,s,r,a,o){super(e,s,a,o),this.provider=r,this.authWindow=null,this.pollId=null,kl.currentPopupAction&&kl.currentPopupAction.cancel(),kl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Le(e,this.auth,"internal-error"),e}async onExecution(){_a(this.filter.length===1,"Popup operations only handle one event");const e=wy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(tr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var s,r;if(!((r=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,fP.get())};e()}}kl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pP="pendingRedirect",nf=new Map;class xP extends uA{constructor(e,s,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,r),this.eventId=null}async execute(){let e=nf.get(this.auth._key());if(!e){try{const r=await bP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(s){e=()=>Promise.reject(s)}nf.set(this.auth._key(),e)}return this.bypassAuthState||nf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const s=await this.auth._redirectUserForId(e.eventId);if(s)return this.user=s,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function bP(t,e){const s=NP(e),r=vP(t);if(!await r._isAvailable())return!1;const a=await r._get(s)==="true";return await r._remove(s),a}function yP(t,e){nf.set(t._key(),e)}function vP(t){return fa(t._redirectPersistence)}function NP(t){return sf(pP,t.config.apiKey,t.name)}async function wP(t,e,s=!1){if(tn(t.app))return Promise.reject(xa(t));const r=Fi(t),a=dA(r,e),c=await new xP(r,a,s).execute();return c&&!s&&(delete c.user._redirectEventId,await r._persistUserIfCurrent(c.user),await r._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=10*60*1e3;class EP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let s=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(s=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_P(e)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=e,s=!0)),s}sendToConsumer(e,s){var r;if(e.error&&!hA(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";s.onError(tr(this.auth,a))}else s.onAuthEvent(e)}isEventForConsumer(e,s){const r=s.eventId===null||!!e.eventId&&e.eventId===s.eventId;return s.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jP&&this.cachedEventUids.clear(),this.cachedEventUids.has(J1(e))}saveEventToCache(e){this.cachedEventUids.add(J1(e)),this.lastProcessedEventTime=Date.now()}}function J1(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _P(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SP(t,e={}){return Ia(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,CP=/^https?/;async function TP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await SP(t);for(const s of e)try{if(RP(s))return}catch{}$n(t,"unauthorized-domain")}function RP(t){const e=db(),{protocol:s,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const c=new URL(t);return c.hostname===""&&r===""?s==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):s==="chrome-extension:"&&c.hostname===r}if(!CP.test(s))return!1;if(AP.test(t))return r===t;const a=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new Gu(3e4,6e4);function e2(){const t=Ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let s=0;s<t.CP.length;s++)t.CP[s]=null}}function IP(t){return new Promise((e,s)=>{var r,a,o;function c(){e2(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e2(),s(tr(t,"network-request-failed"))},timeout:DP.get()})}if(!((a=(r=Ar().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((o=Ar().gapi)===null||o===void 0)&&o.load)c();else{const u=wM("iframefcb");return Ar()[u]=()=>{gapi.load?c():s(tr(t,"network-request-failed"))},YS(`${NM()}?onload=${u}`).catch(m=>s(m))}}).catch(e=>{throw rf=null,e})}let rf=null;function kP(t){return rf=rf||IP(t),rf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MP=new Gu(5e3,15e3),PP="__/auth/iframe",OP="emulator/auth/iframe",LP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UP(t){const e=t.config;Le(e.authDomain,t,"auth-domain-config-required");const s=e.emulator?gy(e,OP):`https://${t.config.authDomain}/${PP}`,r={apiKey:e.apiKey,appName:t.name,v:no},a=VP.get(t.config.apiHost);a&&(r.eid=a);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${s}?${$u(r).slice(1)}`}async function FP(t){const e=await kP(t),s=Ar().gapi;return Le(s,t,"internal-error"),e.open({where:document.body,url:UP(t),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LP,dontclear:!0},r=>new Promise(async(a,o)=>{await r.restyle({setHideOnLeave:!1});const c=tr(t,"network-request-failed"),u=Ar().setTimeout(()=>{o(c)},MP.get());function m(){Ar().clearTimeout(u),a(r)}r.ping(m).then(m,()=>{o(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HP=500,zP=600,qP="_blank",$P="http://localhost";class t2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GP(t,e,s,r=HP,a=zP){const o=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const m=Object.assign(Object.assign({},BP),{width:r.toString(),height:a.toString(),top:o,left:c}),f=Bs().toLowerCase();s&&(u=HS(f)?qP:s),FS(f)&&(e=e||$P,m.scrollbars="yes");const x=Object.entries(m).reduce((y,[N,w])=>`${y}${N}=${w},`,"");if(hM(f)&&u!=="_self")return WP(e||"",u),new t2(null);const v=window.open(e||"",u,x);Le(v,t,"popup-blocked");try{v.focus()}catch{}return new t2(v)}function WP(t,e){const s=document.createElement("a");s.href=t,s.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="__/auth/handler",YP="emulator/auth/handler",KP=encodeURIComponent("fac");async function s2(t,e,s,r,a,o){Le(t.config.authDomain,t,"auth-domain-config-required"),Le(t.config.apiKey,t,"invalid-api-key");const c={apiKey:t.config.apiKey,appName:t.name,authType:s,redirectUrl:r,v:no,eventId:a};if(e instanceof vy){e.setDefaultLanguage(t.languageCode),c.providerId=e.providerId||"",R3(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,v]of Object.entries({}))c[x]=v}if(e instanceof Qu){const x=e.getScopes().filter(v=>v!=="");x.length>0&&(c.scopes=x.join(","))}t.tenantId&&(c.tid=t.tenantId);const u=c;for(const x of Object.keys(u))u[x]===void 0&&delete u[x];const m=await t._getAppCheckToken(),f=m?`#${KP}=${encodeURIComponent(m)}`:"";return`${XP(t)}?${$u(u).slice(1)}${f}`}function XP({config:t}){return t.emulator?gy(t,YP):`https://${t.authDomain}/${QP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="webStorageSupport";class ZP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=aA,this._completeRedirectFn=wP,this._overrideRedirectResult=yP}async _openPopup(e,s,r,a){var o;_a((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const c=await s2(e,s,r,db(),a);return GP(e,c,wy())}async _openRedirect(e,s,r,a){await this._originValidation(e);const o=await s2(e,s,r,db(),a);return tP(o),new Promise(()=>{})}_initialize(e){const s=e._key();if(this.eventManagers[s]){const{manager:a,promise:o}=this.eventManagers[s];return a?Promise.resolve(a):(_a(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[s]={promise:r},r.catch(()=>{delete this.eventManagers[s]}),r}async initAndGetManager(e){const s=await FP(e),r=new EP(e);return s.register("authEvent",a=>(Le(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=s,r}_isIframeWebStorageSupported(e,s){this.iframes[e._key()].send(gx,{type:gx},a=>{var o;const c=(o=a==null?void 0:a[0])===null||o===void 0?void 0:o[gx];c!==void 0&&s(!!c),$n(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const s=e._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=TP(e)),this.originValidationPromises[s]}get _shouldInitProactively(){return WS()||BS()||xy()}}const JP=ZP;var n2="@firebase/auth",r2="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const s=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,s),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const s=this.internalListeners.get(e);s&&(this.internalListeners.delete(e),s(),this.updateProactiveRefresh())}assertAuthConfigured(){Le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sO(t){sr(new qn("auth",(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:u}=r.options;Le(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:c,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:QS(t)},f=new bM(r,a,o,m);return CM(f,s),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,s,r)=>{e.getProvider("auth-internal").initialize()})),sr(new qn("auth-internal",e=>{const s=Fi(e.getProvider("auth").getImmediate());return(r=>new eO(r))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),rn(n2,r2,tO(t)),rn(n2,r2,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO=5*60,rO=wS("authIdTokenMaxAge")||nO;let a2=null;const aO=t=>async e=>{const s=e&&await e.getIdTokenResult(),r=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(r&&r>rO)return;const a=s==null?void 0:s.token;a2!==a&&(a2=a,await fetch(t,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function iO(t=mg()){const e=Vi(t,"auth");if(e.isInitialized())return e.getImmediate();const s=AM(t,{popupRedirectResolver:JP,persistence:[dP,ZM,aA]}),r=wS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const c=aO(o.toString());WM(s,c,()=>c(s.currentUser)),GM(s,u=>c(u))}}const a=yS("auth");return a&&TM(s,`http://${a}`),s}function lO(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}yM({loadJS(t){return new Promise((e,s)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=a=>{const o=tr("internal-error");o.customData=a,s(o)},r.type="text/javascript",r.charset="UTF-8",lO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sO("Browser");var i2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ji,mA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,D){function k(){}k.prototype=D.prototype,C.D=D.prototype,C.prototype=new k,C.prototype.constructor=C,C.C=function(O,q,M){for(var L=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)L[oe-2]=arguments[oe];return D.prototype[q].apply(O,L)}}function s(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,s),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(C,D,k){k||(k=0);var O=Array(16);if(typeof D=="string")for(var q=0;16>q;++q)O[q]=D.charCodeAt(k++)|D.charCodeAt(k++)<<8|D.charCodeAt(k++)<<16|D.charCodeAt(k++)<<24;else for(q=0;16>q;++q)O[q]=D[k++]|D[k++]<<8|D[k++]<<16|D[k++]<<24;D=C.g[0],k=C.g[1],q=C.g[2];var M=C.g[3],L=D+(M^k&(q^M))+O[0]+3614090360&4294967295;D=k+(L<<7&4294967295|L>>>25),L=M+(q^D&(k^q))+O[1]+3905402710&4294967295,M=D+(L<<12&4294967295|L>>>20),L=q+(k^M&(D^k))+O[2]+606105819&4294967295,q=M+(L<<17&4294967295|L>>>15),L=k+(D^q&(M^D))+O[3]+3250441966&4294967295,k=q+(L<<22&4294967295|L>>>10),L=D+(M^k&(q^M))+O[4]+4118548399&4294967295,D=k+(L<<7&4294967295|L>>>25),L=M+(q^D&(k^q))+O[5]+1200080426&4294967295,M=D+(L<<12&4294967295|L>>>20),L=q+(k^M&(D^k))+O[6]+2821735955&4294967295,q=M+(L<<17&4294967295|L>>>15),L=k+(D^q&(M^D))+O[7]+4249261313&4294967295,k=q+(L<<22&4294967295|L>>>10),L=D+(M^k&(q^M))+O[8]+1770035416&4294967295,D=k+(L<<7&4294967295|L>>>25),L=M+(q^D&(k^q))+O[9]+2336552879&4294967295,M=D+(L<<12&4294967295|L>>>20),L=q+(k^M&(D^k))+O[10]+4294925233&4294967295,q=M+(L<<17&4294967295|L>>>15),L=k+(D^q&(M^D))+O[11]+2304563134&4294967295,k=q+(L<<22&4294967295|L>>>10),L=D+(M^k&(q^M))+O[12]+1804603682&4294967295,D=k+(L<<7&4294967295|L>>>25),L=M+(q^D&(k^q))+O[13]+4254626195&4294967295,M=D+(L<<12&4294967295|L>>>20),L=q+(k^M&(D^k))+O[14]+2792965006&4294967295,q=M+(L<<17&4294967295|L>>>15),L=k+(D^q&(M^D))+O[15]+1236535329&4294967295,k=q+(L<<22&4294967295|L>>>10),L=D+(q^M&(k^q))+O[1]+4129170786&4294967295,D=k+(L<<5&4294967295|L>>>27),L=M+(k^q&(D^k))+O[6]+3225465664&4294967295,M=D+(L<<9&4294967295|L>>>23),L=q+(D^k&(M^D))+O[11]+643717713&4294967295,q=M+(L<<14&4294967295|L>>>18),L=k+(M^D&(q^M))+O[0]+3921069994&4294967295,k=q+(L<<20&4294967295|L>>>12),L=D+(q^M&(k^q))+O[5]+3593408605&4294967295,D=k+(L<<5&4294967295|L>>>27),L=M+(k^q&(D^k))+O[10]+38016083&4294967295,M=D+(L<<9&4294967295|L>>>23),L=q+(D^k&(M^D))+O[15]+3634488961&4294967295,q=M+(L<<14&4294967295|L>>>18),L=k+(M^D&(q^M))+O[4]+3889429448&4294967295,k=q+(L<<20&4294967295|L>>>12),L=D+(q^M&(k^q))+O[9]+568446438&4294967295,D=k+(L<<5&4294967295|L>>>27),L=M+(k^q&(D^k))+O[14]+3275163606&4294967295,M=D+(L<<9&4294967295|L>>>23),L=q+(D^k&(M^D))+O[3]+4107603335&4294967295,q=M+(L<<14&4294967295|L>>>18),L=k+(M^D&(q^M))+O[8]+1163531501&4294967295,k=q+(L<<20&4294967295|L>>>12),L=D+(q^M&(k^q))+O[13]+2850285829&4294967295,D=k+(L<<5&4294967295|L>>>27),L=M+(k^q&(D^k))+O[2]+4243563512&4294967295,M=D+(L<<9&4294967295|L>>>23),L=q+(D^k&(M^D))+O[7]+1735328473&4294967295,q=M+(L<<14&4294967295|L>>>18),L=k+(M^D&(q^M))+O[12]+2368359562&4294967295,k=q+(L<<20&4294967295|L>>>12),L=D+(k^q^M)+O[5]+4294588738&4294967295,D=k+(L<<4&4294967295|L>>>28),L=M+(D^k^q)+O[8]+2272392833&4294967295,M=D+(L<<11&4294967295|L>>>21),L=q+(M^D^k)+O[11]+1839030562&4294967295,q=M+(L<<16&4294967295|L>>>16),L=k+(q^M^D)+O[14]+4259657740&4294967295,k=q+(L<<23&4294967295|L>>>9),L=D+(k^q^M)+O[1]+2763975236&4294967295,D=k+(L<<4&4294967295|L>>>28),L=M+(D^k^q)+O[4]+1272893353&4294967295,M=D+(L<<11&4294967295|L>>>21),L=q+(M^D^k)+O[7]+4139469664&4294967295,q=M+(L<<16&4294967295|L>>>16),L=k+(q^M^D)+O[10]+3200236656&4294967295,k=q+(L<<23&4294967295|L>>>9),L=D+(k^q^M)+O[13]+681279174&4294967295,D=k+(L<<4&4294967295|L>>>28),L=M+(D^k^q)+O[0]+3936430074&4294967295,M=D+(L<<11&4294967295|L>>>21),L=q+(M^D^k)+O[3]+3572445317&4294967295,q=M+(L<<16&4294967295|L>>>16),L=k+(q^M^D)+O[6]+76029189&4294967295,k=q+(L<<23&4294967295|L>>>9),L=D+(k^q^M)+O[9]+3654602809&4294967295,D=k+(L<<4&4294967295|L>>>28),L=M+(D^k^q)+O[12]+3873151461&4294967295,M=D+(L<<11&4294967295|L>>>21),L=q+(M^D^k)+O[15]+530742520&4294967295,q=M+(L<<16&4294967295|L>>>16),L=k+(q^M^D)+O[2]+3299628645&4294967295,k=q+(L<<23&4294967295|L>>>9),L=D+(q^(k|~M))+O[0]+4096336452&4294967295,D=k+(L<<6&4294967295|L>>>26),L=M+(k^(D|~q))+O[7]+1126891415&4294967295,M=D+(L<<10&4294967295|L>>>22),L=q+(D^(M|~k))+O[14]+2878612391&4294967295,q=M+(L<<15&4294967295|L>>>17),L=k+(M^(q|~D))+O[5]+4237533241&4294967295,k=q+(L<<21&4294967295|L>>>11),L=D+(q^(k|~M))+O[12]+1700485571&4294967295,D=k+(L<<6&4294967295|L>>>26),L=M+(k^(D|~q))+O[3]+2399980690&4294967295,M=D+(L<<10&4294967295|L>>>22),L=q+(D^(M|~k))+O[10]+4293915773&4294967295,q=M+(L<<15&4294967295|L>>>17),L=k+(M^(q|~D))+O[1]+2240044497&4294967295,k=q+(L<<21&4294967295|L>>>11),L=D+(q^(k|~M))+O[8]+1873313359&4294967295,D=k+(L<<6&4294967295|L>>>26),L=M+(k^(D|~q))+O[15]+4264355552&4294967295,M=D+(L<<10&4294967295|L>>>22),L=q+(D^(M|~k))+O[6]+2734768916&4294967295,q=M+(L<<15&4294967295|L>>>17),L=k+(M^(q|~D))+O[13]+1309151649&4294967295,k=q+(L<<21&4294967295|L>>>11),L=D+(q^(k|~M))+O[4]+4149444226&4294967295,D=k+(L<<6&4294967295|L>>>26),L=M+(k^(D|~q))+O[11]+3174756917&4294967295,M=D+(L<<10&4294967295|L>>>22),L=q+(D^(M|~k))+O[2]+718787259&4294967295,q=M+(L<<15&4294967295|L>>>17),L=k+(M^(q|~D))+O[9]+3951481745&4294967295,C.g[0]=C.g[0]+D&4294967295,C.g[1]=C.g[1]+(q+(L<<21&4294967295|L>>>11))&4294967295,C.g[2]=C.g[2]+q&4294967295,C.g[3]=C.g[3]+M&4294967295}r.prototype.u=function(C,D){D===void 0&&(D=C.length);for(var k=D-this.blockSize,O=this.B,q=this.h,M=0;M<D;){if(q==0)for(;M<=k;)a(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<D;)if(O[q++]=C.charCodeAt(M++),q==this.blockSize){a(this,O),q=0;break}}else for(;M<D;)if(O[q++]=C[M++],q==this.blockSize){a(this,O),q=0;break}}this.h=q,this.o+=D},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var D=1;D<C.length-8;++D)C[D]=0;var k=8*this.o;for(D=C.length-8;D<C.length;++D)C[D]=k&255,k/=256;for(this.u(C),C=Array(16),D=k=0;4>D;++D)for(var O=0;32>O;O+=8)C[k++]=this.g[D]>>>O&255;return C};function o(C,D){var k=u;return Object.prototype.hasOwnProperty.call(k,C)?k[C]:k[C]=D(C)}function c(C,D){this.h=D;for(var k=[],O=!0,q=C.length-1;0<=q;q--){var M=C[q]|0;O&&M==D||(k[q]=M,O=!1)}this.g=k}var u={};function m(C){return-128<=C&&128>C?o(C,function(D){return new c([D|0],0>D?-1:0)}):new c([C|0],0>C?-1:0)}function f(C){if(isNaN(C)||!isFinite(C))return v;if(0>C)return _(f(-C));for(var D=[],k=1,O=0;C>=k;O++)D[O]=C/k|0,k*=4294967296;return new c(D,0)}function x(C,D){if(C.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(C.charAt(0)=="-")return _(x(C.substring(1),D));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=f(Math.pow(D,8)),O=v,q=0;q<C.length;q+=8){var M=Math.min(8,C.length-q),L=parseInt(C.substring(q,q+M),D);8>M?(M=f(Math.pow(D,M)),O=O.j(M).add(f(L))):(O=O.j(k),O=O.add(f(L)))}return O}var v=m(0),y=m(1),N=m(16777216);t=c.prototype,t.m=function(){if(E(this))return-_(this).m();for(var C=0,D=1,k=0;k<this.g.length;k++){var O=this.i(k);C+=(0<=O?O:4294967296+O)*D,D*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(w(this))return"0";if(E(this))return"-"+_(this).toString(C);for(var D=f(Math.pow(C,6)),k=this,O="";;){var q=z(k,D).g;k=R(k,q.j(D));var M=((0<k.g.length?k.g[0]:k.h)>>>0).toString(C);if(k=q,w(k))return M+O;for(;6>M.length;)M="0"+M;O=M+O}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function w(C){if(C.h!=0)return!1;for(var D=0;D<C.g.length;D++)if(C.g[D]!=0)return!1;return!0}function E(C){return C.h==-1}t.l=function(C){return C=R(this,C),E(C)?-1:w(C)?0:1};function _(C){for(var D=C.g.length,k=[],O=0;O<D;O++)k[O]=~C.g[O];return new c(k,~C.h).add(y)}t.abs=function(){return E(this)?_(this):this},t.add=function(C){for(var D=Math.max(this.g.length,C.g.length),k=[],O=0,q=0;q<=D;q++){var M=O+(this.i(q)&65535)+(C.i(q)&65535),L=(M>>>16)+(this.i(q)>>>16)+(C.i(q)>>>16);O=L>>>16,M&=65535,L&=65535,k[q]=L<<16|M}return new c(k,k[k.length-1]&-2147483648?-1:0)};function R(C,D){return C.add(_(D))}t.j=function(C){if(w(this)||w(C))return v;if(E(this))return E(C)?_(this).j(_(C)):_(_(this).j(C));if(E(C))return _(this.j(_(C)));if(0>this.l(N)&&0>C.l(N))return f(this.m()*C.m());for(var D=this.g.length+C.g.length,k=[],O=0;O<2*D;O++)k[O]=0;for(O=0;O<this.g.length;O++)for(var q=0;q<C.g.length;q++){var M=this.i(O)>>>16,L=this.i(O)&65535,oe=C.i(q)>>>16,ve=C.i(q)&65535;k[2*O+2*q]+=L*ve,I(k,2*O+2*q),k[2*O+2*q+1]+=M*ve,I(k,2*O+2*q+1),k[2*O+2*q+1]+=L*oe,I(k,2*O+2*q+1),k[2*O+2*q+2]+=M*oe,I(k,2*O+2*q+2)}for(O=0;O<D;O++)k[O]=k[2*O+1]<<16|k[2*O];for(O=D;O<2*D;O++)k[O]=0;return new c(k,0)};function I(C,D){for(;(C[D]&65535)!=C[D];)C[D+1]+=C[D]>>>16,C[D]&=65535,D++}function V(C,D){this.g=C,this.h=D}function z(C,D){if(w(D))throw Error("division by zero");if(w(C))return new V(v,v);if(E(C))return D=z(_(C),D),new V(_(D.g),_(D.h));if(E(D))return D=z(C,_(D)),new V(_(D.g),D.h);if(30<C.g.length){if(E(C)||E(D))throw Error("slowDivide_ only works with positive integers.");for(var k=y,O=D;0>=O.l(C);)k=F(k),O=F(O);var q=P(k,1),M=P(O,1);for(O=P(O,2),k=P(k,2);!w(O);){var L=M.add(O);0>=L.l(C)&&(q=q.add(k),M=L),O=P(O,1),k=P(k,1)}return D=R(C,q.j(D)),new V(q,D)}for(q=v;0<=C.l(D);){for(k=Math.max(1,Math.floor(C.m()/D.m())),O=Math.ceil(Math.log(k)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),M=f(k),L=M.j(D);E(L)||0<L.l(C);)k-=O,M=f(k),L=M.j(D);w(M)&&(M=y),q=q.add(M),C=R(C,L)}return new V(q,C)}t.A=function(C){return z(this,C).h},t.and=function(C){for(var D=Math.max(this.g.length,C.g.length),k=[],O=0;O<D;O++)k[O]=this.i(O)&C.i(O);return new c(k,this.h&C.h)},t.or=function(C){for(var D=Math.max(this.g.length,C.g.length),k=[],O=0;O<D;O++)k[O]=this.i(O)|C.i(O);return new c(k,this.h|C.h)},t.xor=function(C){for(var D=Math.max(this.g.length,C.g.length),k=[],O=0;O<D;O++)k[O]=this.i(O)^C.i(O);return new c(k,this.h^C.h)};function F(C){for(var D=C.g.length+1,k=[],O=0;O<D;O++)k[O]=C.i(O)<<1|C.i(O-1)>>>31;return new c(k,C.h)}function P(C,D){var k=D>>5;D%=32;for(var O=C.g.length-k,q=[],M=0;M<O;M++)q[M]=0<D?C.i(M+k)>>>D|C.i(M+k+1)<<32-D:C.i(M+k);return new c(q,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,mA=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=x,ji=c}).apply(typeof i2<"u"?i2:typeof self<"u"?self:typeof window<"u"?window:{});var km=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var fA,du,gA,af,fb,pA,xA,bA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,j,A){return g==Array.prototype||g==Object.prototype||(g[j]=A.value),g};function s(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof km=="object"&&km];for(var j=0;j<g.length;++j){var A=g[j];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=s(this);function a(g,j){if(j)e:{var A=r;g=g.split(".");for(var H=0;H<g.length-1;H++){var X=g[H];if(!(X in A))break e;A=A[X]}g=g[g.length-1],H=A[g],j=j(H),j!=H&&j!=null&&e(A,g,{configurable:!0,writable:!0,value:j})}}function o(g,j){g instanceof String&&(g+="");var A=0,H=!1,X={next:function(){if(!H&&A<g.length){var ae=A++;return{value:j(ae,g[ae]),done:!1}}return H=!0,{done:!0,value:void 0}}};return X[Symbol.iterator]=function(){return X},X}a("Array.prototype.values",function(g){return g||function(){return o(this,function(j,A){return A})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function m(g){var j=typeof g;return j=j!="object"?j:g?Array.isArray(g)?"array":j:"null",j=="array"||j=="object"&&typeof g.length=="number"}function f(g){var j=typeof g;return j=="object"&&g!=null||j=="function"}function x(g,j,A){return g.call.apply(g.bind,arguments)}function v(g,j,A){if(!g)throw Error();if(2<arguments.length){var H=Array.prototype.slice.call(arguments,2);return function(){var X=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(X,H),g.apply(j,X)}}return function(){return g.apply(j,arguments)}}function y(g,j,A){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?x:v,y.apply(null,arguments)}function N(g,j){var A=Array.prototype.slice.call(arguments,1);return function(){var H=A.slice();return H.push.apply(H,arguments),g.apply(this,H)}}function w(g,j){function A(){}A.prototype=j.prototype,g.aa=j.prototype,g.prototype=new A,g.prototype.constructor=g,g.Qb=function(H,X,ae){for(var xe=Array(arguments.length-2),nt=2;nt<arguments.length;nt++)xe[nt-2]=arguments[nt];return j.prototype[X].apply(H,xe)}}function E(g){const j=g.length;if(0<j){const A=Array(j);for(let H=0;H<j;H++)A[H]=g[H];return A}return[]}function _(g,j){for(let A=1;A<arguments.length;A++){const H=arguments[A];if(m(H)){const X=g.length||0,ae=H.length||0;g.length=X+ae;for(let xe=0;xe<ae;xe++)g[X+xe]=H[xe]}else g.push(H)}}class R{constructor(j,A){this.i=j,this.j=A,this.h=0,this.g=null}get(){let j;return 0<this.h?(this.h--,j=this.g,this.g=j.next,j.next=null):j=this.i(),j}}function I(g){return/^[\s\xa0]*$/.test(g)}function V(){var g=u.navigator;return g&&(g=g.userAgent)?g:""}function z(g){return z[" "](g),g}z[" "]=function(){};var F=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function P(g,j,A){for(const H in g)j.call(A,g[H],H,g)}function C(g,j){for(const A in g)j.call(void 0,g[A],A,g)}function D(g){const j={};for(const A in g)j[A]=g[A];return j}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(g,j){let A,H;for(let X=1;X<arguments.length;X++){H=arguments[X];for(A in H)g[A]=H[A];for(let ae=0;ae<k.length;ae++)A=k[ae],Object.prototype.hasOwnProperty.call(H,A)&&(g[A]=H[A])}}function q(g){var j=1;g=g.split(":");const A=[];for(;0<j&&g.length;)A.push(g.shift()),j--;return g.length&&A.push(g.join(":")),A}function M(g){u.setTimeout(()=>{throw g},0)}function L(){var g=Fe;let j=null;return g.g&&(j=g.g,g.g=g.g.next,g.g||(g.h=null),j.next=null),j}class oe{constructor(){this.h=this.g=null}add(j,A){const H=ve.get();H.set(j,A),this.h?this.h.next=H:this.g=H,this.h=H}}var ve=new R(()=>new ee,g=>g.reset());class ee{constructor(){this.next=this.g=this.h=null}set(j,A){this.h=j,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,ye=!1,Fe=new oe,B=()=>{const g=u.Promise.resolve(void 0);fe=()=>{g.then(Q)}};var Q=()=>{for(var g;g=L();){try{g.h.call(g.g)}catch(A){M(A)}var j=ve;j.j(g),100>j.h&&(j.h++,g.next=j.g,j.g=g)}ye=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(g,j){this.type=g,this.g=this.target=j,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var Ee=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var g=!1,j=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const A=()=>{};u.addEventListener("test",A,j),u.removeEventListener("test",A,j)}catch{}return g}();function ge(g,j){if(ue.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var A=this.type=g.type,H=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=j,j=g.relatedTarget){if(F){e:{try{z(j.nodeName);var X=!0;break e}catch{}X=!1}X||(j=null)}}else A=="mouseover"?j=g.fromElement:A=="mouseout"&&(j=g.toElement);this.relatedTarget=j,H?(this.clientX=H.clientX!==void 0?H.clientX:H.pageX,this.clientY=H.clientY!==void 0?H.clientY:H.pageY,this.screenX=H.screenX||0,this.screenY=H.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:Se[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ge.aa.h.call(this)}}w(ge,ue);var Se={2:"touch",3:"pen",4:"mouse"};ge.prototype.h=function(){ge.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ct="closure_listenable_"+(1e6*Math.random()|0),$e=0;function Rs(g,j,A,H,X){this.listener=g,this.proxy=null,this.src=j,this.type=A,this.capture=!!H,this.ha=X,this.key=++$e,this.da=this.fa=!1}function ln(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Vr(g){this.src=g,this.g={},this.h=0}Vr.prototype.add=function(g,j,A,H,X){var ae=g.toString();g=this.g[ae],g||(g=this.g[ae]=[],this.h++);var xe=Gi(g,j,H,X);return-1<xe?(j=g[xe],A||(j.fa=!1)):(j=new Rs(j,this.src,ae,!!H,X),j.fa=A,g.push(j)),j};function $i(g,j){var A=j.type;if(A in g.g){var H=g.g[A],X=Array.prototype.indexOf.call(H,j,void 0),ae;(ae=0<=X)&&Array.prototype.splice.call(H,X,1),ae&&(ln(j),g.g[A].length==0&&(delete g.g[A],g.h--))}}function Gi(g,j,A,H){for(var X=0;X<g.length;++X){var ae=g[X];if(!ae.da&&ae.listener==j&&ae.capture==!!A&&ae.ha==H)return X}return-1}var Wi="closure_lm_"+(1e6*Math.random()|0),Wc={};function ah(g,j,A,H,X){if(Array.isArray(j)){for(var ae=0;ae<j.length;ae++)ah(g,j[ae],A,H,X);return null}return A=ih(A),g&&g[ct]?g.K(j,A,f(H)?!!H.capture:!1,X):Sn(g,j,A,!1,H,X)}function Sn(g,j,A,H,X,ae){if(!j)throw Error("Invalid event type");var xe=f(X)?!!X.capture:!!X,nt=mo(g);if(nt||(g[Wi]=nt=new Vr(g)),A=nt.add(j,A,H,xe,ae),A.proxy)return A;if(H=ep(),A.proxy=H,H.src=g,H.listener=A,g.addEventListener)Ee||(X=xe),X===void 0&&(X=!1),g.addEventListener(j.toString(),H,X);else if(g.attachEvent)g.attachEvent(Qi(j.toString()),H);else if(g.addListener&&g.removeListener)g.addListener(H);else throw Error("addEventListener and attachEvent are unavailable.");return A}function ep(){function g(A){return j.call(g.src,g.listener,A)}const j=tp;return g}function Qc(g,j,A,H,X){if(Array.isArray(j))for(var ae=0;ae<j.length;ae++)Qc(g,j[ae],A,H,X);else H=f(H)?!!H.capture:!!H,A=ih(A),g&&g[ct]?(g=g.i,j=String(j).toString(),j in g.g&&(ae=g.g[j],A=Gi(ae,A,H,X),-1<A&&(ln(ae[A]),Array.prototype.splice.call(ae,A,1),ae.length==0&&(delete g.g[j],g.h--)))):g&&(g=mo(g))&&(j=g.g[j.toString()],g=-1,j&&(g=Gi(j,A,H,X)),(A=-1<g?j[g]:null)&&ho(A))}function ho(g){if(typeof g!="number"&&g&&!g.da){var j=g.src;if(j&&j[ct])$i(j.i,g);else{var A=g.type,H=g.proxy;j.removeEventListener?j.removeEventListener(A,H,g.capture):j.detachEvent?j.detachEvent(Qi(A),H):j.addListener&&j.removeListener&&j.removeListener(H),(A=mo(j))?($i(A,g),A.h==0&&(A.src=null,j[Wi]=null)):ln(g)}}}function Qi(g){return g in Wc?Wc[g]:Wc[g]="on"+g}function tp(g,j){if(g.da)g=!0;else{j=new ge(j,this);var A=g.listener,H=g.ha||g.src;g.fa&&ho(g),g=A.call(H,j)}return g}function mo(g){return g=g[Wi],g instanceof Vr?g:null}var Yc="__closure_events_fn_"+(1e9*Math.random()>>>0);function ih(g){return typeof g=="function"?g:(g[Yc]||(g[Yc]=function(j){return g.handleEvent(j)}),g[Yc])}function Ft(){ie.call(this),this.i=new Vr(this),this.M=this,this.F=null}w(Ft,ie),Ft.prototype[ct]=!0,Ft.prototype.removeEventListener=function(g,j,A,H){Qc(this,g,j,A,H)};function gt(g,j){var A,H=g.F;if(H)for(A=[];H;H=H.F)A.push(H);if(g=g.M,H=j.type||j,typeof j=="string")j=new ue(j,g);else if(j instanceof ue)j.target=j.target||g;else{var X=j;j=new ue(H,g),O(j,X)}if(X=!0,A)for(var ae=A.length-1;0<=ae;ae--){var xe=j.g=A[ae];X=on(xe,H,!0,j)&&X}if(xe=j.g=g,X=on(xe,H,!0,j)&&X,X=on(xe,H,!1,j)&&X,A)for(ae=0;ae<A.length;ae++)xe=j.g=A[ae],X=on(xe,H,!1,j)&&X}Ft.prototype.N=function(){if(Ft.aa.N.call(this),this.i){var g=this.i,j;for(j in g.g){for(var A=g.g[j],H=0;H<A.length;H++)ln(A[H]);delete g.g[j],g.h--}}this.F=null},Ft.prototype.K=function(g,j,A,H){return this.i.add(String(g),j,!1,A,H)},Ft.prototype.L=function(g,j,A,H){return this.i.add(String(g),j,!0,A,H)};function on(g,j,A,H){if(j=g.i.g[String(j)],!j)return!0;j=j.concat();for(var X=!0,ae=0;ae<j.length;++ae){var xe=j[ae];if(xe&&!xe.da&&xe.capture==A){var nt=xe.listener,ls=xe.ha||xe.src;xe.fa&&$i(g.i,xe),X=nt.call(ls,H)!==!1&&X}}return X&&!H.defaultPrevented}function Ds(g,j,A){if(typeof g=="function")A&&(g=y(g,A));else if(g&&typeof g.handleEvent=="function")g=y(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(j)?-1:u.setTimeout(g,j||0)}function lh(g){g.g=Ds(()=>{g.g=null,g.i&&(g.i=!1,lh(g))},g.l);const j=g.h;g.h=null,g.m.apply(null,j)}class sp extends ie{constructor(j,A){super(),this.m=j,this.l=A,this.h=null,this.i=!1,this.g=null}j(j){this.h=arguments,this.g?this.i=!0:lh(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yi(g){ie.call(this),this.h=g,this.g={}}w(Yi,ie);var Ki=[];function Xi(g){P(g.g,function(j,A){this.g.hasOwnProperty(A)&&ho(j)},g),g.g={}}Yi.prototype.N=function(){Yi.aa.N.call(this),Xi(this)},Yi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Wn=u.JSON.stringify,fo=u.JSON.parse,Zi=class{stringify(g){return u.JSON.stringify(g,void 0)}parse(g){return u.JSON.parse(g,void 0)}};function Kc(){}Kc.prototype.h=null;function Xc(g){return g.h||(g.h=g.i())}function Zc(){}var Ur={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Fr(){ue.call(this,"d")}w(Fr,ue);function Jc(){ue.call(this,"c")}w(Jc,ue);var or={},ed=null;function Pa(){return ed=ed||new Ft}or.La="serverreachability";function go(g){ue.call(this,or.La,g)}w(go,ue);function Oa(g){const j=Pa();gt(j,new go(j))}or.STAT_EVENT="statevent";function oh(g,j){ue.call(this,or.STAT_EVENT,g),this.stat=j}w(oh,ue);function It(g){const j=Pa();gt(j,new oh(j,g))}or.Ma="timingevent";function is(g,j){ue.call(this,or.Ma,g),this.size=j}w(is,ue);function Xt(g,j){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){g()},j)}function An(){this.g=!0}An.prototype.xa=function(){this.g=!1};function td(g,j,A,H,X,ae){g.info(function(){if(g.g)if(ae)for(var xe="",nt=ae.split("&"),ls=0;ls<nt.length;ls++){var rt=nt[ls].split("=");if(1<rt.length){var ps=rt[0];rt=rt[1];var os=ps.split("_");xe=2<=os.length&&os[1]=="type"?xe+(ps+"="+rt+"&"):xe+(ps+"=redacted&")}}else xe=null;else xe=ae;return"XMLHTTP REQ ("+H+") [attempt "+X+"]: "+j+`
`+A+`
`+xe})}function np(g,j,A,H,X,ae,xe){g.info(function(){return"XMLHTTP RESP ("+H+") [ attempt "+X+"]: "+j+`
`+A+`
`+ae+" "+xe})}function La(g,j,A,H){g.info(function(){return"XMLHTTP TEXT ("+j+"): "+Ji(g,A)+(H?" "+H:"")})}function ch(g,j){g.info(function(){return"TIMEOUT: "+j})}An.prototype.info=function(){};function Ji(g,j){if(!g.g)return j;if(!j)return null;try{var A=JSON.parse(j);if(A){for(g=0;g<A.length;g++)if(Array.isArray(A[g])){var H=A[g];if(!(2>H.length)){var X=H[1];if(Array.isArray(X)&&!(1>X.length)){var ae=X[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var xe=1;xe<X.length;xe++)X[xe]=""}}}}return Wn(A)}catch{return j}}var Va={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Br={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cr;function dr(){}w(dr,Kc),dr.prototype.g=function(){return new XMLHttpRequest},dr.prototype.i=function(){return{}},cr=new dr;function Hs(g,j,A,H){this.j=g,this.i=j,this.l=A,this.R=H||1,this.U=new Yi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gt}function Gt(){this.i=null,this.g="",this.h=!1}var sd={},po={};function Qn(g,j,A){g.L=1,g.v=rl(cn(j)),g.m=A,g.P=!0,Hr(g,null)}function Hr(g,j){g.F=Date.now(),el(g),g.A=cn(g.v);var A=g.A,H=g.R;Array.isArray(H)||(H=[String(H)]),od(A.i,"t",H),g.C=0,A=g.j.J,g.h=new Gt,g.g=_h(g.j,A?j:null,!g.m),0<g.O&&(g.M=new sp(y(g.Y,g,g.g),g.O)),j=g.U,A=g.g,H=g.ca;var X="readystatechange";Array.isArray(X)||(X&&(Ki[0]=X.toString()),X=Ki);for(var ae=0;ae<X.length;ae++){var xe=ah(A,X[ae],H||j.handleEvent,!1,j.h||j);if(!xe)break;j.g[xe.key]=xe}j=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),j["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,j)):(g.u="GET",g.g.ea(g.A,g.u,null,j)),Oa(),td(g.i,g.u,g.A,g.l,g.R,g.m)}Hs.prototype.ca=function(g){g=g.target;const j=this.M;j&&Dn(g)==3?j.j():this.Y(g)},Hs.prototype.Y=function(g){try{if(g==this.g)e:{const os=Dn(this.g);var j=this.g.Ba();const Kr=this.g.Z();if(!(3>os)&&(os!=3||this.g&&(this.h.h||this.g.oa()||xh(this.g)))){this.J||os!=4||j==7||(j==8||0>=Kr?Oa(3):Oa(2)),Ua(this);var A=this.g.Z();this.X=A;t:if(dh(this)){var H=xh(this.g);g="";var X=H.length,ae=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ns(this),ur(this);var xe="";break t}this.h.i=new u.TextDecoder}for(j=0;j<X;j++)this.h.h=!0,g+=this.h.i.decode(H[j],{stream:!(ae&&j==X-1)});H.length=0,this.h.g+=g,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=A==200,np(this.i,this.u,this.A,this.l,this.R,os,A),this.o){if(this.T&&!this.K){t:{if(this.g){var nt,ls=this.g;if((nt=ls.g?ls.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(nt)){var rt=nt;break t}}rt=null}if(A=rt)La(this.i,this.l,A,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,tl(this,A);else{this.o=!1,this.s=3,It(12),Ns(this),ur(this);break e}}if(this.P){A=!0;let ws;for(;!this.J&&this.C<xe.length;)if(ws=uh(this,xe),ws==po){os==4&&(this.s=4,It(14),A=!1),La(this.i,this.l,null,"[Incomplete Response]");break}else if(ws==sd){this.s=4,It(15),La(this.i,this.l,xe,"[Invalid Chunk]"),A=!1;break}else La(this.i,this.l,ws,null),tl(this,ws);if(dh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),os!=4||xe.length!=0||this.h.h||(this.s=1,It(16),A=!1),this.o=this.o&&A,!A)La(this.i,this.l,xe,"[Invalid Chunked Response]"),Ns(this),ur(this);else if(0<xe.length&&!this.W){this.W=!0;var ps=this.j;ps.g==this&&ps.ba&&!ps.M&&(ps.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),hl(ps),ps.M=!0,It(11))}}else La(this.i,this.l,xe,null),tl(this,xe);os==4&&Ns(this),this.o&&!this.J&&(os==4?wh(this.j,this):(this.o=!1,el(this)))}else op(this.g),A==400&&0<xe.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Ns(this),ur(this)}}}catch{}finally{}};function dh(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function uh(g,j){var A=g.C,H=j.indexOf(`
`,A);return H==-1?po:(A=Number(j.substring(A,H)),isNaN(A)?sd:(H+=1,H+A>j.length?po:(j=j.slice(H,H+A),g.C=H+A,j)))}Hs.prototype.cancel=function(){this.J=!0,Ns(this)};function el(g){g.S=Date.now()+g.I,hh(g,g.I)}function hh(g,j){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Xt(y(g.ba,g),j)}function Ua(g){g.B&&(u.clearTimeout(g.B),g.B=null)}Hs.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(ch(this.i,this.A),this.L!=2&&(Oa(),It(17)),Ns(this),this.s=2,ur(this)):hh(this,this.S-g)};function ur(g){g.j.G==0||g.J||wh(g.j,g)}function Ns(g){Ua(g);var j=g.M;j&&typeof j.ma=="function"&&j.ma(),g.M=null,Xi(g.U),g.g&&(j=g.g,g.g=null,j.abort(),j.ma())}function tl(g,j){try{var A=g.j;if(A.G!=0&&(A.g==g||nd(A.h,g))){if(!g.K&&nd(A.h,g)&&A.G==3){try{var H=A.Da.g.parse(j)}catch{H=null}if(Array.isArray(H)&&H.length==3){var X=H;if(X[0]==0){e:if(!A.u){if(A.g)if(A.g.F+3e3<g.F)Co(A),So(A);else break e;md(A),It(18)}}else A.za=X[1],0<A.za-A.T&&37500>X[2]&&A.F&&A.v==0&&!A.C&&(A.C=Xt(y(A.Za,A),6e3));if(1>=bo(A.h)&&A.ca){try{A.ca()}catch{}A.ca=void 0}}else Yr(A,11)}else if((g.K||A.g==g)&&Co(A),!I(j))for(X=A.Da.g.parse(j),j=0;j<X.length;j++){let rt=X[j];if(A.T=rt[0],rt=rt[1],A.G==2)if(rt[0]=="c"){A.K=rt[1],A.ia=rt[2];const ps=rt[3];ps!=null&&(A.la=ps,A.j.info("VER="+A.la));const os=rt[4];os!=null&&(A.Aa=os,A.j.info("SVER="+A.Aa));const Kr=rt[5];Kr!=null&&typeof Kr=="number"&&0<Kr&&(H=1.5*Kr,A.L=H,A.j.info("backChannelRequestTimeoutMs_="+H)),H=A;const ws=g.g;if(ws){const br=ws.g?ws.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(br){var ae=H.h;ae.g||br.indexOf("spdy")==-1&&br.indexOf("quic")==-1&&br.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(yo(ae,ae.h),ae.h=null))}if(H.D){const gd=ws.g?ws.g.getResponseHeader("X-HTTP-Session-Id"):null;gd&&(H.ya=gd,bt(H.I,H.D,gd))}}A.G=3,A.l&&A.l.ua(),A.ba&&(A.R=Date.now()-g.F,A.j.info("Handshake RTT: "+A.R+"ms")),H=A;var xe=g;if(H.qa=Eh(H,H.J?H.ia:null,H.W),xe.K){zs(H.h,xe);var nt=xe,ls=H.L;ls&&(nt.I=ls),nt.B&&(Ua(nt),el(nt)),H.g=xe}else vh(H);0<A.i.length&&Ao(A)}else rt[0]!="stop"&&rt[0]!="close"||Yr(A,7);else A.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?Yr(A,7):ud(A):rt[0]!="noop"&&A.l&&A.l.ta(rt),A.v=0)}}Oa(4)}catch{}}var mh=class{constructor(g,j){this.g=g,this.map=j}};function zr(g){this.l=g||10,u.PerformanceNavigationTiming?(g=u.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xo(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function bo(g){return g.h?1:g.g?g.g.size:0}function nd(g,j){return g.h?g.h==j:g.g?g.g.has(j):!1}function yo(g,j){g.g?g.g.add(j):g.h=j}function zs(g,j){g.h&&g.h==j?g.h=null:g.g&&g.g.has(j)&&g.g.delete(j)}zr.prototype.cancel=function(){if(this.i=rd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function rd(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let j=g.i;for(const A of g.g.values())j=j.concat(A.D);return j}return E(g.i)}function rp(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(m(g)){for(var j=[],A=g.length,H=0;H<A;H++)j.push(g[H]);return j}j=[],A=0;for(H in g)j[A++]=g[H];return j}function vo(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(m(g)||typeof g=="string"){var j=[];g=g.length;for(var A=0;A<g;A++)j.push(A);return j}j=[],A=0;for(const H in g)j[A++]=H;return j}}}function ad(g,j){if(g.forEach&&typeof g.forEach=="function")g.forEach(j,void 0);else if(m(g)||typeof g=="string")Array.prototype.forEach.call(g,j,void 0);else for(var A=vo(g),H=rp(g),X=H.length,ae=0;ae<X;ae++)j.call(void 0,H[ae],A&&A[ae],g)}var sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ap(g,j){if(g){g=g.split("&");for(var A=0;A<g.length;A++){var H=g[A].indexOf("="),X=null;if(0<=H){var ae=g[A].substring(0,H);X=g[A].substring(H+1)}else ae=g[A];j(ae,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function Zt(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Zt){this.h=g.h,nl(this,g.j),this.o=g.o,this.g=g.g,Fa(this,g.s),this.l=g.l;var j=g.i,A=new $r;A.i=j.i,j.g&&(A.g=new Map(j.g),A.h=j.h),qr(this,A),this.m=g.m}else g&&(j=String(g).match(sl))?(this.h=!1,nl(this,j[1]||"",!0),this.o=Cn(j[2]||""),this.g=Cn(j[3]||"",!0),Fa(this,j[4]),this.l=Cn(j[5]||"",!0),qr(this,j[6]||"",!0),this.m=Cn(j[7]||"")):(this.h=!1,this.i=new $r(null,this.h))}Zt.prototype.toString=function(){var g=[],j=this.j;j&&g.push(al(j,id,!0),":");var A=this.g;return(A||j=="file")&&(g.push("//"),(j=this.o)&&g.push(al(j,id,!0),"@"),g.push(encodeURIComponent(String(A)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.s,A!=null&&g.push(":",String(A))),(A=this.l)&&(this.g&&A.charAt(0)!="/"&&g.push("/"),g.push(al(A,A.charAt(0)=="/"?ip:ld,!0))),(A=this.i.toString())&&g.push("?",A),(A=this.m)&&g.push("#",al(A,No)),g.join("")};function cn(g){return new Zt(g)}function nl(g,j,A){g.j=A?Cn(j,!0):j,g.j&&(g.j=g.j.replace(/:$/,""))}function Fa(g,j){if(j){if(j=Number(j),isNaN(j)||0>j)throw Error("Bad port number "+j);g.s=j}else g.s=null}function qr(g,j,A){j instanceof $r?(g.i=j,gh(g.i,g.h)):(A||(j=al(j,lp)),g.i=new $r(j,g.h))}function bt(g,j,A){g.i.set(j,A)}function rl(g){return bt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Cn(g,j){return g?j?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function al(g,j,A){return typeof g=="string"?(g=encodeURI(g).replace(j,fh),A&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function fh(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var id=/[#\/\?@]/g,ld=/[#\?:]/g,ip=/[#\?]/g,lp=/[#\?@]/g,No=/#/g;function $r(g,j){this.h=this.g=null,this.i=g||null,this.j=!!j}function Tn(g){g.g||(g.g=new Map,g.h=0,g.i&&ap(g.i,function(j,A){g.add(decodeURIComponent(j.replace(/\+/g," ")),A)}))}t=$r.prototype,t.add=function(g,j){Tn(this),this.i=null,g=hr(this,g);var A=this.g.get(g);return A||this.g.set(g,A=[]),A.push(j),this.h+=1,this};function Gr(g,j){Tn(g),j=hr(g,j),g.g.has(j)&&(g.i=null,g.h-=g.g.get(j).length,g.g.delete(j))}function Wr(g,j){return Tn(g),j=hr(g,j),g.g.has(j)}t.forEach=function(g,j){Tn(this),this.g.forEach(function(A,H){A.forEach(function(X){g.call(j,X,H,this)},this)},this)},t.na=function(){Tn(this);const g=Array.from(this.g.values()),j=Array.from(this.g.keys()),A=[];for(let H=0;H<j.length;H++){const X=g[H];for(let ae=0;ae<X.length;ae++)A.push(j[H])}return A},t.V=function(g){Tn(this);let j=[];if(typeof g=="string")Wr(this,g)&&(j=j.concat(this.g.get(hr(this,g))));else{g=Array.from(this.g.values());for(let A=0;A<g.length;A++)j=j.concat(g[A])}return j},t.set=function(g,j){return Tn(this),this.i=null,g=hr(this,g),Wr(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[j]),this.h+=1,this},t.get=function(g,j){return g?(g=this.V(g),0<g.length?String(g[0]):j):j};function od(g,j,A){Gr(g,j),0<A.length&&(g.i=null,g.g.set(hr(g,j),E(A)),g.h+=A.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],j=Array.from(this.g.keys());for(var A=0;A<j.length;A++){var H=j[A];const ae=encodeURIComponent(String(H)),xe=this.V(H);for(H=0;H<xe.length;H++){var X=ae;xe[H]!==""&&(X+="="+encodeURIComponent(String(xe[H]))),g.push(X)}}return this.i=g.join("&")};function hr(g,j){return j=String(j),g.j&&(j=j.toLowerCase()),j}function gh(g,j){j&&!g.j&&(Tn(g),g.i=null,g.g.forEach(function(A,H){var X=H.toLowerCase();H!=X&&(Gr(this,H),od(this,X,A))},g)),g.j=j}function il(g,j){const A=new An;if(u.Image){const H=new Image;H.onload=N(Rn,A,"TestLoadImage: loaded",!0,j,H),H.onerror=N(Rn,A,"TestLoadImage: error",!1,j,H),H.onabort=N(Rn,A,"TestLoadImage: abort",!1,j,H),H.ontimeout=N(Rn,A,"TestLoadImage: timeout",!1,j,H),u.setTimeout(function(){H.ontimeout&&H.ontimeout()},1e4),H.src=g}else j(!1)}function Yn(g,j){const A=new An,H=new AbortController,X=setTimeout(()=>{H.abort(),Rn(A,"TestPingServer: timeout",!1,j)},1e4);fetch(g,{signal:H.signal}).then(ae=>{clearTimeout(X),ae.ok?Rn(A,"TestPingServer: ok",!0,j):Rn(A,"TestPingServer: server error",!1,j)}).catch(()=>{clearTimeout(X),Rn(A,"TestPingServer: error",!1,j)})}function Rn(g,j,A,H,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),H(A)}catch{}}function ll(){this.g=new Zi}function mr(g,j,A){const H=A||"";try{ad(g,function(X,ae){let xe=X;f(X)&&(xe=Wn(X)),j.push(H+ae+"="+encodeURIComponent(xe))})}catch(X){throw j.push(H+"type="+encodeURIComponent("_badmap")),X}}function Ba(g){this.l=g.Ub||null,this.j=g.eb||!1}w(Ba,Kc),Ba.prototype.g=function(){return new Qr(this.l,this.j)},Ba.prototype.i=function(g){return function(){return g}}({});function Qr(g,j){Ft.call(this),this.D=g,this.o=j,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Qr,Ft),t=Qr.prototype,t.open=function(g,j){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=j,this.readyState=1,gr(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const j={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(j.body=g),(this.D||u).fetch(new Request(this.A,j)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cd(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function cd(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var j=g.value?g.value:new Uint8Array(0);(j=this.v.decode(j,{stream:!g.done}))&&(this.response=this.responseText+=j)}g.done?fr(this):gr(this),this.readyState==3&&cd(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,fr(this))},t.Qa=function(g){this.g&&(this.response=g,fr(this))},t.ga=function(){this.g&&fr(this)};function fr(g){g.readyState=4,g.l=null,g.j=null,g.v=null,gr(g)}t.setRequestHeader=function(g,j){this.u.append(g,j)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],j=this.h.entries();for(var A=j.next();!A.done;)A=A.value,g.push(A[0]+": "+A[1]),A=j.next();return g.join(`\r
`)};function gr(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Qr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function dd(g){let j="";return P(g,function(A,H){j+=H,j+=":",j+=A,j+=`\r
`}),j}function gs(g,j,A){e:{for(H in A){var H=!1;break e}H=!0}H||(A=dd(A),typeof g=="string"?A!=null&&encodeURIComponent(String(A)):bt(g,j,A))}function ht(g){Ft.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(ht,Ft);var wo=/^https?$/i,ol=["POST","PUT"];t=ht.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,j,A,H){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);j=j?j.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cr.g(),this.v=this.o?Xc(this.o):Xc(cr),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(j,String(g),!0),this.B=!1}catch(ae){ph(this,ae);return}if(g=A||"",A=new Map(this.headers),H)if(Object.getPrototypeOf(H)===Object.prototype)for(var X in H)A.set(X,H[X]);else if(typeof H.keys=="function"&&typeof H.get=="function")for(const ae of H.keys())A.set(ae,H.get(ae));else throw Error("Unknown input type for opt_headers: "+String(H));H=Array.from(A.keys()).find(ae=>ae.toLowerCase()=="content-type"),X=u.FormData&&g instanceof u.FormData,!(0<=Array.prototype.indexOf.call(ol,j,void 0))||H||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,xe]of A)this.g.setRequestHeader(ae,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{cl(this),this.u=!0,this.g.send(g),this.u=!1}catch(ae){ph(this,ae)}};function ph(g,j){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=j,g.m=5,jo(g),pr(g)}function jo(g){g.A||(g.A=!0,gt(g,"complete"),gt(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,gt(this,"complete"),gt(this,"abort"),pr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pr(this,!0)),ht.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Eo(this):this.bb())},t.bb=function(){Eo(this)};function Eo(g){if(g.h&&typeof c<"u"&&(!g.v[1]||Dn(g)!=4||g.Z()!=2)){if(g.u&&Dn(g)==4)Ds(g.Ea,0,g);else if(gt(g,"readystatechange"),Dn(g)==4){g.h=!1;try{const xe=g.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var j=!0;break e;default:j=!1}var A;if(!(A=j)){var H;if(H=xe===0){var X=String(g.D).match(sl)[1]||null;!X&&u.self&&u.self.location&&(X=u.self.location.protocol.slice(0,-1)),H=!wo.test(X?X.toLowerCase():"")}A=H}if(A)gt(g,"complete"),gt(g,"success");else{g.m=6;try{var ae=2<Dn(g)?g.g.statusText:""}catch{ae=""}g.l=ae+" ["+g.Z()+"]",jo(g)}}finally{pr(g)}}}}function pr(g,j){if(g.g){cl(g);const A=g.g,H=g.v[0]?()=>{}:null;g.g=null,g.v=null,j||gt(g,"ready");try{A.onreadystatechange=H}catch{}}}function cl(g){g.I&&(u.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Dn(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var j=this.g.responseText;return g&&j.indexOf(g)==0&&(j=j.substring(g.length)),fo(j)}};function xh(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function op(g){const j={};g=(g.g&&2<=Dn(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let H=0;H<g.length;H++){if(I(g[H]))continue;var A=q(g[H]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const ae=j[X]||[];j[X]=ae,ae.push(A)}C(j,function(H){return H.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(g,j,A){return A&&A.internalChannelParams&&A.internalChannelParams[g]||j}function _o(g){this.Aa=0,this.i=[],this.j=new An,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dl("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dl("baseRetryDelayMs",5e3,g),this.cb=dl("retryDelaySeedMs",1e4,g),this.Wa=dl("forwardChannelMaxRetries",2,g),this.wa=dl("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new zr(g&&g.concurrentRequestLimit),this.Da=new ll,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=_o.prototype,t.la=8,t.G=1,t.connect=function(g,j,A,H){It(0),this.W=g,this.H=j||{},A&&H!==void 0&&(this.H.OSID=A,this.H.OAID=H),this.F=this.X,this.I=Eh(this,null,this.W),Ao(this)};function ud(g){if(bh(g),g.G==3){var j=g.U++,A=cn(g.I);if(bt(A,"SID",g.K),bt(A,"RID",j),bt(A,"TYPE","terminate"),ul(g,A),j=new Hs(g,g.j,j),j.L=2,j.v=rl(cn(A)),A=!1,u.navigator&&u.navigator.sendBeacon)try{A=u.navigator.sendBeacon(j.v.toString(),"")}catch{}!A&&u.Image&&(new Image().src=j.v,A=!0),A||(j.g=_h(j.j,null),j.g.ea(j.v)),j.F=Date.now(),el(j)}jh(g)}function So(g){g.g&&(hl(g),g.g.cancel(),g.g=null)}function bh(g){So(g),g.u&&(u.clearTimeout(g.u),g.u=null),Co(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&u.clearTimeout(g.s),g.s=null)}function Ao(g){if(!xo(g.h)&&!g.s){g.s=!0;var j=g.Ga;fe||B(),ye||(fe(),ye=!0),Fe.add(j,g),g.B=0}}function cp(g,j){return bo(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=j.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Xt(y(g.Ga,g,j),fd(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const X=new Hs(this,this.j,g);let ae=this.o;if(this.S&&(ae?(ae=D(ae),O(ae,this.S)):ae=this.S),this.m!==null||this.O||(X.H=ae,ae=null),this.P)e:{for(var j=0,A=0;A<this.i.length;A++){t:{var H=this.i[A];if("__data__"in H.map&&(H=H.map.__data__,typeof H=="string")){H=H.length;break t}H=void 0}if(H===void 0)break;if(j+=H,4096<j){j=A;break e}if(j===4096||A===this.i.length-1){j=A+1;break e}}j=1e3}else j=1e3;j=yh(this,X,j),A=cn(this.I),bt(A,"RID",g),bt(A,"CVER",22),this.D&&bt(A,"X-HTTP-Session-Id",this.D),ul(this,A),ae&&(this.O?j="headers="+encodeURIComponent(String(dd(ae)))+"&"+j:this.m&&gs(A,this.m,ae)),yo(this.h,X),this.Ua&&bt(A,"TYPE","init"),this.P?(bt(A,"$req",j),bt(A,"SID","null"),X.T=!0,Qn(X,A,null)):Qn(X,A,j),this.G=2}}else this.G==3&&(g?hd(this,g):this.i.length==0||xo(this.h)||hd(this))};function hd(g,j){var A;j?A=j.l:A=g.U++;const H=cn(g.I);bt(H,"SID",g.K),bt(H,"RID",A),bt(H,"AID",g.T),ul(g,H),g.m&&g.o&&gs(H,g.m,g.o),A=new Hs(g,g.j,A,g.B+1),g.m===null&&(A.H=g.o),j&&(g.i=j.D.concat(g.i)),j=yh(g,A,1e3),A.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),yo(g.h,A),Qn(A,H,j)}function ul(g,j){g.H&&P(g.H,function(A,H){bt(j,H,A)}),g.l&&ad({},function(A,H){bt(j,H,A)})}function yh(g,j,A){A=Math.min(g.i.length,A);var H=g.l?y(g.l.Na,g.l,g):null;e:{var X=g.i;let ae=-1;for(;;){const xe=["count="+A];ae==-1?0<A?(ae=X[0].g,xe.push("ofs="+ae)):ae=0:xe.push("ofs="+ae);let nt=!0;for(let ls=0;ls<A;ls++){let rt=X[ls].g;const ps=X[ls].map;if(rt-=ae,0>rt)ae=Math.max(0,X[ls].g-100),nt=!1;else try{mr(ps,xe,"req"+rt+"_")}catch{H&&H(ps)}}if(nt){H=xe.join("&");break e}}}return g=g.i.splice(0,A),j.D=g,H}function vh(g){if(!g.g&&!g.u){g.Y=1;var j=g.Fa;fe||B(),ye||(fe(),ye=!0),Fe.add(j,g),g.v=0}}function md(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Xt(y(g.Fa,g),fd(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,Nh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Xt(y(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),So(this),Nh(this))};function hl(g){g.A!=null&&(u.clearTimeout(g.A),g.A=null)}function Nh(g){g.g=new Hs(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var j=cn(g.qa);bt(j,"RID","rpc"),bt(j,"SID",g.K),bt(j,"AID",g.T),bt(j,"CI",g.F?"0":"1"),!g.F&&g.ja&&bt(j,"TO",g.ja),bt(j,"TYPE","xmlhttp"),ul(g,j),g.m&&g.o&&gs(j,g.m,g.o),g.L&&(g.g.I=g.L);var A=g.g;g=g.ia,A.L=1,A.v=rl(cn(j)),A.m=null,A.P=!0,Hr(A,g)}t.Za=function(){this.C!=null&&(this.C=null,So(this),md(this),It(19))};function Co(g){g.C!=null&&(u.clearTimeout(g.C),g.C=null)}function wh(g,j){var A=null;if(g.g==j){Co(g),hl(g),g.g=null;var H=2}else if(nd(g.h,j))A=j.D,zs(g.h,j),H=1;else return;if(g.G!=0){if(j.o)if(H==1){A=j.m?j.m.length:0,j=Date.now()-j.F;var X=g.B;H=Pa(),gt(H,new is(H,A)),Ao(g)}else vh(g);else if(X=j.s,X==3||X==0&&0<j.X||!(H==1&&cp(g,j)||H==2&&md(g)))switch(A&&0<A.length&&(j=g.h,j.i=j.i.concat(A)),X){case 1:Yr(g,5);break;case 4:Yr(g,10);break;case 3:Yr(g,6);break;default:Yr(g,2)}}}function fd(g,j){let A=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(A*=2),A*j}function Yr(g,j){if(g.j.info("Error code "+j),j==2){var A=y(g.fb,g),H=g.Xa;const X=!H;H=new Zt(H||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||nl(H,"https"),rl(H),X?il(H.toString(),A):Yn(H.toString(),A)}else It(2);g.G=0,g.l&&g.l.sa(j),jh(g),bh(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function jh(g){if(g.G=0,g.ka=[],g.l){const j=rd(g.h);(j.length!=0||g.i.length!=0)&&(_(g.ka,j),_(g.ka,g.i),g.h.i.length=0,E(g.i),g.i.length=0),g.l.ra()}}function Eh(g,j,A){var H=A instanceof Zt?cn(A):new Zt(A);if(H.g!="")j&&(H.g=j+"."+H.g),Fa(H,H.s);else{var X=u.location;H=X.protocol,j=j?j+"."+X.hostname:X.hostname,X=+X.port;var ae=new Zt(null);H&&nl(ae,H),j&&(ae.g=j),X&&Fa(ae,X),A&&(ae.l=A),H=ae}return A=g.D,j=g.ya,A&&j&&bt(H,A,j),bt(H,"VER",g.la),ul(g,H),H}function _h(g,j,A){if(j&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return j=g.Ca&&!g.pa?new ht(new Ba({eb:A})):new ht(g.pa),j.Ha(g.J),j}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sh(){}t=Sh.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function To(){}To.prototype.g=function(g,j){return new qs(g,j)};function qs(g,j){Ft.call(this),this.g=new _o(j),this.l=g,this.h=j&&j.messageUrlParams||null,g=j&&j.messageHeaders||null,j&&j.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=j&&j.initMessageHeaders||null,j&&j.messageContentType&&(g?g["X-WebChannel-Content-Type"]=j.messageContentType:g={"X-WebChannel-Content-Type":j.messageContentType}),j&&j.va&&(g?g["X-WebChannel-Client-Profile"]=j.va:g={"X-WebChannel-Client-Profile":j.va}),this.g.S=g,(g=j&&j.Sb)&&!I(g)&&(this.g.m=g),this.v=j&&j.supportsCrossDomainXhr||!1,this.u=j&&j.sendRawJson||!1,(j=j&&j.httpSessionIdParam)&&!I(j)&&(this.g.D=j,g=this.h,g!==null&&j in g&&(g=this.h,j in g&&delete g[j])),this.j=new xr(this)}w(qs,Ft),qs.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qs.prototype.close=function(){ud(this.g)},qs.prototype.o=function(g){var j=this.g;if(typeof g=="string"){var A={};A.__data__=g,g=A}else this.u&&(A={},A.__data__=Wn(g),g=A);j.i.push(new mh(j.Ya++,g)),j.G==3&&Ao(j)},qs.prototype.N=function(){this.g.l=null,delete this.j,ud(this.g),delete this.g,qs.aa.N.call(this)};function Ah(g){Fr.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var j=g.__sm__;if(j){e:{for(const A in j){g=A;break e}g=void 0}(this.i=g)&&(g=this.i,j=j!==null&&g in j?j[g]:void 0),this.data=j}else this.data=g}w(Ah,Fr);function Ch(){Jc.call(this),this.status=1}w(Ch,Jc);function xr(g){this.g=g}w(xr,Sh),xr.prototype.ua=function(){gt(this.g,"a")},xr.prototype.ta=function(g){gt(this.g,new Ah(g))},xr.prototype.sa=function(g){gt(this.g,new Ch)},xr.prototype.ra=function(){gt(this.g,"b")},To.prototype.createWebChannel=To.prototype.g,qs.prototype.send=qs.prototype.o,qs.prototype.open=qs.prototype.m,qs.prototype.close=qs.prototype.close,bA=function(){return new To},xA=function(){return Pa()},pA=or,fb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Va.NO_ERROR=0,Va.TIMEOUT=8,Va.HTTP_ERROR=6,af=Va,Br.COMPLETE="complete",gA=Br,Zc.EventType=Ur,Ur.OPEN="a",Ur.CLOSE="b",Ur.ERROR="c",Ur.MESSAGE="d",Ft.prototype.listen=Ft.prototype.K,du=Zc,ht.prototype.listenOnce=ht.prototype.L,ht.prototype.getLastError=ht.prototype.Ka,ht.prototype.getLastErrorCode=ht.prototype.Ba,ht.prototype.getStatus=ht.prototype.Z,ht.prototype.getResponseJson=ht.prototype.Oa,ht.prototype.getResponseText=ht.prototype.oa,ht.prototype.send=ht.prototype.ea,ht.prototype.setWithCredentials=ht.prototype.Ha,fA=ht}).apply(typeof km<"u"?km:typeof self<"u"?self:typeof window<"u"?window:{});const l2="@firebase/firestore",o2="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ps=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ps.UNAUTHENTICATED=new Ps(null),Ps.GOOGLE_CREDENTIALS=new Ps("google-credentials-uid"),Ps.FIRST_PARTY=new Ps("first-party-uid"),Ps.MOCK_USER=new Ps("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql=new hg("@firebase/firestore");function ac(){return ql.logLevel}function je(t,...e){if(ql.logLevel<=et.DEBUG){const s=e.map(Ey);ql.debug(`Firestore (${Vc}): ${t}`,...s)}}function Sa(t,...e){if(ql.logLevel<=et.ERROR){const s=e.map(Ey);ql.error(`Firestore (${Vc}): ${t}`,...s)}}function Ai(t,...e){if(ql.logLevel<=et.WARN){const s=e.map(Ey);ql.warn(`Firestore (${Vc}): ${t}`,...s)}}function Ey(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t,e,s){let r="Unexpected state";typeof e=="string"?r=e:s=e,yA(t,r,s)}function yA(t,e,s){let r=`FIRESTORE (${Vc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(s!==void 0)try{r+=" CONTEXT: "+JSON.stringify(s)}catch{r+=" CONTEXT: "+s}throw Sa(r),new Error(r)}function mt(t,e,s,r){let a="Unexpected state";typeof s=="string"?a=s:r=s,t||yA(e,a,r)}function ze(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends Gn{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(Ps.UNAUTHENTICATED))}shutdown(){}}class cO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class dO{constructor(e){this.t=e,this.currentUser=Ps.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){mt(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,s(m)):Promise.resolve();let o=new ba;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ba,e.enqueueRetryable(()=>a(this.currentUser))};const c=()=>{const m=o;e.enqueueRetryable(async()=>{await m.promise,await a(this.currentUser)})},u=m=>{je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit(m=>u(m)),setTimeout(()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?u(m):(je("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ba)}},0),c()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(r=>this.i!==e?(je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new vA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Ps(e)}}class uO{constructor(e,s,r){this.P=e,this.T=s,this.I=r,this.type="FirstParty",this.user=Ps.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class hO{constructor(e,s,r){this.P=e,this.T=s,this.I=r}getToken(){return Promise.resolve(new uO(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable(()=>s(Ps.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class c2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mO{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){mt(this.o===void 0,3512);const r=o=>{o.error!=null&&je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const c=o.token!==this.m;return this.m=o.token,je("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?s(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const a=o=>{je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>a(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?a(o):je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new c2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(mt(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new c2(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let r=0;r<t;r++)s[r]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=fO(40);for(let o=0;o<a.length;++o)r.length<20&&a[o]<s&&(r+=e.charAt(a[o]%62))}return r}}function Qe(t,e){return t<e?-1:t>e?1:0}function gb(t,e){let s=0;for(;s<t.length&&s<e.length;){const r=t.codePointAt(s),a=e.codePointAt(s);if(r!==a){if(r<128&&a<128)return Qe(r,a);{const o=NA(),c=gO(o.encode(d2(t,s)),o.encode(d2(e,s)));return c!==0?c:Qe(r,a)}}s+=r>65535?2:1}return Qe(t.length,e.length)}function d2(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function gO(t,e){for(let s=0;s<t.length&&s<e.length;++s)if(t[s]!==e[s])return Qe(t[s],e[s]);return Qe(t.length,e.length)}function wc(t,e,s){return t.length===e.length&&t.every((r,a)=>s(r,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2="__name__";class Er{constructor(e,s,r){s===void 0?s=0:s>e.length&&Ve(637,{offset:s,range:e.length}),r===void 0?r=e.length-s:r>e.length-s&&Ve(1746,{length:r,range:e.length-s}),this.segments=e,this.offset=s,this.len=r}get length(){return this.len}isEqual(e){return Er.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof Er?e.forEach(r=>{s.push(r)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,r=this.limit();s<r;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const r=Math.min(e.length,s.length);for(let a=0;a<r;a++){const o=Er.compareSegments(e.get(a),s.get(a));if(o!==0)return o}return Qe(e.length,s.length)}static compareSegments(e,s){const r=Er.isNumericId(e),a=Er.isNumericId(s);return r&&!a?-1:!r&&a?1:r&&a?Er.extractNumericId(e).compare(Er.extractNumericId(s)):gb(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ji.fromString(e.substring(4,e.length-2))}}class St extends Er{construct(e,s,r){return new St(e,s,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ne(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);s.push(...r.split("/").filter(a=>a.length>0))}return new St(s)}static emptyPath(){return new St([])}}const pO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Cs extends Er{construct(e,s,r){return new Cs(e,s,r)}static isValidIdentifier(e){return pO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Cs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===u2}static keyField(){return new Cs([u2])}static fromServerFormat(e){const s=[];let r="",a=0;const o=()=>{if(r.length===0)throw new Ne(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(r),r=""};let c=!1;for(;a<e.length;){const u=e[a];if(u==="\\"){if(a+1===e.length)throw new Ne(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new Ne(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else u==="`"?(c=!c,a++):u!=="."||c?(r+=u,a++):(o(),a++)}if(o(),c)throw new Ne(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Cs(s)}static emptyPath(){return new Cs([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.path=e}static fromPath(e){return new De(St.fromString(e))}static fromName(e){return new De(St.fromString(e).popFirst(5))}static empty(){return new De(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return St.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new De(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wA(t,e,s){if(!s)throw new Ne(de.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xO(t,e,s,r){if(e===!0&&r===!0)throw new Ne(de.INVALID_ARGUMENT,`${t} and ${s} cannot be used together.`)}function h2(t){if(!De.isDocumentKey(t))throw new Ne(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function m2(t){if(De.isDocumentKey(t))throw new Ne(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jA(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function xg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ve(12329,{type:typeof t})}function nr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ne(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=xg(t);throw new Ne(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e){const s={typeString:t};return e&&(s.value=e),s}function Ku(t,e){if(!jA(t))throw new Ne(de.INVALID_ARGUMENT,"JSON must be an object");let s;for(const r in e)if(e[r]){const a=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){s=`JSON missing required field: '${r}'`;break}const c=t[r];if(a&&typeof c!==a){s=`JSON field '${r}' must be a ${a}.`;break}if(o!==void 0&&c!==o.value){s=`Expected '${r}' field to equal '${o.value}'`;break}}if(s)throw new Ne(de.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=-62135596800,g2=1e6;class Dt{static now(){return Dt.fromMillis(Date.now())}static fromDate(e){return Dt.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),r=Math.floor((e-1e3*s)*g2);return new Dt(s,r)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new Ne(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<f2)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ne(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g2}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ku(e,Dt._jsonSchema))return new Dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-f2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Dt._jsonSchemaVersion="firestore/timestamp/1.0",Dt._jsonSchema={type:ns("string",Dt._jsonSchemaVersion),seconds:ns("number"),nanoseconds:ns("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{static fromTimestamp(e){return new Be(e)}static min(){return new Be(new Dt(0,0))}static max(){return new Be(new Dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=-1;function bO(t,e){const s=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,a=Be.fromTimestamp(r===1e9?new Dt(s+1,0):new Dt(s,r));return new Ci(a,De.empty(),e)}function yO(t){return new Ci(t.readTime,t.key,Ru)}class Ci{constructor(e,s,r){this.readTime=e,this.documentKey=s,this.largestBatchId=r}static min(){return new Ci(Be.min(),De.empty(),Ru)}static max(){return new Ci(Be.max(),De.empty(),Ru)}}function vO(t,e){let s=t.readTime.compareTo(e.readTime);return s!==0?s:(s=De.comparator(t.documentKey,e.documentKey),s!==0?s:Qe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uc(t){if(t.code!==de.FAILED_PRECONDITION||t.message!==NO)throw t;je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&Ve(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new me((r,a)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,a)},this.catchCallback=o=>{this.wrapFailure(s,o).next(r,a)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof me?s:me.resolve(s)}catch(s){return me.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):me.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):me.reject(s)}static resolve(e){return new me((s,r)=>{s(e)})}static reject(e){return new me((s,r)=>{r(e)})}static waitFor(e){return new me((s,r)=>{let a=0,o=0,c=!1;e.forEach(u=>{++a,u.next(()=>{++o,c&&o===a&&s()},m=>r(m))}),c=!0,o===a&&s()})}static or(e){let s=me.resolve(!1);for(const r of e)s=s.next(a=>a?me.resolve(a):r());return s}static forEach(e,s){const r=[];return e.forEach((a,o)=>{r.push(s.call(this,a,o))}),this.waitFor(r)}static mapArray(e,s){return new me((r,a)=>{const o=e.length,c=new Array(o);let u=0;for(let m=0;m<o;m++){const f=m;s(e[f]).next(x=>{c[f]=x,++u,u===o&&r(c)},x=>a(x))}})}static doWhile(e,s){return new me((r,a)=>{const o=()=>{e()===!0?s().next(()=>{o()},a):r()};o()})}}function jO(t){const e=t.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function Fc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=r=>this._e(r),this.ae=r=>s.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}bg.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-1;function yg(t){return t==null}function Rf(t){return t===0&&1/t==-1/0}function EO(t){return typeof t=="number"&&Number.isInteger(t)&&!Rf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EA="";function _O(t){let e="";for(let s=0;s<t.length;s++)e.length>0&&(e=p2(e)),e=SO(t.get(s),e);return p2(e)}function SO(t,e){let s=e;const r=t.length;for(let a=0;a<r;a++){const o=t.charAt(a);switch(o){case"\0":s+="";break;case EA:s+="";break;default:s+=o}}return s}function p2(t){return t+EA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){let e=0;for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e++;return e}function Bi(t,e){for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&e(s,t[s])}function _A(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,s){this.comparator=e,this.root=s||Ss.EMPTY}insert(e,s){return new Ut(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,Ss.BLACK,null,null))}remove(e){return new Ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ss.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return s.value;r<0?s=s.left:r>0&&(s=s.right)}return null}indexOf(e){let s=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return s+r.left.size;a<0?r=r.left:(s+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,r)=>(e(s,r),!1))}toString(){const e=[];return this.inorderTraversal((s,r)=>(e.push(`${s}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Mm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Mm(this.root,e,this.comparator,!1)}getReverseIterator(){return new Mm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Mm(this.root,e,this.comparator,!0)}}class Mm{constructor(e,s,r,a){this.isReverse=a,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=s?r(e.key,s):1,s&&a&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ss{constructor(e,s,r,a,o){this.key=e,this.value=s,this.color=r??Ss.RED,this.left=a??Ss.EMPTY,this.right=o??Ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,r,a,o){return new Ss(e??this.key,s??this.value,r??this.color,a??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,r){let a=this;const o=r(e,a.key);return a=o<0?a.copy(null,null,null,a.left.insert(e,s,r),null):o===0?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(e,s,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let r,a=this;if(s(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),s(e,a.key)===0){if(a.right.isEmpty())return Ss.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ve(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ve(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ve(27949);return e+(this.isRed()?0:1)}}Ss.EMPTY=null,Ss.RED=!0,Ss.BLACK=!1;Ss.EMPTY=new class{constructor(){this.size=0}get key(){throw Ve(57766)}get value(){throw Ve(16141)}get color(){throw Ve(16727)}get left(){throw Ve(29726)}get right(){throw Ve(36894)}copy(e,s,r,a,o){return this}insert(e,s,r){return new Ss(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.comparator=e,this.data=new Ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,r)=>(e(s),!1))}forEachInRange(e,s){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;s(a.key)}}forEachWhile(e,s){let r;for(r=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new b2(this.data.getIterator())}getIteratorFrom(e){return new b2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(r=>{s=s.add(r)}),s}isEqual(e){if(!(e instanceof us)||this.size!==e.size)return!1;const s=this.data.getIterator(),r=e.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,o=r.getNext().key;if(this.comparator(a,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new us(this.comparator);return s.data=e,s}}class b2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e){this.fields=e,e.sort(Cs.comparator)}static empty(){return new xn([])}unionWith(e){let s=new us(Cs.comparator);for(const r of this.fields)s=s.add(r);for(const r of e)s=s.add(r);return new xn(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return wc(this.fields,e.fields,(s,r)=>s.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(a){try{return atob(a)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new SA("Invalid base64 string: "+o):o}}(e);return new Ts(s)}static fromUint8Array(e){const s=function(a){let o="";for(let c=0;c<a.length;++c)o+=String.fromCharCode(a[c]);return o}(e);return new Ts(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const r=new Uint8Array(s.length);for(let a=0;a<s.length;a++)r[a]=s.charCodeAt(a);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ts.EMPTY_BYTE_STRING=new Ts("");const AO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ti(t){if(mt(!!t,39018),typeof t=="string"){let e=0;const s=AO.exec(t);if(mt(!!s,46558,{timestamp:t}),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yt(t.seconds),nanos:Yt(t.nanos)}}function Yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ri(t){return typeof t=="string"?Ts.fromBase64String(t):Ts.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="server_timestamp",CA="__type__",TA="__previous_value__",RA="__local_write_time__";function Ay(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[CA])===null||s===void 0?void 0:s.stringValue)===AA}function vg(t){const e=t.mapValue.fields[TA];return Ay(e)?vg(e):e}function Du(t){const e=Ti(t.mapValue.fields[RA].timestampValue);return new Dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,s,r,a,o,c,u,m,f,x){this.databaseId=e,this.appId=s,this.persistenceKey=r,this.host=a,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=u,this.longPollingOptions=m,this.useFetchStreams=f,this.isUsingEmulator=x}}const Df="(default)";class Iu{constructor(e,s){this.projectId=e,this.database=s||Df}static empty(){return new Iu("","")}get isDefaultDatabase(){return this.database===Df}isEqual(e){return e instanceof Iu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA="__type__",TO="__max__",Pm={mapValue:{}},IA="__vector__",If="value";function Di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ay(t)?4:DO(t)?9007199254740991:RO(t)?10:11:Ve(28295,{value:t})}function kr(t,e){if(t===e)return!0;const s=Di(t);if(s!==Di(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Du(t).isEqual(Du(e));case 3:return function(a,o){if(typeof a.timestampValue=="string"&&typeof o.timestampValue=="string"&&a.timestampValue.length===o.timestampValue.length)return a.timestampValue===o.timestampValue;const c=Ti(a.timestampValue),u=Ti(o.timestampValue);return c.seconds===u.seconds&&c.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(a,o){return Ri(a.bytesValue).isEqual(Ri(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(a,o){return Yt(a.geoPointValue.latitude)===Yt(o.geoPointValue.latitude)&&Yt(a.geoPointValue.longitude)===Yt(o.geoPointValue.longitude)}(t,e);case 2:return function(a,o){if("integerValue"in a&&"integerValue"in o)return Yt(a.integerValue)===Yt(o.integerValue);if("doubleValue"in a&&"doubleValue"in o){const c=Yt(a.doubleValue),u=Yt(o.doubleValue);return c===u?Rf(c)===Rf(u):isNaN(c)&&isNaN(u)}return!1}(t,e);case 9:return wc(t.arrayValue.values||[],e.arrayValue.values||[],kr);case 10:case 11:return function(a,o){const c=a.mapValue.fields||{},u=o.mapValue.fields||{};if(x2(c)!==x2(u))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(u[m]===void 0||!kr(c[m],u[m])))return!1;return!0}(t,e);default:return Ve(52216,{left:t})}}function ku(t,e){return(t.values||[]).find(s=>kr(s,e))!==void 0}function jc(t,e){if(t===e)return 0;const s=Di(t),r=Di(e);if(s!==r)return Qe(s,r);switch(s){case 0:case 9007199254740991:return 0;case 1:return Qe(t.booleanValue,e.booleanValue);case 2:return function(o,c){const u=Yt(o.integerValue||o.doubleValue),m=Yt(c.integerValue||c.doubleValue);return u<m?-1:u>m?1:u===m?0:isNaN(u)?isNaN(m)?0:-1:1}(t,e);case 3:return y2(t.timestampValue,e.timestampValue);case 4:return y2(Du(t),Du(e));case 5:return gb(t.stringValue,e.stringValue);case 6:return function(o,c){const u=Ri(o),m=Ri(c);return u.compareTo(m)}(t.bytesValue,e.bytesValue);case 7:return function(o,c){const u=o.split("/"),m=c.split("/");for(let f=0;f<u.length&&f<m.length;f++){const x=Qe(u[f],m[f]);if(x!==0)return x}return Qe(u.length,m.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,c){const u=Qe(Yt(o.latitude),Yt(c.latitude));return u!==0?u:Qe(Yt(o.longitude),Yt(c.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return v2(t.arrayValue,e.arrayValue);case 10:return function(o,c){var u,m,f,x;const v=o.fields||{},y=c.fields||{},N=(u=v[If])===null||u===void 0?void 0:u.arrayValue,w=(m=y[If])===null||m===void 0?void 0:m.arrayValue,E=Qe(((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0,((x=w==null?void 0:w.values)===null||x===void 0?void 0:x.length)||0);return E!==0?E:v2(N,w)}(t.mapValue,e.mapValue);case 11:return function(o,c){if(o===Pm.mapValue&&c===Pm.mapValue)return 0;if(o===Pm.mapValue)return 1;if(c===Pm.mapValue)return-1;const u=o.fields||{},m=Object.keys(u),f=c.fields||{},x=Object.keys(f);m.sort(),x.sort();for(let v=0;v<m.length&&v<x.length;++v){const y=gb(m[v],x[v]);if(y!==0)return y;const N=jc(u[m[v]],f[x[v]]);if(N!==0)return N}return Qe(m.length,x.length)}(t.mapValue,e.mapValue);default:throw Ve(23264,{le:s})}}function y2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Qe(t,e);const s=Ti(t),r=Ti(e),a=Qe(s.seconds,r.seconds);return a!==0?a:Qe(s.nanos,r.nanos)}function v2(t,e){const s=t.values||[],r=e.values||[];for(let a=0;a<s.length&&a<r.length;++a){const o=jc(s[a],r[a]);if(o)return o}return Qe(s.length,r.length)}function Ec(t){return pb(t)}function pb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(s){const r=Ti(s);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(s){return Ri(s).toBase64()}(t.bytesValue):"referenceValue"in t?function(s){return De.fromName(s).toString()}(t.referenceValue):"geoPointValue"in t?function(s){return`geo(${s.latitude},${s.longitude})`}(t.geoPointValue):"arrayValue"in t?function(s){let r="[",a=!0;for(const o of s.values||[])a?a=!1:r+=",",r+=pb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(s){const r=Object.keys(s.fields||{}).sort();let a="{",o=!0;for(const c of r)o?o=!1:a+=",",a+=`${c}:${pb(s.fields[c])}`;return a+"}"}(t.mapValue):Ve(61005,{value:t})}function lf(t){switch(Di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vg(t);return e?16+lf(e):16;case 5:return 2*t.stringValue.length;case 6:return Ri(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((a,o)=>a+lf(o),0)}(t.arrayValue);case 10:case 11:return function(r){let a=0;return Bi(r.fields,(o,c)=>{a+=o.length+lf(c)}),a}(t.mapValue);default:throw Ve(13486,{value:t})}}function N2(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xb(t){return!!t&&"integerValue"in t}function Cy(t){return!!t&&"arrayValue"in t}function w2(t){return!!t&&"nullValue"in t}function j2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function of(t){return!!t&&"mapValue"in t}function RO(t){var e,s;return((s=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[DA])===null||s===void 0?void 0:s.stringValue)===IA}function xu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bi(t.mapValue.fields,(s,r)=>e.mapValue.fields[s]=xu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(t.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=xu(t.arrayValue.values[s]);return e}return Object.assign({},t)}function DO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TO}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.value=e}static empty(){return new sn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let r=0;r<e.length-1;++r)if(s=(s.mapValue.fields||{})[e.get(r)],!of(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=xu(s)}setAll(e){let s=Cs.emptyPath(),r={},a=[];e.forEach((c,u)=>{if(!s.isImmediateParentOf(u)){const m=this.getFieldsMap(s);this.applyChanges(m,r,a),r={},a=[],s=u.popLast()}c?r[u.lastSegment()]=xu(c):a.push(u.lastSegment())});const o=this.getFieldsMap(s);this.applyChanges(o,r,a)}delete(e){const s=this.field(e.popLast());of(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return kr(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=s.mapValue.fields[e.get(r)];of(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[e.get(r)]=a),s=a}return s.mapValue.fields}applyChanges(e,s,r){Bi(s,(a,o)=>e[a]=o);for(const a of r)delete e[a]}clone(){return new sn(xu(this.value))}}function kA(t){const e=[];return Bi(t.fields,(s,r)=>{const a=new Cs([s]);if(of(r)){const o=kA(r.mapValue).fields;if(o.length===0)e.push(a);else for(const c of o)e.push(a.child(c))}else e.push(a)}),new xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e,s,r,a,o,c,u){this.key=e,this.documentType=s,this.version=r,this.readTime=a,this.createTime=o,this.data=c,this.documentState=u}static newInvalidDocument(e){return new Ls(e,0,Be.min(),Be.min(),Be.min(),sn.empty(),0)}static newFoundDocument(e,s,r,a){return new Ls(e,1,s,Be.min(),r,a,0)}static newNoDocument(e,s){return new Ls(e,2,s,Be.min(),Be.min(),sn.empty(),0)}static newUnknownDocument(e,s){return new Ls(e,3,s,Be.min(),Be.min(),sn.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(Be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,s){this.position=e,this.inclusive=s}}function E2(t,e,s){let r=0;for(let a=0;a<t.position.length;a++){const o=e[a],c=t.position[a];if(o.field.isKeyField()?r=De.comparator(De.fromName(c.referenceValue),s.key):r=jc(c,s.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let s=0;s<t.position.length;s++)if(!kr(t.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,s="asc"){this.field=e,this.dir=s}}function IO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{}class ss extends MA{constructor(e,s,r){super(),this.field=e,this.op=s,this.value=r}static create(e,s,r){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,r):new MO(e,s,r):s==="array-contains"?new LO(e,r):s==="in"?new VO(e,r):s==="not-in"?new UO(e,r):s==="array-contains-any"?new FO(e,r):new ss(e,s,r)}static createKeyFieldInFilter(e,s,r){return s==="in"?new PO(e,r):new OO(e,r)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(jc(s,this.value)):s!==null&&Di(this.value)===Di(s)&&this.matchesComparison(jc(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ve(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class rr extends MA{constructor(e,s){super(),this.filters=e,this.op=s,this.he=null}static create(e,s){return new rr(e,s)}matches(e){return PA(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function PA(t){return t.op==="and"}function OA(t){return kO(t)&&PA(t)}function kO(t){for(const e of t.filters)if(e instanceof rr)return!1;return!0}function bb(t){if(t instanceof ss)return t.field.canonicalString()+t.op.toString()+Ec(t.value);if(OA(t))return t.filters.map(e=>bb(e)).join(",");{const e=t.filters.map(s=>bb(s)).join(",");return`${t.op}(${e})`}}function LA(t,e){return t instanceof ss?function(r,a){return a instanceof ss&&r.op===a.op&&r.field.isEqual(a.field)&&kr(r.value,a.value)}(t,e):t instanceof rr?function(r,a){return a instanceof rr&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce((o,c,u)=>o&&LA(c,a.filters[u]),!0):!1}(t,e):void Ve(19439)}function VA(t){return t instanceof ss?function(s){return`${s.field.canonicalString()} ${s.op} ${Ec(s.value)}`}(t):t instanceof rr?function(s){return s.op.toString()+" {"+s.getFilters().map(VA).join(" ,")+"}"}(t):"Filter"}class MO extends ss{constructor(e,s,r){super(e,s,r),this.key=De.fromName(r.referenceValue)}matches(e){const s=De.comparator(e.key,this.key);return this.matchesComparison(s)}}class PO extends ss{constructor(e,s){super(e,"in",s),this.keys=UA("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class OO extends ss{constructor(e,s){super(e,"not-in",s),this.keys=UA("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function UA(t,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(r=>De.fromName(r.referenceValue))}class LO extends ss{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return Cy(s)&&ku(s.arrayValue,this.value)}}class VO extends ss{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&ku(this.value.arrayValue,s)}}class UO extends ss{constructor(e,s){super(e,"not-in",s)}matches(e){if(ku(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!ku(this.value.arrayValue,s)}}class FO extends ss{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!Cy(s)||!s.arrayValue.values)&&s.arrayValue.values.some(r=>ku(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(e,s=null,r=[],a=[],o=null,c=null,u=null){this.path=e,this.collectionGroup=s,this.orderBy=r,this.filters=a,this.limit=o,this.startAt=c,this.endAt=u,this.Pe=null}}function S2(t,e=null,s=[],r=[],a=null,o=null,c=null){return new BO(t,e,s,r,a,o,c)}function Ty(t){const e=ze(t);if(e.Pe===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(r=>bb(r)).join(","),s+="|ob:",s+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),yg(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(r=>Ec(r)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(r=>Ec(r)).join(",")),e.Pe=s}return e.Pe}function Ry(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<t.orderBy.length;s++)if(!IO(t.orderBy[s],e.orderBy[s]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let s=0;s<t.filters.length;s++)if(!LA(t.filters[s],e.filters[s]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_2(t.startAt,e.startAt)&&_2(t.endAt,e.endAt)}function yb(t){return De.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,s=null,r=[],a=[],o=null,c="F",u=null,m=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=r,this.filters=a,this.limit=o,this.limitType=c,this.startAt=u,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function HO(t,e,s,r,a,o,c,u){return new Bc(t,e,s,r,a,o,c,u)}function Dy(t){return new Bc(t)}function A2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function FA(t){return t.collectionGroup!==null}function bu(t){const e=ze(t);if(e.Te===null){e.Te=[];const s=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),s.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let u=new us(Cs.comparator);return c.filters.forEach(m=>{m.getFlattenedFilters().forEach(f=>{f.isInequality()&&(u=u.add(f.field))})}),u})(e).forEach(o=>{s.has(o.canonicalString())||o.isKeyField()||e.Te.push(new Mu(o,r))}),s.has(Cs.keyField().canonicalString())||e.Te.push(new Mu(Cs.keyField(),r))}return e.Te}function Cr(t){const e=ze(t);return e.Ie||(e.Ie=zO(e,bu(t))),e.Ie}function zO(t,e){if(t.limitType==="F")return S2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(a=>{const o=a.dir==="desc"?"asc":"desc";return new Mu(a.field,o)});const s=t.endAt?new kf(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new kf(t.startAt.position,t.startAt.inclusive):null;return S2(t.path,t.collectionGroup,e,t.filters,t.limit,s,r)}}function vb(t,e){const s=t.filters.concat([e]);return new Bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),s,t.limit,t.limitType,t.startAt,t.endAt)}function Mf(t,e,s){return new Bc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,s,t.startAt,t.endAt)}function Ng(t,e){return Ry(Cr(t),Cr(e))&&t.limitType===e.limitType}function BA(t){return`${Ty(Cr(t))}|lt:${t.limitType}`}function ic(t){return`Query(target=${function(s){let r=s.path.canonicalString();return s.collectionGroup!==null&&(r+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(r+=`, filters: [${s.filters.map(a=>VA(a)).join(", ")}]`),yg(s.limit)||(r+=", limit: "+s.limit),s.orderBy.length>0&&(r+=`, orderBy: [${s.orderBy.map(a=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(a)).join(", ")}]`),s.startAt&&(r+=", startAt: ",r+=s.startAt.inclusive?"b:":"a:",r+=s.startAt.position.map(a=>Ec(a)).join(",")),s.endAt&&(r+=", endAt: ",r+=s.endAt.inclusive?"a:":"b:",r+=s.endAt.position.map(a=>Ec(a)).join(",")),`Target(${r})`}(Cr(t))}; limitType=${t.limitType})`}function wg(t,e){return e.isFoundDocument()&&function(r,a){const o=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):De.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,a){for(const o of bu(r))if(!o.field.isKeyField()&&a.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,a){for(const o of r.filters)if(!o.matches(a))return!1;return!0}(t,e)&&function(r,a){return!(r.startAt&&!function(c,u,m){const f=E2(c,u,m);return c.inclusive?f<=0:f<0}(r.startAt,bu(r),a)||r.endAt&&!function(c,u,m){const f=E2(c,u,m);return c.inclusive?f>=0:f>0}(r.endAt,bu(r),a))}(t,e)}function qO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function HA(t){return(e,s)=>{let r=!1;for(const a of bu(t)){const o=$O(a,e,s);if(o!==0)return o;r=r||a.field.isKeyField()}return 0}}function $O(t,e,s){const r=t.field.isKeyField()?De.comparator(e.key,s.key):function(o,c,u){const m=c.data.field(o),f=u.data.field(o);return m!==null&&f!==null?jc(m,f):Ve(42886)}(t.field,e,s);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ve(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r!==void 0){for(const[a,o]of r)if(this.equalsFn(a,e))return o}}has(e){return this.get(e)!==void 0}set(e,s){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,s]],void this.innerSize++;for(let o=0;o<a.length;o++)if(this.equalsFn(a[o][0],e))return void(a[o]=[e,s]);a.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[s]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Bi(this.inner,(s,r)=>{for(const[a,o]of r)e(a,o)})}isEmpty(){return _A(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=new Ut(De.comparator);function Aa(){return GO}const zA=new Ut(De.comparator);function uu(...t){let e=zA;for(const s of t)e=e.insert(s.key,s);return e}function qA(t){let e=zA;return t.forEach((s,r)=>e=e.insert(s,r.overlayedDocument)),e}function Ml(){return yu()}function $A(){return yu()}function yu(){return new ro(t=>t.toString(),(t,e)=>t.isEqual(e))}const WO=new Ut(De.comparator),QO=new us(De.comparator);function tt(...t){let e=QO;for(const s of t)e=e.add(s);return e}const YO=new us(Qe);function KO(){return YO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rf(e)?"-0":e}}function GA(t){return{integerValue:""+t}}function XO(t,e){return EO(e)?GA(e):Iy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this._=void 0}}function ZO(t,e,s){return t instanceof Pu?function(a,o){const c={fields:{[CA]:{stringValue:AA},[RA]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return o&&Ay(o)&&(o=vg(o)),o&&(c.fields[TA]=o),{mapValue:c}}(s,e):t instanceof _c?QA(t,e):t instanceof Ou?YA(t,e):function(a,o){const c=WA(a,o),u=C2(c)+C2(a.Ee);return xb(c)&&xb(a.Ee)?GA(u):Iy(a.serializer,u)}(t,e)}function JO(t,e,s){return t instanceof _c?QA(t,e):t instanceof Ou?YA(t,e):s}function WA(t,e){return t instanceof Pf?function(r){return xb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Pu extends jg{}class _c extends jg{constructor(e){super(),this.elements=e}}function QA(t,e){const s=KA(e);for(const r of t.elements)s.some(a=>kr(a,r))||s.push(r);return{arrayValue:{values:s}}}class Ou extends jg{constructor(e){super(),this.elements=e}}function YA(t,e){let s=KA(e);for(const r of t.elements)s=s.filter(a=>!kr(a,r));return{arrayValue:{values:s}}}class Pf extends jg{constructor(e,s){super(),this.serializer=e,this.Ee=s}}function C2(t){return Yt(t.integerValue||t.doubleValue)}function KA(t){return Cy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,s){this.field=e,this.transform=s}}function e8(t,e){return t.field.isEqual(e.field)&&function(r,a){return r instanceof _c&&a instanceof _c||r instanceof Ou&&a instanceof Ou?wc(r.elements,a.elements,kr):r instanceof Pf&&a instanceof Pf?kr(r.Ee,a.Ee):r instanceof Pu&&a instanceof Pu}(t.transform,e.transform)}class t8{constructor(e,s){this.version=e,this.transformResults=s}}class Fn{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Eg{}function ZA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ky(t.key,Fn.none()):new Xu(t.key,t.data,Fn.none());{const s=t.data,r=sn.empty();let a=new us(Cs.comparator);for(let o of e.fields)if(!a.has(o)){let c=s.field(o);c===null&&o.length>1&&(o=o.popLast(),c=s.field(o)),c===null?r.delete(o):r.set(o,c),a=a.add(o)}return new Hi(t.key,r,new xn(a.toArray()),Fn.none())}}function s8(t,e,s){t instanceof Xu?function(a,o,c){const u=a.value.clone(),m=R2(a.fieldTransforms,o,c.transformResults);u.setAll(m),o.convertToFoundDocument(c.version,u).setHasCommittedMutations()}(t,e,s):t instanceof Hi?function(a,o,c){if(!cf(a.precondition,o))return void o.convertToUnknownDocument(c.version);const u=R2(a.fieldTransforms,o,c.transformResults),m=o.data;m.setAll(JA(a)),m.setAll(u),o.convertToFoundDocument(c.version,m).setHasCommittedMutations()}(t,e,s):function(a,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,s)}function vu(t,e,s,r){return t instanceof Xu?function(o,c,u,m){if(!cf(o.precondition,c))return u;const f=o.value.clone(),x=D2(o.fieldTransforms,m,c);return f.setAll(x),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(t,e,s,r):t instanceof Hi?function(o,c,u,m){if(!cf(o.precondition,c))return u;const f=D2(o.fieldTransforms,m,c),x=c.data;return x.setAll(JA(o)),x.setAll(f),c.convertToFoundDocument(c.version,x).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,s,r):function(o,c,u){return cf(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):u}(t,e,s)}function n8(t,e){let s=null;for(const r of t.fieldTransforms){const a=e.data.field(r.field),o=WA(r.transform,a||null);o!=null&&(s===null&&(s=sn.empty()),s.set(r.field,o))}return s||null}function T2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&wc(r,a,(o,c)=>e8(o,c))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xu extends Eg{constructor(e,s,r,a=[]){super(),this.key=e,this.value=s,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Hi extends Eg{constructor(e,s,r,a,o=[]){super(),this.key=e,this.data=s,this.fieldMask=r,this.precondition=a,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function JA(t){const e=new Map;return t.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const r=t.data.field(s);e.set(s,r)}}),e}function R2(t,e,s){const r=new Map;mt(t.length===s.length,32656,{Ae:s.length,Re:t.length});for(let a=0;a<s.length;a++){const o=t[a],c=o.transform,u=e.data.field(o.field);r.set(o.field,JO(c,u,s[a]))}return r}function D2(t,e,s){const r=new Map;for(const a of t){const o=a.transform,c=s.data.field(a.field);r.set(a.field,ZO(o,c,e))}return r}class ky extends Eg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class r8 extends Eg{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a8{constructor(e,s,r,a){this.batchId=e,this.localWriteTime=s,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,s){const r=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const o=this.mutations[a];o.key.isEqual(e.key)&&s8(o,e,r[a])}}applyToLocalView(e,s){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(s=vu(r,e,s,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(s=vu(r,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const r=$A();return this.mutations.forEach(a=>{const o=e.get(a.key),c=o.overlayedDocument;let u=this.applyToLocalView(c,o.mutatedFields);u=s.has(a.key)?null:u;const m=ZA(c,u);m!==null&&r.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),tt())}isEqual(e){return this.batchId===e.batchId&&wc(this.mutations,e.mutations,(s,r)=>T2(s,r))&&wc(this.baseMutations,e.baseMutations,(s,r)=>T2(s,r))}}class My{constructor(e,s,r,a){this.batch=e,this.commitVersion=s,this.mutationResults=r,this.docVersions=a}static from(e,s,r){mt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let a=function(){return WO}();const o=e.mutations;for(let c=0;c<o.length;c++)a=a.insert(o[c].key,r[c].version);return new My(e,s,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i8{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l8{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ts,it;function o8(t){switch(t){case de.OK:return Ve(64938);case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0;default:return Ve(15467,{code:t})}}function eC(t){if(t===void 0)return Sa("GRPC error has no .code"),de.UNKNOWN;switch(t){case ts.OK:return de.OK;case ts.CANCELLED:return de.CANCELLED;case ts.UNKNOWN:return de.UNKNOWN;case ts.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case ts.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case ts.INTERNAL:return de.INTERNAL;case ts.UNAVAILABLE:return de.UNAVAILABLE;case ts.UNAUTHENTICATED:return de.UNAUTHENTICATED;case ts.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case ts.NOT_FOUND:return de.NOT_FOUND;case ts.ALREADY_EXISTS:return de.ALREADY_EXISTS;case ts.PERMISSION_DENIED:return de.PERMISSION_DENIED;case ts.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case ts.ABORTED:return de.ABORTED;case ts.OUT_OF_RANGE:return de.OUT_OF_RANGE;case ts.UNIMPLEMENTED:return de.UNIMPLEMENTED;case ts.DATA_LOSS:return de.DATA_LOSS;default:return Ve(39323,{code:t})}}(it=ts||(ts={}))[it.OK=0]="OK",it[it.CANCELLED=1]="CANCELLED",it[it.UNKNOWN=2]="UNKNOWN",it[it.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",it[it.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",it[it.NOT_FOUND=5]="NOT_FOUND",it[it.ALREADY_EXISTS=6]="ALREADY_EXISTS",it[it.PERMISSION_DENIED=7]="PERMISSION_DENIED",it[it.UNAUTHENTICATED=16]="UNAUTHENTICATED",it[it.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",it[it.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",it[it.ABORTED=10]="ABORTED",it[it.OUT_OF_RANGE=11]="OUT_OF_RANGE",it[it.UNIMPLEMENTED=12]="UNIMPLEMENTED",it[it.INTERNAL=13]="INTERNAL",it[it.UNAVAILABLE=14]="UNAVAILABLE",it[it.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c8=new ji([4294967295,4294967295],0);function I2(t){const e=NA().encode(t),s=new mA;return s.update(e),new Uint8Array(s.digest())}function k2(t){const e=new DataView(t.buffer),s=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ji([s,r],0),new ji([a,o],0)]}class Py{constructor(e,s,r){if(this.bitmap=e,this.padding=s,this.hashCount=r,s<0||s>=8)throw new hu(`Invalid padding: ${s}`);if(r<0)throw new hu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new hu(`Invalid hash count: ${r}`);if(e.length===0&&s!==0)throw new hu(`Invalid padding when bitmap length is 0: ${s}`);this.fe=8*e.length-s,this.ge=ji.fromNumber(this.fe)}pe(e,s,r){let a=e.add(s.multiply(ji.fromNumber(r)));return a.compare(c8)===1&&(a=new ji([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const s=I2(e),[r,a]=k2(s);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,a,o);if(!this.ye(c))return!1}return!0}static create(e,s,r){const a=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),c=new Py(o,a,s);return r.forEach(u=>c.insert(u)),c}insert(e){if(this.fe===0)return;const s=I2(e),[r,a]=k2(s);for(let o=0;o<this.hashCount;o++){const c=this.pe(r,a,o);this.we(c)}}we(e){const s=Math.floor(e/8),r=e%8;this.bitmap[s]|=1<<r}}class hu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,s,r,a,o){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,s,r){const a=new Map;return a.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,s,r)),new _g(Be.min(),a,new Ut(Qe),Aa(),tt())}}class Zu{constructor(e,s,r,a,o){this.resumeToken=e,this.current=s,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,s,r){return new Zu(r,s,tt(),tt(),tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,s,r,a){this.Se=e,this.removedTargetIds=s,this.key=r,this.be=a}}class tC{constructor(e,s){this.targetId=e,this.De=s}}class sC{constructor(e,s,r=Ts.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=s,this.resumeToken=r,this.cause=a}}class M2{constructor(){this.ve=0,this.Ce=P2(),this.Fe=Ts.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=tt(),s=tt(),r=tt();return this.Ce.forEach((a,o)=>{switch(o){case 0:e=e.add(a);break;case 2:s=s.add(a);break;case 1:r=r.add(a);break;default:Ve(38017,{changeType:o})}}),new Zu(this.Fe,this.Me,e,s,r)}ke(){this.xe=!1,this.Ce=P2()}qe(e,s){this.xe=!0,this.Ce=this.Ce.insert(e,s)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class d8{constructor(e){this.We=e,this.Ge=new Map,this.ze=Aa(),this.je=Om(),this.Je=Om(),this.He=new Ut(Qe)}Ye(e){for(const s of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(s,e.be):this.Xe(s,e.key,e.be);for(const s of e.removedTargetIds)this.Xe(s,e.key,e.be)}et(e){this.forEachTarget(e,s=>{const r=this.tt(s);switch(e.state){case 0:this.nt(s)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(s);break;case 3:this.nt(s)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(s)&&(this.rt(s),r.Be(e.resumeToken));break;default:Ve(56790,{state:e.state})}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.Ge.forEach((r,a)=>{this.nt(a)&&s(a)})}it(e){const s=e.targetId,r=e.De.count,a=this.st(s);if(a){const o=a.target;if(yb(o))if(r===0){const c=new De(o.path);this.Xe(s,c,Ls.newNoDocument(c,Be.min()))}else mt(r===1,20013,{expectedCount:r});else{const c=this.ot(s);if(c!==r){const u=this._t(e),m=u?this.ut(u,e,c):1;if(m!==0){this.rt(s);const f=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(s,f)}}}}}_t(e){const s=e.De.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:o=0}=s;let c,u;try{c=Ri(r).toUint8Array()}catch(m){if(m instanceof SA)return Ai("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{u=new Py(c,a,o)}catch(m){return Ai(m instanceof hu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return u.fe===0?null:u}ut(e,s,r){return s.De.count===r-this.ht(e,s.targetId)?0:2}ht(e,s){const r=this.We.getRemoteKeysForTarget(s);let a=0;return r.forEach(o=>{const c=this.We.lt(),u=`projects/${c.projectId}/databases/${c.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Xe(s,o,null),a++)}),a}Pt(e){const s=new Map;this.Ge.forEach((o,c)=>{const u=this.st(c);if(u){if(o.current&&yb(u.target)){const m=new De(u.target.path);this.Tt(m).has(c)||this.It(c,m)||this.Xe(c,m,Ls.newNoDocument(m,e))}o.Ne&&(s.set(c,o.Le()),o.ke())}});let r=tt();this.Je.forEach((o,c)=>{let u=!0;c.forEachWhile(m=>{const f=this.st(m);return!f||f.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ze.forEach((o,c)=>c.setReadTime(e));const a=new _g(e,s,this.He,this.ze,r);return this.ze=Aa(),this.je=Om(),this.Je=Om(),this.He=new Ut(Qe),a}Ze(e,s){if(!this.nt(e))return;const r=this.It(e,s.key)?2:0;this.tt(e).qe(s.key,r),this.ze=this.ze.insert(s.key,s),this.je=this.je.insert(s.key,this.Tt(s.key).add(e)),this.Je=this.Je.insert(s.key,this.dt(s.key).add(e))}Xe(e,s,r){if(!this.nt(e))return;const a=this.tt(e);this.It(e,s)?a.qe(s,1):a.Qe(s),this.Je=this.Je.insert(s,this.dt(s).delete(e)),this.Je=this.Je.insert(s,this.dt(s).add(e)),r&&(this.ze=this.ze.insert(s,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const s=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let s=this.Ge.get(e);return s||(s=new M2,this.Ge.set(e,s)),s}dt(e){let s=this.Je.get(e);return s||(s=new us(Qe),this.Je=this.Je.insert(e,s)),s}Tt(e){let s=this.je.get(e);return s||(s=new us(Qe),this.je=this.je.insert(e,s)),s}nt(e){const s=this.st(e)!==null;return s||je("WatchChangeAggregator","Detected inactive target",e),s}st(e){const s=this.Ge.get(e);return s&&s.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new M2),this.We.getRemoteKeysForTarget(e).forEach(s=>{this.Xe(e,s,null)})}It(e,s){return this.We.getRemoteKeysForTarget(e).has(s)}}function Om(){return new Ut(De.comparator)}function P2(){return new Ut(De.comparator)}const u8={asc:"ASCENDING",desc:"DESCENDING"},h8={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},m8={and:"AND",or:"OR"};class f8{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function Nb(t,e){return t.useProto3Json||yg(e)?e:{value:e}}function Of(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function nC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function g8(t,e){return Of(t,e.toTimestamp())}function Tr(t){return mt(!!t,49232),Be.fromTimestamp(function(s){const r=Ti(s);return new Dt(r.seconds,r.nanos)}(t))}function Oy(t,e){return wb(t,e).canonicalString()}function wb(t,e){const s=function(a){return new St(["projects",a.projectId,"databases",a.database])}(t).child("documents");return e===void 0?s:s.child(e)}function rC(t){const e=St.fromString(t);return mt(cC(e),10190,{key:e.toString()}),e}function jb(t,e){return Oy(t.databaseId,e.path)}function px(t,e){const s=rC(e);if(s.get(1)!==t.databaseId.projectId)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+t.databaseId.projectId);if(s.get(3)!==t.databaseId.database)throw new Ne(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+t.databaseId.database);return new De(iC(s))}function aC(t,e){return Oy(t.databaseId,e)}function p8(t){const e=rC(t);return e.length===4?St.emptyPath():iC(e)}function Eb(t){return new St(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function iC(t){return mt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function O2(t,e,s){return{name:jb(t,e),fields:s.value.mapValue.fields}}function x8(t,e){let s;if("targetChange"in e){e.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:Ve(39313,{state:f})}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],o=function(f,x){return f.useProto3Json?(mt(x===void 0||typeof x=="string",58123),Ts.fromBase64String(x||"")):(mt(x===void 0||x instanceof Buffer||x instanceof Uint8Array,16193),Ts.fromUint8Array(x||new Uint8Array))}(t,e.targetChange.resumeToken),c=e.targetChange.cause,u=c&&function(f){const x=f.code===void 0?de.UNKNOWN:eC(f.code);return new Ne(x,f.message||"")}(c);s=new sC(r,a,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=px(t,r.document.name),o=Tr(r.document.updateTime),c=r.document.createTime?Tr(r.document.createTime):Be.min(),u=new sn({mapValue:{fields:r.document.fields}}),m=Ls.newFoundDocument(a,o,c,u),f=r.targetIds||[],x=r.removedTargetIds||[];s=new df(f,x,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=px(t,r.document),o=r.readTime?Tr(r.readTime):Be.min(),c=Ls.newNoDocument(a,o),u=r.removedTargetIds||[];s=new df([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=px(t,r.document),o=r.removedTargetIds||[];s=new df([],o,a,null)}else{if(!("filter"in e))return Ve(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:o}=r,c=new l8(a,o),u=r.targetId;s=new tC(u,c)}}return s}function b8(t,e){let s;if(e instanceof Xu)s={update:O2(t,e.key,e.value)};else if(e instanceof ky)s={delete:jb(t,e.key)};else if(e instanceof Hi)s={update:O2(t,e.key,e.data),updateMask:A8(e.fieldMask)};else{if(!(e instanceof r8))return Ve(16599,{Rt:e.type});s={verify:jb(t,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(r=>function(o,c){const u=c.transform;if(u instanceof Pu)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof _c)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ou)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Pf)return{fieldPath:c.field.canonicalString(),increment:u.Ee};throw Ve(20930,{transform:c.transform})}(0,r))),e.precondition.isNone||(s.currentDocument=function(a,o){return o.updateTime!==void 0?{updateTime:g8(a,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ve(27497)}(t,e.precondition)),s}function y8(t,e){return t&&t.length>0?(mt(e!==void 0,14353),t.map(s=>function(a,o){let c=a.updateTime?Tr(a.updateTime):Tr(o);return c.isEqual(Be.min())&&(c=Tr(o)),new t8(c,a.transformResults||[])}(s,e))):[]}function v8(t,e){return{documents:[aC(t,e.path)]}}function N8(t,e){const s={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),s.structuredQuery.from=[{collectionId:r.lastSegment()}]),s.parent=aC(t,a);const o=function(f){if(f.length!==0)return oC(rr.create(f,"and"))}(e.filters);o&&(s.structuredQuery.where=o);const c=function(f){if(f.length!==0)return f.map(x=>function(y){return{field:lc(y.field),direction:E8(y.dir)}}(x))}(e.orderBy);c&&(s.structuredQuery.orderBy=c);const u=Nb(t,e.limit);return u!==null&&(s.structuredQuery.limit=u),e.startAt&&(s.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(e.endAt)),{Vt:s,parent:a}}function w8(t){let e=p8(t.parent);const s=t.structuredQuery,r=s.from?s.from.length:0;let a=null;if(r>0){mt(r===1,65062);const x=s.from[0];x.allDescendants?a=x.collectionId:e=e.child(x.collectionId)}let o=[];s.where&&(o=function(v){const y=lC(v);return y instanceof rr&&OA(y)?y.getFilters():[y]}(s.where));let c=[];s.orderBy&&(c=function(v){return v.map(y=>function(w){return new Mu(oc(w.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(y))}(s.orderBy));let u=null;s.limit&&(u=function(v){let y;return y=typeof v=="object"?v.value:v,yg(y)?null:y}(s.limit));let m=null;s.startAt&&(m=function(v){const y=!!v.before,N=v.values||[];return new kf(N,y)}(s.startAt));let f=null;return s.endAt&&(f=function(v){const y=!v.before,N=v.values||[];return new kf(N,y)}(s.endAt)),HO(e,a,c,o,u,"F",m,f)}function j8(t,e){const s=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ve(28987,{purpose:a})}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function lC(t){return t.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const r=oc(s.unaryFilter.field);return ss.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=oc(s.unaryFilter.field);return ss.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=oc(s.unaryFilter.field);return ss.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=oc(s.unaryFilter.field);return ss.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ve(61313);default:return Ve(60726)}}(t):t.fieldFilter!==void 0?function(s){return ss.create(oc(s.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ve(58110);default:return Ve(50506)}}(s.fieldFilter.op),s.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(s){return rr.create(s.compositeFilter.filters.map(r=>lC(r)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ve(1026)}}(s.compositeFilter.op))}(t):Ve(30097,{filter:t})}function E8(t){return u8[t]}function _8(t){return h8[t]}function S8(t){return m8[t]}function lc(t){return{fieldPath:t.canonicalString()}}function oc(t){return Cs.fromServerFormat(t.fieldPath)}function oC(t){return t instanceof ss?function(s){if(s.op==="=="){if(j2(s.value))return{unaryFilter:{field:lc(s.field),op:"IS_NAN"}};if(w2(s.value))return{unaryFilter:{field:lc(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(j2(s.value))return{unaryFilter:{field:lc(s.field),op:"IS_NOT_NAN"}};if(w2(s.value))return{unaryFilter:{field:lc(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:lc(s.field),op:_8(s.op),value:s.value}}}(t):t instanceof rr?function(s){const r=s.getFilters().map(a=>oC(a));return r.length===1?r[0]:{compositeFilter:{op:S8(s.op),filters:r}}}(t):Ve(54877,{filter:t})}function A8(t){const e=[];return t.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function cC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,s,r,a,o=Be.min(),c=Be.min(),u=Ts.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=s,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=u,this.expectedCount=m}withSequenceNumber(e){return new gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C8{constructor(e){this.gt=e}}function T8(t){const e=w8({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Mf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R8{constructor(){this.Dn=new D8}addToCollectionParentIndex(e,s){return this.Dn.add(s),me.resolve()}getCollectionParents(e,s){return me.resolve(this.Dn.getEntries(s))}addFieldIndex(e,s){return me.resolve()}deleteFieldIndex(e,s){return me.resolve()}deleteAllFieldIndexes(e){return me.resolve()}createTargetIndexes(e,s){return me.resolve()}getDocumentsMatchingTarget(e,s){return me.resolve(null)}getIndexType(e,s){return me.resolve(0)}getFieldIndexes(e,s){return me.resolve([])}getNextCollectionGroupToUpdate(e){return me.resolve(null)}getMinOffset(e,s){return me.resolve(Ci.min())}getMinOffsetFromCollectionGroup(e,s){return me.resolve(Ci.min())}updateCollectionGroup(e,s,r){return me.resolve()}updateIndexEntries(e,s){return me.resolve()}}class D8{constructor(){this.index={}}add(e){const s=e.lastSegment(),r=e.popLast(),a=this.index[s]||new us(St.comparator),o=!a.has(r);return this.index[s]=a.add(r),o}has(e){const s=e.lastSegment(),r=e.popLast(),a=this.index[s];return a&&a.has(r)}getEntries(e){return(this.index[e]||new us(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},dC=41943040;class Js{static withCacheSize(e){return new Js(e,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js.DEFAULT_COLLECTION_PERCENTILE=10,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Js.DEFAULT=new Js(dC,Js.DEFAULT_COLLECTION_PERCENTILE,Js.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Js.DISABLED=new Js(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new Sc(0)}static ur(){return new Sc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="LruGarbageCollector",I8=1048576;function U2([t,e],[s,r]){const a=Qe(t,s);return a===0?Qe(e,r):a}class k8{constructor(e){this.Tr=e,this.buffer=new us(U2),this.Ir=0}dr(){return++this.Ir}Er(e){const s=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(s);else{const r=this.buffer.last();U2(s,r)<0&&(this.buffer=this.buffer.delete(r).add(s))}}get maxValue(){return this.buffer.last()[0]}}class M8{constructor(e,s,r){this.garbageCollector=e,this.asyncQueue=s,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){je(V2,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){Fc(s)?je(V2,"Ignoring IndexedDB error during garbage collection: ",s):await Uc(s)}await this.Rr(3e5)})}}class P8{constructor(e,s){this.Vr=e,this.params=s}calculateTargetCount(e,s){return this.Vr.mr(e).next(r=>Math.floor(s/100*r))}nthSequenceNumber(e,s){if(s===0)return me.resolve(bg.ue);const r=new k8(s);return this.Vr.forEachTarget(e,a=>r.Er(a.sequenceNumber)).next(()=>this.Vr.gr(e,a=>r.Er(a))).next(()=>r.maxValue)}removeTargets(e,s,r){return this.Vr.removeTargets(e,s,r)}removeOrphanedDocuments(e,s){return this.Vr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(je("LruGarbageCollector","Garbage collection skipped; disabled"),me.resolve(L2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),L2):this.pr(e,s))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,s){let r,a,o,c,u,m,f;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(e,a))).next(v=>(r=v,u=Date.now(),this.removeTargets(e,r,s))).next(v=>(o=v,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(f=Date.now(),ac()<=et.DEBUG&&je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-x}ms
	Determined least recently used ${a} in `+(u-c)+`ms
	Removed ${o} targets in `+(m-u)+`ms
	Removed ${v} documents in `+(f-m)+`ms
Total Duration: ${f-x}ms`),me.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:o,documentsRemoved:v})))}}function O8(t,e){return new P8(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(){this.changes=new ro(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,Ls.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const r=this.changes.get(s);return r!==void 0?me.resolve(r):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U8{constructor(e,s,r,a){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,s){let r=null;return this.documentOverlayCache.getOverlay(e,s).next(a=>(r=a,this.remoteDocumentCache.getEntry(e,s))).next(a=>(r!==null&&vu(r.mutation,a,xn.empty(),Dt.now()),a))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.getLocalViewOfDocuments(e,r,tt()).next(()=>r))}getLocalViewOfDocuments(e,s,r=tt()){const a=Ml();return this.populateOverlays(e,a,s).next(()=>this.computeViews(e,s,a,r).next(o=>{let c=uu();return o.forEach((u,m)=>{c=c.insert(u,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,s){const r=Ml();return this.populateOverlays(e,r,s).next(()=>this.computeViews(e,s,r,tt()))}populateOverlays(e,s,r){const a=[];return r.forEach(o=>{s.has(o)||a.push(o)}),this.documentOverlayCache.getOverlays(e,a).next(o=>{o.forEach((c,u)=>{s.set(c,u)})})}computeViews(e,s,r,a){let o=Aa();const c=yu(),u=function(){return yu()}();return s.forEach((m,f)=>{const x=r.get(f.key);a.has(f.key)&&(x===void 0||x.mutation instanceof Hi)?o=o.insert(f.key,f):x!==void 0?(c.set(f.key,x.mutation.getFieldMask()),vu(x.mutation,f,x.mutation.getFieldMask(),Dt.now())):c.set(f.key,xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(m=>(m.forEach((f,x)=>c.set(f,x)),s.forEach((f,x)=>{var v;return u.set(f,new V8(x,(v=c.get(f))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,s){const r=yu();let a=new Ut((c,u)=>c-u),o=tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(c=>{for(const u of c)u.keys().forEach(m=>{const f=s.get(m);if(f===null)return;let x=r.get(m)||xn.empty();x=u.applyToLocalView(f,x),r.set(m,x);const v=(a.get(u.batchId)||tt()).add(m);a=a.insert(u.batchId,v)})}).next(()=>{const c=[],u=a.getReverseIterator();for(;u.hasNext();){const m=u.getNext(),f=m.key,x=m.value,v=$A();x.forEach(y=>{if(!o.has(y)){const N=ZA(s.get(y),r.get(y));N!==null&&v.set(y,N),o=o.add(y)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,v))}return me.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,s,r,a){return function(c){return De.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):FA(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,r,a):this.getDocumentsMatchingCollectionQuery(e,s,r,a)}getNextDocuments(e,s,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,r,a).next(o=>{const c=a-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,r.largestBatchId,a-o.size):me.resolve(Ml());let u=Ru,m=o;return c.next(f=>me.forEach(f,(x,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(x)?me.resolve():this.remoteDocumentCache.getEntry(e,x).next(y=>{m=m.insert(x,y)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,m,f,tt())).next(x=>({batchId:u,changes:qA(x)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new De(s)).next(r=>{let a=uu();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a})}getDocumentsMatchingCollectionGroupQuery(e,s,r,a){const o=s.collectionGroup;let c=uu();return this.indexManager.getCollectionParents(e,o).next(u=>me.forEach(u,m=>{const f=function(v,y){return new Bc(y,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(s,m.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,a).next(x=>{x.forEach((v,y)=>{c=c.insert(v,y)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,s,r,a){let o;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,r,o,a))).next(c=>{o.forEach((m,f)=>{const x=f.getKey();c.get(x)===null&&(c=c.insert(x,Ls.newInvalidDocument(x)))});let u=uu();return c.forEach((m,f)=>{const x=o.get(m);x!==void 0&&vu(x.mutation,f,xn.empty(),Dt.now()),wg(s,f)&&(u=u.insert(m,f))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F8{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,s){return me.resolve(this.Br.get(s))}saveBundleMetadata(e,s){return this.Br.set(s.id,function(a){return{id:a.id,version:a.version,createTime:Tr(a.createTime)}}(s)),me.resolve()}getNamedQuery(e,s){return me.resolve(this.Lr.get(s))}saveNamedQuery(e,s){return this.Lr.set(s.name,function(a){return{name:a.name,query:T8(a.bundledQuery),readTime:Tr(a.readTime)}}(s)),me.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(){this.overlays=new Ut(De.comparator),this.kr=new Map}getOverlay(e,s){return me.resolve(this.overlays.get(s))}getOverlays(e,s){const r=Ml();return me.forEach(s,a=>this.getOverlay(e,a).next(o=>{o!==null&&r.set(a,o)})).next(()=>r)}saveOverlays(e,s,r){return r.forEach((a,o)=>{this.wt(e,s,o)}),me.resolve()}removeOverlaysForBatchId(e,s,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),me.resolve()}getOverlaysForCollection(e,s,r){const a=Ml(),o=s.length+1,c=new De(s.child("")),u=this.overlays.getIteratorFrom(c);for(;u.hasNext();){const m=u.getNext().value,f=m.getKey();if(!s.isPrefixOf(f.path))break;f.path.length===o&&m.largestBatchId>r&&a.set(m.getKey(),m)}return me.resolve(a)}getOverlaysForCollectionGroup(e,s,r,a){let o=new Ut((f,x)=>f-x);const c=this.overlays.getIterator();for(;c.hasNext();){const f=c.getNext().value;if(f.getKey().getCollectionGroup()===s&&f.largestBatchId>r){let x=o.get(f.largestBatchId);x===null&&(x=Ml(),o=o.insert(f.largestBatchId,x)),x.set(f.getKey(),f)}}const u=Ml(),m=o.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((f,x)=>u.set(f,x)),!(u.size()>=a)););return me.resolve(u)}wt(e,s,r){const a=this.overlays.get(r.key);if(a!==null){const c=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new i8(s,r));let o=this.kr.get(s);o===void 0&&(o=tt(),this.kr.set(s,o)),this.kr.set(s,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H8{constructor(){this.sessionToken=Ts.EMPTY_BYTE_STRING}getSessionToken(e){return me.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,me.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(){this.qr=new us(vs.Qr),this.$r=new us(vs.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,s){const r=new vs(e,s);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,s){e.forEach(r=>this.addReference(r,s))}removeReference(e,s){this.Wr(new vs(e,s))}Gr(e,s){e.forEach(r=>this.removeReference(r,s))}zr(e){const s=new De(new St([])),r=new vs(s,e),a=new vs(s,e+1),o=[];return this.$r.forEachInRange([r,a],c=>{this.Wr(c),o.push(c.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const s=new De(new St([])),r=new vs(s,e),a=new vs(s,e+1);let o=tt();return this.$r.forEachInRange([r,a],c=>{o=o.add(c.key)}),o}containsKey(e){const s=new vs(e,0),r=this.qr.firstAfterOrEqual(s);return r!==null&&e.isEqual(r.key)}}class vs{constructor(e,s){this.key=e,this.Hr=s}static Qr(e,s){return De.comparator(e.key,s.key)||Qe(e.Hr,s.Hr)}static Ur(e,s){return Qe(e.Hr,s.Hr)||De.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z8{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.er=1,this.Yr=new us(vs.Qr)}checkEmpty(e){return me.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,r,a){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new a8(o,s,r,a);this.mutationQueue.push(c);for(const u of a)this.Yr=this.Yr.add(new vs(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return me.resolve(c)}lookupMutationBatch(e,s){return me.resolve(this.Zr(s))}getNextMutationBatchAfterBatchId(e,s){const r=s+1,a=this.Xr(r),o=a<0?0:a;return me.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return me.resolve(this.mutationQueue.length===0?Sy:this.er-1)}getAllMutationBatches(e){return me.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const r=new vs(s,0),a=new vs(s,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,a],c=>{const u=this.Zr(c.Hr);o.push(u)}),me.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,s){let r=new us(Qe);return s.forEach(a=>{const o=new vs(a,0),c=new vs(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,c],u=>{r=r.add(u.Hr)})}),me.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,s){const r=s.path,a=r.length+1;let o=r;De.isDocumentKey(o)||(o=o.child(""));const c=new vs(new De(o),0);let u=new us(Qe);return this.Yr.forEachWhile(m=>{const f=m.key.path;return!!r.isPrefixOf(f)&&(f.length===a&&(u=u.add(m.Hr)),!0)},c),me.resolve(this.ei(u))}ei(e){const s=[];return e.forEach(r=>{const a=this.Zr(r);a!==null&&s.push(a)}),s}removeMutationBatch(e,s){mt(this.ti(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return me.forEach(s.mutations,a=>{const o=new vs(a.key,s.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,s){const r=new vs(s,0),a=this.Yr.firstAfterOrEqual(r);return me.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,me.resolve()}ti(e,s){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const s=this.Xr(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q8{constructor(e){this.ni=e,this.docs=function(){return new Ut(De.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const r=s.key,a=this.docs.get(r),o=a?a.size:0,c=this.ni(s);return this.docs=this.docs.insert(r,{document:s.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const r=this.docs.get(s);return me.resolve(r?r.document.mutableCopy():Ls.newInvalidDocument(s))}getEntries(e,s){let r=Aa();return s.forEach(a=>{const o=this.docs.get(a);r=r.insert(a,o?o.document.mutableCopy():Ls.newInvalidDocument(a))}),me.resolve(r)}getDocumentsMatchingQuery(e,s,r,a){let o=Aa();const c=s.path,u=new De(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(u);for(;m.hasNext();){const{key:f,value:{document:x}}=m.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||vO(yO(x),r)<=0||(a.has(x.key)||wg(s,x))&&(o=o.insert(x.key,x.mutableCopy()))}return me.resolve(o)}getAllFromCollectionGroup(e,s,r,a){Ve(9500)}ri(e,s){return me.forEach(this.docs,r=>s(r))}newChangeBuffer(e){return new $8(this)}getSize(e){return me.resolve(this.size)}}class $8 extends L8{constructor(e){super(),this.Or=e}applyChanges(e){const s=[];return this.changes.forEach((r,a)=>{a.isValidDocument()?s.push(this.Or.addEntry(e,a)):this.Or.removeEntry(r)}),me.waitFor(s)}getFromCache(e,s){return this.Or.getEntry(e,s)}getAllFromCache(e,s){return this.Or.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G8{constructor(e){this.persistence=e,this.ii=new ro(s=>Ty(s),Ry),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.si=0,this.oi=new Ly,this.targetCount=0,this._i=Sc.ar()}forEachTarget(e,s){return this.ii.forEach((r,a)=>s(a)),me.resolve()}getLastRemoteSnapshotVersion(e){return me.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return me.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),me.resolve(this.highestTargetId)}setTargetsMetadata(e,s,r){return r&&(this.lastRemoteSnapshotVersion=r),s>this.si&&(this.si=s),me.resolve()}hr(e){this.ii.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this._i=new Sc(s),this.highestTargetId=s),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,s){return this.hr(s),this.targetCount+=1,me.resolve()}updateTargetData(e,s){return this.hr(s),me.resolve()}removeTargetData(e,s){return this.ii.delete(s.target),this.oi.zr(s.targetId),this.targetCount-=1,me.resolve()}removeTargets(e,s,r){let a=0;const o=[];return this.ii.forEach((c,u)=>{u.sequenceNumber<=s&&r.get(u.targetId)===null&&(this.ii.delete(c),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),a++)}),me.waitFor(o).next(()=>a)}getTargetCount(e){return me.resolve(this.targetCount)}getTargetData(e,s){const r=this.ii.get(s)||null;return me.resolve(r)}addMatchingKeys(e,s,r){return this.oi.Kr(s,r),me.resolve()}removeMatchingKeys(e,s,r){this.oi.Gr(s,r);const a=this.persistence.referenceDelegate,o=[];return a&&s.forEach(c=>{o.push(a.markPotentiallyOrphaned(e,c))}),me.waitFor(o)}removeMatchingKeysForTargetId(e,s){return this.oi.zr(s),me.resolve()}getMatchingKeysForTargetId(e,s){const r=this.oi.Jr(s);return me.resolve(r)}containsKey(e,s){return me.resolve(this.oi.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(e,s){this.ai={},this.overlays={},this.ui=new bg(0),this.ci=!1,this.ci=!0,this.li=new H8,this.referenceDelegate=e(this),this.hi=new G8(this),this.indexManager=new R8,this.remoteDocumentCache=function(a){return new q8(a)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new C8(s),this.Ti=new F8(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new B8,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let r=this.ai[e.toKey()];return r||(r=new z8(s,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,s,r){je("MemoryPersistence","Starting transaction:",e);const a=new W8(this.ui.next());return this.referenceDelegate.Ii(),r(a).next(o=>this.referenceDelegate.di(a).next(()=>o)).toPromise().then(o=>(a.raiseOnCommittedEvent(),o))}Ei(e,s){return me.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,s)))}}class W8 extends wO{constructor(e){super(),this.currentSequenceNumber=e}}class Vy{constructor(e){this.persistence=e,this.Ai=new Ly,this.Ri=null}static Vi(e){return new Vy(e)}get mi(){if(this.Ri)return this.Ri;throw Ve(60996)}addReference(e,s,r){return this.Ai.addReference(r,s),this.mi.delete(r.toString()),me.resolve()}removeReference(e,s,r){return this.Ai.removeReference(r,s),this.mi.add(r.toString()),me.resolve()}markPotentiallyOrphaned(e,s){return this.mi.add(s.toString()),me.resolve()}removeTarget(e,s){this.Ai.zr(s.targetId).forEach(a=>this.mi.add(a.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,s.targetId).next(a=>{a.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,s))}Ii(){this.Ri=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return me.forEach(this.mi,r=>{const a=De.fromPath(r);return this.fi(e,a).next(o=>{o||s.removeEntry(a,Be.min())})}).next(()=>(this.Ri=null,s.apply(e)))}updateLimboDocument(e,s){return this.fi(e,s).next(r=>{r?this.mi.delete(s.toString()):this.mi.add(s.toString())})}Pi(e){return 0}fi(e,s){return me.or([()=>me.resolve(this.Ai.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ei(e,s)])}}class Lf{constructor(e,s){this.persistence=e,this.gi=new ro(r=>_O(r.path),(r,a)=>r.isEqual(a)),this.garbageCollector=O8(this,s)}static Vi(e,s){return new Lf(e,s)}Ii(){}di(e){return me.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}mr(e){const s=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>s.next(a=>r+a))}yr(e){let s=0;return this.gr(e,r=>{s++}).next(()=>s)}gr(e,s){return me.forEach(this.gi,(r,a)=>this.Sr(e,r,a).next(o=>o?me.resolve():s(a)))}removeTargets(e,s,r){return this.persistence.getTargetCache().removeTargets(e,s,r)}removeOrphanedDocuments(e,s){let r=0;const a=this.persistence.getRemoteDocumentCache(),o=a.newChangeBuffer();return a.ri(e,c=>this.Sr(e,c,s).next(u=>{u||(r++,o.removeEntry(c,Be.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,s){return this.gi.set(s,e.currentSequenceNumber),me.resolve()}removeTarget(e,s){const r=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,s,r){return this.gi.set(r,e.currentSequenceNumber),me.resolve()}removeReference(e,s,r){return this.gi.set(r,e.currentSequenceNumber),me.resolve()}updateLimboDocument(e,s){return this.gi.set(s,e.currentSequenceNumber),me.resolve()}Pi(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=lf(e.data.value)),s}Sr(e,s,r){return me.or([()=>this.persistence.Ei(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const a=this.gi.get(s);return me.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,s,r,a){this.targetId=e,this.fromCache=s,this.Is=r,this.ds=a}static Es(e,s){let r=tt(),a=tt();for(const o of s.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:a=a.add(o.doc.key)}return new Uy(e,s.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y8{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return _3()?8:jO(Bs())>0?6:4}()}initialize(e,s){this.gs=e,this.indexManager=s,this.As=!0}getDocumentsMatchingQuery(e,s,r,a){const o={result:null};return this.ps(e,s).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.ys(e,s,a,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;const c=new Q8;return this.ws(e,s,c).next(u=>{if(o.result=u,this.Rs)return this.Ss(e,s,c,u.size)})}).next(()=>o.result)}Ss(e,s,r,a){return r.documentReadCount<this.Vs?(ac()<=et.DEBUG&&je("QueryEngine","SDK will not create cache indexes for query:",ic(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),me.resolve()):(ac()<=et.DEBUG&&je("QueryEngine","Query:",ic(s),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(ac()<=et.DEBUG&&je("QueryEngine","The SDK decides to create cache indexes for query:",ic(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Cr(s))):me.resolve())}ps(e,s){if(A2(s))return me.resolve(null);let r=Cr(s);return this.indexManager.getIndexType(e,r).next(a=>a===0?null:(s.limit!==null&&a===1&&(s=Mf(s,null,"F"),r=Cr(s)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const c=tt(...o);return this.gs.getDocuments(e,c).next(u=>this.indexManager.getMinOffset(e,r).next(m=>{const f=this.bs(s,u);return this.Ds(s,f,c,m.readTime)?this.ps(e,Mf(s,null,"F")):this.vs(e,f,s,m)}))})))}ys(e,s,r,a){return A2(s)||a.isEqual(Be.min())?me.resolve(null):this.gs.getDocuments(e,r).next(o=>{const c=this.bs(s,o);return this.Ds(s,c,r,a)?me.resolve(null):(ac()<=et.DEBUG&&je("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),ic(s)),this.vs(e,c,s,bO(a,Ru)).next(u=>u))})}bs(e,s){let r=new us(HA(e));return s.forEach((a,o)=>{wg(e,o)&&(r=r.add(o))}),r}Ds(e,s,r,a){if(e.limit===null)return!1;if(r.size!==s.size)return!0;const o=e.limitType==="F"?s.last():s.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(a)>0)}ws(e,s,r){return ac()<=et.DEBUG&&je("QueryEngine","Using full collection scan to execute query:",ic(s)),this.gs.getDocumentsMatchingQuery(e,s,Ci.min(),r)}vs(e,s,r,a){return this.gs.getDocumentsMatchingQuery(e,r,a).next(o=>(s.forEach(c=>{o=o.insert(c.key,c)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fy="LocalStore",K8=3e8;class X8{constructor(e,s,r,a){this.persistence=e,this.Cs=s,this.serializer=a,this.Fs=new Ut(Qe),this.Ms=new ro(o=>Ty(o),Ry),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U8(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.Fs))}}function Z8(t,e,s,r){return new X8(t,e,s,r)}async function hC(t,e){const s=ze(t);return await s.persistence.runTransaction("Handle user change","readonly",r=>{let a;return s.mutationQueue.getAllMutationBatches(r).next(o=>(a=o,s.Ns(e),s.mutationQueue.getAllMutationBatches(r))).next(o=>{const c=[],u=[];let m=tt();for(const f of a){c.push(f.batchId);for(const x of f.mutations)m=m.add(x.key)}for(const f of o){u.push(f.batchId);for(const x of f.mutations)m=m.add(x.key)}return s.localDocuments.getDocuments(r,m).next(f=>({Bs:f,removedBatchIds:c,addedBatchIds:u}))})})}function J8(t,e){const s=ze(t);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const a=e.batch.keys(),o=s.Os.newChangeBuffer({trackRemovals:!0});return function(u,m,f,x){const v=f.batch,y=v.keys();let N=me.resolve();return y.forEach(w=>{N=N.next(()=>x.getEntry(m,w)).next(E=>{const _=f.docVersions.get(w);mt(_!==null,48541),E.version.compareTo(_)<0&&(v.applyToRemoteDocument(E,f),E.isValidDocument()&&(E.setReadTime(f.commitVersion),x.addEntry(E)))})}),N.next(()=>u.mutationQueue.removeMutationBatch(m,v))}(s,r,e,o).next(()=>o.apply(r)).next(()=>s.mutationQueue.performConsistencyCheck(r)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let m=tt();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(m=m.add(u.batch.mutations[f].key));return m}(e))).next(()=>s.localDocuments.getDocuments(r,a))})}function mC(t){const e=ze(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.hi.getLastRemoteSnapshotVersion(s))}function eL(t,e){const s=ze(t),r=e.snapshotVersion;let a=s.Fs;return s.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const c=s.Os.newChangeBuffer({trackRemovals:!0});a=s.Fs;const u=[];e.targetChanges.forEach((x,v)=>{const y=a.get(v);if(!y)return;u.push(s.hi.removeMatchingKeys(o,x.removedDocuments,v).next(()=>s.hi.addMatchingKeys(o,x.addedDocuments,v)));let N=y.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?N=N.withResumeToken(Ts.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):x.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(x.resumeToken,r)),a=a.insert(v,N),function(E,_,R){return E.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=K8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(y,N,x)&&u.push(s.hi.updateTargetData(o,N))});let m=Aa(),f=tt();if(e.documentUpdates.forEach(x=>{e.resolvedLimboDocuments.has(x)&&u.push(s.persistence.referenceDelegate.updateLimboDocument(o,x))}),u.push(tL(o,c,e.documentUpdates).next(x=>{m=x.Ls,f=x.ks})),!r.isEqual(Be.min())){const x=s.hi.getLastRemoteSnapshotVersion(o).next(v=>s.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(x)}return me.waitFor(u).next(()=>c.apply(o)).next(()=>s.localDocuments.getLocalViewOfDocuments(o,m,f)).next(()=>m)}).then(o=>(s.Fs=a,o))}function tL(t,e,s){let r=tt(),a=tt();return s.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let c=Aa();return s.forEach((u,m)=>{const f=o.get(u);m.isFoundDocument()!==f.isFoundDocument()&&(a=a.add(u)),m.isNoDocument()&&m.version.isEqual(Be.min())?(e.removeEntry(u,m.readTime),c=c.insert(u,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||m.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(m),c=c.insert(u,m)):je(Fy,"Ignoring outdated watch update for ",u,". Current version:",f.version," Watch version:",m.version)}),{Ls:c,ks:a}})}function sL(t,e){const s=ze(t);return s.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Sy),s.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nL(t,e){const s=ze(t);return s.persistence.runTransaction("Allocate target","readwrite",r=>{let a;return s.hi.getTargetData(r,e).next(o=>o?(a=o,me.resolve(a)):s.hi.allocateTargetId(r).next(c=>(a=new gi(e,c,"TargetPurposeListen",r.currentSequenceNumber),s.hi.addTargetData(r,a).next(()=>a))))}).then(r=>{const a=s.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.Fs=s.Fs.insert(r.targetId,r),s.Ms.set(e,r.targetId)),r})}async function _b(t,e,s){const r=ze(t),a=r.Fs.get(e),o=s?"readwrite":"readwrite-primary";try{s||await r.persistence.runTransaction("Release target",o,c=>r.persistence.referenceDelegate.removeTarget(c,a))}catch(c){if(!Fc(c))throw c;je(Fy,`Failed to update sequence numbers for target ${e}: ${c}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(a.target)}function F2(t,e,s){const r=ze(t);let a=Be.min(),o=tt();return r.persistence.runTransaction("Execute query","readwrite",c=>function(m,f,x){const v=ze(m),y=v.Ms.get(x);return y!==void 0?me.resolve(v.Fs.get(y)):v.hi.getTargetData(f,x)}(r,c,Cr(e)).next(u=>{if(u)return a=u.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(c,u.targetId).next(m=>{o=m})}).next(()=>r.Cs.getDocumentsMatchingQuery(c,e,s?a:Be.min(),s?o:tt())).next(u=>(rL(r,qO(e),u),{documents:u,qs:o})))}function rL(t,e,s){let r=t.xs.get(e)||Be.min();s.forEach((a,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}class B2{constructor(){this.activeTargetIds=KO()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aL{constructor(){this.Fo=new B2,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,r){}addLocalQueryTarget(e,s=!0){return s&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,s,r){this.Mo[e]=s}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new B2,Promise.resolve()}handleUserChange(e,s,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2="ConnectivityMonitor";class z2{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){je(H2,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){je(H2,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lm=null;function Sb(){return Lm===null?Lm=function(){return 268435456+Math.round(2147483648*Math.random())}():Lm++,"0x"+Lm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="RestConnection",lL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oL{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=s+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===Df?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,s,r,a,o){const c=Sb(),u=this.Go(e,s.toUriEncodedString());je(xx,`Sending RPC '${e}' ${c}:`,u,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,o);const{host:f}=new URL(u),x=Li(f);return this.jo(e,u,m,r,x).then(v=>(je(xx,`Received RPC '${e}' ${c}: `,v),v),v=>{throw Ai(xx,`RPC '${e}' ${c} failed with error: `,v,"url: ",u,"request:",r),v})}Jo(e,s,r,a,o,c){return this.Wo(e,s,r,a,o)}zo(e,s,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Vc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((a,o)=>e[o]=a),r&&r.headers.forEach((a,o)=>e[o]=a)}Go(e,s){const r=lL[e];return`${this.$o}/v1/${s}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms="WebChannelConnection";class dL extends oL{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,s,r,a,o){const c=Sb();return new Promise((u,m)=>{const f=new fA;f.setWithCredentials(!0),f.listenOnce(gA.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case af.NO_ERROR:const v=f.getResponseJson();je(Ms,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(v)),u(v);break;case af.TIMEOUT:je(Ms,`RPC '${e}' ${c} timed out`),m(new Ne(de.DEADLINE_EXCEEDED,"Request time out"));break;case af.HTTP_ERROR:const y=f.getStatus();if(je(Ms,`RPC '${e}' ${c} failed with status:`,y,"response text:",f.getResponseText()),y>0){let N=f.getResponseJson();Array.isArray(N)&&(N=N[0]);const w=N==null?void 0:N.error;if(w&&w.status&&w.message){const E=function(R){const I=R.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(I)>=0?I:de.UNKNOWN}(w.status);m(new Ne(E,w.message))}else m(new Ne(de.UNKNOWN,"Server responded with status "+f.getStatus()))}else m(new Ne(de.UNAVAILABLE,"Connection failed."));break;default:Ve(9055,{c_:e,streamId:c,l_:f.getLastErrorCode(),h_:f.getLastError()})}}finally{je(Ms,`RPC '${e}' ${c} completed.`)}});const x=JSON.stringify(a);je(Ms,`RPC '${e}' ${c} sending request:`,a),f.send(s,"POST",x,r,15)})}P_(e,s,r){const a=Sb(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=bA(),u=xA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,s,r),m.encodeInitMessageHeaders=!0;const x=o.join("");je(Ms,`Creating RPC '${e}' stream ${a}: ${x}`,m);const v=c.createWebChannel(x,m);this.T_(v);let y=!1,N=!1;const w=new cL({Ho:_=>{N?je(Ms,`Not sending because RPC '${e}' stream ${a} is closed:`,_):(y||(je(Ms,`Opening RPC '${e}' stream ${a} transport.`),v.open(),y=!0),je(Ms,`RPC '${e}' stream ${a} sending:`,_),v.send(_))},Yo:()=>v.close()}),E=(_,R,I)=>{_.listen(R,V=>{try{I(V)}catch(z){setTimeout(()=>{throw z},0)}})};return E(v,du.EventType.OPEN,()=>{N||(je(Ms,`RPC '${e}' stream ${a} transport opened.`),w.s_())}),E(v,du.EventType.CLOSE,()=>{N||(N=!0,je(Ms,`RPC '${e}' stream ${a} transport closed`),w.__(),this.I_(v))}),E(v,du.EventType.ERROR,_=>{N||(N=!0,Ai(Ms,`RPC '${e}' stream ${a} transport errored. Name:`,_.name,"Message:",_.message),w.__(new Ne(de.UNAVAILABLE,"The operation could not be completed")))}),E(v,du.EventType.MESSAGE,_=>{var R;if(!N){const I=_.data[0];mt(!!I,16349);const V=I,z=(V==null?void 0:V.error)||((R=V[0])===null||R===void 0?void 0:R.error);if(z){je(Ms,`RPC '${e}' stream ${a} received error:`,z);const F=z.status;let P=function(k){const O=ts[k];if(O!==void 0)return eC(O)}(F),C=z.message;P===void 0&&(P=de.INTERNAL,C="Unknown error status: "+F+" with message "+z.message),N=!0,w.__(new Ne(P,C)),v.close()}else je(Ms,`RPC '${e}' stream ${a} received:`,I),w.a_(I)}}),E(u,pA.STAT_EVENT,_=>{_.stat===fb.PROXY?je(Ms,`RPC '${e}' stream ${a} detected buffering proxy`):_.stat===fb.NOPROXY&&je(Ms,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{w.o_()},0),w}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(s=>s===e)}}function bx(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){return new f8(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,s,r=1e3,a=1.5,o=6e4){this.Fi=e,this.timerId=s,this.d_=r,this.E_=a,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const s=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,s-r);a>0&&je("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${s} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2="PersistentStream";class gC{constructor(e,s,r,a,o,c,u,m){this.Fi=e,this.w_=r,this.S_=a,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=u,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new fC(e,s)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():s&&s.code===de.RESOURCE_EXHAUSTED?(Sa(s.toString()),Sa("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):s&&s.code===de.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(s)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),s=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,a])=>{this.b_===s&&this.W_(r,a)},r=>{e(()=>{const a=new Ne(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)})})}W_(e,s){const r=this.K_(this.b_);this.stream=this.z_(e,s),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(a=>{r(()=>this.G_(a))}),this.stream.onMessage(a=>{r(()=>++this.C_==1?this.j_(a):this.onNext(a))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return je(q2,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return s=>{this.Fi.enqueueAndForget(()=>this.b_===e?s():(je(q2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uL extends gC{constructor(e,s,r,a,o,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,r,a,c),this.serializer=o}z_(e,s){return this.connection.P_("Listen",e,s)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const s=x8(this.serializer,e),r=function(o){if(!("targetChange"in o))return Be.min();const c=o.targetChange;return c.targetIds&&c.targetIds.length?Be.min():c.readTime?Tr(c.readTime):Be.min()}(e);return this.listener.J_(s,r)}H_(e){const s={};s.database=Eb(this.serializer),s.addTarget=function(o,c){let u;const m=c.target;if(u=yb(m)?{documents:v8(o,m)}:{query:N8(o,m).Vt},u.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){u.resumeToken=nC(o,c.resumeToken);const f=Nb(o,c.expectedCount);f!==null&&(u.expectedCount=f)}else if(c.snapshotVersion.compareTo(Be.min())>0){u.readTime=Of(o,c.snapshotVersion.toTimestamp());const f=Nb(o,c.expectedCount);f!==null&&(u.expectedCount=f)}return u}(this.serializer,e);const r=j8(this.serializer,e);r&&(s.labels=r),this.k_(s)}Y_(e){const s={};s.database=Eb(this.serializer),s.removeTarget=e,this.k_(s)}}class hL extends gC{constructor(e,s,r,a,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,r,a,c),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,s){return this.connection.P_("Write",e,s)}j_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const s=y8(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.ta(r,s)}na(){const e={};e.database=Eb(this.serializer),this.k_(e)}X_(e){const s={streamToken:this.lastStreamToken,writes:e.map(r=>b8(this.serializer,r))};this.k_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{}class fL extends mL{constructor(e,s,r,a){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,s,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Wo(e,wb(s,r),a,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ne(de.UNKNOWN,o.toString())})}Jo(e,s,r,a,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,u])=>this.connection.Jo(e,wb(s,r),a,c,u,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ne(de.UNKNOWN,c.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class gL{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Sa(s),this._a=!1):je("OnlineStateTracker",s)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $l="RemoteStore";class pL{constructor(e,s,r,a,o){this.localStore=e,this.datastore=s,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(c=>{r.enqueueAndForget(async()=>{ao(this)&&(je($l,"Restarting streams for network reachability change."),await async function(m){const f=ze(m);f.Ia.add(4),await Ju(f),f.Aa.set("Unknown"),f.Ia.delete(4),await Ag(f)}(this))})}),this.Aa=new gL(r,a)}}async function Ag(t){if(ao(t))for(const e of t.da)await e(!0)}async function Ju(t){for(const e of t.da)await e(!1)}function pC(t,e){const s=ze(t);s.Ta.has(e.targetId)||(s.Ta.set(e.targetId,e),qy(s)?zy(s):Hc(s).x_()&&Hy(s,e))}function By(t,e){const s=ze(t),r=Hc(s);s.Ta.delete(e),r.x_()&&xC(s,e),s.Ta.size===0&&(r.x_()?r.B_():ao(s)&&s.Aa.set("Unknown"))}function Hy(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const s=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}Hc(t).H_(e)}function xC(t,e){t.Ra.$e(e),Hc(t).Y_(e)}function zy(t){t.Ra=new d8({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),Hc(t).start(),t.Aa.aa()}function qy(t){return ao(t)&&!Hc(t).M_()&&t.Ta.size>0}function ao(t){return ze(t).Ia.size===0}function bC(t){t.Ra=void 0}async function xL(t){t.Aa.set("Online")}async function bL(t){t.Ta.forEach((e,s)=>{Hy(t,e)})}async function yL(t,e){bC(t),qy(t)?(t.Aa.la(e),zy(t)):t.Aa.set("Unknown")}async function vL(t,e,s){if(t.Aa.set("Online"),e instanceof sC&&e.state===2&&e.cause)try{await async function(a,o){const c=o.cause;for(const u of o.targetIds)a.Ta.has(u)&&(await a.remoteSyncer.rejectListen(u,c),a.Ta.delete(u),a.Ra.removeTarget(u))}(t,e)}catch(r){je($l,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vf(t,r)}else if(e instanceof df?t.Ra.Ye(e):e instanceof tC?t.Ra.it(e):t.Ra.et(e),!s.isEqual(Be.min()))try{const r=await mC(t.localStore);s.compareTo(r)>=0&&await function(o,c){const u=o.Ra.Pt(c);return u.targetChanges.forEach((m,f)=>{if(m.resumeToken.approximateByteSize()>0){const x=o.Ta.get(f);x&&o.Ta.set(f,x.withResumeToken(m.resumeToken,c))}}),u.targetMismatches.forEach((m,f)=>{const x=o.Ta.get(m);if(!x)return;o.Ta.set(m,x.withResumeToken(Ts.EMPTY_BYTE_STRING,x.snapshotVersion)),xC(o,m);const v=new gi(x.target,m,f,x.sequenceNumber);Hy(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(t,s)}catch(r){je($l,"Failed to raise snapshot:",r),await Vf(t,r)}}async function Vf(t,e,s){if(!Fc(e))throw e;t.Ia.add(1),await Ju(t),t.Aa.set("Offline"),s||(s=()=>mC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{je($l,"Retrying IndexedDB access"),await s(),t.Ia.delete(1),await Ag(t)})}function yC(t,e){return e().catch(s=>Vf(t,s,e))}async function Cg(t){const e=ze(t),s=Ii(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Sy;for(;NL(e);)try{const a=await sL(e.localStore,r);if(a===null){e.Pa.length===0&&s.B_();break}r=a.batchId,wL(e,a)}catch(a){await Vf(e,a)}vC(e)&&NC(e)}function NL(t){return ao(t)&&t.Pa.length<10}function wL(t,e){t.Pa.push(e);const s=Ii(t);s.x_()&&s.Z_&&s.X_(e.mutations)}function vC(t){return ao(t)&&!Ii(t).M_()&&t.Pa.length>0}function NC(t){Ii(t).start()}async function jL(t){Ii(t).na()}async function EL(t){const e=Ii(t);for(const s of t.Pa)e.X_(s.mutations)}async function _L(t,e,s){const r=t.Pa.shift(),a=My.from(r,e,s);await yC(t,()=>t.remoteSyncer.applySuccessfulWrite(a)),await Cg(t)}async function SL(t,e){e&&Ii(t).Z_&&await async function(r,a){if(function(c){return o8(c)&&c!==de.ABORTED}(a.code)){const o=r.Pa.shift();Ii(r).N_(),await yC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,a)),await Cg(r)}}(t,e),vC(t)&&NC(t)}async function $2(t,e){const s=ze(t);s.asyncQueue.verifyOperationInProgress(),je($l,"RemoteStore received new credentials");const r=ao(s);s.Ia.add(3),await Ju(s),r&&s.Aa.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ia.delete(3),await Ag(s)}async function AL(t,e){const s=ze(t);e?(s.Ia.delete(2),await Ag(s)):e||(s.Ia.add(2),await Ju(s),s.Aa.set("Unknown"))}function Hc(t){return t.Va||(t.Va=function(s,r,a){const o=ze(s);return o.ia(),new uL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(t.datastore,t.asyncQueue,{Zo:xL.bind(null,t),e_:bL.bind(null,t),n_:yL.bind(null,t),J_:vL.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),qy(t)?zy(t):t.Aa.set("Unknown")):(await t.Va.stop(),bC(t))})),t.Va}function Ii(t){return t.ma||(t.ma=function(s,r,a){const o=ze(s);return o.ia(),new hL(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,a)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:jL.bind(null,t),n_:SL.bind(null,t),ea:EL.bind(null,t),ta:_L.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await Cg(t)):(await t.ma.stop(),t.Pa.length>0&&(je($l,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,s,r,a,o){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=r,this.op=a,this.removalCallback=o,this.deferred=new ba,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,r,a,o){const c=Date.now()+r,u=new $y(e,s,c,a,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Gy(t,e){if(Sa("AsyncQueue",`${e}: ${t}`),Fc(t))return new Ne(de.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{static emptySet(e){return new fc(e.comparator)}constructor(e){this.comparator=e?(s,r)=>e(s,r)||De.comparator(s.key,r.key):(s,r)=>De.comparator(s.key,r.key),this.keyedMap=uu(),this.sortedSet=new Ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,r)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof fc)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,o=r.getNext().key;if(!a.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const r=new fc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=s,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this.fa=new Ut(De.comparator)}track(e){const s=e.doc.key,r=this.fa.get(s);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(s,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(s,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(s,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(s,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(s):e.type===1&&r.type===2?this.fa=this.fa.insert(s,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(s,{type:2,doc:e.doc}):Ve(63341,{At:e,ga:r}):this.fa=this.fa.insert(s,e)}pa(){const e=[];return this.fa.inorderTraversal((s,r)=>{e.push(r)}),e}}class Ac{constructor(e,s,r,a,o,c,u,m,f){this.query=e,this.docs=s,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=o,this.fromCache=c,this.syncStateChanged=u,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,s,r,a,o){const c=[];return s.forEach(u=>{c.push({type:0,doc:u})}),new Ac(e,s,fc.emptySet(s),c,r,a,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ng(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,r=e.docChanges;if(s.length!==r.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==r[a].type||!s[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class TL{constructor(){this.queries=W2(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(s,r){const a=ze(s),o=a.queries;a.queries=W2(),o.forEach((c,u)=>{for(const m of u.wa)m.onError(r)})})(this,new Ne(de.ABORTED,"Firestore shutting down"))}}function W2(){return new ro(t=>BA(t),Ng)}async function wC(t,e){const s=ze(t);let r=3;const a=e.query;let o=s.queries.get(a);o?!o.Sa()&&e.ba()&&(r=2):(o=new CL,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await s.onListen(a,!0);break;case 1:o.ya=await s.onListen(a,!1);break;case 2:await s.onFirstRemoteStoreListen(a)}}catch(c){const u=Gy(c,`Initialization of query '${ic(e.query)}' failed`);return void e.onError(u)}s.queries.set(a,o),o.wa.push(e),e.va(s.onlineState),o.ya&&e.Ca(o.ya)&&Wy(s)}async function jC(t,e){const s=ze(t),r=e.query;let a=3;const o=s.queries.get(r);if(o){const c=o.wa.indexOf(e);c>=0&&(o.wa.splice(c,1),o.wa.length===0?a=e.ba()?0:1:!o.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return s.queries.delete(r),s.onUnlisten(r,!0);case 1:return s.queries.delete(r),s.onUnlisten(r,!1);case 2:return s.onLastRemoteStoreUnlisten(r);default:return}}function RL(t,e){const s=ze(t);let r=!1;for(const a of e){const o=a.query,c=s.queries.get(o);if(c){for(const u of c.wa)u.Ca(a)&&(r=!0);c.ya=a}}r&&Wy(s)}function DL(t,e,s){const r=ze(t),a=r.queries.get(e);if(a)for(const o of a.wa)o.onError(s);r.queries.delete(e)}function Wy(t){t.Da.forEach(e=>{e.next()})}var Ab,Q2;(Q2=Ab||(Ab={})).Fa="default",Q2.Cache="cache";class EC{constructor(e,s,r){this.query=e,this.Ma=s,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new Ac(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),s=!0):this.Ba(e,this.onlineState)&&(this.La(e),s=!0),this.Oa=e,s}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let s=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),s=!0),s}Ba(e,s){if(!e.fromCache||!this.ba())return!0;const r=s!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const s=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}La(e){e=Ac.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Ab.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.key=e}}class SC{constructor(e){this.key=e}}class IL{constructor(e,s){this.query=e,this.Ha=s,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=tt(),this.mutatedKeys=tt(),this.Xa=HA(e),this.eu=new fc(this.Xa)}get tu(){return this.Ha}nu(e,s){const r=s?s.ru:new G2,a=s?s.eu:this.eu;let o=s?s.mutatedKeys:this.mutatedKeys,c=a,u=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,f=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((x,v)=>{const y=a.get(x),N=wg(this.query,v)?v:null,w=!!y&&this.mutatedKeys.has(y.key),E=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let _=!1;y&&N?y.data.isEqual(N.data)?w!==E&&(r.track({type:3,doc:N}),_=!0):this.iu(y,N)||(r.track({type:2,doc:N}),_=!0,(m&&this.Xa(N,m)>0||f&&this.Xa(N,f)<0)&&(u=!0)):!y&&N?(r.track({type:0,doc:N}),_=!0):y&&!N&&(r.track({type:1,doc:y}),_=!0,(m||f)&&(u=!0)),_&&(N?(c=c.add(N),o=E?o.add(x):o.delete(x)):(c=c.delete(x),o=o.delete(x)))}),this.query.limit!==null)for(;c.size>this.query.limit;){const x=this.query.limitType==="F"?c.last():c.first();c=c.delete(x.key),o=o.delete(x.key),r.track({type:1,doc:x})}return{eu:c,ru:r,Ds:u,mutatedKeys:o}}iu(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,r,a){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const c=e.ru.pa();c.sort((x,v)=>function(N,w){const E=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ve(20277,{At:_})}};return E(N)-E(w)}(x.type,v.type)||this.Xa(x.doc,v.doc)),this.su(r),a=a!=null&&a;const u=s&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,f=m!==this.Ya;return this.Ya=m,c.length!==0||f?{snapshot:new Ac(this.query,e.eu,o,c,e.mutatedKeys,m===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:u}:{_u:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new G2,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(s=>this.Ha=this.Ha.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.Ha=this.Ha.delete(s)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=tt(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const s=[];return e.forEach(r=>{this.Za.has(r)||s.push(new SC(r))}),this.Za.forEach(r=>{e.has(r)||s.push(new _C(r))}),s}uu(e){this.Ha=e.qs,this.Za=tt();const s=this.nu(e.documents);return this.applyChanges(s,!0)}cu(){return Ac.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Qy="SyncEngine";class kL{constructor(e,s,r){this.query=e,this.targetId=s,this.view=r}}class ML{constructor(e){this.key=e,this.lu=!1}}class PL{constructor(e,s,r,a,o,c){this.localStore=e,this.remoteStore=s,this.eventManager=r,this.sharedClientState=a,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.hu={},this.Pu=new ro(u=>BA(u),Ng),this.Tu=new Map,this.Iu=new Set,this.du=new Ut(De.comparator),this.Eu=new Map,this.Au=new Ly,this.Ru={},this.Vu=new Map,this.mu=Sc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function OL(t,e,s=!0){const r=IC(t);let a;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),a=o.view.cu()):a=await AC(r,e,s,!0),a}async function LL(t,e){const s=IC(t);await AC(s,e,!0,!1)}async function AC(t,e,s,r){const a=await nL(t.localStore,Cr(e)),o=a.targetId,c=t.sharedClientState.addLocalQueryTarget(o,s);let u;return r&&(u=await VL(t,e,o,c==="current",a.resumeToken)),t.isPrimaryClient&&s&&pC(t.remoteStore,a),u}async function VL(t,e,s,r,a){t.gu=(v,y,N)=>async function(E,_,R,I){let V=_.view.nu(R);V.Ds&&(V=await F2(E.localStore,_.query,!1).then(({documents:C})=>_.view.nu(C,V)));const z=I&&I.targetChanges.get(_.targetId),F=I&&I.targetMismatches.get(_.targetId)!=null,P=_.view.applyChanges(V,E.isPrimaryClient,z,F);return K2(E,_.targetId,P._u),P.snapshot}(t,v,y,N);const o=await F2(t.localStore,e,!0),c=new IL(e,o.qs),u=c.nu(o.documents),m=Zu.createSynthesizedTargetChangeForCurrentChange(s,r&&t.onlineState!=="Offline",a),f=c.applyChanges(u,t.isPrimaryClient,m);K2(t,s,f._u);const x=new kL(e,s,c);return t.Pu.set(e,x),t.Tu.has(s)?t.Tu.get(s).push(e):t.Tu.set(s,[e]),f.snapshot}async function UL(t,e,s){const r=ze(t),a=r.Pu.get(e),o=r.Tu.get(a.targetId);if(o.length>1)return r.Tu.set(a.targetId,o.filter(c=>!Ng(c,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await _b(r.localStore,a.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(a.targetId),s&&By(r.remoteStore,a.targetId),Cb(r,a.targetId)}).catch(Uc)):(Cb(r,a.targetId),await _b(r.localStore,a.targetId,!0))}async function FL(t,e){const s=ze(t),r=s.Pu.get(e),a=s.Tu.get(r.targetId);s.isPrimaryClient&&a.length===1&&(s.sharedClientState.removeLocalQueryTarget(r.targetId),By(s.remoteStore,r.targetId))}async function BL(t,e,s){const r=QL(t);try{const a=await function(c,u){const m=ze(c),f=Dt.now(),x=u.reduce((N,w)=>N.add(w.key),tt());let v,y;return m.persistence.runTransaction("Locally write mutations","readwrite",N=>{let w=Aa(),E=tt();return m.Os.getEntries(N,x).next(_=>{w=_,w.forEach((R,I)=>{I.isValidDocument()||(E=E.add(R))})}).next(()=>m.localDocuments.getOverlayedDocuments(N,w)).next(_=>{v=_;const R=[];for(const I of u){const V=n8(I,v.get(I.key).overlayedDocument);V!=null&&R.push(new Hi(I.key,V,kA(V.value.mapValue),Fn.exists(!0)))}return m.mutationQueue.addMutationBatch(N,f,R,u)}).next(_=>{y=_;const R=_.applyToLocalDocumentSet(v,E);return m.documentOverlayCache.saveOverlays(N,_.batchId,R)})}).then(()=>({batchId:y.batchId,changes:qA(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),function(c,u,m){let f=c.Ru[c.currentUser.toKey()];f||(f=new Ut(Qe)),f=f.insert(u,m),c.Ru[c.currentUser.toKey()]=f}(r,a.batchId,s),await eh(r,a.changes),await Cg(r.remoteStore)}catch(a){const o=Gy(a,"Failed to persist write");s.reject(o)}}async function CC(t,e){const s=ze(t);try{const r=await eL(s.localStore,e);e.targetChanges.forEach((a,o)=>{const c=s.Eu.get(o);c&&(mt(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.lu=!0:a.modifiedDocuments.size>0?mt(c.lu,14607):a.removedDocuments.size>0&&(mt(c.lu,42227),c.lu=!1))}),await eh(s,r,e)}catch(r){await Uc(r)}}function Y2(t,e,s){const r=ze(t);if(r.isPrimaryClient&&s===0||!r.isPrimaryClient&&s===1){const a=[];r.Pu.forEach((o,c)=>{const u=c.view.va(e);u.snapshot&&a.push(u.snapshot)}),function(c,u){const m=ze(c);m.onlineState=u;let f=!1;m.queries.forEach((x,v)=>{for(const y of v.wa)y.va(u)&&(f=!0)}),f&&Wy(m)}(r.eventManager,e),a.length&&r.hu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function HL(t,e,s){const r=ze(t);r.sharedClientState.updateQueryState(e,"rejected",s);const a=r.Eu.get(e),o=a&&a.key;if(o){let c=new Ut(De.comparator);c=c.insert(o,Ls.newNoDocument(o,Be.min()));const u=tt().add(o),m=new _g(Be.min(),new Map,new Ut(Qe),c,u);await CC(r,m),r.du=r.du.remove(o),r.Eu.delete(e),Yy(r)}else await _b(r.localStore,e,!1).then(()=>Cb(r,e,s)).catch(Uc)}async function zL(t,e){const s=ze(t),r=e.batch.batchId;try{const a=await J8(s.localStore,e);RC(s,r,null),TC(s,r),s.sharedClientState.updateMutationState(r,"acknowledged"),await eh(s,a)}catch(a){await Uc(a)}}async function qL(t,e,s){const r=ze(t);try{const a=await function(c,u){const m=ze(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let x;return m.mutationQueue.lookupMutationBatch(f,u).next(v=>(mt(v!==null,37113),x=v.keys(),m.mutationQueue.removeMutationBatch(f,v))).next(()=>m.mutationQueue.performConsistencyCheck(f)).next(()=>m.documentOverlayCache.removeOverlaysForBatchId(f,x,u)).next(()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,x)).next(()=>m.localDocuments.getDocuments(f,x))})}(r.localStore,e);RC(r,e,s),TC(r,e),r.sharedClientState.updateMutationState(e,"rejected",s),await eh(r,a)}catch(a){await Uc(a)}}function TC(t,e){(t.Vu.get(e)||[]).forEach(s=>{s.resolve()}),t.Vu.delete(e)}function RC(t,e,s){const r=ze(t);let a=r.Ru[r.currentUser.toKey()];if(a){const o=a.get(e);o&&(s?o.reject(s):o.resolve(),a=a.remove(e)),r.Ru[r.currentUser.toKey()]=a}}function Cb(t,e,s=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),s&&t.hu.pu(r,s);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||DC(t,r)})}function DC(t,e){t.Iu.delete(e.path.canonicalString());const s=t.du.get(e);s!==null&&(By(t.remoteStore,s),t.du=t.du.remove(e),t.Eu.delete(s),Yy(t))}function K2(t,e,s){for(const r of s)r instanceof _C?(t.Au.addReference(r.key,e),$L(t,r)):r instanceof SC?(je(Qy,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||DC(t,r.key)):Ve(19791,{yu:r})}function $L(t,e){const s=e.key,r=s.path.canonicalString();t.du.get(s)||t.Iu.has(r)||(je(Qy,"New document in limbo: "+s),t.Iu.add(r),Yy(t))}function Yy(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const s=new De(St.fromString(e)),r=t.mu.next();t.Eu.set(r,new ML(s)),t.du=t.du.insert(s,r),pC(t.remoteStore,new gi(Cr(Dy(s.path)),r,"TargetPurposeLimboResolution",bg.ue))}}async function eh(t,e,s){const r=ze(t),a=[],o=[],c=[];r.Pu.isEmpty()||(r.Pu.forEach((u,m)=>{c.push(r.gu(m,e,s).then(f=>{var x;if((f||s)&&r.isPrimaryClient){const v=f?!f.fromCache:(x=s==null?void 0:s.targetChanges.get(m.targetId))===null||x===void 0?void 0:x.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(f){a.push(f);const v=Uy.Es(m.targetId,f);o.push(v)}}))}),await Promise.all(c),r.hu.J_(a),await async function(m,f){const x=ze(m);try{await x.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>me.forEach(f,y=>me.forEach(y.Is,N=>x.persistence.referenceDelegate.addReference(v,y.targetId,N)).next(()=>me.forEach(y.ds,N=>x.persistence.referenceDelegate.removeReference(v,y.targetId,N)))))}catch(v){if(!Fc(v))throw v;je(Fy,"Failed to update sequence numbers: "+v)}for(const v of f){const y=v.targetId;if(!v.fromCache){const N=x.Fs.get(y),w=N.snapshotVersion,E=N.withLastLimboFreeSnapshotVersion(w);x.Fs=x.Fs.insert(y,E)}}}(r.localStore,o))}async function GL(t,e){const s=ze(t);if(!s.currentUser.isEqual(e)){je(Qy,"User change. New user:",e.toKey());const r=await hC(s.localStore,e);s.currentUser=e,function(o,c){o.Vu.forEach(u=>{u.forEach(m=>{m.reject(new Ne(de.CANCELLED,c))})}),o.Vu.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await eh(s,r.Bs)}}function WL(t,e){const s=ze(t),r=s.Eu.get(e);if(r&&r.lu)return tt().add(r.key);{let a=tt();const o=s.Tu.get(e);if(!o)return a;for(const c of o){const u=s.Pu.get(c);a=a.unionWith(u.view.tu)}return a}}function IC(t){const e=ze(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=WL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=HL.bind(null,e),e.hu.J_=RL.bind(null,e.eventManager),e.hu.pu=DL.bind(null,e.eventManager),e}function QL(t){const e=ze(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qL.bind(null,e),e}class Uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Sg(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,s){return null}Fu(e,s){return null}vu(e){return Z8(this.persistence,new Y8,e.initialUser,this.serializer)}Du(e){return new uC(Vy.Vi,this.serializer)}bu(e){return new aL}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uf.provider={build:()=>new Uf};class YL extends Uf{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,s){mt(this.persistence.referenceDelegate instanceof Lf,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new M8(r,e.asyncQueue,s)}Du(e){const s=this.cacheSizeBytes!==void 0?Js.withCacheSize(this.cacheSizeBytes):Js.DEFAULT;return new uC(r=>Lf.Vi(r,s),this.serializer)}}class Tb{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Y2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=GL.bind(null,this.syncEngine),await AL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new TL}()}createDatastore(e){const s=Sg(e.databaseInfo.databaseId),r=function(o){return new dL(o)}(e.databaseInfo);return function(o,c,u,m){return new fL(o,c,u,m)}(e.authCredentials,e.appCheckCredentials,r,s)}createRemoteStore(e){return function(r,a,o,c,u){return new pL(r,a,o,c,u)}(this.localStore,this.datastore,e.asyncQueue,s=>Y2(this.syncEngine,s,0),function(){return z2.C()?new z2:new iL}())}createSyncEngine(e,s){return function(a,o,c,u,m,f,x){const v=new PL(a,o,c,u,m,f);return x&&(v.fu=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e,s;await async function(a){const o=ze(a);je($l,"RemoteStore shutting down."),o.Ia.add(5),await Ju(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(s=this.eventManager)===null||s===void 0||s.terminate()}}Tb.provider={build:()=>new Tb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Sa("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,s){setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki="FirestoreClient";class KL{constructor(e,s,r,a,o){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=r,this.databaseInfo=a,this.user=Ps.UNAUTHENTICATED,this.clientId=_y.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async c=>{je(ki,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(r,c=>(je(ki,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ba;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const r=Gy(s,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yx(t,e){t.asyncQueue.verifyOperationInProgress(),je(ki,"Initializing OfflineComponentProvider");const s=t.configuration;await e.initialize(s);let r=s.initialUser;t.setCredentialChangeListener(async a=>{r.isEqual(a)||(await hC(e.localStore,a),r=a)}),e.persistence.setDatabaseDeletedListener(()=>{Ai("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{je("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(a=>{Ai("Terminating Firestore due to IndexedDb database deletion failed",a)})}),t._offlineComponents=e}async function X2(t,e){t.asyncQueue.verifyOperationInProgress();const s=await XL(t);je(ki,"Initializing OnlineComponentProvider"),await e.initialize(s,t.configuration),t.setCredentialChangeListener(r=>$2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,a)=>$2(e.remoteStore,a)),t._onlineComponents=e}async function XL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){je(ki,"Using user provided OfflineComponentProvider");try{await yx(t,t._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!function(a){return a.name==="FirebaseError"?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(s))throw s;Ai("Error using user provided cache. Falling back to memory cache: "+s),await yx(t,new Uf)}}else je(ki,"Using default OfflineComponentProvider"),await yx(t,new YL(void 0));return t._offlineComponents}async function MC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(je(ki,"Using user provided OnlineComponentProvider"),await X2(t,t._uninitializedComponentsProvider._online)):(je(ki,"Using default OnlineComponentProvider"),await X2(t,new Tb))),t._onlineComponents}function ZL(t){return MC(t).then(e=>e.syncEngine)}async function PC(t){const e=await MC(t),s=e.eventManager;return s.onListen=OL.bind(null,e.syncEngine),s.onUnlisten=UL.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=LL.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=FL.bind(null,e.syncEngine),s}function JL(t,e,s={}){const r=new ba;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,u,m,f){const x=new kC({next:y=>{x.Ou(),c.enqueueAndForget(()=>jC(o,v));const N=y.docs.has(u);!N&&y.fromCache?f.reject(new Ne(de.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&y.fromCache&&m&&m.source==="server"?f.reject(new Ne(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(y)},error:y=>f.reject(y)}),v=new EC(Dy(u.path),x,{includeMetadataChanges:!0,ka:!0});return wC(o,v)}(await PC(t),t.asyncQueue,e,s,r)),r.promise}function e7(t,e,s={}){const r=new ba;return t.asyncQueue.enqueueAndForget(async()=>function(o,c,u,m,f){const x=new kC({next:y=>{x.Ou(),c.enqueueAndForget(()=>jC(o,v)),y.fromCache&&m.source==="server"?f.reject(new Ne(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(y)},error:y=>f.reject(y)}),v=new EC(u,x,{includeMetadataChanges:!0,ka:!0});return wC(o,v)}(await PC(t),t.asyncQueue,e,s,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="firestore.googleapis.com",J2=!0;class eE{constructor(e){var s,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Ne(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=LC,this.ssl=J2}else this.host=e.host,this.ssl=(s=e.ssl)!==null&&s!==void 0?s:J2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=dC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I8)throw new Ne(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ne(de.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,a){return r.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Tg{constructor(e,s,r,a){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ne(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eE(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oO;switch(r.type){case"firstParty":return new hO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ne(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const r=Z2.get(s);r&&(je("ComponentProvider","Removing Datastore"),Z2.delete(s),r.terminate())}(this),Promise.resolve()}}function t7(t,e,s,r={}){var a;t=nr(t,Tg);const o=Li(e),c=t._getSettings(),u=Object.assign(Object.assign({},c),{emulatorOptions:t._getEmulatorOptions()}),m=`${e}:${s}`;o&&(dy(`https://${m}`),uy("Firestore",!0)),c.host!==LC&&c.host!==m&&Ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},c),{host:m,ssl:o,emulatorOptions:r});if(!ja(f,u)&&(t._setSettings(f),r.mockUserToken)){let x,v;if(typeof r.mockUserToken=="string")x=r.mockUserToken,v=Ps.MOCK_USER;else{x=jS(r.mockUserToken,(a=t._app)===null||a===void 0?void 0:a.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new Ne(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new Ps(y)}t._authCredentials=new cO(new vA(x,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,s,r){this.converter=s,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zi(this.firestore,e,this._query)}}class Kt{constructor(e,s,r){this.converter=s,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,r){if(Ku(s,Kt._jsonSchema))return new Kt(e,r||null,new De(St.fromString(s.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:ns("string",Kt._jsonSchemaVersion),referencePath:ns("string")};class Ei extends zi{constructor(e,s,r){super(e,s,Dy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new De(e))}withConverter(e){return new Ei(this.firestore,e,this._path)}}function be(t,e,...s){if(t=Rt(t),wA("collection","path",e),t instanceof Tg){const r=St.fromString(e,...s);return m2(r),new Ei(t,null,r)}{if(!(t instanceof Kt||t instanceof Ei))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(St.fromString(e,...s));return m2(r),new Ei(t.firestore,null,r)}}function we(t,e,...s){if(t=Rt(t),arguments.length===1&&(e=_y.newId()),wA("doc","path",e),t instanceof Tg){const r=St.fromString(e,...s);return h2(r),new Kt(t,null,new De(r))}{if(!(t instanceof Kt||t instanceof Ei))throw new Ne(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(St.fromString(e,...s));return h2(r),new Kt(t.firestore,t instanceof Ei?t.converter:null,new De(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE="AsyncQueue";class sE{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new fC(this,"async_queue_retry"),this.oc=()=>{const r=bx();r&&je(tE,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const s=bx();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const s=bx();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const s=new ba;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!Fc(e))throw e;je(tE,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const s=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,Sa("INTERNAL UNHANDLED ERROR: ",nE(r)),r}).then(r=>(this.nc=!1,r))));return this._c=s,s}enqueueAfterDelay(e,s,r){this.ac(),this.sc.indexOf(e)>-1&&(s=0);const a=$y.createAndSchedule(this,e,s,r,o=>this.lc(o));return this.ec.push(a),a}ac(){this.tc&&Ve(47125,{hc:nE(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const s of this.ec)if(s.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((s,r)=>s.targetTimeMs-r.targetTimeMs);for(const s of this.ec)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const s=this.ec.indexOf(e);this.ec.splice(s,1)}}function nE(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class io extends Tg{constructor(e,s,r,a){super(e,s,r,a),this.type="firestore",this._queue=new sE,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sE(e),this._firestoreClient=void 0,await e}}}function s7(t,e){const s=typeof t=="object"?t:mg(),r=typeof t=="string"?t:Df,a=Vi(s,"firestore").getImmediate({identifier:r});if(!a._initialized){const o=vS("firestore");o&&t7(a,...o)}return a}function Ky(t){if(t._terminated)throw new Ne(de.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||n7(t),t._firestoreClient}function n7(t){var e,s,r;const a=t._freezeSettings(),o=function(u,m,f,x){return new CO(u,m,f,x.host,x.ssl,x.experimentalForceLongPolling,x.experimentalAutoDetectLongPolling,OC(x.experimentalLongPollingOptions),x.useFetchStreams,x.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,a);t._componentsProvider||!((s=a.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),t._firestoreClient=new KL(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const m=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(m),_online:m}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(Ts.fromBase64String(e))}catch(s){throw new Ne(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Un(Ts.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ku(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:ns("string",Un._jsonSchemaVersion),bytes:ns("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new Ne(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Cs(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new Ne(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new Ne(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rr._jsonSchemaVersion}}static fromJSON(e){if(Ku(e,Rr._jsonSchema))return new Rr(e.latitude,e.longitude)}}Rr._jsonSchemaVersion="firestore/geoPoint/1.0",Rr._jsonSchema={type:ns("string",Rr._jsonSchemaVersion),latitude:ns("number"),longitude:ns("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this._values=(e||[]).map(s=>s)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,a){if(r.length!==a.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==a[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Dr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ku(e,Dr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(s=>typeof s=="number"))return new Dr(e.vectorValues);throw new Ne(de.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Dr._jsonSchemaVersion="firestore/vectorValue/1.0",Dr._jsonSchema={type:ns("string",Dr._jsonSchemaVersion),vectorValues:ns("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r7=/^__.*__$/;class a7{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return this.fieldMask!==null?new Hi(e,this.data,this.fieldMask,s,this.fieldTransforms):new Xu(e,this.data,s,this.fieldTransforms)}}class VC{constructor(e,s,r){this.data=e,this.fieldMask=s,this.fieldTransforms=r}toMutation(e,s){return new Hi(e,this.data,this.fieldMask,s,this.fieldTransforms)}}function UC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ve(40011,{Ec:t})}}class Dg{constructor(e,s,r,a,o,c){this.settings=e,this.databaseId=s,this.serializer=r,this.ignoreUndefinedProperties=a,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Dg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Rc({path:r,mc:!1});return a.fc(e),a}gc(e){var s;const r=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Ff(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(UC(this.Ec)&&r7.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class i7{constructor(e,s,r){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=r||Sg(e)}Dc(e,s,r,a=!1){return new Dg({Ec:e,methodName:s,bc:r,path:Cs.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ig(t){const e=t._freezeSettings(),s=Sg(t._databaseId);return new i7(t._databaseId,!!e.ignoreUndefinedProperties,s)}function FC(t,e,s,r,a,o={}){const c=t.Dc(o.merge||o.mergeFields?2:0,e,s,a);Jy("Data must be an object, but it was:",c,r);const u=BC(r,c);let m,f;if(o.merge)m=new xn(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){const x=[];for(const v of o.mergeFields){const y=Rb(e,v,s);if(!c.contains(y))throw new Ne(de.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);zC(x,y)||x.push(y)}m=new xn(x),f=c.fieldTransforms.filter(v=>m.covers(v.field))}else m=null,f=c.fieldTransforms;return new a7(new sn(u),m,f)}class kg extends th{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kg}}function l7(t,e,s){return new Dg({Ec:3,bc:e.settings.bc,methodName:t._methodName,mc:s},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Xy extends th{_toFieldTransform(e){return new XA(e.path,new Pu)}isEqual(e){return e instanceof Xy}}class Zy extends th{constructor(e,s){super(e),this.vc=s}_toFieldTransform(e){const s=l7(this,e,!0),r=this.vc.map(o=>zc(o,s)),a=new _c(r);return new XA(e.path,a)}isEqual(e){return e instanceof Zy&&ja(this.vc,e.vc)}}function o7(t,e,s,r){const a=t.Dc(1,e,s);Jy("Data must be an object, but it was:",a,r);const o=[],c=sn.empty();Bi(r,(m,f)=>{const x=ev(e,m,s);f=Rt(f);const v=a.gc(x);if(f instanceof kg)o.push(x);else{const y=zc(f,v);y!=null&&(o.push(x),c.set(x,y))}});const u=new xn(o);return new VC(c,u,a.fieldTransforms)}function c7(t,e,s,r,a,o){const c=t.Dc(1,e,s),u=[Rb(e,r,s)],m=[a];if(o.length%2!=0)throw new Ne(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<o.length;y+=2)u.push(Rb(e,o[y])),m.push(o[y+1]);const f=[],x=sn.empty();for(let y=u.length-1;y>=0;--y)if(!zC(f,u[y])){const N=u[y];let w=m[y];w=Rt(w);const E=c.gc(N);if(w instanceof kg)f.push(N);else{const _=zc(w,E);_!=null&&(f.push(N),x.set(N,_))}}const v=new xn(f);return new VC(x,v,c.fieldTransforms)}function d7(t,e,s,r=!1){return zc(s,t.Dc(r?4:3,e))}function zc(t,e){if(HC(t=Rt(t)))return Jy("Unsupported field value:",e,t),BC(t,e);if(t instanceof th)return function(r,a){if(!UC(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(a);o&&a.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,a){const o=[];let c=0;for(const u of r){let m=zc(u,a.yc(c));m==null&&(m={nullValue:"NULL_VALUE"}),o.push(m),c++}return{arrayValue:{values:o}}}(t,e)}return function(r,a){if((r=Rt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return XO(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Dt.fromDate(r);return{timestampValue:Of(a.serializer,o)}}if(r instanceof Dt){const o=new Dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Of(a.serializer,o)}}if(r instanceof Rr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:nC(a.serializer,r._byteString)};if(r instanceof Kt){const o=a.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw a.wc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Oy(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof Dr)return function(c,u){return{mapValue:{fields:{[DA]:{stringValue:IA},[If]:{arrayValue:{values:c.toArray().map(f=>{if(typeof f!="number")throw u.wc("VectorValues must only contain numeric values.");return Iy(u.serializer,f)})}}}}}}(r,a);throw a.wc(`Unsupported field value: ${xg(r)}`)}(t,e)}function BC(t,e){const s={};return _A(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bi(t,(r,a)=>{const o=zc(a,e.Vc(r));o!=null&&(s[r]=o)}),{mapValue:{fields:s}}}function HC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Dt||t instanceof Rr||t instanceof Un||t instanceof Kt||t instanceof th||t instanceof Dr)}function Jy(t,e,s){if(!HC(s)||!jA(s)){const r=xg(s);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function Rb(t,e,s){if((e=Rt(e))instanceof Rg)return e._internalPath;if(typeof e=="string")return ev(t,e);throw Ff("Field path arguments must be of type string or ",t,!1,void 0,s)}const u7=new RegExp("[~\\*/\\[\\]]");function ev(t,e,s){if(e.search(u7)>=0)throw Ff(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,s);try{return new Rg(...e.split("."))._internalPath}catch{throw Ff(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,s)}}function Ff(t,e,s,r,a){const o=r&&!r.isEmpty(),c=a!==void 0;let u=`Function ${e}() called with invalid data`;s&&(u+=" (via `toFirestore()`)"),u+=". ";let m="";return(o||c)&&(m+=" (found",o&&(m+=` in field ${r}`),c&&(m+=` in document ${a}`),m+=")"),new Ne(de.INVALID_ARGUMENT,u+t+m)}function zC(t,e){return t.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,s,r,a,o){this._firestore=e,this._userDataWriter=s,this._key=r,this._document=a,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h7(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(Mg("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class h7 extends qC{data(){return super.data()}}function Mg(t,e){return typeof e=="string"?ev(t,e):e instanceof Rg?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ne(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class tv{}class sv extends tv{}function Oe(t,e,...s){let r=[];e instanceof tv&&r.push(e),r=r.concat(s),function(o){const c=o.filter(m=>m instanceof nv).length,u=o.filter(m=>m instanceof Pg).length;if(c>1||c>0&&u>0)throw new Ne(de.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const a of r)t=a._apply(t);return t}class Pg extends sv{constructor(e,s,r){super(),this._field=e,this._op=s,this._value=r,this.type="where"}static _create(e,s,r){return new Pg(e,s,r)}_apply(e){const s=this._parse(e);return $C(e._query,s),new zi(e.firestore,e.converter,vb(e._query,s))}_parse(e){const s=Ig(e.firestore);return function(o,c,u,m,f,x,v){let y;if(f.isKeyField()){if(x==="array-contains"||x==="array-contains-any")throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${x}' queries on documentId().`);if(x==="in"||x==="not-in"){aE(v,x);const w=[];for(const E of v)w.push(rE(m,o,E));y={arrayValue:{values:w}}}else y=rE(m,o,v)}else x!=="in"&&x!=="not-in"&&x!=="array-contains-any"||aE(v,x),y=d7(u,c,v,x==="in"||x==="not-in");return ss.create(f,x,y)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}function Re(t,e,s){const r=e,a=Mg("where",t);return Pg._create(a,r,s)}class nv extends tv{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new nv(e,s)}_parse(e){const s=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return s.length===1?s[0]:rr.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(a,o){let c=a;const u=o.getFlattenedFilters();for(const m of u)$C(c,m),c=vb(c,m)}(e._query,s),new zi(e.firestore,e.converter,vb(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class rv extends sv{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new rv(e,s)}_apply(e){const s=function(a,o,c){if(a.startAt!==null)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new Ne(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mu(o,c)}(e._query,this._field,this._direction);return new zi(e.firestore,e.converter,function(a,o){const c=a.explicitOrderBy.concat([o]);return new Bc(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}function Bn(t,e="asc"){const s=e,r=Mg("orderBy",t);return rv._create(r,s)}class av extends sv{constructor(e,s,r){super(),this.type=e,this._limit=s,this._limitType=r}static _create(e,s,r){return new av(e,s,r)}_apply(e){return new zi(e.firestore,e.converter,Mf(e._query,this._limit,this._limitType))}}function Bf(t){return av._create("limit",t,"F")}function rE(t,e,s){if(typeof(s=Rt(s))=="string"){if(s==="")throw new Ne(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!FA(e)&&s.indexOf("/")!==-1)throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const r=e.path.child(St.fromString(s));if(!De.isDocumentKey(r))throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return N2(t,new De(r))}if(s instanceof Kt)return N2(t,s._key);throw new Ne(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xg(s)}.`)}function aE(t,e){if(!Array.isArray(t)||t.length===0)throw new Ne(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $C(t,e){const s=function(a,o){for(const c of a)for(const u of c.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new Ne(de.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ne(de.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class f7{convertValue(e,s="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(Ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw Ve(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const r={};return Bi(e,(a,o)=>{r[a]=this.convertValue(o,s)}),r}convertVectorValue(e){var s,r,a;const o=(a=(r=(s=e.fields)===null||s===void 0?void 0:s[If].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map(c=>Yt(c.doubleValue));return new Dr(o)}convertGeoPoint(e){return new Rr(Yt(e.latitude),Yt(e.longitude))}convertArray(e,s){return(e.values||[]).map(r=>this.convertValue(r,s))}convertServerTimestamp(e,s){switch(s){case"previous":const r=vg(e);return r==null?null:this.convertValue(r,s);case"estimate":return this.convertTimestamp(Du(e));default:return null}}convertTimestamp(e){const s=Ti(e);return new Dt(s.seconds,s.nanos)}convertDocumentKey(e,s){const r=St.fromString(e);mt(cC(r),9688,{name:e});const a=new Iu(r.get(1),r.get(3)),o=new De(r.popFirst(5));return a.isEqual(s)||Sa(`Document ${o} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t,e,s){let r;return r=t?s&&(s.merge||s.mergeFields)?t.toFirestore(e,s):t.toFirestore(e):e,r}class mu{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ol extends qC{constructor(e,s,r,a,o,c){super(e,s,r,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new uf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const r=this._document.data.field(Mg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(de.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=Ol._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}Ol._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ol._jsonSchema={type:ns("string",Ol._jsonSchemaVersion),bundleSource:ns("string","DocumentSnapshot"),bundleName:ns("string"),bundle:ns("string")};class uf extends Ol{data(e={}){return super.data(e)}}class gc{constructor(e,s,r,a){this._firestore=e,this._userDataWriter=s,this._snapshot=a,this.metadata=new mu(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(r=>{e.call(s,new uf(this._firestore,this._userDataWriter,r.key,r,new mu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new Ne(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(a,o){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map(u=>{const m=new uf(a._firestore,a._userDataWriter,u.doc.key,u.doc,new mu(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);return u.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}})}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const m=new uf(a._firestore,a._userDataWriter,u.doc.key,u.doc,new mu(a._snapshot.mutatedKeys.has(u.doc.key),a._snapshot.fromCache),a.query.converter);let f=-1,x=-1;return u.type!==0&&(f=c.indexOf(u.doc.key),c=c.delete(u.doc.key)),u.type!==1&&(c=c.add(u.doc),x=c.indexOf(u.doc.key)),{type:g7(u.type),doc:m,oldIndex:f,newIndex:x}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ne(de.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=gc._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_y.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],r=[],a=[];return this.docs.forEach(o=>{o._document!==null&&(s.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),a.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function g7(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ve(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t){t=nr(t,Kt);const e=nr(t.firestore,io);return JL(Ky(e),t._key).then(s=>p7(e,t,s))}gc._jsonSchemaVersion="firestore/querySnapshot/1.0",gc._jsonSchema={type:ns("string",gc._jsonSchemaVersion),bundleSource:ns("string","QuerySnapshot"),bundleName:ns("string"),bundle:ns("string")};class WC extends f7{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,s)}}function Ce(t){t=nr(t,zi);const e=nr(t.firestore,io),s=Ky(e),r=new WC(e);return m7(t._query),e7(s,t._query).then(a=>new gc(e,r,t,a))}function pi(t,e,s){t=nr(t,Kt);const r=nr(t.firestore,io),a=GC(t.converter,e,s);return Og(r,[FC(Ig(r),"setDoc",t._key,a,t.converter!==null,s).toMutation(t._key,Fn.none())])}function hs(t,e,s,...r){t=nr(t,Kt);const a=nr(t.firestore,io),o=Ig(a);let c;return c=typeof(e=Rt(e))=="string"||e instanceof Rg?c7(o,"updateDoc",t._key,e,s,r):o7(o,"updateDoc",t._key,e),Og(a,[c.toMutation(t._key,Fn.exists(!0))])}function qc(t){return Og(nr(t.firestore,io),[new ky(t._key,Fn.none())])}function Gl(t,e){const s=nr(t.firestore,io),r=we(t),a=GC(t.converter,e);return Og(s,[FC(Ig(t.firestore),"addDoc",r._key,a,t.converter!==null,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}function Og(t,e){return function(r,a){const o=new ba;return r.asyncQueue.enqueueAndForget(async()=>BL(await ZL(r),a,o)),o.promise}(Ky(t),e)}function p7(t,e,s){const r=s.docs.get(e._key),a=new WC(t);return new Ol(t,a,e._key,r,new mu(s.hasPendingWrites,s.fromCache),e.converter)}function en(){return new Xy("serverTimestamp")}function QC(...t){return new Zy("arrayUnion",t)}(function(e,s=!0){(function(a){Vc=a})(no),sr(new qn("firestore",(r,{instanceIdentifier:a,options:o})=>{const c=r.getProvider("app").getImmediate(),u=new io(new dO(r.getProvider("auth-internal")),new mO(c,r.getProvider("app-check-internal")),function(f,x){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Ne(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Iu(f.options.projectId,x)}(c,a),c);return o=Object.assign({useFetchStreams:s},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),rn(l2,o2,e),rn(l2,o2,"esm2017")})();var x7="firebase",b7="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rn(x7,b7,"app");const YC="@firebase/installations",iv="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=1e4,XC=`w:${iv}`,ZC="FIS_v2",y7="https://firebaseinstallations.googleapis.com/v1",v7=60*60*1e3,N7="installations",w7="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j7={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Wl=new so(N7,w7,j7);function JC(t){return t instanceof Gn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT({projectId:t}){return`${y7}/projects/${t}/installations`}function tT(t){return{token:t.token,requestStatus:2,expiresIn:_7(t.expiresIn),creationTime:Date.now()}}async function sT(t,e){const r=(await e.json()).error;return Wl.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function E7(t,{refreshToken:e}){const s=nT(t);return s.append("Authorization",S7(e)),s}async function rT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function _7(t){return Number(t.replace("s","000"))}function S7(t){return`${ZC} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A7({appConfig:t,heartbeatServiceProvider:e},{fid:s}){const r=eT(t),a=nT(t),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&a.append("x-firebase-client",f)}const c={fid:s,authVersion:ZC,appId:t.appId,sdkVersion:XC},u={method:"POST",headers:a,body:JSON.stringify(c)},m=await rT(()=>fetch(r,u));if(m.ok){const f=await m.json();return{fid:f.fid||s,registrationStatus:2,refreshToken:f.refreshToken,authToken:tT(f.authToken)}}else throw await sT("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C7(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T7=/^[cdef][\w-]{21}$/,Db="";function R7(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const s=D7(t);return T7.test(s)?s:Db}catch{return Db}}function D7(t){return C7(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Map;function lT(t,e){const s=Lg(t);oT(s,e),I7(s,e)}function oT(t,e){const s=iT.get(t);if(s)for(const r of s)r(e)}function I7(t,e){const s=k7();s&&s.postMessage({key:t,fid:e}),M7()}let Pl=null;function k7(){return!Pl&&"BroadcastChannel"in self&&(Pl=new BroadcastChannel("[Firebase] FID Change"),Pl.onmessage=t=>{oT(t.data.key,t.data.fid)}),Pl}function M7(){iT.size===0&&Pl&&(Pl.close(),Pl=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7="firebase-installations-database",O7=1,Ql="firebase-installations-store";let vx=null;function lv(){return vx||(vx=TS(P7,O7,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ql)}}})),vx}async function Hf(t,e){const s=Lg(t),a=(await lv()).transaction(Ql,"readwrite"),o=a.objectStore(Ql),c=await o.get(s);return await o.put(e,s),await a.done,(!c||c.fid!==e.fid)&&lT(t,e.fid),e}async function cT(t){const e=Lg(t),r=(await lv()).transaction(Ql,"readwrite");await r.objectStore(Ql).delete(e),await r.done}async function Vg(t,e){const s=Lg(t),a=(await lv()).transaction(Ql,"readwrite"),o=a.objectStore(Ql),c=await o.get(s),u=e(c);return u===void 0?await o.delete(s):await o.put(u,s),await a.done,u&&(!c||c.fid!==u.fid)&&lT(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov(t){let e;const s=await Vg(t.appConfig,r=>{const a=L7(r),o=V7(t,a);return e=o.registrationPromise,o.installationEntry});return s.fid===Db?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function L7(t){const e=t||{fid:R7(),registrationStatus:0};return dT(e)}function V7(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(Wl.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=U7(t,s);return{installationEntry:s,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:F7(t)}:{installationEntry:e}}async function U7(t,e){try{const s=await A7(t,e);return Hf(t.appConfig,s)}catch(s){throw JC(s)&&s.customData.serverCode===409?await cT(t.appConfig):await Hf(t.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function F7(t){let e=await iE(t.appConfig);for(;e.registrationStatus===1;)await aT(100),e=await iE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:r}=await ov(t);return r||s}return e}function iE(t){return Vg(t,e=>{if(!e)throw Wl.create("installation-not-found");return dT(e)})}function dT(t){return B7(t)?{fid:t.fid,registrationStatus:0}:t}function B7(t){return t.registrationStatus===1&&t.registrationTime+KC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H7({appConfig:t,heartbeatServiceProvider:e},s){const r=z7(t,s),a=E7(t,s),o=e.getImmediate({optional:!0});if(o){const f=await o.getHeartbeatsHeader();f&&a.append("x-firebase-client",f)}const c={installation:{sdkVersion:XC,appId:t.appId}},u={method:"POST",headers:a,body:JSON.stringify(c)},m=await rT(()=>fetch(r,u));if(m.ok){const f=await m.json();return tT(f)}else throw await sT("Generate Auth Token",m)}function z7(t,{fid:e}){return`${eT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(t,e=!1){let s;const r=await Vg(t.appConfig,o=>{if(!uT(o))throw Wl.create("not-registered");const c=o.authToken;if(!e&&G7(c))return o;if(c.requestStatus===1)return s=q7(t,e),o;{if(!navigator.onLine)throw Wl.create("app-offline");const u=Q7(o);return s=$7(t,u),u}});return s?await s:r.authToken}async function q7(t,e){let s=await lE(t.appConfig);for(;s.authToken.requestStatus===1;)await aT(100),s=await lE(t.appConfig);const r=s.authToken;return r.requestStatus===0?cv(t,e):r}function lE(t){return Vg(t,e=>{if(!uT(e))throw Wl.create("not-registered");const s=e.authToken;return Y7(s)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function $7(t,e){try{const s=await H7(t,e),r=Object.assign(Object.assign({},e),{authToken:s});return await Hf(t.appConfig,r),s}catch(s){if(JC(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await cT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Hf(t.appConfig,r)}throw s}}function uT(t){return t!==void 0&&t.registrationStatus===2}function G7(t){return t.requestStatus===2&&!W7(t)}function W7(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+v7}function Q7(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Y7(t){return t.requestStatus===1&&t.requestTime+KC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K7(t){const e=t,{installationEntry:s,registrationPromise:r}=await ov(e);return r?r.catch(console.error):cv(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X7(t,e=!1){const s=t;return await Z7(s),(await cv(s,e)).token}async function Z7(t){const{registrationPromise:e}=await ov(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J7(t){if(!t||!t.options)throw Nx("App Configuration");if(!t.name)throw Nx("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!t.options[s])throw Nx(s);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Nx(t){return Wl.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hT="installations",e9="installations-internal",t9=t=>{const e=t.getProvider("app").getImmediate(),s=J7(e),r=Vi(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},s9=t=>{const e=t.getProvider("app").getImmediate(),s=Vi(e,hT).getImmediate();return{getId:()=>K7(s),getToken:a=>X7(s,a)}};function n9(){sr(new qn(hT,t9,"PUBLIC")),sr(new qn(e9,s9,"PRIVATE"))}n9();rn(YC,iv);rn(YC,iv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zf="analytics",r9="firebase_id",a9="origin",i9=60*1e3,l9="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an=new hg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o9={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Nn=new so("analytics","Analytics",o9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c9(t){if(!t.startsWith(dv)){const e=Nn.create("invalid-gtag-resource",{gtagURL:t});return an.warn(e.message),""}return t}function mT(t){return Promise.all(t.map(e=>e.catch(s=>s)))}function d9(t,e){let s;return window.trustedTypes&&(s=window.trustedTypes.createPolicy(t,e)),s}function u9(t,e){const s=d9("firebase-js-sdk-policy",{createScriptURL:c9}),r=document.createElement("script"),a=`${dv}?l=${t}&id=${e}`;r.src=s?s==null?void 0:s.createScriptURL(a):a,r.async=!0,document.head.appendChild(r)}function h9(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function m9(t,e,s,r,a,o){const c=r[a];try{if(c)await e[c];else{const m=(await mT(s)).find(f=>f.measurementId===a);m&&await e[m.appId]}}catch(u){an.error(u)}t("config",a,o)}async function f9(t,e,s,r,a){try{let o=[];if(a&&a.send_to){let c=a.send_to;Array.isArray(c)||(c=[c]);const u=await mT(s);for(const m of c){const f=u.find(v=>v.measurementId===m),x=f&&e[f.appId];if(x)o.push(x);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,a||{})}catch(o){an.error(o)}}function g9(t,e,s,r){async function a(o,...c){try{if(o==="event"){const[u,m]=c;await f9(t,e,s,u,m)}else if(o==="config"){const[u,m]=c;await m9(t,e,s,r,u,m)}else if(o==="consent"){const[u,m]=c;t("consent",u,m)}else if(o==="get"){const[u,m,f]=c;t("get",u,m,f)}else if(o==="set"){const[u]=c;t("set",u)}else t(o,...c)}catch(u){an.error(u)}}return a}function p9(t,e,s,r,a){let o=function(...c){window[r].push(arguments)};return window[a]&&typeof window[a]=="function"&&(o=window[a]),window[a]=g9(o,t,e,s),{gtagCore:o,wrappedGtag:window[a]}}function x9(t){const e=window.document.getElementsByTagName("script");for(const s of Object.values(e))if(s.src&&s.src.includes(dv)&&s.src.includes(t))return s;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9=30,y9=1e3;class v9{constructor(e={},s=y9){this.throttleMetadata=e,this.intervalMillis=s}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,s){this.throttleMetadata[e]=s}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fT=new v9;function N9(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function w9(t){var e;const{appId:s,apiKey:r}=t,a={method:"GET",headers:N9(r)},o=l9.replace("{app-id}",s),c=await fetch(o,a);if(c.status!==200&&c.status!==304){let u="";try{const m=await c.json();!((e=m.error)===null||e===void 0)&&e.message&&(u=m.error.message)}catch{}throw Nn.create("config-fetch-failed",{httpStatus:c.status,responseMessage:u})}return c.json()}async function j9(t,e=fT,s){const{appId:r,apiKey:a,measurementId:o}=t.options;if(!r)throw Nn.create("no-app-id");if(!a){if(o)return{measurementId:o,appId:r};throw Nn.create("no-api-key")}const c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new S9;return setTimeout(async()=>{u.abort()},i9),gT({appId:r,apiKey:a,measurementId:o},c,u,e)}async function gT(t,{throttleEndTimeMillis:e,backoffCount:s},r,a=fT){var o;const{appId:c,measurementId:u}=t;try{await E9(r,e)}catch(m){if(u)return an.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:c,measurementId:u};throw m}try{const m=await w9(t);return a.deleteThrottleMetadata(c),m}catch(m){const f=m;if(!_9(f)){if(a.deleteThrottleMetadata(c),u)return an.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${u} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:c,measurementId:u};throw m}const x=Number((o=f==null?void 0:f.customData)===null||o===void 0?void 0:o.httpStatus)===503?I1(s,a.intervalMillis,b9):I1(s,a.intervalMillis),v={throttleEndTimeMillis:Date.now()+x,backoffCount:s+1};return a.setThrottleMetadata(c,v),an.debug(`Calling attemptFetch again in ${x} millis`),gT(t,v,r,a)}}function E9(t,e){return new Promise((s,r)=>{const a=Math.max(e-Date.now(),0),o=setTimeout(s,a);t.addEventListener(()=>{clearTimeout(o),r(Nn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function _9(t){if(!(t instanceof Gn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class S9{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function A9(t,e,s,r,a){if(a&&a.global){t("event",s,r);return}else{const o=await e,c=Object.assign(Object.assign({},r),{send_to:o});t("event",s,c)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C9(){if(_S())try{await SS()}catch(t){return an.warn(Nn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return an.warn(Nn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function T9(t,e,s,r,a,o,c){var u;const m=j9(t);m.then(N=>{s[N.measurementId]=N.appId,t.options.measurementId&&N.measurementId!==t.options.measurementId&&an.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>an.error(N)),e.push(m);const f=C9().then(N=>{if(N)return r.getId()}),[x,v]=await Promise.all([m,f]);x9(o)||u9(o,x.measurementId),a("js",new Date);const y=(u=c==null?void 0:c.config)!==null&&u!==void 0?u:{};return y[a9]="firebase",y.update=!0,v!=null&&(y[r9]=v),a("config",x.measurementId,y),x.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R9{constructor(e){this.app=e}_delete(){return delete Nu[this.app.options.appId],Promise.resolve()}}let Nu={},oE=[];const cE={};let wx="dataLayer",D9="gtag",dE,pT,uE=!1;function I9(){const t=[];if(ES()&&t.push("This is a browser extension environment."),S3()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,a)=>`(${a+1}) ${r}`).join(" "),s=Nn.create("invalid-analytics-context",{errorInfo:e});an.warn(s.message)}}function k9(t,e,s){I9();const r=t.options.appId;if(!r)throw Nn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)an.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Nn.create("no-api-key");if(Nu[r]!=null)throw Nn.create("already-exists",{id:r});if(!uE){h9(wx);const{wrappedGtag:o,gtagCore:c}=p9(Nu,oE,cE,wx,D9);pT=o,dE=c,uE=!0}return Nu[r]=T9(t,oE,cE,e,dE,wx,s),new R9(t)}function M9(t=mg()){t=Rt(t);const e=Vi(t,zf);return e.isInitialized()?e.getImmediate():P9(t)}function P9(t,e={}){const s=Vi(t,zf);if(s.isInitialized()){const a=s.getImmediate();if(ja(e,s.getOptions()))return a;throw Nn.create("already-initialized")}return s.initialize({options:e})}function O9(t,e,s,r){t=Rt(t),A9(pT,Nu[t.app.options.appId],e,s,r).catch(a=>an.error(a))}const hE="@firebase/analytics",mE="0.10.17";function L9(){sr(new qn(zf,(e,{options:s})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return k9(r,a,s)},"PUBLIC")),sr(new qn("analytics-internal",t,"PRIVATE")),rn(hE,mE),rn(hE,mE,"esm2017");function t(e){try{const s=e.getProvider(zf).getImmediate();return{logEvent:(r,a,o)=>O9(s,r,a,o)}}catch(s){throw Nn.create("interop-component-reg-failed",{reason:s})}}}L9();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="firebasestorage.googleapis.com",bT="storageBucket",V9=2*60*1e3,U9=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt extends Gn{constructor(e,s,r=0){super(jx(e),`Firebase Storage: ${s} (${jx(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return jx(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var zt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(zt||(zt={}));function jx(t){return"storage/"+t}function uv(){const t="An unknown error occurred, please check the error payload for server response.";return new qt(zt.UNKNOWN,t)}function F9(t){return new qt(zt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function B9(t){return new qt(zt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function H9(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qt(zt.UNAUTHENTICATED,t)}function z9(){return new qt(zt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function q9(t){return new qt(zt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function $9(){return new qt(zt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function G9(){return new qt(zt.CANCELED,"User canceled the upload/download.")}function W9(t){return new qt(zt.INVALID_URL,"Invalid URL '"+t+"'.")}function Q9(t){return new qt(zt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Y9(){return new qt(zt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bT+"' property when initializing the app?")}function K9(){return new qt(zt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function X9(){return new qt(zt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Z9(t){return new qt(zt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ib(t){return new qt(zt.INVALID_ARGUMENT,t)}function yT(){return new qt(zt.APP_DELETED,"The Firebase app was deleted.")}function J9(t){return new qt(zt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function wu(t,e){return new qt(zt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function au(t){throw new qt(zt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let r;try{r=bn.makeFromUrl(e,s)}catch{return new bn(e,"")}if(r.path==="")return r;throw Q9(e)}static makeFromUrl(e,s){let r=null;const a="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const c="(/(.*))?$",u=new RegExp("^gs://"+a+c,"i"),m={bucket:1,path:3};function f(z){z.path_=decodeURIComponent(z.path)}const x="v[A-Za-z0-9_]+",v=s.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",N=new RegExp(`^https?://${v}/${x}/b/${a}/o${y}`,"i"),w={bucket:1,path:3},E=s===xT?"(?:storage.googleapis.com|storage.cloud.google.com)":s,_="([^?#]*)",R=new RegExp(`^https?://${E}/${a}/${_}`,"i"),V=[{regex:u,indices:m,postModify:o},{regex:N,indices:w,postModify:f},{regex:R,indices:{bucket:1,path:2},postModify:f}];for(let z=0;z<V.length;z++){const F=V[z],P=F.regex.exec(e);if(P){const C=P[F.indices.bucket];let D=P[F.indices.path];D||(D=""),r=new bn(C,D),F.postModify(r);break}}if(r==null)throw W9(e);return r}}class eV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t,e,s){let r=1,a=null,o=null,c=!1,u=0;function m(){return u===2}let f=!1;function x(..._){f||(f=!0,e.apply(null,_))}function v(_){a=setTimeout(()=>{a=null,t(N,m())},_)}function y(){o&&clearTimeout(o)}function N(_,...R){if(f){y();return}if(_){y(),x.call(null,_,...R);return}if(m()||c){y(),x.call(null,_,...R);return}r<64&&(r*=2);let V;u===1?(u=2,V=0):V=(r+Math.random())*1e3,v(V)}let w=!1;function E(_){w||(w=!0,y(),!f&&(a!==null?(_||(u=2),clearTimeout(a),v(0)):_||(u=1)))}return v(0),o=setTimeout(()=>{c=!0,E(!0)},s),E}function sV(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){return t!==void 0}function rV(t){return typeof t=="object"&&!Array.isArray(t)}function hv(t){return typeof t=="string"||t instanceof String}function fE(t){return mv()&&t instanceof Blob}function mv(){return typeof Blob<"u"}function gE(t,e,s,r){if(r<e)throw Ib(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>s)throw Ib(`Invalid value for '${t}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e,s){let r=e;return s==null&&(r=`https://${e}`),`${s}://${r}/v0${t}`}function vT(t){const e=encodeURIComponent;let s="?";for(const r in t)if(t.hasOwnProperty(r)){const a=e(r)+"="+e(t[r]);s=s+a+"&"}return s=s.slice(0,-1),s}var Ll;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ll||(Ll={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(t,e){const s=t>=500&&t<600,a=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return s||a||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e,s,r,a,o,c,u,m,f,x,v,y=!0,N=!1){this.url_=e,this.method_=s,this.headers_=r,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=c,this.callback_=u,this.errorCallback_=m,this.timeout_=f,this.progressCallback_=x,this.connectionFactory_=v,this.retry=y,this.isUsingEmulator=N,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,E)=>{this.resolve_=w,this.reject_=E,this.start_()})}start_(){const e=(r,a)=>{if(a){r(!1,new Vm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const c=u=>{const m=u.loaded,f=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,f)};this.progressCallback_!==null&&o.addUploadProgressListener(c),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(c),this.pendingConnection_=null;const u=o.getErrorCode()===Ll.NO_ERROR,m=o.getStatus();if(!u||aV(m,this.additionalRetryCodes_)&&this.retry){const x=o.getErrorCode()===Ll.ABORT;r(!1,new Vm(!1,null,x));return}const f=this.successCodes_.indexOf(m)!==-1;r(!0,new Vm(f,o))})},s=(r,a)=>{const o=this.resolve_,c=this.reject_,u=a.connection;if(a.wasSuccessCode)try{const m=this.callback_(u,u.getResponse());nV(m)?o(m):o()}catch(m){c(m)}else if(u!==null){const m=uv();m.serverResponse=u.getErrorText(),this.errorCallback_?c(this.errorCallback_(u,m)):c(m)}else if(a.canceled){const m=this.appDelete_?yT():G9();c(m)}else{const m=$9();c(m)}};this.canceled_?s(!1,new Vm(!1,null,!0)):this.backoffId_=tV(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&sV(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vm{constructor(e,s,r){this.wasSuccessCode=e,this.connection=s,this.canceled=!!r}}function lV(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function oV(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function cV(t,e){e&&(t["X-Firebase-GMPID"]=e)}function dV(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function uV(t,e,s,r,a,o,c=!0,u=!1){const m=vT(t.urlParams),f=t.url+m,x=Object.assign({},t.headers);return cV(x,e),lV(x,s),oV(x,o),dV(x,r),new iV(f,t.method,x,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,a,c,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hV(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function mV(...t){const e=hV();if(e!==void 0){const s=new e;for(let r=0;r<t.length;r++)s.append(t[r]);return s.getBlob()}else{if(mv())return new Blob(t);throw new qt(zt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function fV(t,e,s){return t.webkitSlice?t.webkitSlice(e,s):t.mozSlice?t.mozSlice(e,s):t.slice?t.slice(e,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(t){if(typeof atob>"u")throw Z9("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ex{constructor(e,s){this.data=e,this.contentType=s||null}}function pV(t,e){switch(t){case Sr.RAW:return new Ex(NT(e));case Sr.BASE64:case Sr.BASE64URL:return new Ex(wT(t,e));case Sr.DATA_URL:return new Ex(bV(e),yV(e))}throw uv()}function NT(t){const e=[];for(let s=0;s<t.length;s++){let r=t.charCodeAt(s);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(s<t.length-1&&(t.charCodeAt(s+1)&64512)===56320))e.push(239,191,189);else{const o=r,c=t.charCodeAt(++s);r=65536|(o&1023)<<10|c&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function xV(t){let e;try{e=decodeURIComponent(t)}catch{throw wu(Sr.DATA_URL,"Malformed data URL.")}return NT(e)}function wT(t,e){switch(t){case Sr.BASE64:{const a=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(a||o)throw wu(t,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Sr.BASE64URL:{const a=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(a||o)throw wu(t,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=gV(e)}catch(a){throw a.message.includes("polyfill")?a:wu(t,"Invalid character found")}const r=new Uint8Array(s.length);for(let a=0;a<s.length;a++)r[a]=s.charCodeAt(a);return r}class jT{constructor(e){this.base64=!1,this.contentType=null;const s=e.match(/^data:([^,]+)?,/);if(s===null)throw wu(Sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=s[1]||null;r!=null&&(this.base64=vV(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function bV(t){const e=new jT(t);return e.base64?wT(Sr.BASE64,e.rest):xV(e.rest)}function yV(t){return new jT(t).contentType}function vV(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,s){let r=0,a="";fE(e)?(this.data_=e,r=e.size,a=e.type):e instanceof ArrayBuffer?(s?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(s?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,s){if(fE(this.data_)){const r=this.data_,a=fV(r,e,s);return a===null?null:new fi(a)}else{const r=new Uint8Array(this.data_.buffer,e,s-e);return new fi(r,!0)}}static getBlob(...e){if(mv()){const s=e.map(r=>r instanceof fi?r.data_:r);return new fi(mV.apply(null,s))}else{const s=e.map(c=>hv(c)?pV(Sr.RAW,c).data:c.data_);let r=0;s.forEach(c=>{r+=c.byteLength});const a=new Uint8Array(r);let o=0;return s.forEach(c=>{for(let u=0;u<c.length;u++)a[o++]=c[u]}),new fi(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t){let e;try{e=JSON.parse(t)}catch{return null}return rV(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function wV(t,e){const s=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?s:t+"/"+s}function _T(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(t,e){return e}class Gs{constructor(e,s,r,a){this.server=e,this.local=s||e,this.writable=!!r,this.xform=a||jV}}let Um=null;function EV(t){return!hv(t)||t.length<2?t:_T(t)}function ST(){if(Um)return Um;const t=[];t.push(new Gs("bucket")),t.push(new Gs("generation")),t.push(new Gs("metageneration")),t.push(new Gs("name","fullPath",!0));function e(o,c){return EV(c)}const s=new Gs("name");s.xform=e,t.push(s);function r(o,c){return c!==void 0?Number(c):c}const a=new Gs("size");return a.xform=r,t.push(a),t.push(new Gs("timeCreated")),t.push(new Gs("updated")),t.push(new Gs("md5Hash",null,!0)),t.push(new Gs("cacheControl",null,!0)),t.push(new Gs("contentDisposition",null,!0)),t.push(new Gs("contentEncoding",null,!0)),t.push(new Gs("contentLanguage",null,!0)),t.push(new Gs("contentType",null,!0)),t.push(new Gs("metadata","customMetadata",!0)),Um=t,Um}function _V(t,e){function s(){const r=t.bucket,a=t.fullPath,o=new bn(r,a);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:s})}function SV(t,e,s){const r={};r.type="file";const a=s.length;for(let o=0;o<a;o++){const c=s[o];r[c.local]=c.xform(r,e[c.server])}return _V(r,t),r}function AT(t,e,s){const r=ET(e);return r===null?null:SV(t,r,s)}function AV(t,e,s,r){const a=ET(e);if(a===null||!hv(a.downloadTokens))return null;const o=a.downloadTokens;if(o.length===0)return null;const c=encodeURIComponent;return o.split(",").map(f=>{const x=t.bucket,v=t.fullPath,y="/b/"+c(x)+"/o/"+c(v),N=Ug(y,s,r),w=vT({alt:"media",token:f});return N+w})[0]}function CV(t,e){const s={},r=e.length;for(let a=0;a<r;a++){const o=e[a];o.writable&&(s[o.server]=t[o.local])}return JSON.stringify(s)}class fv{constructor(e,s,r,a){this.url=e,this.method=s,this.handler=r,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){if(!t)throw uv()}function TV(t,e){function s(r,a){const o=AT(t,a,e);return CT(o!==null),o}return s}function RV(t,e){function s(r,a){const o=AT(t,a,e);return CT(o!==null),AV(o,a,t.host,t._protocol)}return s}function TT(t){function e(s,r){let a;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?a=z9():a=H9():s.getStatus()===402?a=B9(t.bucket):s.getStatus()===403?a=q9(t.path):a=r,a.status=s.getStatus(),a.serverResponse=r.serverResponse,a}return e}function RT(t){const e=TT(t);function s(r,a){let o=e(r,a);return r.getStatus()===404&&(o=F9(t.path)),o.serverResponse=a.serverResponse,o}return s}function DV(t,e,s){const r=e.fullServerUrl(),a=Ug(r,t.host,t._protocol),o="GET",c=t.maxOperationRetryTime,u=new fv(a,o,RV(t,s),c);return u.errorHandler=RT(e),u}function IV(t,e){const s=e.fullServerUrl(),r=Ug(s,t.host,t._protocol),a="DELETE",o=t.maxOperationRetryTime;function c(m,f){}const u=new fv(r,a,c,o);return u.successCodes=[200,204],u.errorHandler=RT(e),u}function kV(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function MV(t,e,s){const r=Object.assign({},s);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=kV(null,e)),r}function PV(t,e,s,r,a){const o=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"};function u(){let V="";for(let z=0;z<2;z++)V=V+Math.random().toString().slice(2);return V}const m=u();c["Content-Type"]="multipart/related; boundary="+m;const f=MV(e,r,a),x=CV(f,s),v="--"+m+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+x+`\r
--`+m+`\r
Content-Type: `+f.contentType+`\r
\r
`,y=`\r
--`+m+"--",N=fi.getBlob(v,r,y);if(N===null)throw K9();const w={name:f.fullPath},E=Ug(o,t.host,t._protocol),_="POST",R=t.maxUploadRetryTime,I=new fv(E,_,TV(t,s),R);return I.urlParams=w,I.headers=c,I.body=N.uploadData(),I.errorHandler=TT(e),I}class OV{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ll.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ll.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ll.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,s,r,a,o){if(this.sent_)throw au("cannot .send() more than once");if(Li(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(s,e,!0),o!==void 0)for(const c in o)o.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,o[c].toString());return a!==void 0?this.xhr_.send(a):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw au("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw au("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw au("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw au("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class LV extends OV{initXhr(){this.xhr_.responseType="text"}}function gv(){return new LV}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,s){this._service=e,s instanceof bn?this._location=s:this._location=bn.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new Yl(e,s)}get root(){const e=new bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return _T(this._location.path)}get storage(){return this._service}get parent(){const e=NV(this._location.path);if(e===null)return null;const s=new bn(this._location.bucket,e);return new Yl(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw J9(e)}}function VV(t,e,s){t._throwIfRoot("uploadBytes");const r=PV(t.storage,t._location,ST(),new fi(e,!0),s);return t.storage.makeRequestWithTokens(r,gv).then(a=>({metadata:a,ref:t}))}function UV(t){t._throwIfRoot("getDownloadURL");const e=DV(t.storage,t._location,ST());return t.storage.makeRequestWithTokens(e,gv).then(s=>{if(s===null)throw X9();return s})}function FV(t){t._throwIfRoot("deleteObject");const e=IV(t.storage,t._location);return t.storage.makeRequestWithTokens(e,gv)}function BV(t,e){const s=wV(t._location.path,e),r=new bn(t._location.bucket,s);return new Yl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HV(t){return/^[A-Za-z]+:\/\//.test(t)}function zV(t,e){return new Yl(t,e)}function DT(t,e){if(t instanceof pv){const s=t;if(s._bucket==null)throw Y9();const r=new Yl(s,s._bucket);return e!=null?DT(r,e):r}else return e!==void 0?BV(t,e):t}function qV(t,e){if(e&&HV(e)){if(t instanceof pv)return zV(t,e);throw Ib("To use ref(service, url), the first argument must be a Storage instance.")}else return DT(t,e)}function pE(t,e){const s=e==null?void 0:e[bT];return s==null?null:bn.makeFromBucketSpec(s,t)}function $V(t,e,s,r={}){t.host=`${e}:${s}`;const a=Li(e);a&&(dy(`https://${t.host}/b`),uy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=a?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:jS(o,t.app.options.projectId))}class pv{constructor(e,s,r,a,o,c=!1){this.app=e,this._authProvider=s,this._appCheckProvider=r,this._url=a,this._firebaseVersion=o,this._isUsingEmulator=c,this._bucket=null,this._host=xT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=V9,this._maxUploadRetryTime=U9,this._requests=new Set,a!=null?this._bucket=bn.makeFromBucketSpec(a,this._host):this._bucket=pE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=bn.makeFromBucketSpec(this._url,e):this._bucket=pE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){if(tn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Yl(this,e)}_makeRequest(e,s,r,a,o=!0){if(this._deleted)return new eV(yT());{const c=uV(e,this._appId,r,a,s,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}async makeRequestWithTokens(e,s){const[r,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,r,a).getPromise()}}const xE="@firebase/storage",bE="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="storage";function Fg(t,e,s){return t=Rt(t),VV(t,e,s)}function Bg(t){return t=Rt(t),UV(t)}function kb(t){return t=Rt(t),FV(t)}function Vl(t,e){return t=Rt(t),qV(t,e)}function GV(t=mg(),e){t=Rt(t);const r=Vi(t,IT).getImmediate({identifier:e}),a=vS("storage");return a&&WV(r,...a),r}function WV(t,e,s,r={}){$V(t,e,s,r)}function QV(t,{instanceIdentifier:e}){const s=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new pv(s,r,a,e,no)}function YV(){sr(new qn(IT,QV,"PUBLIC").setMultipleInstances(!0)),rn(xE,bE,""),rn(xE,bE,"esm2017")}YV();const KV={apiKey:"AIzaSyDEtoqDG8DhMUeNYUQUBhRgAeeT8jDE21U",authDomain:"sysmedic-71cec.firebaseapp.com",projectId:"sysmedic-71cec",storageBucket:"sysmedic-71cec.firebasestorage.app",messagingSenderId:"931211159804",appId:"1:931211159804:web:7135cd56c80a5c9ab78f79",measurementId:"G-8LL8MFX15E"},Hg=RS(KV);M9(Hg);const Ul=GV(Hg),ne=s7(Hg),ya=iO(Hg),kT=S.createContext(),wt=()=>{const t=S.useContext(kT);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},XV=({children:t})=>{const[e,s]=S.useState(null),[r,a]=S.useState(null),[o,c]=S.useState(!0);S.useEffect(()=>(()=>{const v=localStorage.getItem("superadmin_session");if(v)try{const y=JSON.parse(v);if(y.email==="superadmin@sismedic.com"&&y.role==="superadmin")return s({email:y.email,uid:"superadmin"}),a("superadmin"),c(!1),!0}catch{localStorage.removeItem("superadmin_session")}return!1})()?void 0:QM(ya,async v=>{if(v)try{const y=await Ke(we(ne,"usuarios",v.uid));if(y.exists()){const N=y.data();s({...v,clinicId:N.clinicId||null,clinicName:N.clinicName||null}),a(N.rol)}else{const N=await Ke(we(ne,"saas_users",v.uid));if(N.exists()){const w=N.data();w.status==="pending_approval"?(s(v),a("pending_approval")):w.status==="active"?(s({...v,clinicId:w.clinicId||null,clinicName:w.clinicName||null}),a("admin")):(s(null),a(null))}else{const w=await Ke(we(ne,"pacientes",v.uid));if(w.exists()){const E=w.data();s({...v,patientId:v.uid,clinicId:E.clinicId||null,clinicName:E.clinicName||null}),a("paciente")}else s(null),a(null)}}}catch(y){console.error("Error fetching user role:",y),s(null),a(null)}else s(null),a(null);c(!1)}),[]);const m={user:e,userRole:r,loading:o,logout:async()=>{try{localStorage.removeItem("superadmin_session"),ya.currentUser&&await YM(ya),s(null),a(null)}catch(f){console.error("Error signing out:",f)}}};return n.jsx(kT.Provider,{value:m,children:t})};function ZV({children:t}){const{user:e,userRole:s,loading:r}=wt();return r?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Cargando..."})]})}):e?s==="pending_approval"?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:n.jsxs("div",{className:"max-w-md mx-auto text-center p-8 bg-white rounded-lg shadow-lg",children:[n.jsx("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cuenta Pendiente"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Tu cuenta está pendiente de aprobación. Un administrador revisará tu solicitud pronto."}),n.jsx("button",{onClick:()=>window.location.href="/login",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver al Login"})]})}):t:n.jsx(rc,{to:"/login",replace:!0})}function JV({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"}))}const Mb=S.forwardRef(JV);function eU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const tU=S.forwardRef(eU);function sU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const nU=S.forwardRef(sU);function rU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.25 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0Z"}))}const aU=S.forwardRef(rU);function iU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const pc=S.forwardRef(iU);function lU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const oU=S.forwardRef(lU);function cU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const yE=S.forwardRef(cU);function dU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const uU=S.forwardRef(dU);function hU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const mU=S.forwardRef(hU);function fU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Lu=S.forwardRef(fU);function gU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const xc=S.forwardRef(gU);function pU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const xU=S.forwardRef(pU);function bU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"}))}const vE=S.forwardRef(bU);function yU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const vU=S.forwardRef(yU);function NU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"}))}const MT=S.forwardRef(NU);function wU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"}))}const jU=S.forwardRef(wU);function EU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Fm=S.forwardRef(EU);function _U({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Pb=S.forwardRef(_U);function SU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))}const AU=S.forwardRef(SU);function CU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const TU=S.forwardRef(CU);function RU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"}))}const DU=S.forwardRef(RU);function IU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const NE=S.forwardRef(IU);function kU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"}))}const MU=S.forwardRef(kU);function PU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const OU=S.forwardRef(PU);function LU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const VU=S.forwardRef(LU);function UU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const FU=S.forwardRef(UU);function BU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const _i=S.forwardRef(BU);function HU({title:t,titleId:e,...s},r){return S.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},s),t?S.createElement("title",{id:e},t):null,S.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"}))}const wE=S.forwardRef(HU),zU=()=>{const{userRole:t,logout:e}=wt(),s=Or(),[r,a]=S.useState(!1),o=E=>s.pathname===E||s.pathname.startsWith(E+"/"),c=[{name:"Dashboard",href:"/admin/dashboard",icon:Fm},{name:"Doctores",href:"/admin/doctores",icon:_i},{name:"Especialidades",href:"/admin/especialidades",icon:Mb},{name:"Usuarios",href:"/admin/usuarios",icon:FU}],u=[{name:"Dashboard",href:"/doctor/dashboard",icon:Fm},{name:"Mi Perfil",href:"/doctor/perfil",icon:_i},{name:"Mis Citas",href:"/doctor/citas",icon:pc},{name:"Historia Clínica",href:"/doctor/historia-clinica",icon:xc}],m=[{name:"Dashboard",href:"/recepcion/dashboard",icon:Fm},{name:"Pacientes",href:"/recepcion/pacientes",icon:wE},{name:"Citas",href:"/recepcion/citas",icon:pc},{name:"Horarios",href:"/recepcion/horarios",icon:Lu},{name:"Triaje",href:"/recepcion/triaje",icon:xc}],f=[{name:"Dashboard",href:"/patient/dashboard",icon:Fm},{name:"Mis Citas",href:"/patient/citas",icon:pc},{name:"Historia Clínica",href:"/patient/historia-clinica",icon:xc},{name:"Mis Doctores",href:"/patient/doctores",icon:_i},{name:"Mi Perfil",href:"/patient/perfil",icon:wE}],v=(()=>{switch(t){case"admin":return c;case"doctor":return u;case"recepcion":return m;case"paciente":return f;default:return[]}})(),y=()=>{a(!r)},N=()=>{switch(t){case"admin":return"text-purple-600 bg-purple-50 border-purple-200";case"doctor":return"text-green-600 bg-green-50 border-green-200";case"recepcion":return"text-blue-600 bg-blue-50 border-blue-200";case"patient":return"text-orange-600 bg-orange-50 border-orange-200";default:return"text-blue-600 bg-blue-50 border-blue-200"}},w=()=>{switch(t){case"admin":return"Administrador";case"doctor":return"Doctor";case"recepcion":return"Recepción";case"paciente":return"Paciente";default:return t}};return n.jsxs("div",{className:`bg-white border-r-2 border-blue-100 text-gray-700 transition-all duration-300 ease-in-out flex flex-col shadow-xl ${r?"w-20":"w-72"}`,style:{minHeight:"100vh"},children:[n.jsx("div",{className:"p-6 border-b-2 border-blue-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:`transition-opacity duration-300 ${r?"opacity-0":"opacity-100"}`,children:!r&&n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:[n.jsx("img",{src:"/placeholder.svg?height=32&width=32&text=LOGO",alt:"SISMEDIC Logo",className:"w-8 h-8 object-contain",onError:E=>{E.target.style.display="none",E.target.nextSibling.style.display="block"}}),n.jsx("span",{className:"text-white font-bold text-lg hidden",children:"S"})]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold text-blue-800",children:"SISMEDIC"}),n.jsx("div",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border ${N()}`,children:w()})]})]})}),n.jsx("button",{onClick:y,className:"p-2 rounded-lg hover:bg-blue-100 transition-colors duration-200 text-blue-600 hover:text-blue-700",children:r?n.jsx(mU,{className:"h-5 w-5"}):n.jsx(uU,{className:"h-5 w-5"})})]})}),n.jsx("nav",{className:"flex-1 p-4 space-y-2 bg-gradient-to-b from-white to-gray-50",children:v.map((E,_)=>{const R=E.icon,I=o(E.href);return n.jsxs(Os,{to:E.href,className:`group flex items-center space-x-3 p-3 rounded-xl transition-all duration-200 transform hover:scale-105 ${I?"bg-blue-600 text-white shadow-lg border-l-4 border-blue-800":"text-gray-600 hover:bg-blue-50 hover:text-blue-700 hover:shadow-md"}`,style:{animationDelay:`${_*50}ms`},children:[n.jsx(R,{className:`h-5 w-5 transition-all duration-200 ${I?"text-white scale-110":"text-gray-500 group-hover:text-blue-600 group-hover:scale-110"}`}),n.jsx("span",{className:`font-medium transition-all duration-300 ${r?"opacity-0 w-0":"opacity-100"}`,children:E.name}),I&&!r&&n.jsxs("div",{className:"ml-auto flex items-center space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-pulse"}),n.jsx("div",{className:"w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0.5s"}})]})]},E.name)})}),!r&&n.jsx("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-blue-50 border-t border-blue-100",children:n.jsxs("div",{className:"flex items-center space-x-3 p-3 rounded-lg bg-white shadow-sm border border-blue-100",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-white font-semibold text-sm",children:t==null?void 0:t.charAt(0).toUpperCase()})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-gray-800 truncate",children:"Usuario Activo"}),n.jsx("p",{className:"text-xs text-gray-500 truncate",children:w()})]}),n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})}),n.jsx("div",{className:"p-4 border-t-2 border-blue-100 bg-gradient-to-r from-gray-50 to-red-50",children:n.jsxs("button",{onClick:e,className:"group flex items-center space-x-3 p-3 rounded-xl text-gray-600 hover:bg-red-100 hover:text-red-600 transition-all duration-200 w-full transform hover:scale-105 border border-transparent hover:border-red-200",children:[n.jsx(nU,{className:"h-5 w-5 transition-all duration-200 group-hover:scale-110"}),n.jsx("span",{className:`font-medium transition-all duration-300 ${r?"opacity-0 w-0":"opacity-100"}`,children:"Cerrar Sesión"})]})}),r&&n.jsx("div",{className:"absolute top-6 left-1/2 transform -translate-x-1/2",children:n.jsxs("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center shadow-lg",children:[n.jsx("img",{src:"/placeholder.svg?height=24&width=24&text=LOGO",alt:"SISMEDIC Logo",className:"w-6 h-6 object-contain",onError:E=>{E.target.style.display="none",E.target.nextSibling.style.display="block"}}),n.jsx("span",{className:"text-white font-bold text-sm hidden",children:"S"})]})})]})};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),$U=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,r)=>r?r.toUpperCase():s.toLowerCase()),jE=t=>{const e=$U(t);return e.charAt(0).toUpperCase()+e.slice(1)},PT=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim(),GU=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var WU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:c,...u},m)=>S.createElement("svg",{ref:m,...WU,width:e,height:e,stroke:t,strokeWidth:r?Number(s)*24/Number(e):s,className:PT("lucide",a),...!o&&!GU(u)&&{"aria-hidden":"true"},...u},[...c.map(([f,x])=>S.createElement(f,x)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const s=S.forwardRef(({className:r,...a},o)=>S.createElement(QU,{ref:o,iconNode:e,className:PT(`lucide-${qU(jE(t))}`,`lucide-${t}`,r),...a}));return s.displayName=jE(t),s};/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YU=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Us=_e("activity",YU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],$t=_e("arrow-left",KU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XU=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_x=_e("arrow-right",XU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ob=_e("bell",ZU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],zg=_e("brain",JU);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eF=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],tF=_e("briefcase",eF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sF=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],EE=_e("building-2",sF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nF=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],yn=_e("building",nF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rF=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],xv=_e("calculator",rF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"m9 16 2 2 4-4",key:"19s6y9"}]],iF=_e("calendar-check",aF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],oF=_e("calendar-days",lF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cF=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],lt=_e("calendar",cF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dF=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],OT=_e("camera",dF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uF=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Lb=_e("chart-column",uF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hF=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mF=_e("check",hF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]],gF=_e("chrome",fF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Kl=_e("circle-alert",pF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_t=_e("circle-check-big",xF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],ha=_e("circle-x",bF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ms=_e("clock",yF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vF=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],qf=_e("copy",vF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],LT=_e("credit-card",NF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],As=_e("crown",wF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Tt=_e("database",jF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],_F=_e("dollar-sign",EF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],AF=_e("download",SF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Ca=_e("eye-off",CF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ys=_e("eye",TF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["circle",{cx:"10",cy:"12",r:"2",key:"737tya"}],["path",{d:"m20 17-1.296-1.296a2.41 2.41 0 0 0-3.408 0L9 22",key:"wt3hpn"}]],DF=_e("file-image",RF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rs=_e("file-text",IF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Cc=_e("funnel",kF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],PF=_e("globe",MF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],LF=_e("graduation-cap",OF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Ir=_e("heart",VF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],FF=_e("info",UF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BF=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],HF=_e("key",BF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],$f=_e("loader-circle",zF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],xi=_e("lock",qF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],lo=_e("mail",$F);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GF=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],qg=_e("map-pin",GF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],QF=_e("message-circle",WF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YF=[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]],KF=_e("pen-line",YF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XF=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Mr=_e("phone",XF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZF=[["path",{d:"m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z",key:"wa1lgi"}],["path",{d:"m8.5 8.5 7 7",key:"rvfmvr"}]],JF=_e("pill",ZF);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ta=_e("plus",eB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],hf=_e("refresh-cw",tB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],fs=_e("save",sB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],vn=_e("search",nB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],$g=_e("settings",rB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],qe=_e("shield",aB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iB=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Vb=_e("smartphone",iB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],oB=_e("sparkles",lB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cB=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Hn=_e("square-pen",cB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],uB=_e("star",dB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hB=[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]],ot=_e("stethoscope",hB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["path",{d:"M15 18H3",key:"olowqp"}],["path",{d:"M17 6H3",key:"16j9eg"}],["path",{d:"M21 12H3",key:"2avoz0"}]],fB=_e("text",mB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Ra=_e("trash-2",gB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pB=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Tc=_e("trending-up",pB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rc=_e("triangle-alert",xB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],bv=_e("upload",bB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Xl=_e("user-check",yB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],mf=_e("user-plus",vB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NB=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],He=_e("user",NB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Lt=_e("users",wB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],VT=_e("x",jB);/**
 * @license lucide-react v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],_B=_e("zap",EB),SB=({children:t})=>{var o;const{user:e,userRole:s}=wt();if(!e)return t;const r=()=>{const c=new Date().getHours();return c<12?"Buenos días":c<18?"Buenas tardes":"Buenas noches"},a=()=>new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return n.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[n.jsx(zU,{}),n.jsxs("div",{className:"flex-1 flex flex-col",children:[n.jsxs("header",{className:"bg-white shadow-lg border-b-2 border-blue-100",children:[n.jsx("div",{className:"h-1 bg-gradient-to-r from-blue-500 via-indigo-500 to-blue-600"}),n.jsx("div",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("div",{className:"flex items-center space-x-6",children:n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Sistema de Gestión Médica"}),n.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(lt,{className:"w-4 h-4 mr-1 text-blue-500"}),a()]}),n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx(ms,{className:"w-4 h-4 mr-1 text-indigo-500"}),new Date().toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})]})]})]})}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"hidden md:flex items-center bg-gray-50 rounded-lg px-3 py-2 border border-gray-200 focus-within:border-blue-300 focus-within:ring-2 focus-within:ring-blue-100",children:[n.jsx(vn,{className:"w-4 h-4 text-gray-400 mr-2"}),n.jsx("input",{type:"text",placeholder:"Buscar paciente...",className:"bg-transparent text-sm text-gray-700 placeholder-gray-400 focus:outline-none w-48"})]}),n.jsxs("button",{className:"relative p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-all duration-200",children:[n.jsx(Ob,{className:"w-5 h-5"}),n.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse"})]}),n.jsx("button",{className:"p-2 text-gray-600 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200",children:n.jsx($g,{className:"w-5 h-5"})}),n.jsx("div",{className:"w-px h-8 bg-gray-300"}),n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-800",children:[r(),", ",(o=e==null?void 0:e.email)==null?void 0:o.split("@")[0]]}),n.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[n.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${s==="admin"?"bg-purple-100 text-purple-800":s==="doctor"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:s==="admin"?"Administrador":s==="doctor"?"Doctor":"Recepción"}),n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-full flex items-center justify-center shadow-lg ring-2 ring-white",children:n.jsx(He,{className:"w-5 h-5 text-white"})}),n.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full border-2 border-white"})]})]})]})]})})]}),n.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-3 border-b border-blue-100",children:n.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[n.jsx("span",{className:"font-medium text-blue-600",children:"Inicio"}),n.jsx("span",{className:"mx-2 text-gray-400",children:"/"}),n.jsx("span",{className:"text-gray-500",children:"Panel de Control"})]})}),n.jsx("main",{className:"flex-1 p-6 overflow-auto bg-gray-50",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 min-h-[calc(100vh-200px)]",children:n.jsx("div",{className:"p-6",children:t})})})}),n.jsx("footer",{className:"bg-white border-t border-gray-200 px-6 py-3",children:n.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[n.jsx("div",{children:"© 2024 Sistema Médico. Todos los derechos reservados."}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("span",{children:"Versión 1.0"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"}),n.jsx("span",{children:"Sistema Activo"})]})]})]})})]})]})};function AB(){const[t,e]=S.useState(""),[s,r]=S.useState(""),[a,o]=S.useState(!1),[c,u]=S.useState(!1),[m,f]=S.useState(new Date),x=Je(),v="superadmin@sismedic.com",y="agojun14061708!";S.useEffect(()=>{const R=setInterval(()=>{f(new Date)},1e3);return()=>clearInterval(R)},[]);const N=async R=>{R.preventDefault(),u(!0);try{if(t===v&&s===y){W.success("¡Bienvenido SuperAdmin! 👑"),localStorage.setItem("superadmin_session",JSON.stringify({email:v,role:"superadmin",loginTime:new Date().toISOString()})),x("/dashboard/super-admin"),u(!1);return}const V=(await qM(ya,t,s)).user.uid,z=await Ke(we(ne,"usuarios",V));if(z.exists()){const P=z.data().rol,C={admin:"¡Bienvenido Administrador! 🏥",recepcion:"¡Bienvenida Recepcionista! 📋",doctor:"¡Bienvenido Doctor! 👨‍⚕️",paciente:"¡Bienvenido Paciente! 🩺"};switch(W.success(C[P]||"¡Bienvenido al Sistema Médico!"),P){case"admin":x("/dashboard/admin");break;case"recepcion":x("/dashboard/recepcion");break;case"doctor":x("/dashboard/doctor");break;case"paciente":x("/patient/dashboard");break;default:W.error("Rol no reconocido."),console.error("Unknown role:",P)}}else{const F=await Ke(we(ne,"saas_users",V));if(F.exists()){const P=F.data();P.status==="pending_approval"?W.error("Tu cuenta está pendiente de aprobación. Por favor espera a que un administrador apruebe tu solicitud."):P.status==="active"?(W.success("¡Bienvenido al Sistema Médico!"),x("/dashboard/admin")):W.error("Tu cuenta ha sido rechazada. Contacta al soporte.")}else W.error("Usuario no registrado correctamente.")}}catch(I){console.error("Error:",I),I.code==="auth/user-not-found"||I.code==="auth/wrong-password"?W.error("Correo o contraseña incorrectos."):I.code==="auth/too-many-requests"?W.error("Demasiados intentos fallidos. Intenta más tarde."):W.error("Error al iniciar sesión. Intenta nuevamente.")}finally{u(!1)}},w=()=>{const R=m.getHours();return R<12?"Buenos días":R<18?"Buenas tardes":"Buenas noches"},E=t===v,_=t.includes("@sismedic.com")&&!E;return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center px-4 py-12",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100 rounded-full opacity-20 animate-pulse"}),n.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100 rounded-full opacity-20 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute top-1/2 left-1/4 w-32 h-32 bg-green-100 rounded-full opacity-10 animate-bounce"}),E&&n.jsx("div",{className:"absolute top-1/3 right-1/3 w-24 h-24 bg-yellow-100 rounded-full opacity-20 animate-pulse delay-500"}),_&&n.jsx("div",{className:"absolute top-1/4 right-1/4 w-20 h-20 bg-green-100 rounded-full opacity-20 animate-pulse delay-300"})]}),n.jsxs("div",{className:`relative bg-white/90 backdrop-blur-md shadow-2xl rounded-3xl overflow-hidden w-full max-w-6xl flex flex-col lg:flex-row border ${E?"border-yellow-200 shadow-yellow-100":_?"border-green-200 shadow-green-100":"border-blue-100"}`,children:[n.jsxs("div",{className:`w-full lg:w-1/2 ${E?"bg-gradient-to-br from-yellow-600 via-orange-600 to-red-700":_?"bg-gradient-to-br from-green-600 via-emerald-700 to-teal-800":"bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800"} relative flex items-center justify-center p-8 lg:p-12`,children:[n.jsxs("div",{className:"absolute inset-0 opacity-10",children:[n.jsx("div",{className:"absolute top-10 left-10",children:E?n.jsx(As,{className:"w-16 h-16 text-white animate-pulse"}):_?n.jsx(He,{className:"w-16 h-16 text-white animate-pulse"}):n.jsx(ot,{className:"w-16 h-16 text-white animate-pulse"})}),n.jsx("div",{className:"absolute top-32 right-16",children:n.jsx(Ir,{className:"w-12 h-12 text-white animate-pulse delay-500"})}),n.jsx("div",{className:"absolute bottom-20 left-16",children:n.jsx(Us,{className:"w-14 h-14 text-white animate-pulse delay-1000"})}),n.jsx("div",{className:"absolute bottom-32 right-10",children:n.jsx(qe,{className:"w-10 h-10 text-white animate-pulse delay-700"})}),E&&n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:n.jsx(As,{className:"w-20 h-20 text-white animate-pulse delay-300"})}),_&&n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:n.jsx(He,{className:"w-20 h-20 text-white animate-pulse delay-300"})})]}),n.jsxs("div",{className:"relative z-10 text-center text-white",children:[n.jsx("div",{className:"mb-8 flex justify-center",children:n.jsx("div",{className:`w-24 h-24 ${E?"bg-yellow-500/30 border-yellow-300/50":_?"bg-green-500/30 border-green-300/50":"bg-white/20 border-white/30"} rounded-2xl flex items-center justify-center backdrop-blur-sm border`,children:E?n.jsx(As,{className:"w-16 h-16 text-yellow-200"}):_?n.jsx(He,{className:"w-16 h-16 text-green-200"}):n.jsxs(n.Fragment,{children:[n.jsx("img",{src:"/logo-sismedic.png",alt:"Logo SisMedic",className:"w-16 h-16 object-contain",onError:R=>{R.target.style.display="none",R.target.nextSibling.style.display="flex"}}),n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-xl items-center justify-center text-2xl font-bold hidden",children:"S"})]})})}),n.jsx("h1",{className:`text-4xl lg:text-5xl font-bold mb-4 ${E?"bg-gradient-to-r from-yellow-200 to-orange-100":_?"bg-gradient-to-r from-green-200 to-emerald-100":"bg-gradient-to-r from-white to-blue-100"} bg-clip-text text-transparent`,children:E?"SuperAdmin":_?"Portal Paciente":"SisMedic"}),n.jsx("p",{className:`text-xl lg:text-2xl mb-6 ${E?"text-yellow-100":_?"text-green-100":"text-blue-100"} font-medium`,children:E?"Panel de Control Maestro":_?"Tu Salud en Tus Manos":"Sistema de Gestión Médica"}),n.jsx("div",{className:`space-y-4 ${E?"text-yellow-100":_?"text-green-100":"text-blue-100"}`,children:E?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(As,{className:"w-5 h-5"}),n.jsx("span",{children:"Control total del SaaS"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(qe,{className:"w-5 h-5"}),n.jsx("span",{children:"Gestión de solicitudes"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(Us,{className:"w-5 h-5"}),n.jsx("span",{children:"Métricas y estadísticas"})]})]}):_?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(He,{className:"w-5 h-5"}),n.jsx("span",{children:"Acceso a tu información médica"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(Ir,{className:"w-5 h-5"}),n.jsx("span",{children:"Historial clínico personal"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(Us,{className:"w-5 h-5"}),n.jsx("span",{children:"Seguimiento de citas"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(ot,{className:"w-5 h-5"}),n.jsx("span",{children:"Gestión integral de pacientes"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(Ir,{className:"w-5 h-5"}),n.jsx("span",{children:"Historias clínicas digitales"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(Us,{className:"w-5 h-5"}),n.jsx("span",{children:"Seguimiento médico completo"})]})]})}),n.jsxs("div",{className:`mt-8 p-4 ${E?"bg-yellow-500/20 border-yellow-300/30":_?"bg-green-500/20 border-green-300/30":"bg-white/10 border-white/20"} rounded-xl backdrop-blur-sm border`,children:[n.jsxs("p",{className:`text-sm ${E?"text-yellow-100":_?"text-green-100":"text-blue-100"}`,children:[w(),","," ",E?"bienvenido al control maestro":_?"accede a tu portal personal":"bienvenido al futuro de la medicina digital"]}),n.jsx("p",{className:`text-xs ${E?"text-yellow-200":_?"text-green-200":"text-blue-200"} mt-1`,children:m.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]}),n.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 lg:p-12",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 ${E?"bg-gradient-to-br from-yellow-500 to-orange-600":_?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-blue-500 to-indigo-600"} rounded-2xl mb-4 shadow-lg`,children:E?n.jsx(As,{className:"w-8 h-8 text-white"}):_?n.jsx(He,{className:"w-8 h-8 text-white"}):n.jsx(qe,{className:"w-8 h-8 text-white"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:E?"SuperAdmin":_?"Portal Paciente":"Iniciar Sesión"}),n.jsx("p",{className:"text-gray-600",children:E?"Acceso al panel maestro":_?"Accede a tu información médica":"Accede a tu cuenta profesional"})]}),E&&n.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(As,{className:"w-4 h-4 text-yellow-600"}),n.jsx("span",{className:"text-sm font-semibold text-yellow-800",children:"Modo SuperAdmin Detectado"})]}),n.jsx("p",{className:"text-xs text-yellow-700",children:"Acceso completo al sistema de gestión SaaS"})]}),_&&!E&&n.jsxs("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[n.jsx(He,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-sm font-semibold text-green-800",children:"Portal del Paciente"})]}),n.jsx("p",{className:"text-xs text-green-700",children:"Acceso a tu información médica personal"})]}),n.jsxs("form",{onSubmit:N,className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Correo Electrónico"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"email",type:"email",value:t,onChange:R=>e(R.target.value),placeholder:E?"superadmin@sismedic.com":_?"paciente@sismedic.com":"doctor@sismedic.com",required:!0,className:`w-full px-4 py-3 border-2 ${E?"border-yellow-200 focus:border-yellow-500 focus:ring-yellow-100":_?"border-green-200 focus:border-green-500 focus:ring-green-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} rounded-xl focus:outline-none focus:ring-4 transition-all duration-200 bg-gray-50 focus:bg-white`}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx("div",{className:`w-2 h-2 ${E?"bg-yellow-400":"bg-green-400"} rounded-full animate-pulse`})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Contraseña"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"password",type:a?"text":"password",value:s,onChange:R=>r(R.target.value),placeholder:"••••••••",required:!0,className:`w-full px-4 py-3 pr-12 border-2 ${E?"border-yellow-200 focus:border-yellow-500 focus:ring-yellow-100":_?"border-green-200 focus:border-green-500 focus:ring-green-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"} rounded-xl focus:outline-none focus:ring-4 transition-all duration-200 bg-gray-50 focus:bg-white`}),n.jsx("button",{type:"button",onClick:()=>o(!a),className:`absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 ${E?"hover:text-yellow-600":_?"hover:text-green-600":"hover:text-blue-600"} transition-colors duration-200`,children:a?n.jsx(Ca,{className:"h-5 w-5"}):n.jsx(Ys,{className:"h-5 w-5"})})]})]}),n.jsx("button",{type:"submit",disabled:c,className:`w-full ${E?"bg-gradient-to-r from-yellow-600 to-orange-700 hover:from-yellow-700 hover:to-orange-800 focus:ring-yellow-200":_?"bg-gradient-to-r from-green-600 to-emerald-700 hover:from-green-700 hover:to-emerald-800 focus:ring-green-200":"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-700 hover:to-indigo-800 focus:ring-blue-200"} text-white py-3 px-6 rounded-xl focus:outline-none focus:ring-4 transition-all duration-200 font-semibold text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none`,children:c?n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Iniciando sesión..."})]}):n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[E?n.jsx(As,{className:"w-5 h-5"}):_?n.jsx(He,{className:"w-5 h-5"}):n.jsx(qe,{className:"w-5 h-5"}),n.jsx("span",{children:E?"Acceder como SuperAdmin":_?"Acceder al Portal":"Acceder al Sistema"})]})})]}),n.jsxs("div",{className:"mt-8 text-center",children:[!E&&n.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["¿No tienes una cuenta?"," ",n.jsx(Os,{to:"/",className:`${_?"text-green-600 hover:text-green-700":"text-blue-600 hover:text-blue-700"} font-semibold transition-colors`,children:"Regístrate aquí"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:`w-2 h-2 ${E?"bg-yellow-400":"bg-green-400"} rounded-full animate-pulse`}),n.jsx("span",{children:"Sistema Seguro"})]}),n.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(qe,{className:"w-3 h-3"}),n.jsx("span",{children:"Datos Protegidos"})]})]}),n.jsxs("p",{className:"mt-4 text-xs text-gray-400",children:["© 2024 SisMedic."," ",E?"Panel SuperAdmin":_?"Portal del Paciente":"Sistema de gestión médica profesional","."]})]})]})})]})]})}function CB(){const[t,e]=S.useState({firstName:"",lastName:"",email:"",phone:"",role:"",password:"",confirmPassword:""}),[s,r]=S.useState(!1),[a,o]=S.useState(!1),[c,u]=S.useState(!1),[m,f]=S.useState(new Date),x=Je();S.useEffect(()=>{const w=setInterval(()=>{f(new Date)},1e3);return()=>clearInterval(w)},[]);const v=w=>{e({...t,[w.target.name]:w.target.value})},y=async w=>{if(w.preventDefault(),u(!0),t.password!==t.confirmPassword){W.error("Las contraseñas no coinciden"),u(!1);return}if(t.password.length<6){W.error("La contraseña debe tener al menos 6 caracteres"),u(!1);return}if(!t.role){W.error("Por favor selecciona un rol"),u(!1);return}try{const _=(await Ny(ya,t.email,t.password)).user;await pi(we(ne,"usuarios",_.uid),{firstName:t.firstName,lastName:t.lastName,email:t.email,phone:t.phone,rol:t.role,createdAt:new Date,status:"active"}),W.success("¡Cuenta creada exitosamente!"),x("/login")}catch(E){console.error("Error:",E),E.code==="auth/email-already-in-use"?W.error("Este correo ya está registrado"):E.code==="auth/weak-password"?W.error("La contraseña es muy débil"):E.code==="auth/invalid-email"?W.error("Correo electrónico inválido"):W.error("Error al crear la cuenta")}finally{u(!1)}},N=()=>{const w=m.getHours();return w<12?"Buenos días":w<18?"Buenas tardes":"Buenas noches"};return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center px-4 py-12",children:[n.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[n.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-100 rounded-full opacity-20 animate-pulse"}),n.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-indigo-100 rounded-full opacity-20 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute top-1/2 left-1/4 w-32 h-32 bg-green-100 rounded-full opacity-10 animate-bounce"})]}),n.jsxs("div",{className:"relative bg-white/90 backdrop-blur-md shadow-2xl rounded-3xl overflow-hidden w-full max-w-6xl flex flex-col lg:flex-row border border-blue-100",children:[n.jsxs("div",{className:"w-full lg:w-1/2 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 relative flex items-center justify-center p-8 lg:p-12",children:[n.jsxs("div",{className:"absolute inset-0 opacity-10",children:[n.jsx("div",{className:"absolute top-10 left-10",children:n.jsx(ot,{className:"w-16 h-16 text-white animate-pulse"})}),n.jsx("div",{className:"absolute top-32 right-16",children:n.jsx(Ir,{className:"w-12 h-12 text-white animate-pulse delay-500"})}),n.jsx("div",{className:"absolute bottom-20 left-16",children:n.jsx(Us,{className:"w-14 h-14 text-white animate-pulse delay-1000"})}),n.jsx("div",{className:"absolute bottom-32 right-10",children:n.jsx(qe,{className:"w-10 h-10 text-white animate-pulse delay-700"})})]}),n.jsxs("div",{className:"relative z-10 text-center text-white",children:[n.jsx("div",{className:"mb-8 flex justify-center",children:n.jsxs("div",{className:"w-24 h-24 bg-white/20 rounded-2xl flex items-center justify-center backdrop-blur-sm border border-white/30",children:[n.jsx("img",{src:"/logo-sismedic.png",alt:"Logo SisMedic",className:"w-16 h-16 object-contain",onError:w=>{w.target.style.display="none",w.target.nextSibling.style.display="flex"}}),n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-xl items-center justify-center text-2xl font-bold hidden",children:"S"})]})}),n.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-4 bg-gradient-to-r from-white to-blue-100 bg-clip-text text-transparent",children:"SisMedic"}),n.jsx("p",{className:"text-xl lg:text-2xl mb-6 text-blue-100 font-medium",children:"Sistema de Gestión Médica"}),n.jsxs("div",{className:"space-y-4 text-blue-100",children:[n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(mf,{className:"w-5 h-5"}),n.jsx("span",{children:"Únete a nuestro equipo médico"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(qe,{className:"w-5 h-5"}),n.jsx("span",{children:"Registro seguro y protegido"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-3",children:[n.jsx(Us,{className:"w-5 h-5"}),n.jsx("span",{children:"Acceso inmediato al sistema"})]})]}),n.jsxs("div",{className:"mt-8 p-4 bg-white/10 rounded-xl backdrop-blur-sm border border-white/20",children:[n.jsxs("p",{className:"text-sm text-blue-100",children:[N(),", crea tu cuenta profesional"]}),n.jsx("p",{className:"text-xs text-blue-200 mt-1",children:m.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]})]})]}),n.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center p-8 lg:p-12",children:n.jsxs("div",{className:"w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl mb-4 shadow-lg",children:n.jsx(mf,{className:"w-8 h-8 text-white"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Crear Cuenta"}),n.jsx("p",{className:"text-gray-600",children:"Regístrate como profesional médico"})]}),n.jsxs("form",{onSubmit:y,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"firstName",className:"block text-sm font-semibold text-gray-700",children:"Nombre"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"firstName",name:"firstName",type:"text",value:t.firstName,onChange:v,placeholder:"Juan",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 focus:bg-white"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx(He,{className:"w-4 h-4 text-gray-400"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"lastName",className:"block text-sm font-semibold text-gray-700",children:"Apellido"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"lastName",name:"lastName",type:"text",value:t.lastName,onChange:v,placeholder:"Pérez",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 focus:bg-white"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx(He,{className:"w-4 h-4 text-gray-400"})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-700",children:"Correo Electrónico"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"email",name:"email",type:"email",value:t.email,onChange:v,placeholder:"doctor@sismedic.com",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 focus:bg-white"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx(lo,{className:"w-4 h-4 text-gray-400"})})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-700",children:"Teléfono"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"phone",name:"phone",type:"tel",value:t.phone,onChange:v,placeholder:"123-456-7890",required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 focus:bg-white"}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx(Mr,{className:"w-4 h-4 text-gray-400"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"role",className:"block text-sm font-semibold text-gray-700",children:"Rol"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{id:"role",name:"role",value:t.role,onChange:v,required:!0,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 focus:bg-white appearance-none",children:[n.jsx("option",{value:"",children:"Seleccionar"}),n.jsx("option",{value:"admin",children:"Administrador"}),n.jsx("option",{value:"doctor",children:"Doctor"}),n.jsx("option",{value:"recepcion",children:"Recepcionista"})]}),n.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:n.jsx(tF,{className:"w-4 h-4 text-gray-400"})})]})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-700",children:"Contraseña"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"password",name:"password",type:s?"text":"password",value:t.password,onChange:v,placeholder:"••••••••",required:!0,className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 focus:bg-white"}),n.jsx("button",{type:"button",onClick:()=>r(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-blue-600 transition-colors duration-200",children:s?n.jsx(Ca,{className:"h-5 w-5"}):n.jsx(Ys,{className:"h-5 w-5"})})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-semibold text-gray-700",children:"Confirmar Contraseña"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:a?"text":"password",value:t.confirmPassword,onChange:v,placeholder:"••••••••",required:!0,className:"w-full px-4 py-3 pr-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 bg-gray-50 focus:bg-white"}),n.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-blue-600 transition-colors duration-200",children:a?n.jsx(Ca,{className:"h-5 w-5"}):n.jsx(Ys,{className:"h-5 w-5"})})]})]}),n.jsx("button",{type:"submit",disabled:c,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-3 px-6 rounded-xl hover:from-blue-700 hover:to-indigo-800 focus:outline-none focus:ring-4 focus:ring-blue-200 transition-all duration-200 font-semibold text-lg shadow-lg hover:shadow-xl transform hover:scale-[1.02] disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:c?n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Creando cuenta..."})]}):n.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[n.jsx(mf,{className:"w-5 h-5"}),n.jsx("span",{children:"Crear Cuenta"})]})})]}),n.jsxs("div",{className:"mt-6 text-center",children:[n.jsxs("p",{className:"text-sm text-gray-600",children:["¿Ya tienes una cuenta?"," ",n.jsx(Os,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Iniciar Sesión"})]}),n.jsxs("div",{className:"flex items-center justify-center space-x-4 text-sm text-gray-500 mt-4",children:[n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("span",{children:"Registro Seguro"})]}),n.jsx("div",{className:"w-1 h-1 bg-gray-300 rounded-full"}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(qe,{className:"w-3 h-3"}),n.jsx("span",{children:"Datos Protegidos"})]})]}),n.jsx("p",{className:"mt-4 text-xs text-gray-400",children:"© 2024 SisMedic. Sistema de gestión médica profesional."})]})]})})]})]})}function TB(){const[t,e]=S.useState(new Date),[s,r]=S.useState(!1);S.useEffect(()=>{const c=setInterval(()=>{e(new Date)},1e3);return()=>clearInterval(c)},[]);const a=[{icon:n.jsx(Lt,{className:"w-8 h-8"}),title:"Gestión de Pacientes",description:"Administra toda la información de tus pacientes de forma segura y organizada"},{icon:n.jsx(lt,{className:"w-8 h-8"}),title:"Sistema de Citas",description:"Programa y gestiona citas médicas con recordatorios automáticos"},{icon:n.jsx(rs,{className:"w-8 h-8"}),title:"Historias Clínicas",description:"Historiales médicos digitales completos y seguros"},{icon:n.jsx(Lb,{className:"w-8 h-8"}),title:"Reportes y Estadísticas",description:"Análisis detallados del rendimiento de tu centro médico"},{icon:n.jsx(qe,{className:"w-8 h-8"}),title:"Seguridad Total",description:"Datos protegidos con encriptación de nivel bancario"},{icon:n.jsx(Vb,{className:"w-8 h-8"}),title:"Acceso Móvil",description:"Accede desde cualquier dispositivo, en cualquier momento"}],o=[{name:"Dr. María González",role:"Directora Médica",clinic:"Clínica San Rafael",rating:5,comment:"SisMedic ha revolucionado la forma en que gestionamos nuestro centro médico. La eficiencia ha aumentado un 300%."},{name:"Dr. Carlos Mendoza",role:"Médico General",clinic:"Centro Médico Salud+",rating:5,comment:"La facilidad de uso y la seguridad de los datos hacen de SisMedic la mejor opción para profesionales médicos."},{name:"Lic. Ana Torres",role:"Administradora",clinic:"Policlínico Central",rating:5,comment:"Desde que usamos SisMedic, hemos reducido el tiempo administrativo en un 70%. Excelente inversión."}];return n.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[n.jsx("header",{className:"bg-white/90 backdrop-blur-md shadow-lg border-b border-blue-100 sticky top-0 z-50",children:n.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"flex justify-between items-center py-4",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsxs("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-600 to-indigo-700 rounded-xl flex items-center justify-center",children:[n.jsx("img",{src:"/logo-sismedic.png",alt:"SisMedic",className:"w-8 h-8 object-contain",onError:c=>{c.target.style.display="none",c.target.nextSibling.style.display="flex"}}),n.jsx(ot,{className:"w-8 h-8 text-white hidden"})]}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"SisMedic"}),n.jsx("p",{className:"text-xs text-gray-500",children:"Sistema Médico Profesional"})]})]}),n.jsxs("nav",{className:"hidden md:flex items-center space-x-8",children:[n.jsx("a",{href:"#features",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:"Características"}),n.jsx("a",{href:"#testimonials",className:"text-gray-600 hover:text-blue-600 transition-colors font-medium",children:"Testimonios"}),n.jsx(Os,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"¿Ya tienes cuenta? Ingresa aquí"})]}),n.jsx("button",{className:"md:hidden p-2 rounded-lg bg-blue-50 text-blue-600",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})})}),n.jsxs("section",{className:"relative py-20 lg:py-32 overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-20 left-20 w-64 h-64 bg-blue-100 rounded-full opacity-20 animate-pulse"}),n.jsx("div",{className:"absolute bottom-20 right-20 w-48 h-48 bg-indigo-100 rounded-full opacity-20 animate-pulse delay-1000"}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-green-50 rounded-full opacity-10 animate-bounce"})]}),n.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:n.jsxs("div",{className:"text-center",children:[n.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-100 rounded-full text-blue-700 text-sm font-medium mb-8",children:[n.jsx(_B,{className:"w-4 h-4 mr-2"}),"Sistema Médico #1 en el Perú"]}),n.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-gray-900 mb-6",children:["Revoluciona tu",n.jsx("span",{className:"block bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Centro Médico"})]}),n.jsxs("p",{className:"text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed",children:["La plataforma más completa para gestionar pacientes, citas, historias clínicas y reportes.",n.jsx("span",{className:"block mt-2 font-semibold text-blue-600",children:"Más de 500+ centros médicos confían en nosotros"})]}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-600",children:"500+"}),n.jsx("div",{className:"text-gray-600",children:"Centros Médicos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600",children:"50K+"}),n.jsx("div",{className:"text-gray-600",children:"Pacientes Atendidos"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-purple-600",children:"99.9%"}),n.jsx("div",{className:"text-gray-600",children:"Tiempo Activo"})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[n.jsxs("button",{onClick:()=>r(!0),className:"px-8 py-4 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-xl font-semibold text-lg hover:from-blue-700 hover:to-indigo-800 transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl flex items-center gap-2",children:[n.jsx(ot,{className:"w-6 h-6"}),"Comenzar Ahora",n.jsx(_x,{className:"w-5 h-5"})]}),n.jsxs(Os,{to:"/demo",className:"px-8 py-4 bg-white text-blue-600 rounded-xl font-semibold text-lg hover:bg-blue-50 transition-all duration-200 border-2 border-blue-200 hover:border-blue-300 flex items-center gap-2",children:[n.jsx(Us,{className:"w-6 h-6"}),"Ver Demo Gratis"]})]}),n.jsxs("div",{className:"mt-12 flex flex-wrap justify-center items-center gap-8 opacity-60",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qe,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{className:"text-sm",children:"Certificado ISO 27001"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xi,{className:"w-5 h-5 text-blue-500"}),n.jsx("span",{className:"text-sm",children:"Encriptación SSL"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(PF,{className:"w-5 h-5 text-purple-500"}),n.jsx("span",{className:"text-sm",children:"Disponible 24/7"})]})]})]})})]}),n.jsx("section",{id:"features",className:"py-20 bg-white",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Todo lo que necesitas en una sola plataforma"}),n.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Diseñado específicamente para profesionales médicos que buscan eficiencia y seguridad"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:a.map((c,u)=>n.jsxs("div",{className:"p-8 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl hover:shadow-lg transition-all duration-300 transform hover:scale-105 border border-blue-100",children:[n.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center text-white mb-6",children:c.icon}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:c.title}),n.jsx("p",{className:"text-gray-600 leading-relaxed",children:c.description})]},u))})]})}),n.jsx("section",{id:"testimonials",className:"py-20 bg-gradient-to-br from-blue-50 to-indigo-100",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"text-center mb-16",children:[n.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Lo que dicen nuestros clientes"}),n.jsx("p",{className:"text-xl text-gray-600",children:"Más de 500 centros médicos han transformado su gestión con SisMedic"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:o.map((c,u)=>n.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 border border-blue-100",children:[n.jsx("div",{className:"flex items-center mb-4",children:[...Array(c.rating)].map((m,f)=>n.jsx(uB,{className:"w-5 h-5 text-yellow-400 fill-current"},f))}),n.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',c.comment,'"']}),n.jsxs("div",{className:"border-t pt-4",children:[n.jsx("div",{className:"font-semibold text-gray-900",children:c.name}),n.jsx("div",{className:"text-blue-600 text-sm",children:c.role}),n.jsx("div",{className:"text-gray-500 text-sm",children:c.clinic})]})]},u))})]})}),n.jsxs("section",{className:"py-20 bg-gradient-to-r from-blue-600 via-indigo-700 to-purple-800 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute inset-0",children:[n.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-white/10 rounded-full animate-pulse"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-24 h-24 bg-white/5 rounded-full animate-pulse delay-1000"})]}),n.jsxs("div",{className:"relative max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8",children:[n.jsx("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:"¿Listo para transformar tu centro médico?"}),n.jsx("p",{className:"text-xl text-blue-100 mb-8",children:"Únete a más de 500 centros médicos que ya confían en SisMedic"}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsxs("button",{onClick:()=>r(!0),className:"px-8 py-4 bg-white text-blue-600 rounded-xl font-semibold text-lg hover:bg-blue-50 transition-all duration-200 transform hover:scale-105 shadow-lg flex items-center justify-center gap-2",children:[n.jsx(Tc,{className:"w-6 h-6"}),"Comenzar Ahora"]}),n.jsxs(Os,{to:"/",className:"px-8 py-4 bg-transparent text-white border-2 border-white rounded-xl font-semibold text-lg hover:bg-white hover:text-blue-600 transition-all duration-200 flex items-center justify-center gap-2",children:[n.jsx(Ir,{className:"w-6 h-6"}),"Hablar con Ventas"]})]}),n.jsx("div",{className:"mt-8 text-blue-100 text-sm",children:n.jsxs("div",{className:"flex items-center justify-center gap-1",children:[n.jsx(ms,{className:"w-4 h-4"}),n.jsx("span",{children:"Configuración en menos de 5 minutos"})]})})]})]}),n.jsx("footer",{className:"bg-gray-900 text-white py-12",children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:n.jsx(ot,{className:"w-6 h-6 text-white"})}),n.jsx("span",{className:"text-xl font-bold",children:"SisMedic"})]}),n.jsx("p",{className:"text-gray-400 mb-4",children:"La plataforma médica más confiable del Perú"}),n.jsx("div",{className:"text-sm text-gray-500",children:t.toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Producto"}),n.jsxs("ul",{className:"space-y-2 text-gray-400",children:[n.jsx("li",{children:n.jsx("a",{href:"#features",className:"hover:text-white transition-colors",children:"Características"})}),n.jsx("li",{children:n.jsx("a",{href:"#pricing",className:"hover:text-white transition-colors",children:"Precios"})}),n.jsx("li",{children:n.jsx("a",{href:"/demo",className:"hover:text-white transition-colors",children:"Demo"})}),n.jsx("li",{children:n.jsx("a",{href:"/api",className:"hover:text-white transition-colors",children:"API"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Soporte"}),n.jsxs("ul",{className:"space-y-2 text-gray-400",children:[n.jsx("li",{children:n.jsx("a",{href:"/help",className:"hover:text-white transition-colors",children:"Centro de Ayuda"})}),n.jsx("li",{children:n.jsx("a",{href:"/contact",className:"hover:text-white transition-colors",children:"Contacto"})}),n.jsx("li",{children:n.jsx("a",{href:"/status",className:"hover:text-white transition-colors",children:"Estado del Sistema"})}),n.jsx("li",{children:n.jsx("a",{href:"/security",className:"hover:text-white transition-colors",children:"Seguridad"})})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold mb-4",children:"Legal"}),n.jsxs("ul",{className:"space-y-2 text-gray-400",children:[n.jsx("li",{children:n.jsx("a",{href:"/privacy",className:"hover:text-white transition-colors",children:"Privacidad"})}),n.jsx("li",{children:n.jsx("a",{href:"/terms",className:"hover:text-white transition-colors",children:"Términos"})}),n.jsx("li",{children:n.jsx("a",{href:"/cookies",className:"hover:text-white transition-colors",children:"Cookies"})}),n.jsx("li",{children:n.jsx("a",{href:"/compliance",className:"hover:text-white transition-colors",children:"Cumplimiento"})})]})]})]}),n.jsxs("div",{className:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400",children:[n.jsx("p",{children:"© 2024 SisMedic. Todos los derechos reservados."}),n.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),n.jsx("span",{className:"text-sm",children:"Sistema Operativo"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qe,{className:"w-4 h-4"}),n.jsx("span",{className:"text-sm",children:"Datos Seguros"})]})]})]})]})}),s&&n.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:n.jsx("div",{className:"bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Elige tu Plan"}),n.jsx("button",{onClick:()=>r(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"border-2 border-blue-200 rounded-2xl p-8 hover:border-blue-400 transition-colors",children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan Básico"}),n.jsx("div",{className:"text-4xl font-bold text-blue-600 mb-2",children:"S/. 20"}),n.jsx("div",{className:"text-gray-600",children:"por mes"})]}),n.jsxs("ul",{className:"space-y-4 mb-8",children:[n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Hasta 100 pacientes"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Gestión de citas básica"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Historias clínicas"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Soporte por email"})]})]}),n.jsxs(Os,{to:"/saas-register?plan=basic",className:"w-full bg-blue-600 text-white py-3 px-6 rounded-xl font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2",children:["Comenzar con Básico",n.jsx(_x,{className:"w-5 h-5"})]})]}),n.jsxs("div",{className:"border-2 border-indigo-400 rounded-2xl p-8 relative bg-gradient-to-br from-indigo-50 to-purple-50",children:[n.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:n.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-full text-sm font-semibold",children:"Más Popular"})}),n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Plan Premium"}),n.jsx("div",{className:"text-4xl font-bold text-indigo-600 mb-2",children:"S/. 50"}),n.jsx("div",{className:"text-gray-600",children:"por mes"})]}),n.jsxs("ul",{className:"space-y-4 mb-8",children:[n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Pacientes ilimitados"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Gestión avanzada de citas"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Historias clínicas completas"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Reportes y estadísticas"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Soporte prioritario 24/7"})]}),n.jsxs("li",{className:"flex items-center gap-3",children:[n.jsx(_t,{className:"w-5 h-5 text-green-500"}),n.jsx("span",{children:"Múltiples usuarios"})]})]}),n.jsxs(Os,{to:"/saas-register?plan=premium",className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-xl font-semibold hover:from-indigo-700 hover:to-purple-700 transition-colors flex items-center justify-center gap-2",children:["Comenzar con Premium",n.jsx(_x,{className:"w-5 h-5"})]})]})]}),n.jsxs("div",{className:"mt-8 text-center",children:[n.jsx("p",{className:"text-gray-600 mb-4",children:"¿Ya tienes una cuenta?"}),n.jsx(Os,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:"Ingresa aquí"})]})]})})})]})}function RB(){const[t]=m5();Je();const e=t.get("plan")||"basic",[s,r]=S.useState(1),[a,o]=S.useState({firstName:"",lastName:"",email:"",phone:"",clinicName:"",password:"",confirmPassword:""}),[c,u]=S.useState("card"),[m,f]=S.useState(!1),[x,v]=S.useState(!1),[y,N]=S.useState(!1),[w,E]=S.useState(null),_={basic:{name:"Plan Básico",price:20,features:["Hasta 100 pacientes","Gestión de citas básica","Historias clínicas","Soporte por email"]},premium:{name:"Plan Premium",price:50,features:["Pacientes ilimitados","Gestión avanzada","Reportes completos","Soporte 24/7","Múltiples usuarios"]}},R=F=>{o({...a,[F.target.name]:F.target.value})},I=async F=>{if(F.preventDefault(),N(!0),a.password!==a.confirmPassword){W.error("Las contraseñas no coinciden"),N(!1);return}if(a.password.length<6){W.error("La contraseña debe tener al menos 6 caracteres"),N(!1);return}try{const C=(await Ny(ya,a.email,a.password)).user;await pi(we(ne,"saas_users",C.uid),{firstName:a.firstName,lastName:a.lastName,email:a.email,phone:a.phone,clinicName:a.clinicName,plan:e,planPrice:_[e].price,status:"pending_payment",createdAt:en(),paymentStatus:"pending"}),E(C),r(2),W.success("Cuenta creada exitosamente")}catch(P){console.error("Error:",P),P.code==="auth/email-already-in-use"?W.error("Este correo ya está registrado"):W.error("Error al crear la cuenta")}finally{N(!1)}},V=async()=>{var P,C;N(!0);const F=new ua;try{const k=(await gP(ya,F)).user;await pi(we(ne,"saas_users",k.uid),{firstName:((P=k.displayName)==null?void 0:P.split(" ")[0])||"",lastName:((C=k.displayName)==null?void 0:C.split(" ").slice(1).join(" "))||"",email:k.email,phone:"",clinicName:"",plan:e,planPrice:_[e].price,status:"pending_payment",createdAt:en(),paymentStatus:"pending",authProvider:"google"}),E(k),r(2),W.success("Cuenta creada con Google exitosamente")}catch(D){console.error("Error:",D),W.error("Error al registrarse con Google")}finally{N(!1)}},z=async()=>{var F,P;N(!0);try{await new Promise(C=>setTimeout(C,2e3)),await pi(we(ne,"saas_users",w.uid),{paymentStatus:"completed",paymentMethod:c,paymentDate:en(),status:"pending_approval"},{merge:!0}),await pi(we(ne,"saas_requests",w.uid),{userId:w.uid,email:w.email,plan:e,planPrice:_[e].price,paymentMethod:c,status:"pending_approval",requestDate:en(),userInfo:{firstName:a.firstName||((F=w.displayName)==null?void 0:F.split(" ")[0])||"",lastName:a.lastName||((P=w.displayName)==null?void 0:P.split(" ").slice(1).join(" "))||"",clinicName:a.clinicName||"",phone:a.phone||""}}),r(3),W.success("Pago procesado exitosamente")}catch(C){console.error("Error:",C),W.error("Error al procesar el pago")}finally{N(!1)}};return n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 flex items-center justify-center px-4 py-12",children:n.jsxs("div",{className:"bg-white/90 backdrop-blur-md shadow-2xl rounded-3xl overflow-hidden w-full max-w-4xl border border-blue-100",children:[n.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 p-6 text-white",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:n.jsx(ot,{className:"w-8 h-8"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"SisMedic"}),n.jsx("p",{className:"text-blue-100",children:"Registro SaaS"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-lg font-semibold",children:_[e].name}),n.jsxs("div",{className:"text-2xl font-bold",children:["S/. ",_[e].price,"/mes"]})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[n.jsx("span",{className:s>=1?"text-white":"text-blue-200",children:"Registro"}),n.jsx("span",{className:s>=2?"text-white":"text-blue-200",children:"Pago"}),n.jsx("span",{className:s>=3?"text-white":"text-blue-200",children:"Confirmación"})]}),n.jsx("div",{className:"w-full bg-blue-800 rounded-full h-2",children:n.jsx("div",{className:"bg-white h-2 rounded-full transition-all duration-500",style:{width:`${s/3*100}%`}})})]})]}),n.jsxs("div",{className:"p-8",children:[s===1&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Crear tu Cuenta"}),n.jsxs("p",{className:"text-gray-600",children:["Regístrate para comenzar con ",_[e].name]})]}),n.jsxs("button",{onClick:V,disabled:y,className:"w-full mb-6 bg-white border-2 border-gray-200 text-gray-700 py-3 px-6 rounded-xl font-semibold hover:border-gray-300 hover:bg-gray-50 transition-all duration-200 flex items-center justify-center gap-3 disabled:opacity-50",children:[n.jsx(gF,{className:"w-5 h-5"}),"Continuar con Google"]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-gray-300"})}),n.jsx("div",{className:"relative flex justify-center text-sm",children:n.jsx("span",{className:"px-2 bg-white text-gray-500",children:"o regístrate con email"})})]}),n.jsxs("form",{onSubmit:I,className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",name:"firstName",value:a.firstName,onChange:R,required:!0,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",placeholder:"Juan"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apellido"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",name:"lastName",value:a.lastName,onChange:R,required:!0,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",placeholder:"Pérez"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"email",name:"email",value:a.email,onChange:R,required:!0,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",placeholder:"doctor@clinica.com"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),n.jsxs("div",{className:"relative",children:[n.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:R,required:!0,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",placeholder:"999 888 777"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la Clínica"}),n.jsxs("div",{className:"relative",children:[n.jsx(yn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:"text",name:"clinicName",value:a.clinicName,onChange:R,required:!0,className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",placeholder:"Clínica San Juan"})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña"}),n.jsxs("div",{className:"relative",children:[n.jsx(xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:m?"text":"password",name:"password",value:a.password,onChange:R,required:!0,className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",placeholder:"••••••••"}),n.jsx("button",{type:"button",onClick:()=>f(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?n.jsx(Ca,{className:"w-5 h-5"}):n.jsx(Ys,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Contraseña"}),n.jsxs("div",{className:"relative",children:[n.jsx(xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),n.jsx("input",{type:x?"text":"password",name:"confirmPassword",value:a.confirmPassword,onChange:R,required:!0,className:"w-full pl-10 pr-12 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200",placeholder:"••••••••"}),n.jsx("button",{type:"button",onClick:()=>v(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?n.jsx(Ca,{className:"w-5 h-5"}):n.jsx(Ys,{className:"w-5 h-5"})})]})]})]}),n.jsx("button",{type:"submit",disabled:y,className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-800 transition-all duration-200 disabled:opacity-50",children:y?"Creando cuenta...":"Continuar al Pago"})]}),n.jsx("div",{className:"mt-6 text-center",children:n.jsxs("p",{className:"text-gray-600",children:["¿Ya tienes cuenta?"," ",n.jsx(Os,{to:"/login",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"Ingresa aquí"})]})})]}),s===2&&n.jsxs("div",{children:[n.jsxs("div",{className:"text-center mb-8",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Método de Pago"}),n.jsx("p",{className:"text-gray-600",children:"Selecciona cómo deseas pagar tu suscripción"})]}),n.jsx("div",{className:"bg-blue-50 p-6 rounded-xl mb-8 border border-blue-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:_[e].name}),n.jsx("p",{className:"text-gray-600",children:"Facturación mensual"})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:["S/. ",_[e].price]}),n.jsx("div",{className:"text-gray-500",children:"por mes"})]})]})}),n.jsxs("div",{className:"space-y-4 mb-8",children:[n.jsx("div",{className:`p-4 border-2 rounded-xl cursor-pointer transition-all ${c==="card"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>u("card"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(LT,{className:"w-6 h-6 text-blue-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Tarjeta de Crédito/Débito"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Visa, Mastercard, American Express"})]})]})}),n.jsx("div",{className:`p-4 border-2 rounded-xl cursor-pointer transition-all ${c==="yape"?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>u("yape"),children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Vb,{className:"w-6 h-6 text-purple-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-semibold",children:"Yape"}),n.jsx("div",{className:"text-sm text-gray-600",children:"Pago móvil instantáneo"})]})]})})]}),c==="card"&&n.jsxs("div",{className:"space-y-4 mb-8",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Número de Tarjeta"}),n.jsx("input",{type:"text",placeholder:"1234 5678 9012 3456",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Vencimiento"}),n.jsx("input",{type:"text",placeholder:"MM/AA",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CVV"}),n.jsx("input",{type:"text",placeholder:"123",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-200 transition-all duration-200"})]})]})]}),c==="yape"&&n.jsxs("div",{className:"text-center mb-8 p-6 bg-purple-50 rounded-xl border border-purple-200",children:[n.jsx(Vb,{className:"w-16 h-16 text-purple-600 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Pagar con Yape"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Escanea el código QR o usa el número:"}),n.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"999 888 777"}),n.jsxs("div",{className:"text-lg font-semibold text-gray-900 mt-2",children:["S/. ",_[e].price]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("button",{onClick:()=>r(1),className:"flex-1 bg-gray-200 text-gray-700 py-3 px-6 rounded-xl font-semibold hover:bg-gray-300 transition-colors flex items-center justify-center gap-2",children:[n.jsx($t,{className:"w-5 h-5"}),"Volver"]}),n.jsx("button",{onClick:z,disabled:y,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-700 text-white py-3 px-6 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-800 transition-all duration-200 disabled:opacity-50",children:y?"Procesando...":`Pagar S/. ${_[e].price}`})]})]}),s===3&&n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:n.jsx(_t,{className:"w-12 h-12 text-green-600"})}),n.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"¡Pago Exitoso!"}),n.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Tu solicitud ha sido enviada y está siendo revisada por nuestro equipo."}),n.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl mb-8 border border-blue-200",children:[n.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Próximos Pasos:"}),n.jsxs("div",{className:"space-y-3 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),n.jsx("span",{children:"Nuestro equipo revisará tu solicitud (máximo 24 horas)"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),n.jsx("span",{children:"Recibirás un email de confirmación cuando sea aprobada"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),n.jsx("span",{children:"Podrás acceder al sistema con tu cuenta"})]})]})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[n.jsx(Os,{to:"/",className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-700 text-white rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-800 transition-all duration-200",children:"Volver al Inicio"}),n.jsx(Os,{to:"/login",className:"px-8 py-3 bg-white text-blue-600 border-2 border-blue-200 rounded-xl font-semibold hover:bg-blue-50 transition-all duration-200",children:"Ir al Login"})]}),n.jsxs("div",{className:"mt-8 flex items-center justify-center gap-2 text-sm text-gray-500",children:[n.jsx(qe,{className:"w-4 h-4"}),n.jsx("span",{children:"Pago procesado de forma segura"})]})]})]})]})})}function _E(){const[t,e]=S.useState({doctores:0,especialidades:0,usuarios:0,citas:0,legacyUsers:0,multiTenantUsers:0}),[s,r]=S.useState(!0),{user:a}=wt();S.useEffect(()=>{o()},[a]);const o=async()=>{try{r(!0);let c,u,m;a!=null&&a.clinicId?(c=Oe(be(ne,"doctores"),Re("clinicId","==",a.clinicId)),u=Oe(be(ne,"especialidades"),Re("clinicId","==",a.clinicId)),m=Oe(be(ne,"usuarios"),Re("clinicId","==",a.clinicId))):(c=be(ne,"doctores"),u=be(ne,"especialidades"),m=be(ne,"usuarios"));const[f,x,v]=await Promise.all([Ce(c),Ce(u),Ce(m)]),y=f.docs.filter(_=>!_.data()._placeholder).length,N=x.docs.filter(_=>!_.data()._placeholder).length;let w=0,E=0;a!=null&&a.clinicId||v.forEach(_=>{_.data().clinicId?E++:w++}),e({doctores:y,especialidades:N,usuarios:v.size,citas:23,legacyUsers:w,multiTenantUsers:E})}catch(c){console.error("Error al cargar estadísticas:",c)}finally{r(!1)}};return s?n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded-lg mb-3 w-80"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded-lg w-96"})]})})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((c,u)=>n.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:n.jsx("div",{className:"animate-pulse",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl"}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded w-16"})]})]})})},u))}),n.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded-lg mb-6 w-48"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[...Array(3)].map((c,u)=>n.jsx("div",{className:"h-20 bg-gray-200 rounded-xl"},u))})]})})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(Lt,{className:"w-6 h-6 text-blue-600"})}),n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard Administrativo"})]}),n.jsx("p",{className:"text-gray-600 text-lg",children:a!=null&&a.clinicId?`Panel de control para ${a.clinicName||"tu clínica"}`:"Panel de control para administradores"})]}),n.jsx("div",{className:"hidden md:flex items-center gap-4",children:n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:a!=null&&a.clinicId?"Multi-Tenant":"Legacy Admin"}),n.jsx("div",{className:"flex items-center gap-2 mt-1",children:a!=null&&a.clinicId?n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-600",children:"Clínica Aislada"})]}):n.jsxs(n.Fragment,{children:[n.jsx(Tt,{className:"w-4 h-4 text-orange-600"}),n.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Acceso Completo"})]})})]})})]})})}),a!=null&&a.clinicId?n.jsx("div",{className:"mb-8 bg-green-50 border border-green-200 rounded-2xl p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:n.jsx(qe,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-green-800",children:"Vista de Clínica"}),n.jsxs("p",{className:"text-green-700",children:["Estás viendo solo los datos de tu clínica:"," ",n.jsx("span",{className:"font-semibold",children:a.clinicName||a.clinicId})]})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-800",children:t.usuarios}),n.jsx("p",{className:"text-xs text-green-600",children:"Usuarios en tu clínica"})]})]})}):n.jsx("div",{className:"mb-8 bg-orange-50 border border-orange-200 rounded-2xl p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:n.jsx(Tt,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-orange-800",children:"Administrador Legacy"}),n.jsx("p",{className:"text-orange-700",children:"Tienes acceso completo a todos los datos del sistema"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[n.jsxs("div",{className:"bg-orange-100 rounded-xl p-3",children:[n.jsx("p",{className:"text-2xl font-bold text-orange-800",children:t.legacyUsers}),n.jsx("p",{className:"text-xs text-orange-600",children:"Legacy"})]}),n.jsxs("div",{className:"bg-orange-100 rounded-xl p-3",children:[n.jsx("p",{className:"text-2xl font-bold text-orange-800",children:t.multiTenantUsers}),n.jsx("p",{className:"text-xs text-orange-600",children:"Multi-Tenant"})]})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"group bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 hover:border-blue-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-blue-100 rounded-xl group-hover:scale-110 transition-transform duration-200",children:n.jsx(ot,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:a!=null&&a.clinicId?"Doctores de tu Clínica":"Total Doctores"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:t.doctores})]})]})}),n.jsx("div",{className:"group bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 hover:border-green-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-green-100 rounded-xl group-hover:scale-110 transition-transform duration-200",children:n.jsx(EE,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:a!=null&&a.clinicId?"Especialidades Disponibles":"Total Especialidades"}),n.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:t.especialidades})]})]})}),n.jsx("div",{className:"group bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 hover:border-purple-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-purple-100 rounded-xl group-hover:scale-110 transition-transform duration-200",children:n.jsx(Lt,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:a!=null&&a.clinicId?"Usuarios de tu Clínica":"Usuarios Activos"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:t.usuarios})]})]})}),n.jsx("div",{className:"group bg-white p-6 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 border border-gray-100 hover:border-orange-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-orange-100 rounded-xl group-hover:scale-110 transition-transform duration-200",children:n.jsx(lt,{className:"w-6 h-6 text-orange-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:a!=null&&a.clinicId?"Citas de Hoy":"Citas Hoy"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-1",children:t.citas})]})]})})]}),n.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(Tc,{className:"w-6 h-6 text-gray-700"}),n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Acciones Rápidas"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("button",{onClick:()=>window.location.href="/admin/doctores/crear",className:"group bg-blue-50 hover:bg-blue-100 border border-blue-200 p-6 rounded-xl transition-all duration-200 text-left hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-600 rounded-xl group-hover:scale-110 transition-transform duration-200",children:n.jsx(ot,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"font-bold text-blue-900",children:"Registrar Doctor"}),n.jsx("p",{className:"text-sm text-blue-700 mt-1",children:a!=null&&a.clinicId?"Añadir médico a tu clínica":"Añadir nuevo médico al sistema"})]})]})}),n.jsx("button",{onClick:()=>window.location.href="/admin/especialidades/crear",className:"group bg-green-50 hover:bg-green-100 border border-green-200 p-6 rounded-xl transition-all duration-200 text-left hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-600 rounded-xl group-hover:scale-110 transition-transform duration-200",children:n.jsx(EE,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"font-bold text-green-900",children:"Nueva Especialidad"}),n.jsx("p",{className:"text-sm text-green-700 mt-1",children:a!=null&&a.clinicId?"Crear especialidad para tu clínica":"Crear especialidad médica"})]})]})}),n.jsx("button",{onClick:()=>window.location.href="/admin/usuarios",className:"group bg-purple-50 hover:bg-purple-100 border border-purple-200 p-6 rounded-xl transition-all duration-200 text-left hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-600 rounded-xl group-hover:scale-110 transition-transform duration-200",children:n.jsx(Lt,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"font-bold text-purple-900",children:"Gestionar Usuarios"}),n.jsx("p",{className:"text-sm text-purple-700 mt-1",children:a!=null&&a.clinicId?"Ver usuarios de tu clínica":"Ver y editar todos los usuarios"})]})]})})]})]}),n.jsxs("div",{className:"mt-8 bg-white rounded-2xl p-8 shadow-sm border border-gray-100",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx(Us,{className:"w-6 h-6 text-gray-700"}),n.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Resumen de Actividad"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Estado del Sistema"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Doctores registrados"}),n.jsx("span",{className:"font-semibold text-gray-900",children:t.doctores})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Especialidades activas"}),n.jsx("span",{className:"font-semibold text-gray-900",children:t.especialidades})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Usuarios del sistema"}),n.jsx("span",{className:"font-semibold text-gray-900",children:t.usuarios})]})]})]}),n.jsxs("div",{className:"p-4 bg-gray-50 rounded-xl",children:[n.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:a!=null&&a.clinicId?"Tu Clínica":"Sistema Multi-Tenant"}),n.jsx("div",{className:"space-y-2",children:a!=null&&a.clinicId?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Nombre de clínica"}),n.jsx("span",{className:"font-semibold text-gray-900",children:a.clinicName||"Sin nombre"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Plan activo"}),n.jsx("span",{className:"font-semibold text-gray-900",children:a.plan||"Básico"})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Tipo de cuenta"}),n.jsx("span",{className:"font-semibold text-green-600",children:"Multi-Tenant"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Usuarios Legacy"}),n.jsx("span",{className:"font-semibold text-orange-600",children:t.legacyUsers})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Usuarios Multi-Tenant"}),n.jsx("span",{className:"font-semibold text-green-600",children:t.multiTenantUsers})]}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm text-gray-600",children:"Tipo de cuenta"}),n.jsx("span",{className:"font-semibold text-orange-600",children:"Legacy Admin"})]})]})})]})]})]})]})})}function SE(){const[t,e]=S.useState({citasHoy:0,citasPendientes:0,citasCompletadas:0,historiasClinicas:0,pacientesAtendidos:0,citasEsteMes:0}),[s,r]=S.useState({nombres:"—",apellidos:"—",email:"—",especialidad:"—",foto:"/placeholder.svg?height=80&width=80&text=Doctor",telefono:"—",cedula:"—"}),[a,o]=S.useState([]),[c,u]=S.useState([]),[m,f]=S.useState(!0),{user:x}=wt(),v=Je();S.useEffect(()=>{x&&N()},[x]);const y=async V=>{try{const z=Oe(be(ne,"doctores"),Re("uid","==",V)),F=await Ce(z);return F.empty?null:F.docs[0].id}catch(z){return console.error("Error al obtener ID del doctor:",z),null}},N=async()=>{var V;try{f(!0);const z=we(ne,"doctores",x.uid),F=await Ke(z);if(F.exists()){const P=F.data();r({nombres:P.nombres||"—",apellidos:P.apellidos||"—",email:x.email||"—",especialidad:((V=P.especialidades)==null?void 0:V.nombres)||"—",foto:P.foto||"/placeholder.svg?height=80&width=80&text=Doctor",telefono:P.telefono||"—",cedula:P.cedula||"—"});const C=await y(x.uid);C&&(await w(C),await E(C),await _(C))}}catch(z){console.error("❌ Error cargando datos del dashboard doctor:",z)}finally{f(!1)}},w=async V=>{try{const z=new Date().toLocaleDateString("sv-SE"),F=new Date(new Date().getFullYear(),new Date().getMonth(),1).toLocaleDateString("sv-SE"),P=Oe(be(ne,"citas"),Re("doctorId","==",V),Re("fecha","==",z)),C=await Ce(P),D=Oe(be(ne,"citas"),Re("doctorId","==",V),Re("estado","==","pendiente")),k=await Ce(D),O=Oe(be(ne,"citas"),Re("doctorId","==",V),Re("estado","==","completada")),q=await Ce(O),M=Oe(be(ne,"citas"),Re("doctorId","==",V),Re("fecha",">=",F)),L=await Ce(M),oe=Oe(be(ne,"historias-clinicas"),Re("doctorId","==",V)),ve=await Ce(oe),ee=new Set;q.docs.forEach(fe=>{const ye=fe.data();ye.pacienteId&&ee.add(ye.pacienteId)}),e({citasHoy:C.size,citasPendientes:k.size,citasCompletadas:q.size,historiasClinicas:ve.size,pacientesAtendidos:ee.size,citasEsteMes:L.size})}catch(z){console.error("Error cargando estadísticas:",z)}},E=async V=>{try{const z=new Date().toLocaleDateString("sv-SE"),F=Oe(be(ne,"citas"),Re("doctorId","==",V),Re("fecha",">=",z),Re("estado","==","pendiente"),Bn("fecha","asc"),Bn("hora","asc"),Bf(5)),P=await Ce(F),C=[];for(const D of P.docs){const k=D.data();if(k.pacienteId){const O=we(ne,"pacientes",k.pacienteId),q=await Ke(O);if(q.exists()){const M=q.data();C.push({id:D.id,...k,pacienteNombre:`${M.nombres} ${M.apellidos}`,pacienteCedula:M.cedula})}}}o(C)}catch(z){console.error("Error cargando próximas citas:",z)}},_=async V=>{var z,F;try{const P=Oe(be(ne,"historias-clinicas"),Re("doctorId","==",V),Bn("fechaCreacion","desc"),Bf(5)),C=await Ce(P),D=[];for(const k of C.docs){const O=k.data();if(O.pacienteId){const q=we(ne,"pacientes",O.pacienteId),M=await Ke(q);if(M.exists()){const L=M.data();D.push({id:k.id,tipo:"historia",descripcion:`Historia clínica creada para ${L.nombres} ${L.apellidos}`,fecha:((F=(z=O.fechaCreacion)==null?void 0:z.toDate)==null?void 0:F.call(z))||new Date,pacienteNombre:`${L.nombres} ${L.apellidos}`})}}}u(D)}catch(P){console.error("Error cargando actividad reciente:",P)}},R=V=>V?typeof V=="string"?V:V.toLocaleDateString("es-ES",{day:"2-digit",month:"2-digit",year:"numeric"}):"—",I=()=>{const V=new Date().getHours();return V<12?"Buenos días":V<18?"Buenas tardes":"Buenas noches"};return m?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("div",{className:"h-10 bg-gray-300 rounded w-96 mb-3 animate-pulse"}),n.jsx("div",{className:"h-6 bg-gray-300 rounded w-64 animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8",children:[...Array(6)].map((V,z)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 animate-pulse",children:[n.jsx("div",{className:"flex items-center",children:n.jsx("div",{className:"w-12 h-12 bg-gray-300 rounded-lg mb-4"})}),n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-8 bg-gray-300 rounded"})]},z))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsx("div",{className:"lg:col-span-2 space-y-6",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded w-48 mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(3)].map((V,z)=>n.jsx("div",{className:"h-16 bg-gray-300 rounded"},z))})]})}),n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded w-32 mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(4)].map((V,z)=>n.jsx("div",{className:"h-12 bg-gray-300 rounded"},z))})]})})]})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:["🩺 ",I(),", Dr. ",s.nombres]}),n.jsxs("p",{className:"text-gray-600 text-lg",children:[s.especialidad," •"," ",new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),n.jsx("div",{className:"hidden md:flex items-center space-x-4",children:n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Estado del sistema"}),n.jsxs("div",{className:"flex items-center text-green-600",children:[n.jsx(_t,{className:"h-4 w-4 mr-1"}),n.jsx("span",{className:"text-sm font-medium",children:"Operativo"})]})]})})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6 mb-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6 border border-gray-100 group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-r from-red-500 to-red-600 rounded-lg group-hover:scale-110 transition-transform",children:n.jsx(lt,{className:"h-6 w-6 text-white"})}),n.jsx(Tc,{className:"h-4 w-4 text-red-500"})]}),n.jsx("h3",{className:"text-sm text-gray-500 uppercase font-semibold mb-1",children:"Citas Hoy"}),n.jsx("p",{className:"text-3xl font-bold text-red-600",children:t.citasHoy}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Programadas para hoy"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6 border border-gray-100 group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-r from-yellow-500 to-yellow-600 rounded-lg group-hover:scale-110 transition-transform",children:n.jsx(ms,{className:"h-6 w-6 text-white"})}),n.jsx(Kl,{className:"h-4 w-4 text-yellow-500"})]}),n.jsx("h3",{className:"text-sm text-gray-500 uppercase font-semibold mb-1",children:"Pendientes"}),n.jsx("p",{className:"text-3xl font-bold text-yellow-600",children:t.citasPendientes}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Por confirmar"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6 border border-gray-100 group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-r from-green-500 to-green-600 rounded-lg group-hover:scale-110 transition-transform",children:n.jsx(iF,{className:"h-6 w-6 text-white"})}),n.jsx(_t,{className:"h-4 w-4 text-green-500"})]}),n.jsx("h3",{className:"text-sm text-gray-500 uppercase font-semibold mb-1",children:"Completadas"}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:t.citasCompletadas}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Total atendidas"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6 border border-gray-100 group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-lg group-hover:scale-110 transition-transform",children:n.jsx(rs,{className:"h-6 w-6 text-white"})}),n.jsx(Us,{className:"h-4 w-4 text-indigo-500"})]}),n.jsx("h3",{className:"text-sm text-gray-500 uppercase font-semibold mb-1",children:"Historias"}),n.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:t.historiasClinicas}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Registros médicos"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6 border border-gray-100 group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded-lg group-hover:scale-110 transition-transform",children:n.jsx(Lt,{className:"h-6 w-6 text-white"})}),n.jsx(Xl,{className:"h-4 w-4 text-purple-500"})]}),n.jsx("h3",{className:"text-sm text-gray-500 uppercase font-semibold mb-1",children:"Pacientes"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600",children:t.pacientesAtendidos}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Únicos atendidos"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 p-6 border border-gray-100 group",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("div",{className:"p-3 bg-gradient-to-r from-teal-500 to-teal-600 rounded-lg group-hover:scale-110 transition-transform",children:n.jsx(Tc,{className:"h-6 w-6 text-white"})}),n.jsx(lt,{className:"h-4 w-4 text-teal-500"})]}),n.jsx("h3",{className:"text-sm text-gray-500 uppercase font-semibold mb-1",children:"Este Mes"}),n.jsx("p",{className:"text-3xl font-bold text-teal-600",children:t.citasEsteMes}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Citas programadas"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-8 border border-gray-100 hover:shadow-md transition-shadow",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[n.jsx(He,{className:"h-6 w-6 mr-2 text-blue-600"}),"Mi Perfil Profesional"]}),n.jsxs("button",{onClick:()=>v("/doctor/perfil"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(Hn,{className:"h-4 w-4 mr-2"}),"Editar"]})]}),n.jsxs("div",{className:"flex items-start gap-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:s.foto||"/placeholder.svg",alt:"Foto del doctor",className:"w-20 h-20 rounded-full border-4 border-blue-100 object-cover shadow-lg",onError:V=>{V.target.src="/placeholder.svg?height=80&width=80&text=Doctor"}}),n.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full border-2 border-white"})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Nombre Completo"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-800",children:[s.nombres," ",s.apellidos]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Especialidad"}),n.jsxs("p",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[n.jsx(ot,{className:"h-4 w-4 mr-2 text-blue-600"}),s.especialidad]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Email"}),n.jsx("p",{className:"text-gray-700",children:s.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Cédula"}),n.jsx("p",{className:"text-gray-700",children:s.cedula})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800 flex items-center",children:[n.jsx(lt,{className:"h-5 w-5 mr-2 text-blue-600"}),"Próximas Citas"]}),n.jsx("button",{onClick:()=>v("/doctor/citas"),className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"Ver todas →"})]}),a.length>0?n.jsx("div",{className:"space-y-3",children:a.map(V=>n.jsxs("div",{className:"flex items-center p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[n.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx(lt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("h4",{className:"font-semibold text-gray-800",children:V.pacienteNombre}),n.jsxs("p",{className:"text-sm text-gray-600",children:[R(V.fecha)," • ",V.hora," • ",V.motivo||"Consulta general"]})]}),n.jsx("div",{className:"flex-shrink-0",children:n.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Pendiente"})})]},V.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("p",{className:"text-gray-500",children:"No hay citas próximas programadas"})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx(Us,{className:"h-5 w-5 mr-2 text-blue-600"}),"Acciones Rápidas"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>v("/doctor/citas"),className:"w-full flex items-center p-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105",children:[n.jsx(lt,{className:"h-5 w-5 mr-3"}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"font-semibold",children:"Gestionar Citas"}),n.jsx("p",{className:"text-sm opacity-90",children:"Ver y administrar citas"})]})]}),n.jsxs("button",{onClick:()=>v("/doctor/historia-clinica"),className:"w-full flex items-center p-4 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105",children:[n.jsx(rs,{className:"h-5 w-5 mr-3"}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"font-semibold",children:"Historia Clínica"}),n.jsx("p",{className:"text-sm opacity-90",children:"Registros médicos"})]})]}),n.jsxs("button",{onClick:()=>v("/doctor/perfil"),className:"w-full flex items-center p-4 bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-300 transform hover:scale-105",children:[n.jsx(He,{className:"h-5 w-5 mr-3"}),n.jsxs("div",{className:"text-left",children:[n.jsx("h3",{className:"font-semibold",children:"Mi Perfil"}),n.jsx("p",{className:"text-sm opacity-90",children:"Actualizar información"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-100",children:[n.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[n.jsx(Us,{className:"h-5 w-5 mr-2 text-green-600"}),"Actividad Reciente"]}),c.length>0?n.jsx("div",{className:"space-y-4",children:c.map(V=>n.jsxs("div",{className:"flex items-start space-x-3",children:[n.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center",children:n.jsx(rs,{className:"h-4 w-4 text-green-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm text-gray-800",children:V.descripcion}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R(V.fecha)})]})]},V.id))}):n.jsxs("div",{className:"text-center py-6",children:[n.jsx(Us,{className:"h-8 w-8 text-gray-300 mx-auto mb-2"}),n.jsx("p",{className:"text-gray-500 text-sm",children:"No hay actividad reciente"})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[n.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[n.jsx(ot,{className:"h-5 w-5 mr-2 text-blue-600"}),"Áreas de Especialización"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg shadow-sm",children:[n.jsx(Ir,{className:"h-5 w-5 text-red-500 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Cardiología"})]}),n.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg shadow-sm",children:[n.jsx(zg,{className:"h-5 w-5 text-purple-500 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Neurología"})]}),n.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg shadow-sm",children:[n.jsx(Ys,{className:"h-5 w-5 text-blue-500 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Oftalmología"})]}),n.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg shadow-sm",children:[n.jsx(JF,{className:"h-5 w-5 text-green-500 mr-2"}),n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Medicina General"})]})]})]})]})]})]})})}function AE(){const[t,e]=S.useState({totalPacientes:0,citasHoy:0,citasPendientes:0,citasAtendidas:0,tasaAtencion:0}),[s,r]=S.useState([]),[a,o]=S.useState(!0),c=Je();S.useEffect(()=>{u()},[]);const u=async()=>{try{o(!0);const x=new Date().toISOString().split("T")[0],[v,y,N]=await Promise.all([Ce(be(ne,"pacientes")),Ce(be(ne,"citas")),Ce(Oe(be(ne,"citas"),Re("fecha","==",x)))]),w=v.size,E=y.docs.map(P=>P.data()),_=N.docs.map(P=>({id:P.id,...P.data()})),R=E.filter(P=>P.estado==="pendiente").length,I=E.filter(P=>P.estado==="atendido").length,V=E.length,z=V>0?Math.round(I/V*100):0;e({totalPacientes:w,citasHoy:_.length,citasPendientes:R,citasAtendidas:I,tasaAtencion:z});const F=_.sort((P,C)=>P.hora&&C.hora?P.hora.localeCompare(C.hora):0);r(F.slice(0,5))}catch(x){console.error("❌ Error al cargar datos del dashboard:",x),W.error("Error al cargar los datos")}finally{o(!1)}},m=x=>{const y={pendiente:{bg:"bg-yellow-100",text:"text-yellow-800",icon:"⏳"},atendido:{bg:"bg-green-100",text:"text-green-800",icon:"✅"},cancelado:{bg:"bg-red-100",text:"text-red-800",icon:"❌"}}[x]||{bg:"bg-gray-100",text:"text-gray-800",icon:"❓"};return n.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${y.bg} ${y.text}`,children:[y.icon," ",(x==null?void 0:x.charAt(0).toUpperCase())+(x==null?void 0:x.slice(1))]})},f=x=>x||"-";return a?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[...Array(4)].map((x,v)=>n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsx("div",{className:"h-16 bg-gray-300 rounded"})},v))}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsx("div",{className:"h-64 bg-gray-300 rounded"})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:n.jsx("div",{className:"h-64 bg-gray-300 rounded"})})]})]})}):n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dashboard de Recepción"}),n.jsx("div",{className:"text-sm text-gray-600",children:new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Lt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pacientes"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.totalPacientes})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:n.jsx(oF,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Citas Hoy"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.citasHoy})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:n.jsx(ms,{className:"h-6 w-6 text-yellow-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.citasPendientes})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:n.jsx(Tc,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Tasa Atención"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[t.tasaAtencion,"%"]})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(lt,{className:"h-5 w-5 text-blue-600"}),"Citas de Hoy"]}),n.jsxs("button",{onClick:()=>c("/recepcion/citas"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center gap-1",children:[n.jsx(Ys,{className:"h-4 w-4"}),"Ver todas"]})]})}),n.jsx("div",{className:"p-6",children:s.length===0?n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(lt,{className:"h-12 w-12 mx-auto mb-2 text-gray-300"}),n.jsx("p",{className:"text-lg font-medium",children:"No hay citas programadas para hoy"}),n.jsx("p",{className:"text-sm",children:"Las citas aparecerán aquí cuando se programen"})]}):n.jsxs("div",{className:"space-y-3",children:[s.map(x=>n.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:f(x.hora)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.paciente}),n.jsx("p",{className:"text-xs text-gray-600",children:x.doctor})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:m(x.estado)})]},x.id)),s.length>=5&&n.jsx("div",{className:"text-center pt-2",children:n.jsx("button",{onClick:()=>c("/recepcion/citas"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Ver más citas..."})})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(Us,{className:"h-5 w-5 text-green-600"}),"Acciones Rápidas"]})}),n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[n.jsxs("button",{onClick:()=>c("/recepcion/pacientes/create"),className:"flex items-center gap-3 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors text-left",children:[n.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:n.jsx(Ta,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Registrar Paciente"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Agregar un nuevo paciente al sistema"})]})]}),n.jsxs("button",{onClick:()=>c("/recepcion/citas/create"),className:"flex items-center gap-3 p-4 bg-green-50 hover:bg-green-100 rounded-lg transition-colors text-left",children:[n.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:n.jsx(lt,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Agendar Cita"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Programar una nueva cita médica"})]})]}),n.jsxs("button",{onClick:()=>c("/recepcion/horarios"),className:"flex items-center gap-3 p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition-colors text-left",children:[n.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:n.jsx(Lb,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Ver Horarios"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Consultar calendario de citas"})]})]}),n.jsxs("button",{onClick:()=>c("/recepcion/pacientes"),className:"flex items-center gap-3 p-4 bg-yellow-50 hover:bg-yellow-100 rounded-lg transition-colors text-left",children:[n.jsx("div",{className:"p-2 bg-yellow-600 rounded-lg",children:n.jsx(Xl,{className:"h-5 w-5 text-white"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:"Gestionar Pacientes"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Ver y editar información de pacientes"})]})]})]})})]})]}),n.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow p-6",children:[n.jsxs("h2",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(Lb,{className:"h-5 w-5 text-indigo-600"}),"Resumen del Sistema"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-green-600",children:t.citasAtendidas}),n.jsx("div",{className:"text-sm text-gray-600",children:"Citas Atendidas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:t.citasPendientes}),n.jsx("div",{className:"text-sm text-gray-600",children:"Citas Pendientes"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"text-3xl font-bold text-blue-600",children:t.totalPacientes}),n.jsx("div",{className:"text-sm text-gray-600",children:"Pacientes Registrados"})]})]})]})]})}function DB(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState([]),[c,u]=S.useState({totalRequests:0,pendingRequests:0,approvedRequests:0,rejectedRequests:0,totalRevenue:0,totalClinics:0,totalUsers:0,legacyUsers:0,multiTenantUsers:0}),[m,f]=S.useState(!0),[x,v]=S.useState(null),[y,N]=S.useState(null),[w,E]=S.useState("requests");S.useEffect(()=>{_()},[]);const _=async()=>{try{console.log("🔄 Cargando todos los datos..."),f(!0),await Promise.all([R(),I(),V()])}catch(M){console.error("❌ Error loading data:",M),W.error("Error al cargar los datos")}finally{f(!1)}},R=async()=>{try{console.log("📋 Cargando solicitudes...");const M=Oe(be(ne,"clinic-requests"),Bn("createdAt","desc")),L=await Ce(M),oe=[];let ve=0,ee=0,fe=0,ye=0;const Fe=new Set;console.log(`📊 Encontradas ${L.size} solicitudes`),L.forEach(B=>{const Q={id:B.id,...B.data()};if(oe.push(Q),Q.clinicName&&Fe.add(Q.clinicName),Q.status==="pending")ee++;else if(Q.status==="approved"){fe++;const ie=Q.plan==="premium"?299:99;ve+=ie}else Q.status==="rejected"&&ye++}),e(oe),u(B=>({...B,totalRequests:oe.length,pendingRequests:ee,approvedRequests:fe,rejectedRequests:ye,totalRevenue:ve,totalClinics:Fe.size})),console.log("✅ Solicitudes cargadas")}catch(M){throw console.error("❌ Error loading requests:",M),M}},I=async()=>{try{console.log("👥 Cargando usuarios...");const M=await Ce(be(ne,"usuarios")),L=[];let oe=0,ve=0;M.forEach(ee=>{const fe={id:ee.id,...ee.data()};L.push(fe),fe.clinicId?ve++:oe++}),r(L),u(ee=>({...ee,totalUsers:L.length,legacyUsers:oe,multiTenantUsers:ve})),console.log("✅ Usuarios cargados")}catch(M){throw console.error("❌ Error loading users:",M),M}},V=async()=>{try{console.log("🏥 Cargando clínicas...");const M=await Ce(be(ne,"clinics")),L=[];M.forEach(oe=>{const ve={id:oe.id,...oe.data()};L.push(ve)}),o(L),console.log("✅ Clínicas cargadas")}catch(M){throw console.error("❌ Error loading clinics:",M),M}},z=M=>M.toLowerCase().replace(/[^a-z0-9]/g,"_").replace(/_+/g,"_").replace(/^_|_$/g,"")+"_"+Date.now().toString().slice(-6),F=async M=>{try{console.log(`🏗️ Inicializando colecciones para clínica: ${M}`);const L=["doctores","pacientes","especialidades","citas","historias-clinicas","usuarios"];for(const oe of L)await Gl(be(ne,oe),{clinicId:M,_placeholder:!0,creado:en()});console.log(`✅ Colecciones inicializadas para ${M}`)}catch(L){throw console.error("❌ Error al inicializar colecciones:",L),L}},P=async(M,L)=>{try{console.log("🔄 Iniciando aprobación de solicitud con multi-tenancy..."),N(M);const oe=t.find(B=>B.id===M);if(!oe)throw new Error("Solicitud no encontrada");const ve=z(oe.clinicName||"default_clinic");console.log("🏥 Clinic ID generado:",ve);const ee={basico:{maxDoctors:5,maxPatients:100,maxUsers:10,price:99},premium:{maxDoctors:20,maxPatients:500,maxUsers:50,price:299}},fe=ee[oe.plan]||ee.basico;await hs(we(ne,"clinic-requests",M),{status:"approved",approvedDate:en(),approvedBy:"superadmin@sismedic.com",clinicId:ve}),await pi(we(ne,"clinics",ve),{name:oe.clinicName||"",ownerId:L,ownerEmail:oe.email,adminName:oe.adminName,plan:oe.plan,planPrice:fe.price,status:"active",createdAt:en(),approvedDate:en(),settings:{allowMultipleUsers:!0,maxUsers:fe.maxUsers,maxPatients:fe.maxPatients,maxDoctors:fe.maxDoctors,features:{appointments:!0,medicalRecords:!0,reports:oe.plan==="premium",analytics:oe.plan==="premium",backup:oe.plan==="premium"}}}),await F(ve);const ye=Oe(be(ne,"usuarios"),Re("email","==",oe.email)),Fe=await Ce(ye);if(!Fe.empty){const B=Fe.docs[0];await hs(we(ne,"usuarios",B.id),{clinicId:ve,clinicName:oe.clinicName,plan:oe.plan,planPrice:fe.price,isClinicOwner:!0,updatedAt:en()})}W.success("¡Solicitud aprobada! Clínica configurada con entorno aislado 🏥",{duration:6e3,style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"white",fontWeight:"bold"}}),_()}catch(oe){console.error("❌ Error al aprobar solicitud:",oe),W.error(`Error al aprobar la solicitud: ${oe.message}`,{duration:6e3,style:{background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",color:"white",fontWeight:"bold"}})}finally{N(null)}},C=async(M,L)=>{try{N(M),await hs(we(ne,"clinic-requests",M),{status:"rejected",rejectedDate:en(),rejectedBy:"superadmin@sismedic.com"}),W.success("Solicitud rechazada correctamente",{style:{background:"linear-gradient(135deg, #F59E0B 0%, #D97706 100%)",color:"white",fontWeight:"bold"}}),_()}catch(oe){console.error("❌ Error al rechazar solicitud:",oe),W.error(`Error al rechazar la solicitud: ${oe.message}`,{style:{background:"linear-gradient(135deg, #EF4444 0%, #DC2626 100%)",color:"white",fontWeight:"bold"}})}finally{N(null)}},D=M=>{switch(M){case"pending":return n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-yellow-100 to-amber-100 text-yellow-800 border border-yellow-200",children:[n.jsx(ms,{className:"w-3 h-3 mr-1.5"}),"Pendiente"]});case"approved":return n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[n.jsx(_t,{className:"w-3 h-3 mr-1.5"}),"Aprobado"]});case"rejected":return n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200",children:[n.jsx(ha,{className:"w-3 h-3 mr-1.5"}),"Rechazado"]});default:return null}},k=M=>M==="premium"?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-purple-100 to-indigo-100 text-purple-800 border border-purple-200",children:[n.jsx(As,{className:"w-3 h-3 mr-1.5"}),"Premium"]}):n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-blue-100 to-cyan-100 text-blue-800 border border-blue-200",children:[n.jsx(oB,{className:"w-3 h-3 mr-1.5"}),"Básico"]}),O=M=>{const L={admin:{bg:"bg-purple-100",text:"text-purple-800",icon:n.jsx(As,{className:"w-3 h-3"})},doctor:{bg:"bg-blue-100",text:"text-blue-800",icon:n.jsx(Xl,{className:"w-3 h-3"})},recepcion:{bg:"bg-green-100",text:"text-green-800",icon:n.jsx(Lt,{className:"w-3 h-3"})}},oe=L[M]||L.doctor;return n.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${oe.bg} ${oe.text}`,children:[oe.icon,n.jsx("span",{className:"ml-1",children:M})]})},q=M=>{if(!M)return"N/A";let L;return M.toDate?L=M.toDate():L=new Date(M),L.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return m?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-12 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl mb-6"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8",children:[...Array(6)].map((M,L)=>n.jsxs("div",{className:"bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg border border-white/20",children:[n.jsx("div",{className:"h-4 bg-gradient-to-r from-gray-200 to-gray-300 rounded mb-3"}),n.jsx("div",{className:"h-8 bg-gradient-to-r from-gray-200 to-gray-300 rounded"})]},L))}),n.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6",children:[n.jsx("div",{className:"h-6 bg-gradient-to-r from-gray-200 to-gray-300 rounded mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(5)].map((M,L)=>n.jsx("div",{className:"h-16 bg-gradient-to-r from-gray-100 to-gray-200 rounded-xl"},L))})]})]})})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 rounded-3xl p-8 text-white shadow-2xl border border-white/20 backdrop-blur-sm",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(As,{className:"w-8 h-8 text-yellow-300"}),n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-white to-yellow-200 bg-clip-text text-transparent",children:"Super Admin Dashboard"})]}),n.jsx("p",{className:"text-indigo-100 text-lg font-medium",children:"Gestión Multi-Tenant • Cada clínica con entorno aislado"})]}),n.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[n.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-2xl p-4",children:n.jsx(Tt,{className:"w-8 h-8 text-white"})}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-indigo-200",children:"Multi-Tenancy"}),n.jsx("p",{className:"text-xl font-bold text-green-300",children:"🟢 Activo"})]})]})]})})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-6 mb-8",children:[n.jsx("div",{className:"group bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/20 hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:n.jsx(Lt,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Total Solicitudes"}),n.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:c.totalRequests})]})]})}),n.jsx("div",{className:"group bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/20 hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-gradient-to-br from-yellow-500 to-amber-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:n.jsx(ms,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Pendientes"}),n.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-yellow-600 to-amber-800 bg-clip-text text-transparent",children:c.pendingRequests})]})]})}),n.jsx("div",{className:"group bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/20 hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:n.jsx(_t,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Aprobadas"}),n.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-800 bg-clip-text text-transparent",children:c.approvedRequests})]})]})}),n.jsx("div",{className:"group bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/20 hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-gradient-to-br from-red-500 to-rose-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:n.jsx(ha,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Rechazadas"}),n.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-red-600 to-rose-800 bg-clip-text text-transparent",children:c.rejectedRequests})]})]})}),n.jsx("div",{className:"group bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/20 hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:n.jsx(_F,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Ingresos"}),n.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-indigo-800 bg-clip-text text-transparent",children:["S/. ",c.totalRevenue]})]})]})}),n.jsx("div",{className:"group bg-white/70 backdrop-blur-sm p-6 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 border border-white/20 hover:scale-105",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-4 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:n.jsx(yn,{className:"w-6 h-6 text-white"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h3",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Clínicas"}),n.jsx("p",{className:"text-3xl font-bold bg-gradient-to-r from-teal-600 to-cyan-800 bg-clip-text text-transparent",children:c.totalClinics})]})]})})]}),n.jsx("div",{className:"mb-8 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-2xl p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-emerald-100 rounded-xl",children:n.jsx(qe,{className:"w-6 h-6 text-emerald-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-emerald-800",children:"Sistema Multi-Tenant Activo"}),n.jsx("p",{className:"text-emerald-700",children:"Cada clínica aprobada tendrá su propio entorno aislado con datos completamente separados"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[n.jsxs("div",{className:"bg-emerald-100 rounded-xl p-3",children:[n.jsx("p",{className:"text-2xl font-bold text-emerald-800",children:c.legacyUsers}),n.jsx("p",{className:"text-xs text-emerald-600",children:"Usuarios Legacy"})]}),n.jsxs("div",{className:"bg-emerald-100 rounded-xl p-3",children:[n.jsx("p",{className:"text-2xl font-bold text-emerald-800",children:c.multiTenantUsers}),n.jsx("p",{className:"text-xs text-emerald-600",children:"Multi-Tenant"})]})]})]})}),n.jsxs("div",{className:"bg-white/70 backdrop-blur-sm rounded-3xl shadow-2xl overflow-hidden border border-white/20 mb-6",children:[n.jsx("div",{className:"border-b border-gray-200/50",children:n.jsxs("nav",{className:"flex space-x-8 px-8",children:[n.jsx("button",{onClick:()=>E("requests"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${w==="requests"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ms,{className:"w-4 h-4"}),"Solicitudes (",c.pendingRequests,")"]})}),n.jsx("button",{onClick:()=>E("clinics"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${w==="clinics"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yn,{className:"w-4 h-4"}),"Clínicas (",a.length,")"]})}),n.jsx("button",{onClick:()=>E("users"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${w==="users"?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Lt,{className:"w-4 h-4"}),"Usuarios (",c.totalUsers,")"]})})]})}),n.jsxs("div",{className:"p-8",children:[w==="requests"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Solicitudes de Clínicas Multi-Tenant"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Cada aprobación crea un entorno aislado para la clínica"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tc,{className:"w-5 h-5 text-green-600"}),n.jsxs("span",{className:"text-sm font-semibold text-green-600",children:[c.pendingRequests," pendientes"]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-8 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Cliente & Clínica"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Plan"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Precio"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Estado"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Fecha"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:t.map(M=>{var L,oe;return n.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200",children:[n.jsx("td",{className:"px-8 py-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:n.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-blue-500 via-purple-500 to-indigo-600 flex items-center justify-center text-white font-bold text-lg shadow-lg",children:((L=M.adminName)==null?void 0:L.charAt(0))||((oe=M.email)==null?void 0:oe.charAt(0).toUpperCase())})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-bold text-gray-900",children:M.adminName}),n.jsx("div",{className:"text-sm text-gray-600",children:M.email}),M.clinicName&&n.jsxs("div",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2 py-1 rounded-lg mt-1 inline-flex items-center gap-1",children:[n.jsx(yn,{className:"w-3 h-3"}),M.clinicName]}),n.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["ID: ",z(M.clinicName||"default")]})]})]})}),n.jsx("td",{className:"px-6 py-6",children:k(M.plan)}),n.jsxs("td",{className:"px-6 py-6",children:[n.jsxs("span",{className:"text-lg font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:["S/. ",M.plan==="premium"?"299":"99"]}),n.jsx("div",{className:"text-xs text-gray-500",children:"por mes"})]}),n.jsx("td",{className:"px-6 py-6",children:D(M.status)}),n.jsx("td",{className:"px-6 py-6 text-sm text-gray-600 font-medium",children:q(M.createdAt)}),n.jsx("td",{className:"px-6 py-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>v(M),className:"p-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105",title:"Ver detalles",children:n.jsx(Ys,{className:"w-4 h-4"})}),M.status==="pending"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>P(M.id,M.userId),disabled:y===M.id,className:"p-2 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",title:"Aprobar y crear entorno aislado",children:y===M.id?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(_t,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>C(M.id,M.userId),disabled:y===M.id,className:"p-2 bg-gradient-to-r from-red-500 to-rose-600 text-white rounded-xl hover:from-red-600 hover:to-rose-700 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",title:"Rechazar solicitud",children:y===M.id?n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):n.jsx(ha,{className:"w-4 h-4"})})]})]})})]},M.id)})})]})}),t.length===0&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6",children:n.jsx(Lt,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No hay solicitudes"}),n.jsx("p",{className:"text-gray-600",children:"Las solicitudes de clínicas aparecerán aquí cuando se registren"})]})]}),w==="clinics"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Clínicas Registradas"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Clínicas activas con entornos multi-tenant"})]}),n.jsxs("div",{className:"text-sm text-gray-600",children:[a.length," clínicas activas"]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-8 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Clínica"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Admin"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Plan"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Límites"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Creada"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Estado"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:a.map(M=>{var L,oe,ve,ee;return n.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200",children:[n.jsx("td",{className:"px-8 py-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:n.jsx("div",{className:"h-12 w-12 rounded-2xl bg-gradient-to-br from-teal-500 to-cyan-600 flex items-center justify-center text-white font-bold text-lg shadow-lg",children:((L=M.name)==null?void 0:L.charAt(0))||"C"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-bold text-gray-900",children:M.name}),n.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["ID: ",M.id]})]})]})}),n.jsxs("td",{className:"px-6 py-6",children:[n.jsx("div",{className:"text-sm text-gray-900",children:M.adminName}),n.jsx("div",{className:"text-xs text-gray-500",children:M.ownerEmail})]}),n.jsx("td",{className:"px-6 py-6",children:k(M.plan)}),n.jsx("td",{className:"px-6 py-6",children:n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Doctores:"}),n.jsx("span",{className:"font-semibold",children:((oe=M.settings)==null?void 0:oe.maxDoctors)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Pacientes:"}),n.jsx("span",{className:"font-semibold",children:((ve=M.settings)==null?void 0:ve.maxPatients)||0})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-600",children:"Usuarios:"}),n.jsx("span",{className:"font-semibold",children:((ee=M.settings)==null?void 0:ee.maxUsers)||0})]})]})}),n.jsx("td",{className:"px-6 py-6 text-sm text-gray-600",children:q(M.createdAt)}),n.jsx("td",{className:"px-6 py-6",children:n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[n.jsx(Us,{className:"w-3 h-3 mr-1.5"}),M.status||"active"]})})]},M.id)})})]})}),a.length===0&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6",children:n.jsx(yn,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No hay clínicas registradas"}),n.jsx("p",{className:"text-gray-600",children:"Las clínicas aparecerán aquí cuando se aprueben las solicitudes"})]})]}),w==="users"&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Usuarios del Sistema"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Usuarios legacy y multi-tenant registrados en el sistema"})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.legacyUsers}),n.jsx("p",{className:"text-xs text-orange-600",children:"Legacy"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:c.multiTenantUsers}),n.jsx("p",{className:"text-xs text-green-600",children:"Multi-Tenant"})]})]})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-8 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Usuario"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Email"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Rol"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Clínica"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Tipo"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider",children:"Registro"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-100",children:s.map(M=>{var L,oe;return n.jsxs("tr",{className:"hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 transition-all duration-200",children:[n.jsx("td",{className:"px-8 py-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:n.jsx("div",{className:`h-12 w-12 rounded-2xl flex items-center justify-center text-white font-bold text-lg shadow-lg ${M.clinicId?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-orange-500 to-red-600"}`,children:((L=M.nombre)==null?void 0:L.charAt(0))||((oe=M.email)==null?void 0:oe.charAt(0).toUpperCase())})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-bold text-gray-900",children:M.nombre}),n.jsx("div",{className:"text-xs text-gray-500",children:M.clinicId?"Multi-Tenant":"Legacy User"})]})]})}),n.jsx("td",{className:"px-6 py-6 text-sm text-gray-900",children:M.email}),n.jsx("td",{className:"px-6 py-6",children:O(M.rol)}),n.jsx("td",{className:"px-6 py-6",children:M.clinicId?n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:M.clinicName||"Sin nombre"}),n.jsxs("div",{className:"text-xs text-gray-500 font-mono",children:["ID: ",M.clinicId]}),M.plan&&n.jsx("div",{className:"mt-1",children:k(M.plan)})]}):n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-orange-100 to-red-100 text-orange-800 border border-orange-200",children:[n.jsx($g,{className:"w-3 h-3 mr-1.5"}),"Usuario Legacy"]})}),n.jsx("td",{className:"px-6 py-6",children:M.clinicId?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[n.jsx(qe,{className:"w-3 h-3 mr-1.5"}),"Multi-Tenant"]}):n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-orange-100 to-red-100 text-orange-800 border border-orange-200",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1.5"}),"Legacy"]})}),n.jsx("td",{className:"px-6 py-6 text-sm text-gray-600",children:q(M.creado)})]},M.id)})})]})}),s.length===0&&n.jsxs("div",{className:"text-center py-16",children:[n.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 rounded-full w-24 h-24 flex items-center justify-center mx-auto mb-6",children:n.jsx(Lt,{className:"w-12 h-12 text-gray-400"})}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No hay usuarios registrados"}),n.jsx("p",{className:"text-gray-600",children:"Los usuarios aparecerán aquí cuando se registren en el sistema"})]})]})]})]}),x&&n.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-md z-50 flex items-center justify-center p-4",children:n.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-3xl max-w-4xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-white/20",children:n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"flex justify-between items-center mb-8",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Detalle de Solicitud Multi-Tenant"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Configuración de entorno aislado para la clínica"})]}),n.jsx("button",{onClick:()=>v(null),className:"p-3 hover:bg-gray-100 rounded-2xl transition-colors",children:n.jsx(ha,{className:"w-6 h-6 text-gray-500"})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-2xl border border-blue-100",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Lt,{className:"w-5 h-5 text-blue-600"}),"Información del Cliente"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Nombre del Admin"}),n.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:x.adminName})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Email"}),n.jsx("p",{className:"text-lg text-gray-900 mt-1",children:x.email})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Teléfono"}),n.jsx("p",{className:"text-lg text-gray-900 mt-1",children:x.phone||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Clínica"}),n.jsx("p",{className:"text-lg text-gray-900 mt-1",children:x.clinicName||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Dirección"}),n.jsx("p",{className:"text-lg text-gray-900 mt-1",children:x.address||"N/A"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"ID de Clínica (Generado)"}),n.jsx("p",{className:"text-sm font-mono bg-gray-100 px-2 py-1 rounded mt-1",children:z(x.clinicName||"default")})]})]})]}),n.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-2xl border border-purple-100",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(As,{className:"w-5 h-5 text-purple-600"}),"Configuración del Plan"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Plan Seleccionado"}),n.jsx("div",{className:"mt-2",children:k(x.plan)})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Precio Mensual"}),n.jsxs("p",{className:"text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mt-1",children:["S/. ",x.plan==="premium"?"299":"99"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Límites del Plan"}),n.jsxs("div",{className:"mt-2 space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Usuarios máximos:"}),n.jsx("span",{className:"font-semibold",children:x.plan==="premium"?"50":"10"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Pacientes máximos:"}),n.jsx("span",{className:"font-semibold",children:x.plan==="premium"?"500":"100"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Doctores máximos:"}),n.jsx("span",{className:"font-semibold",children:x.plan==="premium"?"20":"5"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Reportes avanzados:"}),n.jsx("span",{className:"font-semibold",children:x.plan==="premium"?"✅ Sí":"❌ No"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Estado"}),n.jsx("div",{className:"mt-2",children:D(x.status)})]})]})]})]}),n.jsxs("div",{className:"mt-8 bg-gradient-to-br from-emerald-50 to-teal-50 p-6 rounded-2xl border border-emerald-100",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Tt,{className:"w-5 h-5 text-emerald-600"}),"Configuración Multi-Tenant"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Entorno Aislado"}),n.jsx("p",{className:"text-gray-900 mt-1",children:"✅ Cada clínica tendrá datos completamente separados"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-gray-600 uppercase tracking-wide",children:"Colecciones Inicializadas"}),n.jsx("p",{className:"text-gray-900 mt-1",children:"📚 Doctores, Pacientes, Citas, Especialidades, Historias Clínicas"})]})]})]}),x.status==="pending"&&n.jsxs("div",{className:"mt-8 flex gap-4",children:[n.jsx("button",{onClick:()=>{P(x.id,x.userId),v(null)},disabled:y===x.id,className:"flex-1 bg-gradient-to-r from-green-500 to-emerald-600 text-white py-4 px-8 rounded-2xl font-bold hover:from-green-600 hover:to-emerald-700 transition-all duration-200 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:y===x.id?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creando Entorno..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_t,{className:"w-5 h-5"}),"Aprobar y Crear Entorno Aislado"]})}),n.jsx("button",{onClick:()=>{C(x.id,x.userId),v(null)},disabled:y===x.id,className:"flex-1 bg-gradient-to-r from-red-500 to-rose-600 text-white py-4 px-8 rounded-2xl font-bold hover:from-red-600 hover:to-rose-700 transition-all duration-200 flex items-center justify-center gap-3 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:y===x.id?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Procesando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ha,{className:"w-5 h-5"}),"Rechazar Solicitud"]})})]})]})})})]})})}function CE(){const[t,e]=S.useState({citasProximas:0,citasCompletadas:0,historiasClinicas:0,doctoresAsignados:0}),[s,r]=S.useState({nombres:"—",apellidos:"—",email:"—",telefono:"—",fechaNacimiento:"—",tipoDocumento:"—",numeroDocumento:"—",foto:"/placeholder.svg?height=64&width=64&text=Paciente"}),[a,o]=S.useState([]),[c,u]=S.useState([]),[m,f]=S.useState(!0),[x,v]=S.useState(null),{user:y}=wt(),N=Je();S.useEffect(()=>{y?(console.log("🔄 Usuario autenticado, iniciando carga de datos:",y.uid),_()):console.log("❌ No hay usuario autenticado")},[y]);const w=async P=>{try{console.log("🔍 Buscando usuario con UID:",P);const C=await Ke(we(ne,"usuarios",P));if(!C.exists())return console.error("Usuario no encontrado en la colección usuarios"),null;const D=C.data();return console.log("✅ Datos del usuario:",D),D.pacienteId?{userId:P,pacienteId:D.pacienteId,userData:D}:(console.error("El usuario no tiene pacienteId asociado"),null)}catch(C){return console.error("❌ Error al obtener datos del usuario:",C),null}},E=async P=>{try{console.log("🔍 Buscando paciente con ID:",P);const C=await Ke(we(ne,"pacientes",P));if(!C.exists())return console.log("❌ No se encontró paciente con ID:",P),null;const D=C.data();return console.log("✅ Paciente encontrado:",D),{id:C.id,data:D}}catch(C){return console.error("❌ Error al obtener datos del paciente:",C),null}},_=async()=>{try{if(f(!0),v(null),console.log("🚀 Iniciando carga de datos del paciente..."),!y||!y.uid){console.error("❌ No hay usuario válido"),v("No hay usuario autenticado");return}console.log("📋 Paso 1: Obteniendo datos del usuario...");const P=await w(y.uid);if(!P){console.error("❌ No se encontraron datos del usuario"),v("No se pudo encontrar la información del usuario");return}console.log("✅ Datos del usuario obtenidos, pacienteId:",P.pacienteId),console.log("📋 Paso 2: Obteniendo datos del paciente...");const C=await E(P.pacienteId);if(!C){console.error("❌ No se encontraron datos del paciente"),v("No se pudo encontrar la información del paciente");return}console.log("✅ Datos del paciente obtenidos:",C.data),console.log("📋 Paso 3: Mapeando datos del paciente...");const D={nombres:C.data.nombres||P.userData.nombres||"Sin nombre",apellidos:C.data.apellidos||P.userData.apellidos||"Sin apellidos",email:P.userData.email||y.email||"Sin email",telefono:C.data.telefono||P.userData.telefono||"Sin teléfono",fechaNacimiento:C.data.fechaNacimiento||"Sin fecha",tipoDocumento:C.data.tipoDocumento||"DNI",numeroDocumento:C.data.dni||C.data.numeroDocumento||P.userData.dni||"Sin documento",foto:C.data.foto||"/placeholder.svg?height=64&width=64&text=Paciente"};console.log("✅ Datos mapeados:",D),r(D),console.log("📋 Paso 4: Cargando estadísticas..."),await R(P.pacienteId),await I(P.pacienteId),await V(P.pacienteId),console.log("🎉 Carga de datos completada exitosamente")}catch(P){console.error("❌ Error general cargando datos del paciente:",P),v(`Error cargando datos: ${P.message}`)}finally{f(!1)}},R=async P=>{try{console.log("📊 Cargando estadísticas para paciente:",P);const D=new Date().toLocaleDateString("sv-SE"),k=Oe(be(ne,"citas"),Re("pacienteId","==",P),Re("fecha",">=",D)),O=await Ce(k),q=Oe(be(ne,"citas"),Re("pacienteId","==",P),Re("estado","==","completada")),M=await Ce(q),L=Oe(be(ne,"historias-clinicas"),Re("pacienteId","==",P)),oe=await Ce(L),ve=await Ce(Oe(be(ne,"citas"),Re("pacienteId","==",P))),ee=new Set;ve.docs.forEach(ye=>{const Fe=ye.data().doctorId;Fe&&ee.add(Fe)});const fe={citasProximas:O.size,citasCompletadas:M.size,historiasClinicas:oe.size,doctoresAsignados:ee.size};console.log("✅ Estadísticas cargadas:",fe),e(fe)}catch(C){console.error("❌ Error cargando estadísticas:",C)}},I=async P=>{try{console.log("📅 Cargando próximas citas para paciente:",P);const C=new Date().toLocaleDateString("sv-SE"),D=Oe(be(ne,"citas"),Re("pacienteId","==",P),Re("fecha",">=",C),Bn("fecha","asc"),Bn("hora","asc"),Bf(5)),k=await Ce(D),O=[];for(const q of k.docs){const M=q.data();let L="Doctor no encontrado";if(M.doctorId)try{const oe=await Ke(we(ne,"doctores",M.doctorId));oe.exists()&&(L=oe.data().nombres||"Doctor")}catch(oe){console.error("Error obteniendo doctor:",oe)}O.push({id:q.id,...M,doctorNombre:L})}console.log("✅ Próximas citas cargadas:",O.length),o(O)}catch(C){console.error("❌ Error cargando próximas citas:",C)}},V=async P=>{try{console.log("📋 Cargando actividad reciente para paciente:",P);const C=Oe(be(ne,"historias-clinicas"),Re("pacienteId","==",P),Bn("fechaCreacion","desc"),Bf(5)),D=await Ce(C),k=[];for(const O of D.docs){const q=O.data();let M="Doctor no encontrado";if(q.doctorId)try{const L=await Ke(we(ne,"doctores",q.doctorId));L.exists()&&(M=L.data().nombres||"Doctor")}catch(L){console.error("Error obteniendo doctor:",L)}k.push({id:O.id,tipo:"historia_clinica",titulo:"Historia Clínica Creada",descripcion:`Consulta con Dr. ${M}`,fecha:q.fechaCreacion,icono:rs,color:"text-blue-600"})}console.log("✅ Actividad reciente cargada:",k.length),u(k)}catch(C){console.error("❌ Error cargando actividad reciente:",C)}},z=P=>{if(!P||P==="Sin fecha")return"—";try{const C=new Date(P);return isNaN(C.getTime())?"—":C.toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})}catch(C){return console.error("Error formateando fecha:",C),"—"}},F=()=>{const P=new Date().getHours();return P<12?"Buenos días":P<18?"Buenas tardes":"Buenas noches"};return m?n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded w-64 mb-2 animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-96 animate-pulse"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[...Array(4)].map((P,C)=>n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-8 bg-gray-300 rounded"})]},C))})]}):x?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[n.jsx("h2",{className:"text-red-800 font-semibold mb-2",children:"Error cargando datos"}),n.jsx("p",{className:"text-red-600",children:x}),n.jsx("button",{onClick:_,className:"mt-3 bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Reintentar"})]})}):n.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-800",children:[F(),", ",s.nombres]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Bienvenido a tu portal de salud. Aquí puedes consultar tu información médica y citas."}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:new Date().toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg hover:border-green-200 transition-all duration-300 group",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg group-hover:bg-green-100 transition-colors duration-300",children:n.jsx(lt,{className:"h-6 w-6 text-blue-600 group-hover:text-green-600 transition-colors duration-300"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h2",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Próximas Citas"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 group-hover:text-green-600 transition-colors duration-300",children:t.citasProximas})]})]})}),n.jsx("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg hover:border-green-200 transition-all duration-300 group",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-lg group-hover:bg-green-200 transition-colors duration-300",children:n.jsx(Us,{className:"h-6 w-6 text-green-600 group-hover:text-green-700 transition-colors duration-300"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h2",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Citas Completadas"}),n.jsx("p",{className:"text-3xl font-bold text-green-600 group-hover:text-green-700 transition-colors duration-300",children:t.citasCompletadas})]})]})}),n.jsx("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg hover:border-green-200 transition-all duration-300 group",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-lg group-hover:bg-green-100 transition-colors duration-300",children:n.jsx(rs,{className:"h-6 w-6 text-purple-600 group-hover:text-green-600 transition-colors duration-300"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h2",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Historias Clínicas"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600 group-hover:text-green-600 transition-colors duration-300",children:t.historiasClinicas})]})]})}),n.jsx("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg hover:border-green-200 transition-all duration-300 group",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-orange-100 rounded-lg group-hover:bg-green-100 transition-colors duration-300",children:n.jsx(ot,{className:"h-6 w-6 text-orange-600 group-hover:text-green-600 transition-colors duration-300"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("h2",{className:"text-sm text-gray-500 uppercase font-semibold",children:"Doctores"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600 group-hover:text-green-600 transition-colors duration-300",children:t.doctoresAsignados})]})]})})]}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[n.jsxs("div",{className:"lg:col-span-1",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 mb-6 hover:shadow-lg hover:border-green-200 transition-all duration-300",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[n.jsx(He,{className:"h-5 w-5 mr-2 text-gray-600"}),"Mi Información"]}),n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("img",{src:s.foto||"/placeholder.svg",alt:"Foto del paciente",className:"w-16 h-16 rounded-full border-2 border-gray-300 object-cover hover:border-green-400 transition-colors duration-300",onError:P=>{P.target.src="/placeholder.svg?height=64&width=64&text=Paciente"}}),n.jsxs("div",{children:[n.jsxs("h4",{className:"font-semibold text-gray-800",children:[s.nombres," ",s.apellidos]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[s.tipoDocumento,": ",s.numeroDocumento]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(lo,{className:"h-4 w-4 mr-2 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:s.email})]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(Mr,{className:"h-4 w-4 mr-2 text-gray-400"}),n.jsx("span",{className:"text-gray-600",children:s.telefono})]}),n.jsxs("div",{className:"flex items-center text-sm",children:[n.jsx(lt,{className:"h-4 w-4 mr-2 text-gray-400"}),n.jsxs("span",{className:"text-gray-600",children:["Nacimiento: ",z(s.fechaNacimiento)]})]})]}),n.jsx("button",{onClick:()=>N("/patient/perfil"),className:"w-full mt-4 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-green-600 hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:"Editar Perfil"})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg hover:border-green-200 transition-all duration-300",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Acciones Rápidas"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>N("/paciente/citas"),className:"w-full flex items-center p-3 text-left bg-blue-50 hover:bg-green-50 rounded-lg transition-all duration-300 hover:shadow-md transform hover:scale-105",children:[n.jsx(lt,{className:"h-5 w-5 mr-3 text-blue-600 hover:text-green-600 transition-colors duration-300"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-800 hover:text-green-800 transition-colors duration-300",children:"Ver Mis Citas"}),n.jsx("p",{className:"text-sm text-blue-600 hover:text-green-600 transition-colors duration-300",children:"Consultar citas programadas"})]})]}),n.jsxs("button",{onClick:()=>N("/paciente/historia-clinica"),className:"w-full flex items-center p-3 text-left bg-green-50 hover:bg-green-100 rounded-lg transition-all duration-300 hover:shadow-md transform hover:scale-105",children:[n.jsx(rs,{className:"h-5 w-5 mr-3 text-green-600 hover:text-green-700 transition-colors duration-300"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-800 hover:text-green-900 transition-colors duration-300",children:"Mi Historia Clínica"}),n.jsx("p",{className:"text-sm text-green-600 hover:text-green-700 transition-colors duration-300",children:"Ver registros médicos"})]})]}),n.jsxs("button",{onClick:()=>N("/paciente/doctores"),className:"w-full flex items-center p-3 text-left bg-purple-50 hover:bg-green-50 rounded-lg transition-all duration-300 hover:shadow-md transform hover:scale-105",children:[n.jsx(ot,{className:"h-5 w-5 mr-3 text-purple-600 hover:text-green-600 transition-colors duration-300"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-purple-800 hover:text-green-800 transition-colors duration-300",children:"Mis Doctores"}),n.jsx("p",{className:"text-sm text-purple-600 hover:text-green-600 transition-colors duration-300",children:"Ver equipo médico"})]})]})]})]})]}),n.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg hover:border-green-200 transition-all duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[n.jsx(ms,{className:"h-5 w-5 mr-2 text-gray-600"}),"Próximas Citas"]}),n.jsx("button",{onClick:()=>N("/paciente/citas"),className:"text-blue-600 hover:text-green-600 text-sm font-medium transition-colors duration-300",children:"Ver todas"})]}),a.length>0?n.jsx("div",{className:"space-y-3",children:a.map(P=>n.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-green-50 hover:shadow-md transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3 hover:bg-green-100 transition-colors duration-300",children:n.jsx(lt,{className:"h-4 w-4 text-blue-600 hover:text-green-600 transition-colors duration-300"})}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"font-medium text-gray-800",children:[z(P.fecha)," - ",P.hora]}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Dr. ",P.doctorNombre]}),n.jsx("p",{className:"text-sm text-gray-500",children:P.motivo||"Consulta general"})]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium transition-all duration-300 ${P.estado==="confirmada"?"bg-green-100 text-green-800 hover:bg-green-200":P.estado==="pendiente"?"bg-yellow-100 text-yellow-800 hover:bg-green-100 hover:text-green-800":"bg-gray-100 text-gray-800 hover:bg-green-100 hover:text-green-800"}`,children:P.estado})]},P.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(lt,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500",children:"No tienes citas próximas programadas"})]})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg hover:border-green-200 transition-all duration-300",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[n.jsx(Ob,{className:"h-5 w-5 mr-2 text-gray-600"}),"Actividad Reciente"]}),c.length>0?n.jsx("div",{className:"space-y-3",children:c.map(P=>n.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg hover:bg-green-50 hover:shadow-md transition-all duration-300 transform hover:scale-105",children:[n.jsx("div",{className:"p-2 bg-gray-100 rounded-lg mr-3 hover:bg-green-100 transition-colors duration-300",children:n.jsx(P.icono,{className:`h-4 w-4 ${P.color} hover:text-green-600 transition-colors duration-300`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-800",children:P.titulo}),n.jsx("p",{className:"text-sm text-gray-600",children:P.descripcion}),n.jsx("p",{className:"text-sm text-gray-500",children:z(P.fecha)})]})]},P.id))}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Ob,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),n.jsx("p",{className:"text-gray-500",children:"No hay actividad reciente"})]})]})]})]})]})}function TE(){var P,C,D;const[t,e]=S.useState([]),[s,r]=S.useState(!0),[a,o]=S.useState({show:!1,specialty:null}),[c,u]=S.useState({show:!1,specialty:null}),[m,f]=S.useState(!1),[x,v]=S.useState(!1),{user:y}=wt(),N=Je();S.useEffect(()=>{w()},[y]);const w=async()=>{try{r(!0);let k;if(y!=null&&y.clinicId){console.log(`🏥 Cargando especialidades para clínica: ${y.clinicId}`);const q=Oe(be(ne,"especialidades"),Re("clinicId","==",y.clinicId));k=await Ce(q)}else console.log("👴 Usuario legacy: cargando todas las especialidades"),k=await Ce(be(ne,"especialidades"));const O=[];k.forEach(q=>{const M=q.data();M._placeholder||O.push({id:q.id,...M})}),console.log(`✅ ${O.length} especialidades cargadas`),e(O)}catch(k){console.error("Error al cargar especialidades:",k),W.error("❌ Error al cargar las especialidades",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{r(!1)}},E=async()=>{if(a.specialty)try{f(!0),await qc(we(ne,"especialidades",a.specialty.id)),W.success(`✅ Especialidad "${a.specialty.nombres}" eliminada correctamente`,{duration:4e3,style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}}),o({show:!1,specialty:null}),w()}catch(k){console.error("Error al eliminar:",k),W.error("❌ Error al eliminar la especialidad. Inténtalo de nuevo.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{f(!1)}},_=async()=>{if(c.specialty)try{v(!0),W.success(`🔄 Abriendo editor para "${c.specialty.nombres}"`,{duration:2e3,style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #DBEAFE"}}),u({show:!1,specialty:null}),setTimeout(()=>{N(`/admin/especialidades/editar/${c.specialty.id}`)},500)}catch(k){console.error("Error al navegar:",k),W.error("❌ Error al abrir el editor",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{v(!1)}},R=()=>{W.loading("🔄 Abriendo formulario de nueva especialidad...",{duration:1e3,style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #DBEAFE"}}),setTimeout(()=>{N("/admin/especialidades/crear")},500)},I=k=>{o({show:!0,specialty:k})},V=()=>{o({show:!1,specialty:null})},z=k=>{u({show:!0,specialty:k})},F=()=>{u({show:!1,specialty:null})};return s?n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:n.jsx("div",{className:"animate-pulse",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-100 rounded w-48"})]}),n.jsx("div",{className:"h-10 bg-gray-200 rounded w-40"})]})})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsx("div",{className:"animate-pulse p-6",children:n.jsx("div",{className:"space-y-4",children:[...Array(5)].map((k,O)=>n.jsx("div",{className:"h-16 bg-gray-100 rounded"},O))})})})]})}):n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(ot,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Especialidades Médicas"}),n.jsx("p",{className:"text-gray-600 mt-1",children:y!=null&&y.clinicId?`Gestión de especialidades de ${y.clinicName||y.clinicId}`:"Gestión completa de especialidades del sistema"})]})]}),n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-gray-500",children:"Total"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length})]}),n.jsxs("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 transition-colors",children:[n.jsx(Ta,{className:"w-4 h-4"}),n.jsx("span",{children:"Nueva Especialidad"})]})]})]})}),y!=null&&y.clinicId?n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(qe,{className:"w-5 h-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-green-800 font-medium",children:"Entorno Multi-Tenant Activo"}),n.jsxs("p",{className:"text-green-700 text-sm",children:["Mostrando especialidades de tu clínica:"," ",n.jsx("span",{className:"font-semibold",children:y.clinicName||y.clinicId})]})]})]})}):n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Tt,{className:"w-5 h-5 text-orange-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-800 font-medium",children:"Usuario Legacy - Acceso Completo"}),n.jsx("p",{className:"text-orange-700 text-sm",children:"Tienes acceso a todas las especialidades del sistema sin restricciones"})]})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Lista de Especialidades"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y!=null&&y.clinicId?`${t.length} especialidades en tu clínica`:`${t.length} especialidades en el sistema`})]}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(ot,{className:"w-4 h-4"}),n.jsx("span",{children:"Especialidad"})]})}),!(y!=null&&y.clinicId)&&n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx(yn,{className:"w-4 h-4"}),n.jsx("span",{children:"Clínica"})]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Acciones"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:y!=null&&y.clinicId?"2":"3",className:"px-6 py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(ot,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay especialidades registradas"}),n.jsx("p",{className:"text-gray-500 mb-6",children:y!=null&&y.clinicId?"No hay especialidades registradas para tu clínica":"No hay especialidades registradas en el sistema"}),n.jsxs("button",{onClick:R,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2 mx-auto transition-colors",children:[n.jsx(Ta,{className:"w-4 h-4"}),n.jsx("span",{children:"Crear Primera Especialidad"})]})]})})}):t.map((k,O)=>{var q,M;return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:n.jsx("span",{className:"text-blue-600 font-semibold text-sm",children:((M=(q=k.nombres)==null?void 0:q.charAt(0))==null?void 0:M.toUpperCase())||"E"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:k.nombres||"-"}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Especialidad #",O+1]})]})]})}),!(y!=null&&y.clinicId)&&n.jsx("td",{className:"px-6 py-4",children:k.clinicId?n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),k.clinicId]}):n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>z(k),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar especialidad",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>I(k),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar especialidad",children:n.jsx(Ra,{className:"w-4 h-4"})})]})})]},k.id)})})]})})]}),t.length>0&&n.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ot,{className:"w-4 h-4 text-blue-600"})}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[t.length," especialidad",t.length!==1?"es":"",y!=null&&y.clinicId?` en ${y.clinicName||y.clinicId}`:" en el sistema"]}),n.jsx("p",{className:"text-xs text-gray-500",children:y!=null&&y.clinicId?"Datos aislados por clínica • Multi-tenant activo":"Acceso completo al sistema • Usuario legacy"})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-gray-500",children:"Última actualización"}),n.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Ahora"})]})]})}),c.show&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-full",children:n.jsx($g,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Especialidad"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Abrir formulario de edición"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:["¿Deseas editar la especialidad"," ",n.jsxs("span",{className:"font-semibold text-gray-900",children:['"',(P=c.specialty)==null?void 0:P.nombres,'"']}),"?"]}),(y==null?void 0:y.clinicId)&&n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Esta especialidad pertenece a tu clínica: ",y.clinicName||y.clinicId]}),!(y!=null&&y.clinicId)&&((C=c.specialty)==null?void 0:C.clinicId)&&n.jsxs("p",{className:"text-xs text-orange-600 mt-2",children:["⚠️ Esta especialidad pertenece a la clínica: ",c.specialty.clinicId]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:F,disabled:x,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancelar"}),n.jsx("button",{onClick:_,disabled:x,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Abriendo..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Hn,{className:"w-4 h-4"}),n.jsx("span",{children:"Editar"})]})})]})]})})}),a.show&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:n.jsx(Rc,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirmar Eliminación"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Esta acción no se puede deshacer"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:["¿Estás seguro de que deseas eliminar la especialidad"," ",n.jsxs("span",{className:"font-semibold text-gray-900",children:['"',(D=a.specialty)==null?void 0:D.nombres,'"']}),"?"]}),(y==null?void 0:y.clinicId)&&n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Esta especialidad será eliminada de tu clínica: ",y.clinicName||y.clinicId]})]}),n.jsxs("div",{className:"flex space-x-3",children:[n.jsx("button",{onClick:V,disabled:m,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors disabled:opacity-50",children:"Cancelar"}),n.jsx("button",{onClick:E,disabled:m,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors disabled:opacity-50 flex items-center justify-center space-x-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Eliminando..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Ra,{className:"w-4 h-4"}),n.jsx("span",{children:"Eliminar"})]})})]})]})})})]})})}function RE(){const[t,e]=S.useState(""),[s,r]=S.useState(!1),a=Je(),o=async u=>{u.preventDefault();const m=t.trim();if(!m){W.error("⚠️ El campo nombre no puede estar vacío.");return}r(!0);try{await Gl(be(ne,"especialidades"),{nombres:m,creado:en()}),W.success("✅ Especialidad registrada correctamente."),setTimeout(()=>{a("/admin/especialidades")},1500)}catch(f){console.error("❌ Error al registrar especialidad:",f),W.error("❌ Hubo un problema al registrar la especialidad.")}finally{r(!1)}},c=()=>{a("/admin/especialidades")};return n.jsxs("div",{className:"p-6 max-w-xl mx-auto bg-white shadow-lg rounded-lg",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-800 text-center",children:"➕ Registrar Especialidad"}),n.jsxs("form",{onSubmit:o,className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-gray-700 font-semibold mb-1",children:"Nombre de la Especialidad"}),n.jsx("input",{type:"text",value:t,onChange:u=>e(u.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Ej: Cardiología, Pediatría, etc.",required:!0})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4",children:[n.jsxs("button",{type:"button",onClick:c,className:"bg-gray-300 text-gray-800 px-4 py-2 rounded hover:bg-gray-400 transition flex items-center gap-2",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:s,className:"bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fs,{className:"h-4 w-4"}),s?"Guardando...":"Guardar Cambios"]})]})]})]})}function DE(){const[t,e]=S.useState(""),[s,r]=S.useState(!1),[a,o]=S.useState(!0),[c,u]=S.useState(null),{user:m}=wt(),f=Je(),{id:x}=En();S.useEffect(()=>{v()},[x]);const v=async()=>{try{o(!0);const w=we(ne,"especialidades",x),E=await Ke(w);if(E.exists()){const _=E.data();if(m!=null&&m.clinicId&&_.clinicId&&_.clinicId!==m.clinicId){W.error("⚠️ No tienes permisos para editar esta especialidad.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),f("/admin/especialidades");return}u(_),e(_.nombres||"")}else W.error("⚠️ Especialidad no encontrada.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),f("/admin/especialidades")}catch(w){console.error("❌ Error al cargar especialidad:",w),W.error("❌ Ocurrió un error al cargar los datos.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),f("/admin/especialidades")}finally{o(!1)}},y=async w=>{w.preventDefault();const E=t.trim();if(!E){W.error("⚠️ El nombre no puede estar vacío.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}});return}if(E===(c==null?void 0:c.nombres)){W.error("⚠️ No se han realizado cambios.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}});return}r(!0);try{const _=we(ne,"especialidades",x);await hs(_,{nombres:E}),W.success("✅ Cambios guardados correctamente.",{duration:4e3,style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}}),setTimeout(()=>{f("/admin/especialidades")},1500)}catch(_){console.error("❌ Error al actualizar especialidad:",_),W.error("❌ Ocurrió un error al guardar los cambios.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{r(!1)}},N=()=>{f("/admin/especialidades")};return a?n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:n.jsx("div",{className:"animate-pulse",children:n.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg"}),n.jsxs("div",{children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-100 rounded w-48"})]})]})})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 mb-6"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 mb-2"}),n.jsx("div",{className:"h-10 bg-gray-100 rounded"})]}),n.jsxs("div",{className:"flex justify-between pt-6",children:[n.jsx("div",{className:"h-10 w-24 bg-gray-200 rounded"}),n.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded"})]})]})]})})]})}):n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6",children:n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(ot,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Especialidad"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Modificar información de la especialidad médica"})]})]})}),c&&n.jsx(n.Fragment,{children:m!=null&&m.clinicId?n.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(qe,{className:"w-5 h-5 text-green-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-green-800 font-medium",children:"Especialidad de tu Clínica"}),n.jsxs("p",{className:"text-green-700 text-sm",children:["Esta especialidad pertenece a:"," ",n.jsx("span",{className:"font-semibold",children:m.clinicName||m.clinicId})]})]})]})}):n.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Tt,{className:"w-5 h-5 text-orange-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-orange-800 font-medium",children:"Usuario Legacy - Acceso Completo"}),n.jsx("p",{className:"text-orange-700 text-sm",children:c.clinicId?`Editando especialidad de la clínica: ${c.clinicId}`:"Editando especialidad del sistema legacy"})]})]})})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[n.jsxs("div",{className:"px-8 py-6 border-b border-gray-200",children:[n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Información de la Especialidad"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Actualiza el nombre de la especialidad médica"})]}),n.jsxs("form",{onSubmit:y,className:"p-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Información Actual"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Nombre Actual"}),n.jsx("p",{className:"text-sm font-medium text-gray-900 mt-1",children:(c==null?void 0:c.nombres)||"Sin nombre"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:"Tipo"}),n.jsx("div",{className:"mt-1",children:c!=null&&c.clinicId?n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),"Multi-Tenant"]}):n.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]})})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-900 mb-2",children:"Nuevo Nombre de la Especialidad"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"text",value:t,onChange:w=>e(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Ej: Cardiología, Pediatría, Neurología...",required:!0}),n.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:n.jsx(ot,{className:"w-5 h-5 text-gray-400"})})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Ingresa un nombre descriptivo para la especialidad médica"})]}),t.trim()&&t.trim()!==(c==null?void 0:c.nombres)&&n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx(Kl,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-blue-800 font-medium",children:"Vista Previa de Cambios"}),n.jsxs("p",{className:"text-blue-700 text-sm",children:[n.jsx("span",{className:"line-through",children:c==null?void 0:c.nombres})," → ",n.jsx("span",{className:"font-semibold",children:t.trim()})]})]})]})})]}),n.jsxs("div",{className:"flex items-center justify-between pt-8 border-t border-gray-200 mt-8",children:[n.jsxs("button",{type:"button",onClick:N,className:"px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors flex items-center space-x-2",children:[n.jsx($t,{className:"w-4 h-4"}),n.jsx("span",{children:"Cancelar"})]}),n.jsx("button",{type:"submit",disabled:s||!t.trim()||t.trim()===(c==null?void 0:c.nombres),className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed",children:s?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),n.jsx("span",{children:"Guardando..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"w-4 h-4"}),n.jsx("span",{children:"Guardar Cambios"})]})})]})]})]}),n.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[n.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Información Importante"}),n.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[n.jsx("p",{children:"• El nombre de la especialidad debe ser único y descriptivo"}),n.jsx("p",{children:"• Los cambios se aplicarán inmediatamente después de guardar"}),m!=null&&m.clinicId?n.jsx("p",{children:"• Esta especialidad solo será visible en tu clínica"}):n.jsx("p",{children:"• Como usuario legacy, puedes editar especialidades de cualquier clínica"}),n.jsx("p",{children:"• Puedes cancelar en cualquier momento sin guardar cambios"})]})]})]})})}const IE=()=>{var P,C,D,k,O,q,M;const[t,e]=S.useState([]),[s,r]=S.useState(!0),[a,o]=S.useState(""),[c,u]=S.useState({show:!1,doctor:null}),[m,f]=S.useState({show:!1,doctor:null}),[x,v]=S.useState(!1),[y,N]=S.useState(!1),{user:w}=wt();S.useEffect(()=>{E()},[w]);const E=async()=>{try{r(!0);let L;if(w!=null&&w.clinicId){console.log(`🏥 Cargando doctores para clínica: ${w.clinicId}`);const ve=Oe(be(ne,"doctores"),Re("clinicId","==",w.clinicId));L=await Ce(ve)}else console.log("👴 Usuario legacy: cargando todos los doctores"),L=await Ce(be(ne,"doctores"));const oe=[];L.docs.forEach(ve=>{const ee=ve.data();ee._placeholder||oe.push({id:ve.id,...ee})}),console.log(`✅ ${oe.length} doctores cargados`),e(oe)}catch(L){console.error("Error fetching doctors:",L),W.error("Error al cargar los doctores",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{r(!1)}},_=L=>{u({show:!0,doctor:L})},R=L=>{f({show:!0,doctor:L})},I=async()=>{if(c.doctor)try{v(!0),W.loading("🔄 Eliminando doctor...",{id:"delete-doctor",style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #DBEAFE"}}),await qc(we(ne,"doctores",c.doctor.id)),e(t.filter(L=>L.id!==c.doctor.id)),W.success("✅ Doctor eliminado exitosamente",{id:"delete-doctor",style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}}),u({show:!1,doctor:null})}catch(L){console.error("Error deleting doctor:",L),W.error("❌ Error al eliminar el doctor",{id:"delete-doctor",style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{v(!1)}},V=()=>{m.doctor&&(N(!0),W.success("🔄 Abriendo formulario de edición...",{style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #DBEAFE"}}),setTimeout(()=>{window.location.href=`/admin/doctores/editar/${m.doctor.id}`,N(!1),f({show:!1,doctor:null})},1e3))},z=L=>{var oe;return((oe=L.especialidades)==null?void 0:oe.nombres)||"Sin especialidad"},F=t.filter(L=>{var oe,ve;return((oe=L.nombres)==null?void 0:oe.toLowerCase().includes(a.toLowerCase()))||((ve=L.profesion)==null?void 0:ve.toLowerCase().includes(a.toLowerCase()))||z(L).toLowerCase().includes(a.toLowerCase())});return s?n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded-lg mb-2 w-1/3"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded-lg w-1/2"})]})})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[...Array(3)].map((L,oe)=>n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:n.jsx("div",{className:"animate-pulse",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl"}),n.jsxs("div",{className:"ml-4 flex-1",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"})]})]})})},oe))}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"bg-gray-100 h-12"}),[...Array(5)].map((L,oe)=>n.jsx("div",{className:"border-t border-gray-200 h-16 bg-gray-50"},oe))]})})]})}):n.jsx("div",{className:"p-6 bg-gray-50 min-h-screen",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(ot,{className:"w-8 h-8 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Gestión de Doctores"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Administra los doctores del sistema"}),(w==null?void 0:w.clinicId)&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(yn,{className:"w-4 h-4 text-blue-600"}),n.jsx("span",{className:"text-sm text-blue-600 font-medium",children:w.clinicName||w.clinicId})]})]})]}),n.jsxs(Os,{to:"/admin/doctores/crear",className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl flex items-center gap-2 transition-all duration-200 shadow-lg hover:shadow-xl hover:scale-105",children:[n.jsx(Ta,{className:"w-5 h-5"}),"Nuevo Doctor"]})]})})}),w!=null&&w.clinicId?n.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(qe,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-green-800",children:"Vista Multi-Tenant Activa"}),n.jsxs("p",{className:"text-green-700 text-sm",children:["Mostrando solo doctores de tu clínica:"," ",n.jsx("span",{className:"font-medium",children:w.clinicName||w.clinicId})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-bold text-green-800",children:t.length}),n.jsx("p",{className:"text-xs text-green-600",children:"Doctores"})]})]})}):n.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Tt,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-orange-800",children:"Usuario Legacy"}),n.jsx("p",{className:"text-orange-700 text-sm",children:"Tienes acceso completo a todos los doctores del sistema"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-2xl font-bold text-orange-800",children:t.length}),n.jsx("p",{className:"text-xs text-orange-600",children:"Total Doctores"})]})]})}),n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(vn,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Buscar doctores por nombre, profesión o especialidad...",value:a,onChange:L=>o(L.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm"})]})}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(Lt,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:w!=null&&w.clinicId?"Doctores de tu Clínica":"Total Doctores"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.length}),(w==null?void 0:w.clinicId)&&n.jsxs("p",{className:"text-xs text-gray-500",children:["En ",w.clinicName||w.clinicId]})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:n.jsx(_t,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Con Especialidad"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(L=>{var oe;return(oe=L.especialidades)==null?void 0:oe.nombres}).length})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:n.jsx(Mr,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Con Teléfono"}),n.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.filter(L=>L.telefono).length})]})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[n.jsx("thead",{className:"bg-gray-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Doctor"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Profesión"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Teléfono"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Especialidad"}),!(w!=null&&w.clinicId)&&n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Tipo"}),n.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Acciones"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:w!=null&&w.clinicId?"5":"6",className:"px-6 py-12 text-center text-gray-500",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(ot,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No se encontraron doctores"}),n.jsx("p",{className:"text-gray-500 mb-4",children:w!=null&&w.clinicId?`Comienza agregando un doctor a tu clínica: ${w.clinicName||w.clinicId}`:"Comienza agregando un nuevo doctor al sistema"}),n.jsxs(Os,{to:"/admin/doctores/crear",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[n.jsx(Ta,{className:"w-4 h-4"}),"Agregar Doctor"]})]})})}):F.map(L=>{var oe,ve;return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-12 w-12",children:n.jsx("div",{className:`h-12 w-12 rounded-full flex items-center justify-center text-white font-bold text-lg ${L.clinicId?"bg-green-500":"bg-orange-500"}`,children:((ve=(oe=L.nombres)==null?void 0:oe.charAt(0))==null?void 0:ve.toUpperCase())||"D"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.nombres||"Sin nombre"}),n.jsx("div",{className:"text-sm text-gray-500",children:"Doctor"})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:L.profesion||"Sin profesión"})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:L.telefono||"Sin teléfono"}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:z(L)})}),!(w!=null&&w.clinicId)&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:L.clinicId?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),"Multi-Tenant"]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:n.jsxs("div",{className:"flex space-x-2",children:[n.jsx("button",{onClick:()=>R(L),className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-colors",title:"Editar",children:n.jsx(Hn,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>_(L),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-colors",title:"Eliminar",children:n.jsx(Ra,{className:"w-4 h-4"})})]})})]},L.id)})})]})})}),F.length>0&&n.jsx("div",{className:"mt-6 bg-white rounded-xl p-4 shadow-sm border border-gray-200",children:n.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-600",children:[n.jsxs("span",{children:["Mostrando ",F.length," de ",t.length," doctores",(w==null?void 0:w.clinicId)&&n.jsxs("span",{className:"ml-2 text-blue-600 font-medium",children:["(de tu clínica: ",w.clinicName||w.clinicId,")"]})]}),(w==null?void 0:w.clinicId)&&n.jsxs("div",{className:"flex items-center gap-2 text-xs bg-blue-50 text-blue-700 px-3 py-1 rounded-full",children:[n.jsx(qe,{className:"w-3 h-3"}),"Vista filtrada por clínica"]})]})}),c.show&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:n.jsx(Rc,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Eliminar Doctor"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Esta acción no se puede deshacer"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-2",children:"¿Estás seguro de que deseas eliminar al doctor:"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("p",{className:"font-medium text-gray-900",children:((P=c.doctor)==null?void 0:P.nombres)||"Sin nombre"}),n.jsx("p",{className:"text-sm text-gray-600",children:((C=c.doctor)==null?void 0:C.profesion)||"Sin profesión"}),((D=c.doctor)==null?void 0:D.clinicId)&&(w==null?void 0:w.clinicId)&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Clínica:"," ",c.doctor.clinicId===w.clinicId?"Mi clínica":c.doctor.clinicId]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>u({show:!1,doctor:null}),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:x,children:"Cancelar"}),n.jsx("button",{onClick:I,disabled:x,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Eliminando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ra,{className:"w-4 h-4"}),"Eliminar"]})})]})]})}),m.show&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:n.jsx(Hn,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Doctor"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Abrir formulario de edición"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("p",{className:"text-gray-700 mb-2",children:"Vas a editar la información del doctor:"}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[n.jsx("p",{className:"font-medium text-gray-900",children:((k=m.doctor)==null?void 0:k.nombres)||"Sin nombre"}),n.jsx("p",{className:"text-sm text-gray-600",children:((O=m.doctor)==null?void 0:O.profesion)||"Sin profesión"}),((q=m.doctor)==null?void 0:q.clinicId)&&(w==null?void 0:w.clinicId)&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Clínica: ",m.doctor.clinicId===w.clinicId?"Mi clínica":m.doctor.clinicId]}),!(w!=null&&w.clinicId)&&((M=m.doctor)==null?void 0:M.clinicId)&&n.jsx("div",{className:"mt-2 p-2 bg-yellow-50 rounded border border-yellow-200",children:n.jsx("p",{className:"text-xs text-yellow-800",children:"⚠️ Este doctor pertenece a una clínica multi-tenant"})})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>f({show:!1,doctor:null}),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:y,children:"Cancelar"}),n.jsx("button",{onClick:V,disabled:y,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Abriendo..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Hn,{className:"w-4 h-4"}),"Editar"]})})]})]})})]})})},kE=()=>{const[t,e]=S.useState({nombres:"",profesion:"",telefono:"",email:"",biografia:"",especialidad:""}),[s,r]=S.useState([]),[a,o]=S.useState(!1),[c,u]=S.useState(!0),{user:m}=wt(),f=Je();S.useEffect(()=>{x()},[m]);const x=async()=>{try{u(!0);let E;if(m!=null&&m.clinicId){console.log(`🏥 Cargando especialidades para clínica: ${m.clinicId}`);const R=Oe(be(ne,"especialidades"),Re("clinicId","==",m.clinicId));E=await Ce(R)}else console.log("👴 Usuario legacy: cargando todas las especialidades"),E=await Ce(be(ne,"especialidades"));const _=[];E.forEach(R=>{const I=R.data();I._placeholder||_.push({id:R.id,name:I.nombres})}),console.log(`✅ ${_.length} especialidades cargadas`),r(_)}catch(E){console.error("❌ Error al cargar especialidades:",E),W.error("Error al cargar especialidades",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"},duration:4e3})}finally{u(!1)}},v=()=>{const E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let _="";for(let R=0;R<8;R++)_+=E.charAt(Math.floor(Math.random()*E.length));return _},y=E=>{const{name:_,value:R}=E.target;e(I=>({...I,[_]:R}))},N=async E=>{if(E.preventDefault(),!t.nombres.trim()||!t.profesion.trim()||!t.email.trim()||!t.especialidad){W.error("⚠️ Todos los campos obligatorios deben ser completados.",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"},duration:4e3});return}o(!0);try{const _=v(),R={nombres:t.nombres.trim(),profesion:t.profesion.trim(),telefono:t.telefono.trim(),correo:t.email.trim(),biografia:t.biografia.trim(),especialidad:t.especialidad,password:_,creado:en(),actualizado:en()};m!=null&&m.clinicId?(R.clinicId=m.clinicId,console.log(`🏥 Creando doctor para clínica: ${m.clinicId}`)):console.log("👴 Usuario legacy: creando doctor sin restricciones"),await Gl(be(ne,"doctores"),R),W.success("✅ Doctor creado exitosamente",{style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"},duration:4e3}),e({nombres:"",profesion:"",telefono:"",email:"",biografia:"",especialidad:""}),setTimeout(()=>{f("/admin/doctores")},1500)}catch(_){console.error("❌ Error al crear doctor:",_),W.error("❌ No se pudo crear el doctor.",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"},duration:4e3})}finally{o(!1)}},w=()=>{f("/admin/doctores")};return c?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-12 bg-gray-300 rounded-xl mb-6"}),n.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{className:"space-y-6",children:[...Array(4)].map((E,_)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},_))}),n.jsx("div",{className:"space-y-6",children:[...Array(3)].map((E,_)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},_))})]})})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(ot,{className:"w-8 h-8 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Crear Nuevo Doctor"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Registra un nuevo doctor en el sistema"})]})]})})}),m!=null&&m.clinicId?n.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-2xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(qe,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-green-800",children:"Doctor Multi-Tenant"}),n.jsxs("p",{className:"text-sm text-green-700",children:["Este doctor será creado para tu clínica:"," ",n.jsx("span",{className:"font-medium",children:m.clinicName||m.clinicId})]})]})]})}):n.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-2xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Tt,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-orange-800",children:"Usuario Legacy"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Tienes acceso completo para crear doctores en todo el sistema"})]})]})}),n.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100",children:n.jsxs("form",{onSubmit:N,className:"p-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"pb-4 border-b border-gray-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(He,{className:"w-5 h-5 text-blue-600"}),"Información Personal"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Datos básicos del doctor"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombre Completo *"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",name:"nombres",value:t.nombres,onChange:y,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Dr. Juan Pérez García",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Profesión *"}),n.jsxs("div",{className:"relative",children:[n.jsx(ot,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",name:"profesion",value:t.profesion,onChange:y,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Médico Cirujano",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Correo Electrónico *"}),n.jsxs("div",{className:"relative",children:[n.jsx(lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",name:"email",value:t.email,onChange:y,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"doctor@ejemplo.com",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Teléfono"}),n.jsxs("div",{className:"relative",children:[n.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"tel",name:"telefono",value:t.telefono,onChange:y,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"+51 999 888 777"})]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"pb-4 border-b border-gray-200",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[n.jsx(ot,{className:"w-5 h-5 text-blue-600"}),"Información Profesional"]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Especialidad y experiencia"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Especialidad *"}),n.jsxs("select",{name:"especialidad",value:t.especialidad,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[n.jsx("option",{value:"",children:"Selecciona una especialidad"}),s.map(E=>n.jsx("option",{value:E.name,children:E.name},E.id))]}),s.length===0&&n.jsx("p",{className:"text-sm text-amber-600 mt-1",children:"⚠️ No hay especialidades disponibles. Crea una especialidad primero."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Biografía"}),n.jsxs("div",{className:"relative",children:[n.jsx(rs,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("textarea",{name:"biografia",value:t.biografia,onChange:y,rows:4,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors resize-none",placeholder:"Breve descripción de la experiencia y formación del doctor..."})]})]}),(m==null?void 0:m.clinicId)&&n.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-xl p-4",children:[n.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"Información de Clínica"}),n.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Clínica:"}),n.jsx("span",{className:"font-medium",children:m.clinicName||"Sin nombre"})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"ID:"}),n.jsx("span",{className:"font-mono text-xs",children:m.clinicId})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{children:"Plan:"}),n.jsx("span",{className:"font-medium capitalize",children:m.plan||"Básico"})]})]})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-8 mt-8 border-t border-gray-200",children:[n.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-2 px-6 py-3 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 transition-colors font-medium",children:[n.jsx($t,{className:"w-4 h-4"}),"Cancelar"]}),n.jsx("button",{type:"submit",disabled:a||s.length===0,className:"flex items-center gap-2 px-8 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"w-4 h-4"}),"Crear Doctor"]})})]})]})}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-2xl p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(rs,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-semibold text-blue-800",children:"Información Importante"}),n.jsxs("ul",{className:"text-sm text-blue-700 mt-1 space-y-1",children:[n.jsx("li",{children:"• Se generará automáticamente una contraseña temporal para el doctor"}),n.jsx("li",{children:"• Los campos marcados con (*) son obligatorios"}),n.jsx("li",{children:"• El doctor podrá cambiar su contraseña en el primer acceso"}),(m==null?void 0:m.clinicId)&&n.jsx("li",{children:"• Este doctor solo tendrá acceso a los datos de tu clínica"})]})]})]})})]})})},ME=()=>{const{id:t}=En(),e=Je(),{user:s}=wt(),[r,a]=S.useState({nombres:"",especialidad:"",telefono:"",correo:"",direccion:"",cmp:"",profesion:""}),[o,c]=S.useState({}),[u,m]=S.useState([]),[f,x]=S.useState(!1),[v,y]=S.useState(!0),[N,w]=S.useState(!1);S.useEffect(()=>{E(),_()},[t,s]),S.useEffect(()=>{const z=Object.keys(r).some(F=>r[F]!==o[F]);w(z)},[r,o]);const E=async()=>{try{y(!0);const z=await Ke(we(ne,"doctores",t));if(z.exists()){const F=z.data();if(s!=null&&s.clinicId&&F.clinicId&&F.clinicId!==s.clinicId){W.error("⚠️ No tienes permisos para editar este doctor.",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),e("/admin/doctores");return}const P={nombres:F.nombres||"",especialidad:F.especialidad||"",telefono:F.telefono||"",correo:F.correo||"",direccion:F.direccion||"",cmp:F.cmp||"",profesion:F.profesion||""};a(P),c(P)}else W.error("❌ Doctor no encontrado",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),e("/admin/doctores")}catch(z){console.error("Error al cargar el doctor:",z),W.error("❌ Error al cargar el doctor",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),e("/admin/doctores")}finally{y(!1)}},_=async()=>{try{let z;s!=null&&s.clinicId?z=Oe(be(ne,"especialidades"),Re("clinicId","==",s.clinicId)):z=be(ne,"especialidades");const F=await Ce(z),P=[];F.forEach(C=>{const D=C.data();D._placeholder||P.push({id:C.id,name:D.nombres,clinicId:D.clinicId})}),m(P)}catch(z){console.error("❌ Error al cargar especialidades:",z),W.error("❌ Error al cargar especialidades",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}},R=z=>{const{name:F,value:P}=z.target;a(C=>({...C,[F]:P}))},I=async z=>{if(z.preventDefault(),!r.nombres.trim()){W.error("⚠️ El nombre es obligatorio",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}});return}x(!0);try{await hs(we(ne,"doctores",t),{nombres:r.nombres.trim(),especialidad:r.especialidad,telefono:r.telefono.trim(),correo:r.correo.trim(),direccion:r.direccion.trim(),cmp:r.cmp.trim(),profesion:r.profesion.trim(),updatedAt:new Date}),W.success("✅ Doctor actualizado exitosamente",{duration:4e3,style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}}),setTimeout(()=>{e("/admin/doctores")},1500)}catch(F){console.error("Error al actualizar el doctor:",F),W.error("❌ Error al actualizar el doctor",{duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{x(!1)}},V=()=>{N?window.confirm("¿Estás seguro? Los cambios no guardados se perderán.")&&e("/admin/doctores"):e("/admin/doctores")};return v?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6 w-64"}),n.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{className:"space-y-6",children:[...Array(4)].map((z,F)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2 w-24"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},F))}),n.jsx("div",{className:"space-y-6",children:[...Array(3)].map((z,F)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2 w-24"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},F))})]}),n.jsxs("div",{className:"flex justify-between pt-8",children:[n.jsx("div",{className:"h-10 w-24 bg-gray-300 rounded"}),n.jsx("div",{className:"h-10 w-32 bg-gray-300 rounded"})]})]})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(ot,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Doctor"}),n.jsx("p",{className:"text-gray-600",children:"Actualizar información del doctor"})]})]})}),s!=null&&s.clinicId?n.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(qe,{className:"w-5 h-5 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-green-800",children:"Editando Doctor de tu Clínica"}),n.jsxs("p",{className:"text-sm text-green-700",children:["Clínica: ",n.jsx("span",{className:"font-medium",children:s.clinicName||s.clinicId})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-green-600",children:"Multi-Tenant"}),n.jsxs("p",{className:"text-sm font-semibold text-green-800",children:["🏥 ",s.plan||"Básico"]})]})]})}):n.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Tt,{className:"w-5 h-5 text-orange-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-orange-800",children:"Usuario Legacy - Acceso Completo"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Puedes editar cualquier doctor del sistema"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-orange-600",children:"Legacy"}),n.jsx("p",{className:"text-sm font-semibold text-orange-800",children:"🔓 Sin restricciones"})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:n.jsxs("form",{onSubmit:I,className:"p-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(He,{className:"w-5 h-5 text-gray-600"}),"Información Personal"]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo *"}),n.jsx("input",{type:"text",name:"nombres",value:r.nombres,onChange:R,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Nombre completo del doctor"}),r.nombres!==o.nombres&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Anterior: ",o.nombres||"Sin nombre"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(lo,{className:"w-4 h-4 inline mr-1"}),"Correo Electrónico"]}),n.jsx("input",{type:"email",name:"correo",value:r.correo,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"correo@ejemplo.com"}),r.correo!==o.correo&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Anterior: ",o.correo||"Sin correo"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Mr,{className:"w-4 h-4 inline mr-1"}),"Teléfono"]}),n.jsx("input",{type:"text",name:"telefono",value:r.telefono,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"+51 999 999 999"}),r.telefono!==o.telefono&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Anterior: ",o.telefono||"Sin teléfono"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(qg,{className:"w-4 h-4 inline mr-1"}),"Dirección"]}),n.jsx("input",{type:"text",name:"direccion",value:r.direccion,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Dirección completa"}),r.direccion!==o.direccion&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Anterior: ",o.direccion||"Sin dirección"]})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(LF,{className:"w-5 h-5 text-gray-600"}),"Información Profesional"]})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especialidad"}),n.jsxs("select",{name:"especialidad",value:r.especialidad,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[n.jsx("option",{value:"",children:"Selecciona una especialidad"}),u.map(z=>n.jsxs("option",{value:z.name,children:[z.name,!(s!=null&&s.clinicId)&&z.clinicId&&` (${z.clinicId})`]},z.id))]}),r.especialidad!==o.especialidad&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Anterior: ",o.especialidad||"Sin especialidad"]}),u.length===0&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s!=null&&s.clinicId?"No hay especialidades en tu clínica. Crea una primero.":"No hay especialidades disponibles."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Profesión"}),n.jsx("input",{type:"text",name:"profesion",value:r.profesion,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Ej: Médico Cirujano"}),r.profesion!==o.profesion&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Anterior: ",o.profesion||"Sin profesión"]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(rs,{className:"w-4 h-4 inline mr-1"}),"CMP (Colegio Médico del Perú)"]}),n.jsx("input",{type:"text",name:"cmp",value:r.cmp,onChange:R,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Número de CMP"}),r.cmp!==o.cmp&&n.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["Anterior: ",o.cmp||"Sin CMP"]})]}),N&&n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Rc,{className:"w-4 h-4 text-blue-600"}),n.jsx("h4",{className:"text-sm font-semibold text-blue-800",children:"Cambios Detectados"})]}),n.jsx("p",{className:"text-sm text-blue-700",children:"Se han detectado cambios en el formulario. Revisa la información antes de guardar."})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-gray-200",children:[n.jsxs("button",{type:"button",onClick:V,className:"flex items-center gap-2 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[n.jsx($t,{className:"w-4 h-4"}),"Cancelar"]}),n.jsx("button",{type:"submit",disabled:f||!N,className:"flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"w-4 h-4"}),"Guardar Cambios"]})})]})]})}),n.jsx("div",{className:"mt-6 bg-gray-100 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[n.jsx(Rc,{className:"w-4 h-4"}),n.jsxs("p",{className:"text-sm",children:[n.jsx("strong",{children:"Importante:"})," Los cambios se aplicarán inmediatamente.",(s==null?void 0:s.clinicId)&&" Solo puedes editar doctores de tu clínica."]})]})})]})})};function IB(){const[t,e]=S.useState({nombres:"",correo:"",telefono:"",direccion:"",especialidad:"",foto:"/placeholder.svg?height=96&width=96&text=Doctor",clinicId:"",clinicName:""}),[s,r]=S.useState({nuevaPassword:"",codigoVerificacion:""}),[a,o]=S.useState(!1),[c,u]=S.useState(!1),[m,f]=S.useState(!0),[x,v]=S.useState(!1),[y,N]=S.useState(!1),[w,E]=S.useState({}),{user:_}=wt(),R=Je();S.useEffect(()=>{_&&I()},[_]),S.useEffect(()=>{const k=t.telefono!==w.telefono||t.direccion!==w.direccion;N(k)},[t,w]);const I=async()=>{var k;try{f(!0);const O=we(ne,"doctores",_.uid),q=await Ke(O);if(!q.exists()){W.error("❌ UID no encontrado en 'doctores'",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}});return}const M=q.data(),L={nombres:M.nombres||"",correo:_.email||"",telefono:M.telefono||"",direccion:M.direccion||"",especialidad:((k=M.especialidades)==null?void 0:k.nombres)||"",foto:M.foto||"/placeholder.svg?height=96&width=96&text=Doctor",clinicId:M.clinicId||"",clinicName:M.clinicName||""};e(L),E(L)}catch(O){console.error("Error al cargar datos del doctor:",O),W.error("❌ Error al cargar los datos",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{f(!1)}},V=k=>{const{name:O,value:q}=k.target;e(M=>({...M,[O]:q}))},z=k=>{const{name:O,value:q}=k.target;r(M=>({...M,[O]:q}))},F=async k=>{const O=k.target.files[0];if(O)try{v(!0);const q=`fotos-doctores/${_.uid}.jpg`,M=Vl(Ul,q);await Fg(M,O);const L=await Bg(M),oe=we(ne,"doctores",_.uid);await hs(oe,{foto:L}),e(ve=>({...ve,foto:L})),W.success("✅ Imagen actualizada correctamente",{style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}})}catch(q){console.error("Error al subir imagen:",q),W.error("❌ No se pudo subir la imagen",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{v(!1)}},P=async()=>{const{nuevaPassword:k,codigoVerificacion:O}=s;if(!k||!O){W.error("⚠️ Completa todos los campos para cambiar contraseña",{style:{background:"#FFFBEB",color:"#D97706",border:"1px solid #FED7AA"}});return}if(O!=="140603"){W.error("❌ Código de verificación incorrecto",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}});return}if(k.length<6){W.error("⚠️ La contraseña debe tener al menos 6 caracteres",{style:{background:"#FFFBEB",color:"#D97706",border:"1px solid #FED7AA"}});return}try{await tA(_,k),W.success("✅ Contraseña actualizada correctamente",{style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}}),r({nuevaPassword:"",codigoVerificacion:""})}catch(q){console.error("Error al actualizar contraseña:",q),W.error("❌ No se pudo cambiar la contraseña",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}},C=async k=>{k.preventDefault(),u(!0);try{const O=we(ne,"doctores",_.uid);await hs(O,{telefono:t.telefono,direccion:t.direccion}),W.success("✅ Cambios guardados correctamente. Redirigiendo...",{style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}}),setTimeout(()=>{R("/doctor/dashboard")},2e3)}catch(O){console.error("Error al guardar cambios:",O),W.error("❌ Error al guardar los cambios",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{u(!1)}},D=()=>{y?window.confirm("¿Estás seguro de que deseas cancelar? Se perderán los cambios no guardados.")&&R("/doctor/dashboard"):R("/doctor/dashboard")};return m?n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-24 h-24 bg-gray-300 rounded-full"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-32"}),n.jsx("div",{className:"h-3 bg-gray-300 rounded w-24"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[...Array(6)].map((k,O)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},O))})]})})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"p-6 max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-xl",children:n.jsx(He,{className:"h-8 w-8 text-blue-600"})}),"Mi Perfil"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Gestiona tu información personal y configuración de cuenta"})]}),t.clinicId?n.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(qe,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-green-800",children:"Doctor Multi-Tenant"}),n.jsxs("p",{className:"text-green-700 text-sm",children:["Perfil asociado a: ",n.jsx("span",{className:"font-medium",children:t.clinicName||t.clinicId})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-green-600",children:"Entorno Aislado"}),n.jsx("p",{className:"text-lg font-bold text-green-700",children:"🟢 Activo"})]})]})}):n.jsx("div",{className:"mb-6 bg-orange-50 border border-orange-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Tt,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-semibold text-orange-800",children:"Doctor Legacy"}),n.jsx("p",{className:"text-orange-700 text-sm",children:"Perfil en sistema tradicional sin restricciones"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-xs text-orange-600",children:"Sistema Legacy"}),n.jsx("p",{className:"text-lg font-bold text-orange-700",children:"🟠 Activo"})]})]})}),n.jsxs("form",{onSubmit:C,className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(He,{className:"h-5 w-5 text-blue-600"}),"Información Personal"]}),n.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:t.foto||"/placeholder.svg",alt:"Foto de perfil",className:"rounded-full w-24 h-24 object-cover border-4 border-gray-200 shadow-lg",onError:k=>{k.target.src="/placeholder.svg?height=96&width=96&text=Doctor"}}),x&&n.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:n.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"})})]}),n.jsxs("div",{children:[n.jsx("input",{type:"file",id:"inputFoto",accept:"image/*",onChange:F,className:"hidden",disabled:x}),n.jsxs("button",{type:"button",onClick:()=>document.getElementById("inputFoto").click(),disabled:x,className:"flex items-center gap-2 bg-blue-50 text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-100 transition disabled:opacity-50 border border-blue-200",children:[n.jsx(OT,{className:"h-4 w-4"}),x?"Subiendo...":"Cambiar imagen"]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"JPG, PNG hasta 5MB"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block font-semibold mb-2 text-gray-700 flex items-center gap-2",children:[n.jsx(He,{className:"h-4 w-4 text-gray-500"}),"Nombres"]}),n.jsx("input",{type:"text",name:"nombres",value:t.nombres,className:"w-full border border-gray-300 rounded-lg p-3 bg-gray-50 text-gray-600",readOnly:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Campo no editable"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block font-semibold mb-2 text-gray-700 flex items-center gap-2",children:[n.jsx(lo,{className:"h-4 w-4 text-gray-500"}),"Correo"]}),n.jsx("input",{type:"email",name:"correo",value:t.correo,className:"w-full border border-gray-300 rounded-lg p-3 bg-gray-50 text-gray-600",readOnly:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Campo no editable"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block font-semibold mb-2 text-gray-700 flex items-center gap-2",children:[n.jsx(Mr,{className:"h-4 w-4 text-gray-500"}),"Teléfono"]}),n.jsx("input",{type:"text",name:"telefono",value:t.telefono,onChange:V,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Número de teléfono"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block font-semibold mb-2 text-gray-700 flex items-center gap-2",children:[n.jsx(ot,{className:"h-4 w-4 text-gray-500"}),"Especialidad"]}),n.jsx("input",{type:"text",name:"especialidad",value:t.especialidad,className:"w-full border border-gray-300 rounded-lg p-3 bg-gray-50 text-gray-600",readOnly:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Campo no editable"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsxs("label",{className:"block font-semibold mb-2 text-gray-700 flex items-center gap-2",children:[n.jsx(qg,{className:"h-4 w-4 text-gray-500"}),"Dirección"]}),n.jsx("input",{type:"text",name:"direccion",value:t.direccion,onChange:V,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Dirección completa"})]}),t.clinicId&&n.jsxs("div",{className:"md:col-span-2 bg-green-50 border border-green-200 rounded-lg p-4",children:[n.jsxs("label",{className:"block font-semibold mb-2 text-green-800 flex items-center gap-2",children:[n.jsx(yn,{className:"h-4 w-4 text-green-600"}),"Información de Clínica"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:"Nombre de Clínica"}),n.jsx("p",{className:"font-medium text-green-900",children:t.clinicName||"Sin nombre"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm text-green-700",children:"ID de Clínica"}),n.jsx("p",{className:"font-mono text-sm text-green-900",children:t.clinicId})]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[n.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[n.jsx(xi,{className:"h-5 w-5 text-yellow-600"}),"Cambiar Contraseña"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block font-semibold mb-2 text-gray-700",children:"Nueva contraseña"}),n.jsx("input",{type:a?"text":"password",name:"nuevaPassword",value:s.nuevaPassword,onChange:z,className:"w-full border border-gray-300 rounded-lg p-3 pr-10 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400",placeholder:"Mínimo 6 caracteres"}),n.jsx("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-10 text-gray-500 hover:text-gray-700",children:a?n.jsx(Ca,{className:"h-5 w-5"}):n.jsx(Ys,{className:"h-5 w-5"})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-semibold mb-2 text-gray-700",children:"Código de verificación"}),n.jsx("input",{type:"text",name:"codigoVerificacion",value:s.codigoVerificacion,onChange:z,className:"w-full border border-gray-300 rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400",placeholder:"Código de seguridad"})]})]}),n.jsxs("button",{type:"button",onClick:P,className:"mt-6 bg-yellow-500 text-white px-6 py-3 rounded-lg hover:bg-yellow-600 transition flex items-center gap-2 shadow-sm",children:[n.jsx(fs,{className:"h-4 w-4"}),"Cambiar Contraseña"]})]}),n.jsxs("div",{className:"flex gap-4 pt-6",children:[n.jsxs("button",{type:"submit",disabled:c||!y,className:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-sm",children:[n.jsx(fs,{className:"h-4 w-4"}),c?"Guardando...":"Guardar Cambios"]}),n.jsxs("button",{type:"button",onClick:D,className:"bg-gray-300 text-gray-800 px-8 py-3 rounded-lg hover:bg-gray-400 transition flex items-center gap-2 shadow-sm",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"ℹ️ Información importante"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[n.jsx("li",{children:"• Solo puedes editar tu teléfono y dirección"}),n.jsx("li",{children:"• Los cambios en nombre, correo y especialidad requieren contactar al administrador"}),n.jsx("li",{children:"• Para cambiar la contraseña necesitas el código de verificación"}),t.clinicId&&n.jsx("li",{children:"• Tu perfil está asociado a una clínica específica en el sistema multi-tenant"})]})]})]})]})})}function kB(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState({fecha:"",estado:""}),[c,u]=S.useState(!0),{user:m}=wt();S.useEffect(()=>{m&&f()},[m]),S.useEffect(()=>{v()},[t,a]);const f=async()=>{try{u(!0);const R=await x(m.uid);if(!R){W.error("No se encontró el doctor asociado a este usuario",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}});return}let I;m!=null&&m.clinicId?I=Oe(be(ne,"citas"),Re("doctorId","==",R),Re("clinicId","==",m.clinicId)):I=Oe(be(ne,"citas"),Re("doctorId","==",R));const z=(await Ce(I)).docs.map(F=>({id:F.id,...F.data()}));z.sort((F,P)=>{const C=new Date(`${F.fecha} ${F.hora}`);return new Date(`${P.fecha} ${P.hora}`)-C}),e(z)}catch(R){console.error("❌ Error al cargar citas:",R),W.error("Error al cargar las citas",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{u(!1)}},x=async R=>{try{let I;m!=null&&m.clinicId?I=Oe(be(ne,"doctores"),Re("uid","==",R),Re("clinicId","==",m.clinicId)):I=Oe(be(ne,"doctores"),Re("uid","==",R));const V=await Ce(I);return V.empty?null:V.docs[0].id}catch(I){return console.error("Error al obtener ID del doctor:",I),null}},v=()=>{let R=[...t];a.fecha&&(R=R.filter(I=>I.fecha===a.fecha)),a.estado&&(R=R.filter(I=>I.estado===a.estado)),r(R)},y=R=>{const{name:I,value:V}=R.target;o(z=>({...z,[I]:V}))},N=()=>{o({fecha:"",estado:""})},w=R=>{const V={pendiente:{bg:"bg-amber-50",text:"text-amber-700",border:"border-amber-200",icon:n.jsx(ms,{className:"w-3 h-3"})},atendido:{bg:"bg-emerald-50",text:"text-emerald-700",border:"border-emerald-200",icon:n.jsx(He,{className:"w-3 h-3"})},cancelado:{bg:"bg-rose-50",text:"text-rose-700",border:"border-rose-200",icon:n.jsx(vn,{className:"w-3 h-3"})}}[R]||{bg:"bg-slate-50",text:"text-slate-700",border:"border-slate-200",icon:n.jsx(vn,{className:"w-3 h-3"})};return n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${V.bg} ${V.text} border ${V.border}`,children:[V.icon,n.jsx("span",{className:"ml-1",children:(R==null?void 0:R.charAt(0).toUpperCase())+(R==null?void 0:R.slice(1))})]})},E=R=>R?new Date(R).toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"-",_=R=>R||"-";return c?n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-slate-200 rounded mb-6"}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-4 mb-6",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded mb-3"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("div",{className:"h-10 w-40 bg-slate-200 rounded"}),n.jsx("div",{className:"h-10 w-40 bg-slate-200 rounded"})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[n.jsx("div",{className:"bg-slate-50 h-12"}),[...Array(5)].map((R,I)=>n.jsx("div",{className:"border-t border-slate-100 h-16 bg-white"},I))]})]})})}):n.jsx("div",{className:"min-h-screen bg-slate-50",children:n.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-50 rounded-xl border border-blue-100",children:n.jsx(ot,{className:"h-8 w-8 text-blue-600"})}),"Mis Citas"]}),n.jsx("p",{className:"text-slate-600 mt-1",children:"Gestiona tus citas médicas programadas"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-slate-500",children:"Total de citas"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.length})]})]})}),m!=null&&m.clinicId?n.jsx("div",{className:"mb-6 bg-emerald-50 border border-emerald-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg border border-emerald-200",children:n.jsx(qe,{className:"w-5 h-5 text-emerald-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-emerald-800",children:"Vista de Clínica"}),n.jsxs("p",{className:"text-sm text-emerald-700",children:["Mostrando citas de tu clínica: ",n.jsx("span",{className:"font-medium",children:m.clinicName||m.clinicId})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-emerald-600",children:"Citas de tu clínica"}),n.jsx("p",{className:"text-xl font-bold text-emerald-700",children:t.length})]})]})}):n.jsx("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-amber-100 rounded-lg border border-amber-200",children:n.jsx(Tt,{className:"w-5 h-5 text-amber-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-amber-800",children:"Usuario Legacy"}),n.jsx("p",{className:"text-sm text-amber-700",children:"Acceso completo a todas las citas del sistema"})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-sm text-amber-600",children:"Total citas"}),n.jsx("p",{className:"text-xl font-bold text-amber-700",children:t.length})]})]})}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Cc,{className:"h-5 w-5 text-slate-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Filtros de Búsqueda"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(lt,{className:"w-4 h-4 inline mr-1"}),"Fecha"]}),n.jsx("input",{type:"date",name:"fecha",value:a.fecha,onChange:y,className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:[n.jsx(Cc,{className:"w-4 h-4 inline mr-1"}),"Estado"]}),n.jsxs("select",{name:"estado",value:a.estado,onChange:y,className:"w-full border border-slate-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[n.jsx("option",{value:"",children:"Todos los estados"}),n.jsx("option",{value:"pendiente",children:"Pendiente"}),n.jsx("option",{value:"atendido",children:"Atendido"}),n.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),n.jsx("div",{className:"flex items-end",children:(a.fecha||a.estado)&&n.jsx("button",{onClick:N,className:"w-full bg-slate-500 text-white px-4 py-2 rounded-lg hover:bg-slate-600 transition-colors text-sm font-medium",children:"Limpiar filtros"})})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full divide-y divide-slate-200",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(He,{className:"h-4 w-4"}),"Paciente"]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lt,{className:"h-4 w-4"}),"Fecha"]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ms,{className:"h-4 w-4"}),"Hora"]})}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Estado"}),!(m!=null&&m.clinicId)&&n.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-slate-500 uppercase tracking-wider",children:"Clínica"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:m!=null&&m.clinicId?"4":"5",className:"px-6 py-12 text-center text-slate-500",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"p-4 bg-slate-100 rounded-full",children:n.jsx(vn,{className:"h-12 w-12 text-slate-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-medium text-slate-900",children:"No hay citas para mostrar"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t.length===0?m!=null&&m.clinicId?"No tienes citas programadas en tu clínica":"No tienes citas programadas":"Intenta ajustar los filtros de búsqueda"})]})]})})}):s.map(R=>n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center border ${R.clinicId?"bg-emerald-50 border-emerald-200":"bg-amber-50 border-amber-200"}`,children:n.jsx(He,{className:`h-5 w-5 ${R.clinicId?"text-emerald-600":"text-amber-600"}`})})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("div",{className:"text-sm font-medium text-slate-900",children:R.paciente||"Sin nombre"}),n.jsx("div",{className:"text-sm text-slate-500",children:R.clinicId?"Multi-Tenant":"Legacy"})]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:E(R.fecha)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-slate-900",children:_(R.hora)}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(R.estado)}),!(m!=null&&m.clinicId)&&n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.clinicId?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-50 text-emerald-700 border border-emerald-200",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),R.clinicId]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-50 text-amber-700 border border-amber-200",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]})})]},R.id))})]})})}),t.length>0&&n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-amber-50 rounded-lg border border-amber-200",children:n.jsx(ms,{className:"w-6 h-6 text-amber-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Pendientes"}),n.jsx("p",{className:"text-2xl font-bold text-amber-600",children:t.filter(R=>R.estado==="pendiente").length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:n.jsx(He,{className:"w-6 h-6 text-emerald-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Atendidas"}),n.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:t.filter(R=>R.estado==="atendido").length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-rose-50 rounded-lg border border-rose-200",children:n.jsx(vn,{className:"w-6 h-6 text-rose-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Canceladas"}),n.jsx("p",{className:"text-2xl font-bold text-rose-600",children:t.filter(R=>R.estado==="cancelado").length})]})]})})]}),s.length>0&&n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[n.jsx(lt,{className:"w-4 h-4"}),n.jsxs("span",{children:["Mostrando ",s.length," de ",t.length," citas",(m==null?void 0:m.clinicId)&&n.jsxs("span",{className:"ml-2 font-medium",children:["(de tu clínica: ",m.clinicName||m.clinicId,")"]})]})]}),(m==null?void 0:m.clinicId)&&n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),"Vista filtrada por clínica"]})]})})]})})}function PE(){var C,D,k,O,q,M,L,oe,ve,ee,fe,ye,Fe,B,Q,ie,ue,Ee;const[t,e]=S.useState([]),[s,r]=S.useState(!0),[a,o]=S.useState({show:!1,user:null}),[c,u]=S.useState({show:!1,user:null}),[m,f]=S.useState(!1),[x,v]=S.useState(!1),{user:y}=wt(),N=Je();S.useEffect(()=>{w()},[y]);const w=async()=>{try{r(!0);const ge=await Ce(be(ne,"usuarios")),Se=[];for(const ct of ge.docs){const $e=ct.data();let Rs="—";if($e.rol==="doctor"&&$e.doctorId)try{const ln=await Ke(we(ne,"doctores",$e.doctorId));ln.exists()&&(Rs=ln.data().nombres||"—")}catch(ln){console.error("Error al cargar doctor:",ln)}Se.push({id:ct.id,nombre:$e.nombre,email:$e.email,rol:$e.rol,doctorNombre:Rs,creado:$e.creado,clinicId:$e.clinicId,clinicName:$e.clinicName,plan:$e.plan,isClinicOwner:$e.isClinicOwner})}e(Se)}catch(ge){console.error("❌ Error al cargar usuarios:",ge),W.error("Error al cargar usuarios",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"},duration:4e3})}finally{r(!1)}},E=ge=>{o({show:!0,user:ge})},_=ge=>{u({show:!0,user:ge})},R=async()=>{if(a.user)try{f(!0),await qc(we(ne,"usuarios",a.user.id)),W.success("✅ Usuario eliminado correctamente",{style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"},duration:4e3}),o({show:!1,user:null}),w()}catch(ge){console.error("❌ Error al eliminar usuario:",ge),W.error("❌ No se pudo eliminar el usuario",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"},duration:4e3})}finally{f(!1)}},I=async()=>{if(c.user)try{v(!0),W.success("🔄 Abriendo formulario de edición...",{style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #DBEAFE"},duration:2e3}),setTimeout(()=>{N(`/admin/usuarios/editar/${c.user.id}`),u({show:!1,user:null}),v(!1)},1e3)}catch(ge){console.error("Error:",ge),v(!1)}},V=ge=>{const Se={admin:{bg:"bg-purple-100",text:"text-purple-800",icon:n.jsx(As,{className:"w-3 h-3"})},doctor:{bg:"bg-blue-100",text:"text-blue-800",icon:n.jsx(Xl,{className:"w-3 h-3"})},recepcion:{bg:"bg-green-100",text:"text-green-800",icon:n.jsx(yn,{className:"w-3 h-3"})}},ct=Se[ge]||Se.doctor;return n.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${ct.bg} ${ct.text}`,children:[ct.icon,n.jsx("span",{className:"ml-1",children:ge})]})},z=ge=>ge.clinicId?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),"Multi-Tenant"]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]}),F=ge=>{if(!ge)return"N/A";let Se;return ge.toDate?Se=ge.toDate():Se=new Date(ge),Se.toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"})},P={total:t.length,admins:t.filter(ge=>ge.rol==="admin").length,doctors:t.filter(ge=>ge.rol==="doctor").length,reception:t.filter(ge=>ge.rol==="recepcion").length,legacy:t.filter(ge=>!ge.clinicId).length,multiTenant:t.filter(ge=>ge.clinicId).length};return s?n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-2"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}),n.jsx("div",{className:"bg-gray-100 rounded-xl p-4 mb-6",children:n.jsx("div",{className:"animate-pulse h-4 bg-gray-200 rounded w-2/3"})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"bg-gray-100 h-12"}),[...Array(5)].map((ge,Se)=>n.jsx("div",{className:"border-t border-gray-200 h-16 bg-gray-50"},Se))]})})]})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(Lt,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Usuarios Registrados"}),n.jsxs("p",{className:"text-gray-600 mt-1",children:["Gestión de usuarios del sistema • ",P.total," usuarios registrados"]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P.total}),n.jsx("div",{className:"text-sm text-gray-500",children:"Total usuarios"})]})]})}),n.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 mb-6",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(qe,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-blue-900",children:"Sistema Multi-Tenant Activo"}),n.jsx("p",{className:"text-blue-700 text-sm",children:"Usuarios legacy y multi-tenant coexisten en el sistema"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[n.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[n.jsx("p",{className:"text-lg font-bold text-blue-800",children:P.legacy}),n.jsx("p",{className:"text-xs text-blue-600",children:"Legacy"})]}),n.jsxs("div",{className:"bg-blue-100 rounded-lg p-2",children:[n.jsx("p",{className:"text-lg font-bold text-blue-800",children:P.multiTenant}),n.jsx("p",{className:"text-xs text-blue-600",children:"Multi-Tenant"})]})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm text-left text-gray-700",children:[n.jsx("thead",{className:"bg-gray-50 text-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Usuario"}),n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Email"}),n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Rol"}),n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Tipo"}),n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Clínica"}),n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Doctor Vinculado"}),n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Registro"}),n.jsx("th",{className:"px-6 py-4 font-semibold",children:"Acciones"})]})}),n.jsx("tbody",{children:t.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center text-gray-500",children:n.jsxs("div",{className:"flex flex-col items-center",children:[n.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:n.jsx(Lt,{className:"w-8 h-8 text-gray-400"})}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No hay usuarios registrados"}),n.jsx("p",{className:"text-gray-500",children:"Los usuarios aparecerán aquí cuando se registren en el sistema"})]})})}):t.map(ge=>{var Se,ct;return n.jsxs("tr",{className:"border-t border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:n.jsx("div",{className:`h-10 w-10 rounded-full flex items-center justify-center text-white font-semibold ${ge.clinicId?"bg-green-500":"bg-orange-500"}`,children:((Se=ge.nombre)==null?void 0:Se.charAt(0))||((ct=ge.email)==null?void 0:ct.charAt(0).toUpperCase())})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:ge.nombre}),ge.isClinicOwner&&n.jsx("div",{className:"text-xs text-purple-600 font-medium",children:"👑 Propietario"})]})]})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ge.email}),n.jsx("td",{className:"px-6 py-4",children:V(ge.rol)}),n.jsx("td",{className:"px-6 py-4",children:z(ge)}),n.jsx("td",{className:"px-6 py-4",children:ge.clinicId?n.jsxs("div",{children:[n.jsx("div",{className:"text-sm font-medium text-gray-900",children:ge.clinicName||"Sin nombre"}),n.jsx("div",{className:"text-xs text-gray-500 font-mono",children:ge.clinicId}),ge.plan&&n.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium mt-1 ${ge.plan==="premium"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:ge.plan==="premium"?"👑 Premium":"✨ Básico"})]}):n.jsx("span",{className:"text-gray-400 text-sm",children:"Usuario Legacy"})}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:ge.rol==="doctor"?ge.doctorNombre:"—"}),n.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:F(ge.creado)}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>_(ge),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-all duration-200",title:"Editar usuario",children:n.jsx(Hn,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>E(ge),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-all duration-200",title:"Eliminar usuario",children:n.jsx(Ra,{className:"h-4 w-4"})})]})})]},ge.id)})})]})})}),n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:n.jsx(As,{className:"w-6 h-6 text-purple-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Administradores"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:P.admins})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(Xl,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Doctores"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:P.doctors})]})]})}),n.jsx("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:n.jsx(yn,{className:"w-6 h-6 text-green-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Recepcionistas"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:P.reception})]})]})})]}),a.show&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:n.jsx(Rc,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Eliminar Usuario"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Esta acción no se puede deshacer"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold ${(C=a.user)!=null&&C.clinicId?"bg-green-500":"bg-orange-500"}`,children:((k=(D=a.user)==null?void 0:D.nombre)==null?void 0:k.charAt(0))||((q=(O=a.user)==null?void 0:O.email)==null?void 0:q.charAt(0).toUpperCase())}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:(M=a.user)==null?void 0:M.nombre}),n.jsx("p",{className:"text-sm text-gray-600",children:(L=a.user)==null?void 0:L.email}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[V((oe=a.user)==null?void 0:oe.rol),z(a.user)]})]})]}),((ve=a.user)==null?void 0:ve.clinicId)&&n.jsx("div",{className:"mt-3 p-2 bg-yellow-50 border border-yellow-200 rounded",children:n.jsxs("p",{className:"text-xs text-yellow-800",children:["⚠️ Este usuario pertenece a la clínica: ",a.user.clinicName||a.user.clinicId]})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>o({show:!1,user:null}),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",disabled:m,children:"Cancelar"}),n.jsx("button",{onClick:R,disabled:m,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Eliminando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ra,{className:"w-4 h-4"}),"Eliminar"]})})]})]})}),c.show&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl max-w-md w-full p-6 shadow-2xl",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:n.jsx($g,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Editar Usuario"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Abrir formulario de edición"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-white font-semibold ${(ee=c.user)!=null&&ee.clinicId?"bg-green-500":"bg-orange-500"}`,children:((ye=(fe=c.user)==null?void 0:fe.nombre)==null?void 0:ye.charAt(0))||((B=(Fe=c.user)==null?void 0:Fe.email)==null?void 0:B.charAt(0).toUpperCase())}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:(Q=c.user)==null?void 0:Q.nombre}),n.jsx("p",{className:"text-sm text-gray-600",children:(ie=c.user)==null?void 0:ie.email}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[V((ue=c.user)==null?void 0:ue.rol),z(c.user)]})]})]}),((Ee=c.user)==null?void 0:Ee.clinicId)&&n.jsx("div",{className:"mt-3 p-2 bg-green-50 border border-green-200 rounded",children:n.jsxs("p",{className:"text-xs text-green-800",children:["🏥 Usuario de clínica: ",c.user.clinicName||c.user.clinicId]})})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>u({show:!1,user:null}),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",disabled:x,children:"Cancelar"}),n.jsx("button",{onClick:I,disabled:x,className:"flex-1 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Abriendo..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Hn,{className:"w-4 h-4"}),"Editar"]})})]})]})})]})})}function OE(){const[t,e]=S.useState({nombre:"",email:"",rol:"",clinicId:"",clinicName:"",plan:"",isClinicOwner:!1}),[s,r]=S.useState({}),[a,o]=S.useState(!1),[c,u]=S.useState(!0),{user:m}=wt(),f=Je(),{id:x}=En();S.useEffect(()=>{v()},[x]);const v=async()=>{try{u(!0);const P=we(ne,"usuarios",x),C=await Ke(P);if(C.exists()){const D=C.data(),k={nombre:D.nombre||"",email:D.email||"",rol:D.rol||"",clinicId:D.clinicId||"",clinicName:D.clinicName||"",plan:D.plan||"",isClinicOwner:D.isClinicOwner||!1};e(k),r(k)}else W.error("❌ Usuario no encontrado.",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),f("/admin/usuarios")}catch(P){console.error("❌ Error al cargar usuario:",P),W.error("❌ No se pudo cargar el usuario.",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}}),f("/admin/usuarios")}finally{u(!1)}},y=P=>{const{name:C,value:D}=P.target;e(k=>({...k,[C]:D}))},N=()=>t.nombre!==s.nombre||t.email!==s.email,w=async P=>{if(P.preventDefault(),!t.nombre.trim()||!t.email.trim()){W.error("⚠️ Todos los campos son obligatorios.",{style:{background:"#FEF3C7",color:"#D97706",border:"1px solid #FDE68A"}});return}if(!N()){W.error("⚠️ No hay cambios para guardar.",{style:{background:"#FEF3C7",color:"#D97706",border:"1px solid #FDE68A"}});return}o(!0);try{const C=we(ne,"usuarios",x);await hs(C,{nombre:t.nombre.trim(),email:t.email.trim()}),W.success("✅ Usuario actualizado correctamente.",{style:{background:"#F0FDF4",color:"#166534",border:"1px solid #BBF7D0"}}),setTimeout(()=>{f("/admin/usuarios")},1500)}catch(C){console.error("❌ Error al actualizar usuario:",C),W.error("❌ No se pudo guardar los cambios.",{style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #FECACA"}})}finally{o(!1)}},E=()=>{f("/admin/usuarios")},_=P=>({admin:{label:"Administrador",icon:As,color:"text-purple-600",bg:"bg-purple-100"},doctor:{label:"Doctor",icon:Xl,color:"text-blue-600",bg:"bg-blue-100"},recepcion:{label:"Recepcionista",icon:Lt,color:"text-green-600",bg:"bg-green-100"}})[P]||{label:P,icon:He,color:"text-gray-600",bg:"bg-gray-100"},R=()=>t.clinicId?"multi-tenant":"legacy",I=P=>P?P==="premium"?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-purple-100 text-purple-800 border border-purple-200",children:[n.jsx(As,{className:"w-3 h-3 mr-1"}),"Premium"]}):n.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800 border border-blue-200",children:"Básico"}):null;if(c)return n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:n.jsx("div",{className:"max-w-4xl mx-auto px-4",children:n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsxs("div",{className:"bg-gray-100 px-8 py-6 border-b border-gray-200",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-2 w-64"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-96"})]}),n.jsxs("div",{className:"p-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsx("div",{className:"space-y-6",children:[...Array(3)].map((P,C)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2 w-24"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},C))}),n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded mb-4 w-32"}),n.jsx("div",{className:"space-y-3",children:[...Array(4)].map((P,C)=>n.jsx("div",{className:"h-4 bg-gray-300 rounded"},C))})]})]}),n.jsxs("div",{className:"flex justify-between pt-8 border-t border-gray-200 mt-8",children:[n.jsx("div",{className:"h-10 w-24 bg-gray-300 rounded"}),n.jsx("div",{className:"h-10 w-32 bg-gray-300 rounded"})]})]})]})})})});const V=_(t.rol),z=R(),F=V.icon;return n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[n.jsx("div",{className:"bg-gray-50 px-8 py-6 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(He,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Usuario"}),n.jsx("p",{className:"text-gray-600 mt-1",children:"Modificar información básica del usuario"})]})]})}),z==="multi-tenant"?n.jsx("div",{className:"bg-green-50 border-b border-green-200 px-8 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(qe,{className:"h-5 w-5 text-green-600"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-medium text-green-800",children:"Usuario Multi-Tenant"}),n.jsxs("p",{className:"text-xs text-green-700",children:["Este usuario pertenece a la clínica:"," ",n.jsx("span",{className:"font-semibold",children:t.clinicName||t.clinicId})]})]}),t.isClinicOwner&&n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 border border-yellow-200",children:[n.jsx(As,{className:"w-3 h-3 mr-1"}),"Propietario"]})]})}):n.jsx("div",{className:"bg-orange-50 border-b border-orange-200 px-8 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Tt,{className:"h-5 w-5 text-orange-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Usuario Legacy"}),n.jsx("p",{className:"text-xs text-orange-700",children:"Usuario del sistema anterior con acceso completo"})]})]})}),n.jsxs("form",{onSubmit:w,className:"p-8",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombre Completo"}),n.jsx("input",{type:"text",name:"nombre",value:t.nombre,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Nombre completo del usuario",required:!0}),t.nombre!==s.nombre&&n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"✓ Campo modificado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Correo Electrónico"}),n.jsx("input",{type:"email",name:"email",value:t.email,onChange:y,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"correo@ejemplo.com",required:!0}),t.email!==s.email&&n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"✓ Campo modificado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Rol del Usuario"}),n.jsxs("div",{className:`w-full px-4 py-3 border border-gray-300 rounded-lg ${V.bg} flex items-center gap-3`,children:[n.jsx(F,{className:"h-5 w-5"}),n.jsx("span",{className:`font-medium ${V.color}`,children:V.label}),n.jsx("span",{className:"text-xs text-gray-500 ml-auto bg-white px-2 py-1 rounded",children:"No editable"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El rol no puede ser modificado por razones de seguridad"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[n.jsx(Tt,{className:"h-5 w-5 text-gray-600"}),"Información Actual"]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Tipo de Usuario"}),n.jsx("div",{className:"mt-1",children:z==="multi-tenant"?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 border border-green-200",children:[n.jsx(qe,{className:"w-4 h-4 mr-1.5"}),"Multi-Tenant"]}):n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-orange-100 text-orange-800 border border-orange-200",children:[n.jsx(Tt,{className:"w-4 h-4 mr-1.5"}),"Legacy"]})})]}),t.clinicId&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Clínica"}),n.jsxs("div",{className:"mt-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(yn,{className:"h-4 w-4 text-gray-400"}),n.jsx("span",{className:"text-sm text-gray-900",children:t.clinicName||"Sin nombre"})]}),n.jsxs("p",{className:"text-xs text-gray-500 font-mono mt-1",children:["ID: ",t.clinicId]})]})]}),t.plan&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Plan"}),n.jsx("div",{className:"mt-1",children:I(t.plan)})]}),t.isClinicOwner&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Permisos Especiales"}),n.jsx("div",{className:"mt-1",children:n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800 border border-yellow-200",children:[n.jsx(As,{className:"w-3 h-3 mr-1"}),"Propietario de Clínica"]})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Cambios Detectados"}),n.jsx("div",{className:"mt-1",children:N()?n.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"✓ Hay cambios pendientes"}):n.jsx("span",{className:"text-sm text-gray-500",children:"Sin cambios"})})]})]})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-gray-200 mt-8",children:[n.jsxs("button",{type:"button",onClick:E,className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 font-medium",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsx("button",{type:"submit",disabled:a||!N(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"h-4 w-4"}),"Guardar Cambios"]})})]})]})]}),n.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(He,{className:"h-4 w-4 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"text-sm font-semibold text-blue-900",children:"Información Importante"}),n.jsxs("ul",{className:"text-xs text-blue-800 mt-1 space-y-1",children:[n.jsx("li",{children:"• Solo se pueden modificar el nombre y email del usuario"}),n.jsx("li",{children:"• El rol y la información de clínica no son editables por seguridad"}),n.jsx("li",{children:"• Los cambios se aplicarán inmediatamente después de guardar"}),z==="multi-tenant"&&n.jsx("li",{children:"• Este usuario está limitado a los datos de su clínica específica"})]})]})]})})]})})}function Sx(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState(""),[c,u]=S.useState(!0),m=Je(),{user:f}=wt();S.useEffect(()=>{console.log("🔍 MedicalRecordsList - useEffect triggered"),console.log("👤 User:",f),x()},[f]),S.useEffect(()=>{console.log("🔍 Filter useEffect - patients:",t.length,"searchTerm:",a),v()},[t,a]);const x=async()=>{try{console.log("📊 Starting loadPatients..."),u(!0);let w;f!=null&&f.clinicId?(console.log("🏥 Multi-tenant user - clinicId:",f.clinicId),w=Oe(be(ne,"pacientes"),Re("clinicId","==",f.clinicId))):(console.log("🌐 Legacy user - loading all patients"),w=be(ne,"pacientes")),console.log("🔍 Executing query...");const E=await Ce(w);console.log("📋 Query result - docs count:",E.docs.length);const _=E.docs.map(I=>{const V={id:I.id,...I.data()};return console.log("👤 Patient loaded:",V.nombres,V.apellidos,"ID:",I.id),V});console.log("📊 Total patients loaded:",_.length),console.log("🔍 Checking medical records for each patient...");const R=await Promise.all(_.map(async I=>{try{const V=Oe(be(ne,"historias-clinicas"),Re("pacienteId","==",I.id)),z=await Ce(V),F=!z.empty;return console.log(`📋 Patient ${I.nombres} ${I.apellidos} - Has history: ${F}`),{...I,hasHistory:F,historyId:F?z.docs[0].id:null}}catch(V){return console.error(`❌ Error checking history for patient ${I.id}:`,V),{...I,hasHistory:!1,historyId:null}}}));console.log("✅ Final patients with history status:",R.length),e(R)}catch(w){console.error("❌ Error al cargar pacientes:",w),W.error("Error al cargar los pacientes")}finally{u(!1),console.log("✅ loadPatients completed")}},v=()=>{if(console.log("🔍 Filtering patients - searchTerm:",a),!a.trim()){console.log("📋 No search term - showing all patients:",t.length),r(t);return}const w=t.filter(E=>{var _;return((_=E.dni)==null?void 0:_.toLowerCase().includes(a.toLowerCase().trim()))||`${E.nombres} ${E.apellidos}`.toLowerCase().includes(a.toLowerCase().trim())});console.log("🔍 Filtered results:",w.length),r(w)},y=w=>{console.log("➕ Creating history for patient:",w),m(`/doctor/historia-clinica/crear/${w}`)},N=(w,E)=>{console.log("👁️ Viewing history - patientId:",w,"historyId:",E),m(`/doctor/historia-clinica/ver/${E||w}`)};return console.log("🎨 Rendering component - loading:",c,"patients:",t.length,"filtered:",s.length),c?(console.log("⏳ Showing loading state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsx("div",{className:"max-w-7xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-slate-300 rounded mb-6"}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"h-10 bg-slate-300 rounded w-80"})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((w,E)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsx("div",{className:"h-6 bg-slate-300 rounded mb-4"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-300 rounded"}),n.jsx("div",{className:"h-4 bg-slate-300 rounded w-3/4"})]})]},E))})]})})})):n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[console.log("🎨 Rendering main content"),f!=null&&f.clinicId?n.jsx("div",{className:"mb-6 bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:n.jsx(qe,{className:"w-5 h-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-emerald-800",children:"Vista Multi-Tenant Activa"}),n.jsxs("p",{className:"text-sm text-emerald-700",children:["Mostrando solo pacientes de: ",n.jsx("span",{className:"font-semibold",children:f.clinicName||"Tu Clínica"})]})]})]})}):n.jsx("div",{className:"mb-6 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:n.jsx(Tt,{className:"w-5 h-5 text-amber-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-amber-800",children:"Usuario Legacy"}),n.jsx("p",{className:"text-sm text-amber-700",children:"Acceso completo a todos los pacientes del sistema"})]})]})}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-8",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(rs,{className:"h-8 w-8 text-blue-600"}),"Historia Clínica"]}),n.jsxs("p",{className:"text-slate-600 mt-1",children:["Gestiona las historias clínicas de tus pacientes",(f==null?void 0:f.clinicId)&&` - ${f.clinicName||"Tu Clínica"}`]})]})}),n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"relative max-w-md",children:[n.jsx(vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-5 w-5"}),n.jsx("input",{type:"text",value:a,onChange:w=>o(w.target.value),placeholder:"Buscar por DNI o nombre del paciente...",className:"w-full pl-10 pr-4 py-3 border border-slate-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white shadow-sm"})]})}),n.jsxs("div",{className:"mb-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-yellow-800 mb-2",children:"🐛 Debug Info:"}),n.jsxs("p",{className:"text-sm text-yellow-700",children:[n.jsx("strong",{children:"User:"})," ",f?`${f.email} (${f.uid})`:"No user",n.jsx("br",{}),n.jsx("strong",{children:"User Role:"})," ",(f==null?void 0:f.role)||"No role",n.jsx("br",{}),n.jsx("strong",{children:"Clinic ID:"})," ",(f==null?void 0:f.clinicId)||"No clinic",n.jsx("br",{}),n.jsx("strong",{children:"Total Patients:"})," ",t.length,n.jsx("br",{}),n.jsx("strong",{children:"Filtered Patients:"})," ",s.length,n.jsx("br",{}),n.jsx("strong",{children:"Loading:"})," ",c?"Yes":"No"]})]}),s.length===0?n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[n.jsx(Lt,{className:"h-16 w-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-xl font-semibold text-slate-900 mb-2",children:t.length===0?"No hay pacientes registrados":"No se encontraron pacientes"}),n.jsx("p",{className:"text-slate-600",children:t.length===0?f!=null&&f.clinicId?"Los pacientes de tu clínica aparecerán aquí":"Los pacientes registrados aparecerán aquí":"Intenta con otro término de búsqueda"}),t.length===0&&n.jsx("button",{onClick:()=>m("/admin/pacientes/crear"),className:"mt-4 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Crear Primer Paciente"})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(w=>{var E,_;return console.log("🎨 Rendering patient card:",w.nombres,w.apellidos),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 hover:shadow-md transition-all duration-200",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-semibold ${w.clinicId?"bg-emerald-500":"bg-amber-500"}`,children:[((E=w.nombres)==null?void 0:E.charAt(0))||"?",((_=w.apellidos)==null?void 0:_.charAt(0))||"?"]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-semibold text-slate-900",children:[w.nombres," ",w.apellidos]}),n.jsxs("p",{className:"text-sm text-slate-600",children:["DNI: ",w.dni]})]})]}),!(f!=null&&f.clinicId)&&n.jsx("div",{children:w.clinicId?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-800",children:[n.jsx(qe,{className:"w-3 h-3 mr-1"}),"Multi-Tenant"]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]})})]}),n.jsxs("div",{className:"space-y-2 mb-6",children:[n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-slate-600",children:"Edad:"}),n.jsxs("span",{className:"text-slate-900 font-medium",children:[w.edad," años"]})]}),n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-slate-600",children:"Teléfono:"}),n.jsx("span",{className:"text-slate-900 font-medium",children:w.telefono||"No registrado"})]}),w.clinicName&&!(f!=null&&f.clinicId)&&n.jsxs("div",{className:"flex justify-between text-sm",children:[n.jsx("span",{className:"text-slate-600",children:"Clínica:"}),n.jsx("span",{className:"text-slate-900 font-medium text-xs",children:w.clinicName})]})]}),n.jsx("div",{className:"mb-6",children:w.hasHistory?n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-emerald-50 rounded-lg border border-emerald-200",children:[n.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-emerald-800",children:"Historia clínica creada"})]}):n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Sin historia clínica"})]})}),n.jsx("div",{className:"flex gap-2",children:w.hasHistory?n.jsxs("button",{onClick:()=>N(w.id,w.historyId),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[n.jsx(Ys,{className:"h-4 w-4"}),"Ver Historia"]}):n.jsxs("button",{onClick:()=>y(w.id),className:"flex-1 bg-emerald-600 text-white px-4 py-2 rounded-lg hover:bg-emerald-700 transition-colors flex items-center justify-center gap-2 text-sm font-medium",children:[n.jsx(Ta,{className:"h-4 w-4"}),"Crear Historia"]})})]})},w.id)})}),t.length>0&&n.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:n.jsx(Lt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:f!=null&&f.clinicId?"Pacientes de tu Clínica":"Total Pacientes"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-emerald-100 rounded-lg",children:n.jsx(rs,{className:"h-6 w-6 text-emerald-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Con Historia Clínica"}),n.jsx("p",{className:"text-2xl font-bold text-emerald-600",children:t.filter(w=>w.hasHistory).length})]})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-slate-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-3 bg-amber-100 rounded-lg",children:n.jsx(Ta,{className:"h-6 w-6 text-amber-600"})}),n.jsxs("div",{className:"ml-4",children:[n.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Sin Historia Clínica"}),n.jsx("p",{className:"text-2xl font-bold text-amber-600",children:t.filter(w=>!w.hasHistory).length})]})]})})]})]})})}function Ax(){const{id:t}=En(),e=Je(),{user:s}=wt(),[r,a]=S.useState(!1),[o,c]=S.useState(null),[u,m]=S.useState(!0);console.log("🏥 CreateMedicalRecord - Component loaded"),console.log("👤 User:",s),console.log("🆔 Patient ID from params:",t);const[f,x]=S.useState({motivoConsulta:"",enfermedadActual:"",antecedentesPersonales:"",antecedentesQuirurgicos:"",historiaMentalPsiquiatrica:"",alergias:"",medicamentos:"",afeccionesMedicas:"",presionArterial:"",frecuenciaCardiaca:"",frecuenciaRespiratoria:"",temperatura:"",peso:"",talla:"",imc:"",diagnostico:"",codigoCIE10:"",planTrabajo:"",tratamiento:"",interconsulta:"",apoyoDiagnostico:""});S.useEffect(()=>{console.log("🔄 useEffect triggered - patientId:",t),t?v():console.log("❌ No patientId provided")},[t]),S.useEffect(()=>{y()},[f.peso,f.talla]);const v=async()=>{try{console.log("📊 Loading patient data for ID:",t),m(!0);const E=await Ke(we(ne,"pacientes",t));if(console.log("📋 Patient doc exists:",E.exists()),E.exists()){const _={id:E.id,...E.data()};console.log("✅ Patient loaded:",_),c(_)}else console.log("❌ Patient not found"),W.error("Paciente no encontrado"),e("/doctor/historia-clinica")}catch(E){console.error("❌ Error al cargar paciente:",E),W.error("Error al cargar información del paciente")}finally{m(!1),console.log("✅ loadPatient completed")}},y=()=>{const E=Number.parseFloat(f.peso),_=Number.parseFloat(f.talla);if(E>0&&_>0){const R=_/100,I=E/(R*R);let V="";I<18.5?V="Bajo peso":I<25?V="Normal":I<30?V="Sobrepeso":V="Obesidad";const z=`${I.toFixed(1)} (${V})`;console.log("🧮 IMC calculated:",z),x(F=>({...F,imc:z}))}else x(R=>({...R,imc:""}))},N=E=>{const{name:_,value:R}=E.target;console.log("📝 Input changed:",_,"=",R),x(I=>({...I,[_]:R}))},w=async E=>{if(E.preventDefault(),console.log("📤 Form submitted"),console.log("📋 Form data:",f),!f.motivoConsulta.trim()){console.log("❌ Validation failed: motivoConsulta is empty"),W.error("El motivo de consulta es obligatorio");return}try{a(!0),console.log("💾 Saving medical record...");const _={...f,pacienteId:t,doctorId:s.uid,clinicId:s.clinicId||null,clinicName:s.clinicName||null,fechaCreacion:new Date,fechaActualizacion:new Date};console.log("📊 History data to save:",_),await pi(we(ne,"historias-clinicas",t),_),console.log("✅ Medical record saved successfully"),W.success("Historia clínica creada exitosamente"),e(`/doctor/historia-clinica/ver/${t}`)}catch(_){console.error("❌ Error al crear historia clínica:",_),W.error("Error al crear la historia clínica")}finally{a(!1)}};return console.log("🎨 Rendering - loadingPatient:",u,"patient:",!!o),u?(console.log("⏳ Showing loading state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-slate-300 rounded mb-6"}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:n.jsx("div",{className:"space-y-4",children:[...Array(8)].map((E,_)=>n.jsx("div",{className:"h-4 bg-slate-300 rounded"},_))})})]})})})):o?(console.log("✅ Rendering form for patient:",o.nombres,o.apellidos),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"🐛 Debug Info:"}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Patient ID:"})," ",t,n.jsx("br",{}),n.jsx("strong",{children:"Patient:"})," ",o?`${o.nombres} ${o.apellidos}`:"Not loaded",n.jsx("br",{}),n.jsx("strong",{children:"User:"})," ",s?s.email:"No user",n.jsx("br",{}),n.jsx("strong",{children:"Loading:"})," ",r?"Yes":"No"]})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("button",{onClick:()=>e("/doctor/historia-clinica"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx($t,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(rs,{className:"h-8 w-8 text-blue-600"}),"Nueva Historia Clínica"]}),n.jsxs("p",{className:"text-slate-600 mt-1",children:["Paciente: ",o.nombres," ",o.apellidos," - DNI: ",o.dni]})]})]}),n.jsxs("form",{onSubmit:w,className:"space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(He,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Información del Paciente"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Nombre:"}),n.jsxs("p",{className:"text-slate-900",children:[o.nombres," ",o.apellidos]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"DNI:"}),n.jsx("p",{className:"text-slate-900",children:o.dni})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Edad:"}),n.jsxs("p",{className:"text-slate-900",children:[o.edad," años"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Sexo:"}),n.jsx("p",{className:"text-slate-900",children:o.sexo})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Teléfono:"}),n.jsx("p",{className:"text-slate-900",children:o.telefono||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Dirección:"}),n.jsx("p",{className:"text-slate-900",children:o.direccion||"No registrada"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(ot,{className:"h-6 w-6 text-emerald-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Consulta Actual"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Motivo de Consulta *"}),n.jsx("textarea",{name:"motivoConsulta",value:f.motivoConsulta,onChange:N,rows:3,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe el motivo principal de la consulta..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Enfermedad Actual"}),n.jsx("textarea",{name:"enfermedadActual",value:f.enfermedadActual,onChange:N,rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Relato cronológico de la enfermedad actual..."})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Ir,{className:"h-6 w-6 text-red-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Antecedentes"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Antecedentes Personales"}),n.jsx("textarea",{name:"antecedentesPersonales",value:f.antecedentesPersonales,onChange:N,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enfermedades previas, hospitalizaciones..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Antecedentes Quirúrgicos"}),n.jsx("textarea",{name:"antecedentesQuirurgicos",value:f.antecedentesQuirurgicos,onChange:N,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Cirugías previas, fechas, complicaciones..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Alergias"}),n.jsx("textarea",{name:"alergias",value:f.alergias,onChange:N,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Alergias conocidas a medicamentos, alimentos..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Medicamentos Actuales"}),n.jsx("textarea",{name:"medicamentos",value:f.medicamentos,onChange:N,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Medicamentos que toma actualmente..."})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Afecciones Médicas"}),n.jsx("textarea",{name:"afeccionesMedicas",value:f.afeccionesMedicas,onChange:N,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enfermedades crónicas, condiciones médicas..."})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(zg,{className:"h-6 w-6 text-purple-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Historia Mental y Psiquiátrica"})]}),n.jsx("div",{children:n.jsx("textarea",{name:"historiaMentalPsiquiatrica",value:f.historiaMentalPsiquiatrica,onChange:N,rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Antecedentes psiquiátricos, tratamientos previos, estado mental actual..."})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(xv,{className:"h-6 w-6 text-indigo-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Signos Vitales"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Presión Arterial (mmHg)"}),n.jsx("input",{type:"text",name:"presionArterial",value:f.presionArterial,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"120/80"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia Cardíaca (lpm)"}),n.jsx("input",{type:"number",name:"frecuenciaCardiaca",value:f.frecuenciaCardiaca,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"72"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia Respiratoria (rpm)"}),n.jsx("input",{type:"number",name:"frecuenciaRespiratoria",value:f.frecuenciaRespiratoria,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"16"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Temperatura (°C)"}),n.jsx("input",{type:"number",step:"0.1",name:"temperatura",value:f.temperatura,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"36.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Peso (kg)"}),n.jsx("input",{type:"number",step:"0.1",name:"peso",value:f.peso,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"70"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Talla (cm)"}),n.jsx("input",{type:"number",name:"talla",value:f.talla,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"170"})]}),f.imc&&n.jsxs("div",{className:"md:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"IMC (calculado automáticamente)"}),n.jsx("div",{className:"px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg text-slate-900 font-medium",children:f.imc})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(rs,{className:"h-6 w-6 text-orange-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Diagnóstico y Plan de Trabajo"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Diagnóstico"}),n.jsx("textarea",{name:"diagnostico",value:f.diagnostico,onChange:N,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Diagnóstico principal y secundarios..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Código CIE-10"}),n.jsx("input",{type:"text",name:"codigoCIE10",value:f.codigoCIE10,onChange:N,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: K59.0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Plan de Trabajo"}),n.jsx("textarea",{name:"planTrabajo",value:f.planTrabajo,onChange:N,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Plan de seguimiento y evaluación..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tratamiento"}),n.jsx("textarea",{name:"tratamiento",value:f.tratamiento,onChange:N,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Medicamentos, dosis, duración..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apoyo Diagnóstico"}),n.jsx("textarea",{name:"apoyoDiagnostico",value:f.apoyoDiagnostico,onChange:N,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Exámenes de laboratorio, imágenes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Interconsulta"}),n.jsx("textarea",{name:"interconsulta",value:f.interconsulta,onChange:N,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Especialidades a consultar..."})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-4 pb-8",children:[n.jsx("button",{type:"button",onClick:()=>e("/doctor/historia-clinica"),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),n.jsx("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:r?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"h-4 w-4"}),"Crear Historia Clínica"]})})]})]})]})})):(console.log("❌ No patient found - showing error state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Paciente no encontrado"}),n.jsx("button",{onClick:()=>e("/doctor/historia-clinica"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver a la lista"})]})}))}function Cx(){const{id:t}=En(),e=Je(),{user:s,userRole:r}=wt(),[a,o]=S.useState(null),[c,u]=S.useState(null),[m,f]=S.useState(!0),[x,v]=S.useState(!1);console.log("✏️ EditMedicalRecord - Component loaded"),console.log("🆔 Record ID from params:",t),console.log("👤 User:",s),console.log("🎭 User Role:",r);const[y,N]=S.useState({motivoConsulta:"",enfermedadActual:"",antecedentesPersonales:"",antecedentesQuirurgicos:"",historiaMentalPsiquiatrica:"",alergias:"",medicamentos:"",afeccionesMedicas:"",presionArterial:"",frecuenciaCardiaca:"",frecuenciaRespiratoria:"",temperatura:"",peso:"",talla:"",imc:"",diagnostico:"",codigoCIE10:"",planTrabajo:"",tratamiento:"",interconsulta:"",apoyoDiagnostico:""});S.useEffect(()=>{console.log("🔄 useEffect triggered - id:",t),t?w():(console.log("❌ No ID provided"),W.error("ID de historia clínica no válido"),e("/doctor/historia-clinica"))},[t]),S.useEffect(()=>{E()},[y.peso,y.talla]);const w=async()=>{try{console.log("📊 Loading medical record for ID:",t),f(!0);const I=await Ke(we(ne,"historias-clinicas",t));if(console.log("📋 Medical record doc exists:",I.exists()),!I.exists()){console.log("❌ Medical record not found"),W.error("Historia clínica no encontrada"),e("/doctor/historia-clinica");return}const V={id:I.id,...I.data()};console.log("✅ Medical record loaded:",V),o(V);const z=V.pacienteId||t;console.log("👤 Loading patient data for ID:",z);const F=await Ke(we(ne,"pacientes",z));if(console.log("👤 Patient doc exists:",F.exists()),F.exists()){const P={id:F.id,...F.data()};console.log("✅ Patient loaded:",P),u(P),N({motivoConsulta:V.motivoConsulta||"",enfermedadActual:V.enfermedadActual||"",antecedentesPersonales:V.antecedentesPersonales||"",antecedentesQuirurgicos:V.antecedentesQuirurgicos||"",alergias:V.alergias||"",medicamentos:V.medicamentos||"",afeccionesMedicas:V.afeccionesMedicas||"",historiaMentalPsiquiatrica:V.historiaMentalPsiquiatrica||"",presionArterial:V.presionArterial||"",frecuenciaCardiaca:V.frecuenciaCardiaca||"",frecuenciaRespiratoria:V.frecuenciaRespiratoria||"",temperatura:V.temperatura||"",peso:V.peso||"",talla:V.talla||"",imc:V.imc||"",diagnostico:V.diagnostico||"",codigoCIE10:V.codigoCIE10||"",planTrabajo:V.planTrabajo||"",tratamiento:V.tratamiento||"",apoyoDiagnostico:V.apoyoDiagnostico||"",interconsulta:V.interconsulta||""})}else console.log("⚠️ Patient not found for ID:",z),W.error("Paciente no encontrado")}catch(I){console.error("❌ Error al cargar historia clínica:",I),W.error("Error al cargar la historia clínica")}finally{f(!1),console.log("✅ loadMedicalRecord completed")}},E=()=>{const I=Number.parseFloat(y.peso),V=Number.parseFloat(y.talla);if(I>0&&V>0){const z=V/100,F=I/(z*z);let P="";F<18.5?P="Bajo peso":F<25?P="Normal":F<30?P="Sobrepeso":P="Obesidad";const C=`${F.toFixed(1)} (${P})`;console.log("🧮 IMC calculated:",C),N(D=>({...D,imc:C}))}else N(z=>({...z,imc:""}))},_=I=>{const{name:V,value:z}=I.target;console.log("📝 Input changed:",V,"=",z),N(F=>({...F,[V]:z}))},R=async I=>{if(I.preventDefault(),console.log("📤 Form submitted"),console.log("📋 Form data:",y),!y.motivoConsulta.trim()){console.log("❌ Validation failed: motivoConsulta is empty"),W.error("El motivo de consulta es obligatorio");return}try{v(!0),console.log("💾 Updating medical record...");const V={...y,fechaActualizacion:new Date};console.log("📊 Update data:",V),await hs(we(ne,"historias-clinicas",t),V),console.log("✅ Medical record updated successfully"),W.success("Historia clínica actualizada exitosamente"),e(`/doctor/historia-clinica/ver/${t}`)}catch(V){console.error("❌ Error al actualizar historia clínica:",V),W.error("Error al actualizar la historia clínica")}finally{v(!1)}};return console.log("🎨 Rendering - loading:",m,"medicalRecord:",!!a,"patient:",!!c),m?(console.log("⏳ Showing loading state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-slate-300 rounded mb-6"}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:n.jsx("div",{className:"space-y-4",children:[...Array(8)].map((I,V)=>n.jsx("div",{className:"h-4 bg-slate-300 rounded"},V))})})]})})})):!a||!c?(console.log("❌ No medical record or patient found - showing error state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Historia clínica no encontrada"}),n.jsx("button",{onClick:()=>e("/doctor/historia-clinica"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver a la lista"})]})})):(console.log("✅ Rendering edit medical record form"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"🐛 Debug Info:"}),n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Patient ID:"})," ",t,n.jsx("br",{}),n.jsx("strong",{children:"Patient:"})," ",c?`${c.nombres} ${c.apellidos}`:"Not loaded",n.jsx("br",{}),n.jsx("strong",{children:"User:"})," ",s?s.email:"No user",n.jsx("br",{}),n.jsx("strong",{children:"Loading:"})," ",m?"Yes":"No"]})]}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("button",{onClick:()=>e(`/doctor/historia-clinica/ver/${t}`),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx($t,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(rs,{className:"h-8 w-8 text-blue-600"}),"Editar Historia Clínica"]}),n.jsxs("p",{className:"text-slate-600 mt-1",children:["Paciente: ",c.nombres," ",c.apellidos," - DNI: ",c.dni]})]})]}),n.jsxs("form",{onSubmit:R,className:"space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(He,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Información del Paciente"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Nombre:"}),n.jsxs("p",{className:"text-slate-900",children:[c.nombres," ",c.apellidos]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"DNI:"}),n.jsx("p",{className:"text-slate-900",children:c.dni})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Edad:"}),n.jsxs("p",{className:"text-slate-900",children:[c.edad," años"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Sexo:"}),n.jsx("p",{className:"text-slate-900",children:c.sexo})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Teléfono:"}),n.jsx("p",{className:"text-slate-900",children:c.telefono||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Dirección:"}),n.jsx("p",{className:"text-slate-900",children:c.direccion||"No registrada"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(ot,{className:"h-6 w-6 text-emerald-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Consulta Actual"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Motivo de Consulta *"}),n.jsx("textarea",{name:"motivoConsulta",value:y.motivoConsulta,onChange:_,rows:3,required:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe el motivo principal de la consulta..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Enfermedad Actual"}),n.jsx("textarea",{name:"enfermedadActual",value:y.enfermedadActual,onChange:_,rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Relato cronológico de la enfermedad actual..."})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Ir,{className:"h-6 w-6 text-red-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Antecedentes"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Antecedentes Personales"}),n.jsx("textarea",{name:"antecedentesPersonales",value:y.antecedentesPersonales,onChange:_,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enfermedades previas, hospitalizaciones..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Antecedentes Quirúrgicos"}),n.jsx("textarea",{name:"antecedentesQuirurgicos",value:y.antecedentesQuirurgicos,onChange:_,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Cirugías previas, fechas, complicaciones..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Alergias"}),n.jsx("textarea",{name:"alergias",value:y.alergias,onChange:_,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Alergias conocidas a medicamentos, alimentos..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Medicamentos Actuales"}),n.jsx("textarea",{name:"medicamentos",value:y.medicamentos,onChange:_,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Medicamentos que toma actualmente..."})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Afecciones Médicas"}),n.jsx("textarea",{name:"afeccionesMedicas",value:y.afeccionesMedicas,onChange:_,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enfermedades crónicas, condiciones médicas..."})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(zg,{className:"h-6 w-6 text-purple-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Historia Mental y Psiquiátrica"})]}),n.jsx("div",{children:n.jsx("textarea",{name:"historiaMentalPsiquiatrica",value:y.historiaMentalPsiquiatrica,onChange:_,rows:4,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Antecedentes psiquiátricos, tratamientos previos, estado mental actual..."})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(xv,{className:"h-6 w-6 text-indigo-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Signos Vitales"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Presión Arterial (mmHg)"}),n.jsx("input",{type:"text",name:"presionArterial",value:y.presionArterial,onChange:_,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"120/80"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia Cardíaca (lpm)"}),n.jsx("input",{type:"number",name:"frecuenciaCardiaca",value:y.frecuenciaCardiaca,onChange:_,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"72"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia Respiratoria (rpm)"}),n.jsx("input",{type:"number",name:"frecuenciaRespiratoria",value:y.frecuenciaRespiratoria,onChange:_,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"16"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Temperatura (°C)"}),n.jsx("input",{type:"number",step:"0.1",name:"temperatura",value:y.temperatura,onChange:_,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"36.5"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Peso (kg)"}),n.jsx("input",{type:"number",step:"0.1",name:"peso",value:y.peso,onChange:_,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"70"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Talla (cm)"}),n.jsx("input",{type:"number",name:"talla",value:y.talla,onChange:_,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"170"})]}),y.imc&&n.jsxs("div",{className:"md:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"IMC (calculado automáticamente)"}),n.jsx("div",{className:"px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg text-slate-900 font-medium",children:y.imc})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(rs,{className:"h-6 w-6 text-orange-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Diagnóstico y Plan de Trabajo"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Diagnóstico"}),n.jsx("textarea",{name:"diagnostico",value:y.diagnostico,onChange:_,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Diagnóstico principal y secundarios..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Código CIE-10"}),n.jsx("input",{type:"text",name:"codigoCIE10",value:y.codigoCIE10,onChange:_,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: K59.0"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Plan de Trabajo"}),n.jsx("textarea",{name:"planTrabajo",value:y.planTrabajo,onChange:_,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Plan de seguimiento y evaluación..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tratamiento"}),n.jsx("textarea",{name:"tratamiento",value:y.tratamiento,onChange:_,rows:3,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Medicamentos, dosis, duración..."})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apoyo Diagnóstico"}),n.jsx("textarea",{name:"apoyoDiagnostico",value:y.apoyoDiagnostico,onChange:_,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Exámenes de laboratorio, imágenes..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Interconsulta"}),n.jsx("textarea",{name:"interconsulta",value:y.interconsulta,onChange:_,rows:2,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Especialidades a consultar..."})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-4 pb-8",children:[n.jsx("button",{type:"button",onClick:()=>e(`/doctor/historia-clinica/ver/${t}`),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Cancelar"}),n.jsx("button",{type:"submit",disabled:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:x?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Guardando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"h-4 w-4"}),"Guardar Cambios"]})})]})]})]})}))}function Tx(){const{id:t}=En(),e=Je(),{user:s,userRole:r}=wt(),[a,o]=S.useState(null),[c,u]=S.useState(null),[m,f]=S.useState(!0);console.log("👁️ ViewMedicalRecord - Component loaded"),console.log("🆔 Record ID from params:",t),console.log("👤 User:",s),console.log("🎭 User Role:",r),S.useEffect(()=>{console.log("🔄 useEffect triggered - id:",t),t?x():(console.log("❌ No ID provided"),W.error("ID de historia clínica no válido"),e("/doctor/historia-clinica"))},[t]);const x=async()=>{try{console.log("📊 Loading medical record for ID:",t),f(!0);const N=await Ke(we(ne,"historias-clinicas",t));if(console.log("📋 Medical record doc exists:",N.exists()),!N.exists()){console.log("❌ Medical record not found"),W.error("Historia clínica no encontrada"),e("/doctor/historia-clinica");return}const w={id:N.id,...N.data()};console.log("✅ Medical record loaded:",w),o(w);const E=w.pacienteId||t;console.log("👤 Loading patient data for ID:",E);const _=await Ke(we(ne,"pacientes",E));if(console.log("👤 Patient doc exists:",_.exists()),_.exists()){const R={id:_.id,..._.data()};console.log("✅ Patient loaded:",R),u(R)}else{console.log("⚠️ Patient not found for ID:",E),console.log("🔄 Trying to load patient using record ID as patient ID...");const R=await Ke(we(ne,"pacientes",t));if(R.exists()){const I={id:R.id,...R.data()};console.log("✅ Alternative patient loaded:",I),u(I)}else console.log("⚠️ No patient found with either ID")}}catch(N){console.error("❌ Error al cargar historia clínica:",N),W.error("Error al cargar la historia clínica")}finally{f(!1),console.log("✅ loadMedicalRecord completed")}},v=N=>{if(!N)return"No registrada";try{return(N.toDate?N.toDate():new Date(N)).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(w){return console.log("⚠️ Error formatting date:",w),"Fecha inválida"}},y=N=>{if(!N)return"text-slate-600";const w=Number.parseFloat(N);return w<18.5?"text-blue-600":w<25?"text-green-600":w<30?"text-yellow-600":"text-red-600"};return console.log("🎨 Rendering - loading:",m,"medicalRecord:",!!a,"patient:",!!c),m?(console.log("⏳ Showing loading state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-slate-300 rounded mb-6"}),n.jsx("div",{className:"space-y-6",children:[...Array(5)].map((N,w)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsx("div",{className:"h-6 bg-slate-300 rounded mb-4"}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-300 rounded"}),n.jsx("div",{className:"h-4 bg-slate-300 rounded w-3/4"})]})]},w))})]})})})):a?c?(console.log("✅ Rendering medical record view"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg",children:[n.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"🐛 Debug Info:"}),n.jsxs("p",{className:"text-sm text-green-700",children:[n.jsx("strong",{children:"Record ID:"})," ",t,n.jsx("br",{}),n.jsx("strong",{children:"Medical Record:"})," ",a?"Loaded":"Not loaded",n.jsx("br",{}),n.jsx("strong",{children:"Patient:"})," ",c?`${c.nombres} ${c.apellidos}`:"Not loaded",n.jsx("br",{}),n.jsx("strong",{children:"User Role:"})," ",r,n.jsx("br",{}),n.jsx("strong",{children:"Loading:"})," ",m?"Yes":"No"]})]}),n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e(r==="paciente"?"/paciente/historia-clinica":"/doctor/historia-clinica"),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx($t,{className:"h-5 w-5"})}),n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(rs,{className:"h-8 w-8 text-blue-600"}),"Historia Clínica"]}),c&&n.jsxs("p",{className:"text-slate-600 mt-1",children:["Paciente: ",c.nombres," ",c.apellidos," - DNI: ",c.dni]})]})]}),r==="doctor"&&n.jsxs("button",{onClick:()=>e(`/doctor/historia-clinica/editar/${t}`),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(Hn,{className:"h-4 w-4"}),"Editar"]})]}),n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(He,{className:"h-6 w-6 text-blue-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Información del Paciente"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Nombre:"}),n.jsxs("p",{className:"text-slate-900",children:[c.nombres," ",c.apellidos]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"DNI:"}),n.jsx("p",{className:"text-slate-900",children:c.dni})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Edad:"}),n.jsxs("p",{className:"text-slate-900",children:[c.edad," años"]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Sexo:"}),n.jsx("p",{className:"text-slate-900",children:c.sexo||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Teléfono:"}),n.jsx("p",{className:"text-slate-900",children:c.telefono||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Dirección:"}),n.jsx("p",{className:"text-slate-900",children:c.direccion||"No registrada"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(ot,{className:"h-6 w-6 text-emerald-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Consulta Actual"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-slate-700 mb-2",children:"Motivo de Consulta"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.motivoConsulta||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium text-slate-700 mb-2",children:"Enfermedad Actual"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[100px]",children:a.enfermedadActual||"No registrada"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Ir,{className:"h-6 w-6 text-red-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Antecedentes"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Antecedentes Personales"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[75px]",children:a.antecedentesPersonales||"No registrados"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Antecedentes Quirúrgicos"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[75px]",children:a.antecedentesQuirurgicos||"No registrados"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Alergias"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[50px]",children:a.alergias||"No registradas"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Medicamentos Actuales"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[50px]",children:a.medicamentos||"No registrados"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Afecciones Médicas"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[50px]",children:a.afeccionesMedicas||"No registradas"})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(zg,{className:"h-6 w-6 text-purple-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Historia Mental y Psiquiátrica"})]}),n.jsx("div",{children:n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[100px]",children:a.historiaMentalPsiquiatrica||"No registrada"})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(xv,{className:"h-6 w-6 text-indigo-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Signos Vitales"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Presión Arterial (mmHg)"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.presionArterial||"No registrada"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia Cardíaca (lpm)"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.frecuenciaCardiaca||"No registrada"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Frecuencia Respiratoria (rpm)"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.frecuenciaRespiratoria||"No registrada"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Temperatura (°C)"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.temperatura||"No registrada"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Peso (kg)"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.peso||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Talla (cm)"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.talla||"No registrada"})]}),a.imc&&n.jsxs("div",{className:"md:col-span-3",children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"IMC (calculado automáticamente)"}),n.jsx("div",{className:`px-3 py-2 bg-slate-50 border border-slate-300 rounded-lg font-medium ${y(a.imc)}`,children:a.imc})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(rs,{className:"h-6 w-6 text-orange-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Diagnóstico y Plan de Trabajo"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Diagnóstico"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[75px]",children:a.diagnostico||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Código CIE-10"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900",children:a.codigoCIE10||"No registrado"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Plan de Trabajo"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[75px]",children:a.planTrabajo||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Tratamiento"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[75px]",children:a.tratamiento||"No registrado"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Apoyo Diagnóstico"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[50px]",children:a.apoyoDiagnostico||"No registrado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Interconsulta"}),n.jsx("div",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg bg-slate-50 text-slate-900 min-h-[50px]",children:a.interconsulta||"No registrada"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(lt,{className:"h-6 w-6 text-slate-600"}),n.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Información de Registro"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Fecha de Creación:"}),n.jsx("p",{className:"text-slate-900",children:v(a.fechaCreacion)})]}),a.fechaActualizacion&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Última Actualización:"}),n.jsx("p",{className:"text-slate-900",children:v(a.fechaActualizacion)})]}),a.clinicName&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-700",children:"Clínica:"}),n.jsx("p",{className:"text-slate-900",children:a.clinicName})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-4 pb-8",children:[n.jsx("button",{onClick:()=>e("/doctor/historia-clinica"),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Volver a la Lista"}),r==="doctor"&&n.jsxs("button",{onClick:()=>e(`/doctor/historia-clinica/editar/${t}`),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[n.jsx(Hn,{className:"h-4 w-4"}),"Editar Historia Clínica"]})]})]})]})})):(console.log("❌ No patient found - showing error state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Paciente no encontrado"}),n.jsx("button",{onClick:()=>e("/doctor/historia-clinica"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver a la lista"})]})})):(console.log("❌ No medical record found - showing error state"),n.jsx("div",{className:"min-h-screen bg-slate-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[n.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-4",children:"Historia clínica no encontrada"}),n.jsxs("p",{className:"text-slate-600 mb-6",children:["No se pudo encontrar la historia clínica con ID: ",t]}),n.jsx("button",{onClick:()=>e("/doctor/historia-clinica"),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Volver a la lista"})]})}))}function LE(){const[t,e]=S.useState({fecha:"",especialidad:"",motivo:"",diagnostico:"",tratamiento:""}),[s,r]=S.useState([]),[a,o]=S.useState(!1),[c,u]=S.useState(!0),m=Je(),{id:f}=En();S.useEffect(()=>{x()},[]);const x=async()=>{try{u(!0);const w=await Ce(be(ne,"especialidades")),E=[];w.forEach(_=>{const R=_.data();E.push({id:_.id,name:R.nombres})}),r(E)}catch(w){console.error("❌ Error al cargar especialidades:",w),W.error("Error al cargar especialidades")}finally{u(!1)}},v=w=>{const{name:E,value:_}=w.target;e(R=>({...R,[E]:_}))},y=async w=>{if(w.preventDefault(),!t.fecha||!t.especialidad||!t.motivo||!t.diagnostico||!t.tratamiento){W.error("⚠️ Completa todos los campos");return}o(!0);try{const E={fecha:t.fecha,especialidad:t.especialidad.trim(),motivo:t.motivo.trim(),diagnostico:t.diagnostico.trim(),tratamiento:t.tratamiento.trim(),creado:new Date},_=we(ne,"historias-clinicas",f);await hs(_,{visitas:QC(E)}),W.success("✅ Visita registrada correctamente"),setTimeout(()=>{m(`/doctor/historia-clinica/${f}`)},1500)}catch(E){console.error("❌ Error al registrar visita:",E),W.error("❌ Error al registrar la visita")}finally{o(!1)}},N=()=>{m(`/doctor/historia-clinica/${f}`)};return c?n.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsx("div",{className:"bg-white p-4 rounded shadow space-y-4",children:[...Array(5)].map((w,E)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},E))})]})}):n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsxs("h2",{className:"text-3xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[n.jsx(lt,{className:"h-8 w-8 text-green-600"}),"Registrar Nueva Visita Médica"]}),n.jsxs("form",{onSubmit:y,className:"space-y-4 bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Fecha"}),n.jsx("input",{type:"date",name:"fecha",value:t.fecha,onChange:v,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Especialidad"}),n.jsxs("select",{name:"especialidad",value:t.especialidad,onChange:v,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400",required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar especialidad..."}),s.map(w=>n.jsx("option",{value:w.name,children:w.name},w.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Motivo de la consulta"}),n.jsx("textarea",{name:"motivo",value:t.motivo,onChange:v,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400",rows:"2",placeholder:"Describe el motivo de la consulta...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Diagnóstico"}),n.jsx("textarea",{name:"diagnostico",value:t.diagnostico,onChange:v,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400",rows:"2",placeholder:"Diagnóstico médico...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Tratamiento"}),n.jsx("textarea",{name:"tratamiento",value:t.tratamiento,onChange:v,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-green-400",rows:"2",placeholder:"Tratamiento prescrito...",required:!0})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4",children:[n.jsxs("button",{type:"button",onClick:N,className:"bg-gray-300 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-400 transition flex items-center gap-2",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:a,className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fs,{className:"h-4 w-4"}),a?"Guardando...":"Guardar Visita"]})]})]})]})}function VE(){const[t,e]=S.useState({fecha:"",especialidad:"",motivo:"",diagnostico:"",tratamiento:""}),[s,r]=S.useState([]),[a,o]=S.useState(!1),[c,u]=S.useState(!0),m=Je(),{id:f,index:x}=En();S.useEffect(()=>{v()},[f,x]);const v=async()=>{var E;try{u(!0);const _=await Ce(be(ne,"especialidades")),R=[];_.forEach(z=>{const F=z.data();R.push({id:z.id,name:F.nombres})}),r(R);const I=we(ne,"historias-clinicas",f),V=await Ke(I);if(V.exists()){const F=(E=V.data().visitas)==null?void 0:E[Number.parseInt(x)];F?e({fecha:F.fecha||"",especialidad:F.especialidad||"",motivo:F.motivo||"",diagnostico:F.diagnostico||"",tratamiento:F.tratamiento||""}):(W.error("❌ Visita no encontrada"),m(`/doctor/historia-clinica/${f}`))}else W.error("❌ Historia clínica no encontrada"),m("/doctor/historia-clinica")}catch(_){console.error("❌ Error al cargar datos:",_),W.error("❌ Error al cargar los datos"),m(`/doctor/historia-clinica/${f}`)}finally{u(!1)}},y=E=>{const{name:_,value:R}=E.target;e(I=>({...I,[_]:R}))},N=async E=>{if(E.preventDefault(),!t.fecha||!t.especialidad||!t.motivo||!t.diagnostico||!t.tratamiento){W.error("⚠️ Completa todos los campos");return}o(!0);try{const _=we(ne,"historias-clinicas",f),R=await Ke(_);if(R.exists()){const V=[...R.data().visitas];V[Number.parseInt(x)]={...V[Number.parseInt(x)],fecha:t.fecha,especialidad:t.especialidad.trim(),motivo:t.motivo.trim(),diagnostico:t.diagnostico.trim(),tratamiento:t.tratamiento.trim(),actualizado:new Date},await hs(_,{visitas:V}),W.success("✅ Visita actualizada correctamente"),setTimeout(()=>{m(`/doctor/historia-clinica/${f}`)},1500)}}catch(_){console.error("❌ Error al actualizar visita:",_),W.error("❌ Error al actualizar la visita")}finally{o(!1)}},w=()=>{m(`/doctor/historia-clinica/${f}`)};return c?n.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsx("div",{className:"bg-white p-4 rounded shadow space-y-4",children:[...Array(5)].map((E,_)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},_))})]})}):n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsxs("h2",{className:"text-3xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[n.jsx(lt,{className:"h-8 w-8 text-blue-600"}),"Editar Visita Médica"]}),n.jsxs("form",{onSubmit:N,className:"space-y-4 bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Fecha"}),n.jsx("input",{type:"date",name:"fecha",value:t.fecha,onChange:y,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Especialidad"}),n.jsxs("select",{name:"especialidad",value:t.especialidad,onChange:y,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar especialidad..."}),s.map(E=>n.jsx("option",{value:E.name,children:E.name},E.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Motivo de la consulta"}),n.jsx("textarea",{name:"motivo",value:t.motivo,onChange:y,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",rows:"2",placeholder:"Describe el motivo de la consulta...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Diagnóstico"}),n.jsx("textarea",{name:"diagnostico",value:t.diagnostico,onChange:y,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",rows:"2",placeholder:"Diagnóstico médico...",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Tratamiento"}),n.jsx("textarea",{name:"tratamiento",value:t.tratamiento,onChange:y,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",rows:"2",placeholder:"Tratamiento prescrito...",required:!0})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4",children:[n.jsxs("button",{type:"button",onClick:w,className:"bg-gray-300 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-400 transition flex items-center gap-2",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:a,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fs,{className:"h-4 w-4"}),a?"Guardando...":"Guardar Cambios"]})]})]})]})}function UE(){const[t,e]=S.useState({tipo:"",archivo:null}),[s,r]=S.useState(!1),a=Je(),{id:o}=En(),c=x=>{const{name:v,value:y}=x.target;e(N=>({...N,[v]:y}))},u=x=>{const v=x.target.files[0];e(y=>({...y,archivo:v}))},m=async x=>{if(x.preventDefault(),!t.tipo.trim()){W.error("⚠️ El tipo de archivo es obligatorio");return}if(!t.archivo){W.error("⚠️ Debes seleccionar un archivo");return}if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(t.archivo.type)){W.error("⚠️ Solo se permiten archivos PDF, JPG, JPEG y PNG");return}if(t.archivo.size>5*1024*1024){W.error("⚠️ El archivo no puede superar los 5MB");return}r(!0);try{const N=`${Date.now()}_${t.archivo.name}`,w=Vl(Ul,`historia-clinica/${o}/${N}`);await Fg(w,t.archivo);const E=await Bg(w),_={tipo:t.tipo.trim(),nombre_archivo:N,url:E,fecha:new Date().toISOString().split("T")[0],creado:new Date},R=we(ne,"historias-clinicas",o);await hs(R,{archivos:QC(_)}),W.success("✅ Archivo subido correctamente"),setTimeout(()=>{a(`/doctor/historia-clinica/${o}`)},1500)}catch(y){console.error("❌ Error al subir archivo:",y),W.error("❌ Error al subir el archivo")}finally{r(!1)}},f=()=>{a(`/doctor/historia-clinica/${o}`)};return n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsxs("h2",{className:"text-3xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[n.jsx(bv,{className:"h-8 w-8 text-purple-600"}),"Subir Archivo Clínico"]}),n.jsxs("form",{onSubmit:m,className:"space-y-4 bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Tipo de archivo"}),n.jsx("input",{type:"text",name:"tipo",value:t.tipo,onChange:c,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-purple-400",placeholder:"Ej: Radiografía, Hemograma, Ecografía",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Seleccionar archivo"}),n.jsx("input",{type:"file",name:"archivo",onChange:u,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-400 focus:border-purple-400",accept:".pdf,.jpg,.jpeg,.png",required:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formatos permitidos: PDF, JPG, JPEG, PNG. Tamaño máximo: 5MB"})]}),t.archivo&&n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-gray-700",children:[n.jsx("strong",{children:"Archivo seleccionado:"})," ",t.archivo.name]}),n.jsxs("p",{className:"text-xs text-gray-500",children:["Tamaño: ",(t.archivo.size/1024/1024).toFixed(2)," MB"]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4",children:[n.jsxs("button",{type:"button",onClick:f,className:"bg-gray-300 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-400 transition flex items-center gap-2",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:s,className:"bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fs,{className:"h-4 w-4"}),s?"Subiendo...":"Subir y Guardar"]})]})]})]})}function FE(){const[t,e]=S.useState({tipo:"",archivoNuevo:null}),[s,r]=S.useState(null),[a,o]=S.useState(!1),[c,u]=S.useState(!0),m=Je(),{id:f,index:x}=En();S.useEffect(()=>{v()},[f,x]);const v=async()=>{var _;try{u(!0);const R=we(ne,"historias-clinicas",f),I=await Ke(R);if(I.exists()){const z=(_=I.data().archivos)==null?void 0:_[Number.parseInt(x)];z?(r(z),e({tipo:z.tipo||"",archivoNuevo:null})):(W.error("❌ Archivo no encontrado"),m(`/doctor/historia-clinica/${f}`))}else W.error("❌ Historia clínica no encontrada"),m("/doctor/historia-clinica")}catch(R){console.error("❌ Error al cargar archivo:",R),W.error("❌ Error al cargar los datos"),m(`/doctor/historia-clinica/${f}`)}finally{u(!1)}},y=_=>{const{name:R,value:I}=_.target;e(V=>({...V,[R]:I}))},N=_=>{const R=_.target.files[0];e(I=>({...I,archivoNuevo:R}))},w=async _=>{if(_.preventDefault(),!t.tipo.trim()){W.error("⚠️ El tipo de archivo es obligatorio");return}if(t.archivoNuevo){if(!["application/pdf","image/jpeg","image/jpg","image/png"].includes(t.archivoNuevo.type)){W.error("⚠️ Solo se permiten archivos PDF, JPG, JPEG y PNG");return}if(t.archivoNuevo.size>5*1024*1024){W.error("⚠️ El archivo no puede superar los 5MB");return}}o(!0);try{const R=we(ne,"historias-clinicas",f),I=await Ke(R);if(I.exists()){const z=[...I.data().archivos],F={...z[Number.parseInt(x)]};if(F.tipo=t.tipo.trim(),t.archivoNuevo){try{const O=Vl(Ul,`historia-clinica/${f}/${s.nombre_archivo}`);await kb(O)}catch(O){console.warn("No se pudo eliminar el archivo anterior:",O)}const C=`${Date.now()}_${t.archivoNuevo.name}`,D=Vl(Ul,`historia-clinica/${f}/${C}`);await Fg(D,t.archivoNuevo);const k=await Bg(D);F.nombre_archivo=C,F.url=k}F.actualizado=new Date,z[Number.parseInt(x)]=F,await hs(R,{archivos:z}),W.success("✅ Archivo actualizado correctamente"),setTimeout(()=>{m(`/doctor/historia-clinica/${f}`)},1500)}}catch(R){console.error("❌ Error al actualizar archivo:",R),W.error("❌ Error al actualizar el archivo")}finally{o(!1)}},E=()=>{m(`/doctor/historia-clinica/${f}`)};return c?n.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsxs("div",{className:"bg-white p-4 rounded shadow space-y-4",children:[n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]}),n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]})]})]})}):n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsxs("h2",{className:"text-3xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[n.jsx(bv,{className:"h-8 w-8 text-blue-600"}),"Editar Archivo Clínico"]}),n.jsxs("form",{onSubmit:w,className:"space-y-4 bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Tipo de archivo"}),n.jsx("input",{type:"text",name:"tipo",value:t.tipo,onChange:y,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Ej: Radiografía, Hemograma, Ecografía",required:!0})]}),s&&n.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-gray-700 mb-1",children:[n.jsx("strong",{children:"Archivo actual:"})," ",s.nombre_archivo]}),n.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline text-sm",children:"Ver archivo actual"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Nuevo archivo (opcional)"}),n.jsx("input",{type:"file",name:"archivoNuevo",onChange:N,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",accept:".pdf,.jpg,.jpeg,.png"}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Formatos permitidos: PDF, JPG, JPEG, PNG. Tamaño máximo: 5MB. Deja vacío para mantener el archivo actual."})]}),t.archivoNuevo&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("p",{className:"text-sm text-blue-700",children:[n.jsx("strong",{children:"Nuevo archivo seleccionado:"})," ",t.archivoNuevo.name]}),n.jsxs("p",{className:"text-xs text-blue-600",children:["Tamaño: ",(t.archivoNuevo.size/1024/1024).toFixed(2)," MB"]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4",children:[n.jsxs("button",{type:"button",onClick:E,className:"bg-gray-300 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-400 transition flex items-center gap-2",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:a,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fs,{className:"h-4 w-4"}),a?"Guardando...":"Guardar Cambios"]})]})]})]})}function Bm(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState({dni:"",nombre:"",telefono:""}),[c,u]=S.useState(!0),{user:m}=wt(),f=Je(),[x,v]=S.useState({}),[y,N]=S.useState({}),[w,E]=S.useState(!1),[_,R]=S.useState(null),[I,V]=S.useState({email:"",password:"",confirmPassword:""}),[z,F]=S.useState(!1),[P,C]=S.useState(null);S.useEffect(()=>{D()},[m]),S.useEffect(()=>{O()},[t,a]);const D=async()=>{try{u(!0);let B;m!=null&&m.clinicId?(B=Oe(be(ne,"pacientes"),Re("clinicId","==",m.clinicId)),console.log(`🏥 Cargando pacientes para clínica: ${m.clinicId}`)):(B=Oe(be(ne,"pacientes")),console.log("👤 Usuario legacy: cargando todos los pacientes"));const Q=await Ce(B),ie=[];Q.forEach(ue=>{const Ee=ue.data();Ee._placeholder||ie.push({id:ue.id,...Ee})}),console.log(`✅ ${ie.length} pacientes cargados`),e(ie),await k(ie)}catch(B){console.error("❌ Error al cargar pacientes:",B),W.error("Error al cargar los pacientes")}finally{u(!1)}},k=async B=>{try{const Q=Oe(be(ne,"usuarios")),ie=await Ce(Q),ue={};ie.forEach(Ee=>{const ge=Ee.data();ge.rol==="paciente"&&ge.pacienteId&&(ue[ge.pacienteId]={id:Ee.id,...ge,hasAccount:!0})}),v(ue)}catch(Q){console.error("Error al cargar cuentas de usuario:",Q)}},O=()=>{let B=[...t];if(a.dni&&(B=B.filter(Q=>{var ie;return(ie=Q.dni)==null?void 0:ie.toLowerCase().includes(a.dni.toLowerCase())})),a.nombre){const Q=a.nombre.toLowerCase();B=B.filter(ie=>`${ie.nombres||""} ${ie.apellidos||""}`.toLowerCase().includes(Q))}a.telefono&&(B=B.filter(Q=>{var ie;return(ie=Q.telefono)==null?void 0:ie.toLowerCase().includes(a.telefono.toLowerCase())})),r(B)},q=B=>{const{name:Q,value:ie}=B.target;o(ue=>({...ue,[Q]:ie}))},M=()=>{o({dni:"",nombre:"",telefono:""})},L=async(B,Q,ie)=>{const ue=`${Q||""} ${ie||""}`.trim();if(window.confirm(`¿Estás seguro de eliminar al paciente "${ue}"?`))try{await qc(we(ne,"pacientes",B)),W.success("✅ Paciente eliminado correctamente"),D()}catch(Ee){console.error("❌ Error al eliminar paciente:",Ee),W.error("❌ No se pudo eliminar el paciente")}},oe=B=>{f(`/admin/pacientes/edit/${B}`)},ve=()=>{f("/admin/pacientes/create")},ee=B=>{R(B),V({email:"",password:"",confirmPassword:""}),C(null),E(!0)},fe=()=>{var $e,Rs;if(!_)return;const B=_.nombres||"",Q=_.apellidos||"",ie=_.dni||"",ue=(($e=B.split(" ")[0])==null?void 0:$e.toLowerCase())||"",Ee=((Rs=Q.split(" ")[0])==null?void 0:Rs.toLowerCase())||"",Se=`${`${ue}.${Ee}${ie.slice(-2)}`}@sismedic.com`,ct=`Sismedic${ie.slice(-4)}!`;V({email:Se,password:ct,confirmPassword:ct}),C({email:Se,password:ct})},ye=B=>{navigator.clipboard.writeText(B),W.success("📋 Copiado al portapapeles")},Fe=async()=>{try{if(!_)return;if(!I.email.endsWith("@sismedic.com")){W.error("❌ El email debe terminar en @sismedic.com");return}if(I.password.length<6){W.error("❌ La contraseña debe tener al menos 6 caracteres");return}if(I.password!==I.confirmPassword){W.error("❌ Las contraseñas no coinciden");return}N(ie=>({...ie,[_.id]:!0}));const Q=(await Ny(ya,I.email,I.password)).user.uid;await pi(we(ne,"usuarios",Q),{email:I.email,rol:"paciente",pacienteId:_.id,nombres:_.nombres||"",apellidos:_.apellidos||"",dni:_.dni||"",telefono:_.telefono||"",clinicId:_.clinicId||(m==null?void 0:m.clinicId)||null,fechaCreacion:new Date().toISOString(),activo:!0,primerLogin:!0}),v(ie=>({...ie,[_.id]:{id:Q,email:I.email,hasAccount:!0,rol:"paciente"}})),W.success("✅ Cuenta creada exitosamente"),E(!1),R(null)}catch(B){console.error("❌ Error al crear cuenta:",B),B.code==="auth/email-already-in-use"?W.error("❌ Este email ya está en uso"):B.code==="auth/weak-password"?W.error("❌ La contraseña es muy débil"):W.error("❌ No se pudo crear la cuenta")}finally{N(B=>({...B,[_.id]:!1}))}};return c?n.jsx("div",{className:"p-6",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsx("div",{className:"h-10 w-40 bg-gray-300 rounded"}),n.jsx("div",{className:"h-10 w-40 bg-gray-300 rounded"}),n.jsx("div",{className:"h-10 w-40 bg-gray-300 rounded"})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[n.jsx("div",{className:"bg-gray-100 h-12"}),[...Array(5)].map((B,Q)=>n.jsx("div",{className:"border-t border-gray-200 h-16 bg-gray-50"},Q))]})]})}):n.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[m!=null&&m.clinicId?n.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(qe,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-green-800",children:"Vista Multi-Tenant Activa"}),n.jsxs("p",{className:"text-sm text-green-700",children:["Mostrando solo pacientes de tu clínica:"," ",n.jsx("span",{className:"font-semibold",children:m.clinicName||m.clinicId})]})]})]})}):n.jsx("div",{className:"mb-6 bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Tt,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-orange-800",children:"Usuario Legacy"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Acceso completo a todos los pacientes del sistema"})]})]})}),n.jsxs("div",{className:"flex items-center justify-between mb-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(Lt,{className:"h-8 w-8 text-blue-600"})}),m!=null&&m.clinicId?"Pacientes de tu Clínica":"Gestión de Pacientes"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Administra los pacientes y sus cuentas de acceso"})]}),n.jsxs("button",{onClick:ve,className:"bg-blue-600 text-white px-6 py-3 rounded-xl hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 font-medium shadow-lg hover:shadow-xl",children:[n.jsx(Ta,{className:"h-5 w-5"}),"Registrar Paciente"]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(Cc,{className:"h-5 w-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-800",children:"Filtros de Búsqueda"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"DNI"}),n.jsx("input",{type:"text",name:"dni",value:a.dni,onChange:q,placeholder:"Buscar por DNI",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo"}),n.jsx("input",{type:"text",name:"nombre",value:a.nombre,onChange:q,placeholder:"Buscar por nombre",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),n.jsx("input",{type:"text",name:"telefono",value:a.telefono,onChange:q,placeholder:"Buscar por teléfono",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),n.jsx("div",{className:"flex items-end",children:(a.dni||a.nombre||a.telefono)&&n.jsx("button",{onClick:M,className:"w-full bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors text-sm font-medium",children:"Limpiar filtros"})})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"DNI"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Nombre Completo"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Teléfono"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Edad"}),!(m!=null&&m.clinicId)&&n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Clínica"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Estado de Cuenta"}),n.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-gray-900",children:"Acciones"})]})}),n.jsx("tbody",{className:"divide-y divide-gray-200",children:s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:m!=null&&m.clinicId?"6":"7",className:"text-center py-12",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx("div",{className:"p-4 bg-gray-100 rounded-full",children:n.jsx(vn,{className:"h-8 w-8 text-gray-400"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No se encontraron pacientes"}),n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.length===0?m!=null&&m.clinicId?"No hay pacientes registrados en tu clínica":"No hay pacientes registrados":"Intenta ajustar los filtros de búsqueda"})]})]})})}):s.map(B=>{var Q,ie;return n.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"font-mono text-sm font-medium text-gray-900",children:B.dni||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Lt,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-gray-900",children:`${B.nombres||""} ${B.apellidos||""}`.trim()||"Sin nombre"}),n.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",B.id.slice(0,8),"..."]})]})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-sm text-gray-900",children:B.telefono||"-"})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("span",{className:"text-sm text-gray-900",children:[B.edad||"-"," años"]})}),!(m!=null&&m.clinicId)&&n.jsx("td",{className:"px-6 py-4",children:B.clinicId?n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(yn,{className:"w-3 h-3 mr-1"}),B.clinicName||B.clinicId]}):n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]})}),n.jsx("td",{className:"px-6 py-4",children:(Q=x[B.id])!=null&&Q.hasAccount?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(_t,{className:"w-3 h-3 mr-1"}),"Cuenta Activa"]}),n.jsx("span",{className:"text-xs text-gray-500",children:(ie=x[B.id])==null?void 0:ie.email})]}):n.jsx("button",{onClick:()=>ee(B),disabled:y[B.id],className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors disabled:opacity-50",children:y[B.id]?n.jsxs(n.Fragment,{children:[n.jsx(ms,{className:"w-3 h-3 mr-1 animate-spin"}),"Creando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(mf,{className:"w-3 h-3 mr-1"}),"Crear Cuenta"]})})}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>oe(B.id),className:"p-2 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",title:"Editar paciente",children:n.jsx(Hn,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>L(B.id,B.nombres,B.apellidos),className:"p-2 text-red-600 hover:text-red-800 hover:bg-red-50 rounded-lg transition-colors",title:"Eliminar paciente",children:n.jsx(Ra,{className:"h-4 w-4"})})]})})]},B.id)})})]})})}),t.length>0&&n.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Pacientes"}),n.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:t.length})]}),n.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:n.jsx(Lt,{className:"h-6 w-6 text-blue-600"})})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Con Cuenta"}),n.jsx("p",{className:"text-3xl font-bold text-green-600 mt-1",children:Object.keys(x).length})]}),n.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:n.jsx(_t,{className:"h-6 w-6 text-green-600"})})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Sin Cuenta"}),n.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-1",children:t.length-Object.keys(x).length})]}),n.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:n.jsx(ha,{className:"h-6 w-6 text-orange-600"})})]})}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Filtrados"}),n.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-1",children:s.length})]}),n.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:n.jsx(Cc,{className:"h-6 w-6 text-purple-600"})})]})})]}),w&&_&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsx("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Crear Cuenta de Acceso"}),n.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(ha,{className:"h-6 w-6"})})]}),n.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(Lt,{className:"w-6 h-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-blue-900",children:`${_.nombres||""} ${_.apellidos||""}`.trim()}),n.jsxs("p",{className:"text-sm text-blue-700",children:["DNI: ",_.dni]})]})]})}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email (@sismedic.com) *"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"email",value:I.email,onChange:B=>V(Q=>({...Q,email:B.target.value})),className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"usuario@sismedic.com"}),n.jsx("button",{type:"button",onClick:fe,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",title:"Generar automáticamente",children:n.jsx(HF,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contraseña *"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:z?"text":"password",value:I.password,onChange:B=>V(Q=>({...Q,password:B.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2 pr-12 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Mínimo 6 caracteres"}),n.jsx("button",{type:"button",onClick:()=>F(!z),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:z?n.jsx(Ca,{className:"h-4 w-4"}):n.jsx(Ys,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirmar Contraseña *"}),n.jsx("input",{type:z?"text":"password",value:I.confirmPassword,onChange:B=>V(Q=>({...Q,confirmPassword:B.target.value})),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Repetir contraseña"})]}),P&&n.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[n.jsx("p",{className:"text-sm font-medium text-green-800 mb-2",children:"Credenciales generadas:"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-green-700",children:"Email:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("code",{className:"text-xs bg-white px-2 py-1 rounded",children:P.email}),n.jsx("button",{onClick:()=>ye(P.email),className:"text-green-600 hover:text-green-800",children:n.jsx(qf,{className:"h-3 w-3"})})]})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-sm text-green-700",children:"Contraseña:"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("code",{className:"text-xs bg-white px-2 py-1 rounded",children:P.password}),n.jsx("button",{onClick:()=>ye(P.password),className:"text-green-600 hover:text-green-800",children:n.jsx(qf,{className:"h-3 w-3"})})]})]})]})]})]}),n.jsxs("div",{className:"flex gap-3 mt-6",children:[n.jsx("button",{onClick:()=>E(!1),className:"flex-1 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancelar"}),n.jsx("button",{onClick:Fe,disabled:!I.email||!I.password||!I.confirmPassword,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"Crear Cuenta"})]})]})})})]})}function Hm(){const[t,e]=S.useState({tipo:"",dni:"",nombres:"",apellidos:"",edad:"",direccion:"",telefono:""}),[s,r]=S.useState(!1),[a,o]=S.useState(!1),[c,u]=S.useState(!1),m=Je(),f=E=>{const{name:_,value:R}=E.target;e(I=>({...I,[_]:R})),(_==="tipo"||_==="dni")&&r(!1)},x=async()=>{const E=t.dni.trim();if(E.length!==8){W.error("⚠️ El DNI debe tener 8 dígitos");return}if(!/^\d+$/.test(E)){W.error("⚠️ El DNI solo debe contener números");return}o(!0);try{const R=await(await fetch(`https://us-central1-autoclean360-3e0f7.cloudfunctions.net/reniecLookup?dni=${E}`)).json();R.nombres&&R.apellidoPaterno?(e(I=>({...I,nombres:R.nombres||"",apellidos:`${R.apellidoPaterno||""} ${R.apellidoMaterno||""}`.trim()})),r(!0),W.success("✅ Datos encontrados correctamente")):W.error("❌ No se encontraron datos para este DNI")}catch(_){console.error("Error al validar DNI:",_),W.error("❌ No se pudo validar el DNI")}finally{o(!1)}},v=async E=>{if(E.preventDefault(),!t.tipo){W.error("⚠️ Selecciona el tipo de paciente");return}if(!t.dni.trim()){W.error("⚠️ El DNI es obligatorio");return}if(t.tipo==="adulto"&&!s){W.error("⚠️ Debes validar el DNI para pacientes adultos");return}if(!t.nombres.trim()||!t.apellidos.trim()){W.error("⚠️ Nombres y apellidos son obligatorios");return}if(!t.edad||t.edad<0){W.error("⚠️ La edad debe ser un número válido");return}u(!0);try{const _={tipo:t.tipo,dni:t.dni.trim(),nombres:t.nombres.trim(),apellidos:t.apellidos.trim(),edad:Number.parseInt(t.edad),direccion:t.direccion.trim(),telefono:t.telefono.trim(),creado:en()};await Gl(be(ne,"pacientes"),_),W.success("✅ Paciente registrado correctamente"),setTimeout(()=>{m("/recepcion/pacientes")},1500)}catch(_){console.error("❌ Error al registrar paciente:",_),W.error("❌ No se pudo guardar el paciente")}finally{u(!1)}},y=()=>{m("/recepcion/pacientes")},N=t.tipo==="adulto",w=N&&s;return n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-500 mb-4",children:[n.jsx("span",{children:"Recepción"}),n.jsx("span",{children:"/"}),n.jsx("span",{children:"Pacientes"}),n.jsx("span",{children:"/"}),n.jsx("span",{className:"text-blue-600 font-medium",children:"Nuevo Paciente"})]}),n.jsx("div",{className:"flex items-center justify-between",children:n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(He,{className:"h-8 w-8 text-blue-600"})}),"Registrar Nuevo Paciente"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Complete la información del paciente para crear un nuevo registro"})]})})]}),n.jsxs("form",{onSubmit:v,className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Xl,{className:"h-5 w-5 text-purple-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tipo de Paciente"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Seleccionar Tipo *"}),n.jsxs("select",{name:"tipo",value:t.tipo,onChange:f,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar tipo de paciente"}),n.jsx("option",{value:"adulto",children:"👤 Adulto (Mayor de 18 años)"}),n.jsx("option",{value:"niño",children:"👶 Niño (Menor de 18 años)"})]})]}),t.tipo&&n.jsxs("div",{className:"flex items-center p-4 bg-blue-50 rounded-lg border border-blue-200",children:[n.jsx(Kl,{className:"h-5 w-5 text-blue-600 mr-3"}),n.jsxs("div",{className:"text-sm",children:[n.jsx("p",{className:"font-medium text-blue-900",children:t.tipo==="adulto"?"Paciente Adulto":"Paciente Menor"}),n.jsx("p",{className:"text-blue-700",children:t.tipo==="adulto"?"Se validará el DNI con RENIEC automáticamente":"Los datos se ingresarán manualmente"})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(LT,{className:"h-5 w-5 text-green-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Información de Identificación"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Documento de Identidad (DNI) *"}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("input",{type:"text",name:"dni",value:t.dni,onChange:f,className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",maxLength:"8",placeholder:"Ingrese 8 dígitos del DNI",required:!0}),N&&n.jsx("button",{type:"button",onClick:x,disabled:a||t.dni.length!==8,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[140px] justify-center",children:a?n.jsxs(n.Fragment,{children:[n.jsx($f,{className:"h-4 w-4 animate-spin"}),"Validando..."]}):s?n.jsxs(n.Fragment,{children:[n.jsx(_t,{className:"h-4 w-4"}),"Validado"]}):n.jsxs(n.Fragment,{children:[n.jsx(qe,{className:"h-4 w-4"}),"Validar DNI"]})})]}),N&&n.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[n.jsx(qe,{className:"h-3 w-3"}),"Para pacientes adultos, el DNI será validado con RENIEC para obtener datos oficiales"]}),s&&n.jsx("div",{className:"mt-2 p-3 bg-green-50 border border-green-200 rounded-lg",children:n.jsxs("p",{className:"text-sm text-green-800 flex items-center gap-2",children:[n.jsx(_t,{className:"h-4 w-4"}),"DNI validado correctamente. Los datos se han completado automáticamente."]})})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(He,{className:"h-5 w-5 text-blue-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Información Personal"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombres *"}),n.jsx("input",{type:"text",name:"nombres",value:t.nombres,onChange:f,className:`w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${w?"bg-gray-50 text-gray-600":""}`,placeholder:"Nombres completos",readOnly:w,required:!0}),w&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[n.jsx(qe,{className:"h-3 w-3"}),"Completado automáticamente desde RENIEC"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Apellidos *"}),n.jsx("input",{type:"text",name:"apellidos",value:t.apellidos,onChange:f,className:`w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${w?"bg-gray-50 text-gray-600":""}`,placeholder:"Apellidos completos",readOnly:w,required:!0}),w&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[n.jsx(qe,{className:"h-3 w-3"}),"Completado automáticamente desde RENIEC"]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Edad *"}),n.jsxs("div",{className:"relative",children:[n.jsx(lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"number",name:"edad",value:t.edad,onChange:f,className:"w-full border border-gray-300 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",min:"0",max:"120",placeholder:"Edad en años",required:!0})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Mr,{className:"h-5 w-5 text-orange-600"})}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Información de Contacto"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Teléfono"}),n.jsxs("div",{className:"relative",children:[n.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",name:"telefono",value:t.telefono,onChange:f,className:"w-full border border-gray-300 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",maxLength:"9",placeholder:"987654321"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dirección"}),n.jsxs("div",{className:"relative",children:[n.jsx(qg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),n.jsx("input",{type:"text",name:"direccion",value:t.direccion,onChange:f,className:"w-full border border-gray-300 rounded-lg pl-10 pr-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Dirección completa"})]})]})]})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("button",{type:"button",onClick:y,className:"w-full sm:w-auto bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-2 font-medium",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsx("button",{type:"submit",disabled:c,className:"w-full sm:w-auto bg-green-600 text-white px-8 py-3 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed min-w-[160px]",children:c?n.jsxs(n.Fragment,{children:[n.jsx($f,{className:"h-4 w-4 animate-spin"}),"Guardando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"h-4 w-4"}),"Guardar Paciente"]})})]})})]})]})})}function zm(){const[t,e]=S.useState({tipo:"",dni:"",nombres:"",apellidos:"",edad:"",direccion:"",telefono:""}),[s,r]=S.useState(!1),[a,o]=S.useState(!0),c=Je(),{id:u}=En();S.useEffect(()=>{m()},[u]);const m=async()=>{try{o(!0);const N=we(ne,"pacientes",u),w=await Ke(N);if(w.exists()){const E=w.data();e({tipo:E.tipo||"",dni:E.dni||"",nombres:E.nombres||"",apellidos:E.apellidos||"",edad:E.edad||"",direccion:E.direccion||"",telefono:E.telefono||""})}else W.error("❌ Paciente no encontrado"),c("/recepcion/pacientes")}catch(N){console.error("❌ Error al cargar paciente:",N),W.error("❌ Error al obtener datos"),c("/recepcion/pacientes")}finally{o(!1)}},f=N=>{const{name:w,value:E}=N.target;e(_=>({..._,[w]:E}))},x=async N=>{if(N.preventDefault(),!t.nombres.trim()||!t.apellidos.trim()){W.error("⚠️ Nombres y apellidos son obligatorios");return}if(!t.edad||t.edad<0){W.error("⚠️ La edad debe ser un número válido");return}r(!0);try{const w=we(ne,"pacientes",u);await hs(w,{nombres:t.nombres.trim(),apellidos:t.apellidos.trim(),edad:Number.parseInt(t.edad),direccion:t.direccion.trim(),telefono:t.telefono.trim(),actualizado:new Date}),W.success("✅ Paciente actualizado correctamente"),setTimeout(()=>{c("/recepcion/pacientes")},1500)}catch(w){console.error("❌ Error al actualizar paciente:",w),W.error("❌ Error al guardar cambios")}finally{r(!1)}},v=()=>{c("/recepcion/pacientes")},y=N=>N==="niño"?"👶":"👤";return a?n.jsx("div",{className:"p-6 max-w-2xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6"}),n.jsx("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[...Array(7)].map((N,w)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]},w))})]})}):n.jsxs("div",{className:"p-6 max-w-2xl mx-auto",children:[n.jsxs("h2",{className:"text-3xl font-bold mb-6 text-gray-800 flex items-center gap-2",children:[n.jsx(He,{className:"h-8 w-8 text-blue-600"}),"Editar Paciente"]}),n.jsxs("form",{onSubmit:x,className:"space-y-4 bg-white p-6 rounded-lg shadow",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Tipo de paciente"}),n.jsxs("div",{className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-600 flex items-center gap-2",children:[n.jsx("span",{className:"text-lg",children:y(t.tipo)}),n.jsx("span",{className:"capitalize",children:t.tipo||"-"}),n.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:"(No editable)"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"DNI"}),n.jsx("input",{type:"text",name:"dni",value:t.dni,className:"w-full border border-gray-300 rounded-lg px-3 py-2 bg-gray-100 text-gray-600",readOnly:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"El DNI no puede ser modificado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Nombres"}),n.jsx("input",{type:"text",name:"nombres",value:t.nombres,onChange:f,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Apellidos"}),n.jsx("input",{type:"text",name:"apellidos",value:t.apellidos,onChange:f,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Edad"}),n.jsx("input",{type:"number",name:"edad",value:t.edad,onChange:f,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",min:"0",max:"120",required:!0})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Dirección"}),n.jsx("input",{type:"text",name:"direccion",value:t.direccion,onChange:f,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Dirección completa"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block font-medium text-gray-700 mb-1",children:"Teléfono"}),n.jsx("input",{type:"text",name:"telefono",value:t.telefono,onChange:f,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",maxLength:"9",placeholder:"987654321"})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4",children:[n.jsxs("button",{type:"button",onClick:v,className:"bg-gray-300 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-400 transition flex items-center gap-2",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:s,className:"bg-yellow-600 text-white px-6 py-3 rounded-lg hover:bg-yellow-700 transition flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fs,{className:"h-4 w-4"}),s?"Guardando...":"Guardar Cambios"]})]})]})]})}function MB(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState(!0),[c,u]=S.useState("todas"),[m,f]=S.useState(""),{user:x}=wt(),v=Je();S.useEffect(()=>{x&&N()},[x]),S.useEffect(()=>{w()},[t,c,m]);const y=async I=>{try{const V=Oe(be(ne,"pacientes"),Re("uid","==",I)),z=await Ce(V);return z.empty?null:z.docs[0].id}catch(V){return console.error("Error al obtener ID del paciente:",V),null}},N=async()=>{try{o(!0);const I=await y(x.uid);if(!I){console.error("No se encontró el paciente");return}const V=Oe(be(ne,"citas"),Re("pacienteId","==",I),Bn("fecha","desc"),Bn("hora","desc")),z=await Ce(V),F=[];for(const P of z.docs){const C=P.data();let D={nombres:"Doctor no encontrado",especialidades:{nombres:""}};if(C.doctorId)try{const k=await Ke(we(ne,"doctores",C.doctorId));k.exists()&&(D=k.data())}catch(k){console.error("Error obteniendo doctor:",k)}F.push({id:P.id,...C,doctorData:D})}e(F)}catch(I){console.error("❌ Error cargando citas:",I)}finally{o(!1)}},w=()=>{let I=[...t];if(c!=="todas"&&(I=I.filter(V=>V.estado===c)),m.trim()){const V=m.toLowerCase();I=I.filter(z=>{var F,P,C,D;return((F=z.doctorData.nombres)==null?void 0:F.toLowerCase().includes(V))||((P=z.motivo)==null?void 0:P.toLowerCase().includes(V))||((D=(C=z.doctorData.especialidades)==null?void 0:C.nombres)==null?void 0:D.toLowerCase().includes(V))})}r(I)},E=I=>{if(!I)return"—";try{return new Date(I).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch{return I}},_=I=>({pendiente:"bg-yellow-100 text-yellow-800",confirmada:"bg-blue-100 text-blue-800",completada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"})[I]||"bg-gray-100 text-gray-800",R=I=>{switch(I){case"pendiente":return"⏳";case"confirmada":return"✅";case"completada":return"🏁";case"cancelada":return"❌";default:return"📅"}};return a?n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded w-64 mb-2 animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-96 animate-pulse"})]}),n.jsx("div",{className:"space-y-4",children:[...Array(5)].map((I,V)=>n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4"})]},V))})]}):n.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>v("/paciente/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx($t,{className:"h-5 w-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mis Citas"}),n.jsx("p",{className:"text-gray-600",children:"Consulta todas tus citas médicas programadas"})]})]}),n.jsx("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-200",children:n.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Buscar por doctor, especialidad o motivo...",value:m,onChange:I=>f(I.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Cc,{className:"h-4 w-4 text-gray-400"}),n.jsxs("select",{value:c,onChange:I=>u(I.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[n.jsx("option",{value:"todas",children:"Todas las citas"}),n.jsx("option",{value:"pendiente",children:"Pendientes"}),n.jsx("option",{value:"confirmada",children:"Confirmadas"}),n.jsx("option",{value:"completada",children:"Completadas"}),n.jsx("option",{value:"cancelada",children:"Canceladas"})]})]})]})})]}),s.length>0?n.jsx("div",{className:"space-y-4",children:s.map(I=>{var V;return n.jsx("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(lt,{className:"h-5 w-5 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:E(I.fecha)}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(ms,{className:"h-4 w-4"}),I.hora]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(He,{className:"h-4 w-4"}),"Dr. ",I.doctorData.nombres]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Especialidad"}),n.jsx("p",{className:"text-sm text-gray-600",children:((V=I.doctorData.especialidades)==null?void 0:V.nombres)||"No especificada"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Motivo de consulta"}),n.jsx("p",{className:"text-sm text-gray-600",children:I.motivo||"Consulta general"})]}),I.observaciones&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Observaciones"}),n.jsx("p",{className:"text-sm text-gray-600",children:I.observaciones})]})]})]}),n.jsxs("div",{className:"ml-4 text-right",children:[n.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${_(I.estado)}`,children:[n.jsx("span",{className:"mr-1",children:R(I.estado)}),I.estado]}),I.fechaCreacion&&n.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Creada: ",E(I.fechaCreacion)]})]})]})},I.id)})}):n.jsxs("div",{className:"bg-white shadow rounded-lg p-12 border border-gray-200 text-center",children:[n.jsx(lt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No se encontraron citas"}),n.jsx("p",{className:"text-gray-600",children:c==="todas"&&!m.trim()?"Aún no tienes citas programadas":"No hay citas que coincidan con los filtros seleccionados"})]}),t.length>0&&n.jsxs("div",{className:"mt-8 bg-white shadow rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Resumen de Citas"}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.filter(I=>I.estado==="pendiente").length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Pendientes"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(I=>I.estado==="confirmada").length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Confirmadas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.filter(I=>I.estado==="completada").length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Completadas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-gray-600",children:t.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total"})]})]})]})]})}function PB(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState(!0),[c,u]=S.useState(""),{user:m}=wt(),f=Je();S.useEffect(()=>{m&&v()},[m]),S.useEffect(()=>{y()},[t,c]);const x=async E=>{try{const _=Oe(be(ne,"pacientes"),Re("uid","==",E)),R=await Ce(_);return R.empty?null:R.docs[0].id}catch(_){return console.error("Error al obtener ID del paciente:",_),null}},v=async()=>{try{o(!0);const E=await x(m.uid);if(!E){console.error("No se encontró el paciente");return}const _=Oe(be(ne,"historias-clinicas"),Re("pacienteId","==",E),Bn("fechaCreacion","desc")),R=await Ce(_),I=[];for(const V of R.docs){const z=V.data();let F={nombres:"Doctor no encontrado",especialidades:{nombres:""}};if(z.doctorId)try{const P=await Ke(we(ne,"doctores",z.doctorId));P.exists()&&(F=P.data())}catch(P){console.error("Error obteniendo doctor:",P)}I.push({id:V.id,...z,doctorData:F})}e(I)}catch(E){console.error("❌ Error cargando historias clínicas:",E)}finally{o(!1)}},y=()=>{let E=[...t];if(c.trim()){const _=c.toLowerCase();E=E.filter(R=>{var I,V,z,F,P;return((I=R.doctorData.nombres)==null?void 0:I.toLowerCase().includes(_))||((V=R.motivoConsulta)==null?void 0:V.toLowerCase().includes(_))||((z=R.diagnostico)==null?void 0:z.toLowerCase().includes(_))||((P=(F=R.doctorData.especialidades)==null?void 0:F.nombres)==null?void 0:P.toLowerCase().includes(_))})}r(E)},N=E=>{if(!E)return"—";try{return new Date(E).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return E}},w=E=>{f(`/paciente/historia-clinica/ver/${E}`)};return a?n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded w-64 mb-2 animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-96 animate-pulse"})]}),n.jsx("div",{className:"space-y-4",children:[...Array(5)].map((E,_)=>n.jsxs("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 animate-pulse",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-6 bg-gray-300 rounded w-3/4"})]},_))})]}):n.jsxs("div",{className:"p-6 bg-gray-50 min-h-screen",children:[n.jsxs("div",{className:"mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[n.jsx("button",{onClick:()=>f("/paciente/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx($t,{className:"h-5 w-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mi Historia Clínica"}),n.jsx("p",{className:"text-gray-600",children:"Consulta todos tus registros médicos"})]})]}),n.jsx("div",{className:"bg-white shadow rounded-lg p-4 border border-gray-200",children:n.jsxs("div",{className:"relative",children:[n.jsx(vn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",placeholder:"Buscar por doctor, diagnóstico, motivo de consulta...",value:c,onChange:E=>u(E.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})})]}),s.length>0?n.jsx("div",{className:"space-y-4",children:s.map(E=>{var _;return n.jsx("div",{className:"bg-white shadow rounded-lg p-6 border border-gray-200 hover:shadow-lg transition-shadow",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(rs,{className:"h-5 w-5 text-green-600"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800",children:["Consulta - ",N(E.fechaCreacion)]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(He,{className:"h-4 w-4"}),"Dr. ",E.doctorData.nombres]}),n.jsxs("span",{className:"flex items-center gap-1",children:[n.jsx(Us,{className:"h-4 w-4"}),((_=E.doctorData.especialidades)==null?void 0:_.nombres)||"Medicina General"]})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Motivo de Consulta"}),n.jsx("p",{className:"text-sm text-gray-600",children:E.motivoConsulta||"No especificado"})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Diagnóstico"}),n.jsx("p",{className:"text-sm text-gray-600",children:E.diagnostico||"No especificado"})]}),E.tratamiento&&n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-1",children:"Tratamiento"}),n.jsx("p",{className:"text-sm text-gray-600",children:E.tratamiento})]})]}),(E.presionArterial||E.frecuenciaCardiaca||E.temperatura)&&n.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[n.jsxs("p",{className:"text-sm font-medium text-blue-800 mb-2 flex items-center",children:[n.jsx(Ir,{className:"h-4 w-4 mr-1"}),"Signos Vitales"]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[E.presionArterial&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700",children:"Presión:"}),n.jsx("span",{className:"ml-1 text-blue-900",children:E.presionArterial})]}),E.frecuenciaCardiaca&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700",children:"FC:"}),n.jsxs("span",{className:"ml-1 text-blue-900",children:[E.frecuenciaCardiaca," bpm"]})]}),E.temperatura&&n.jsxs("div",{children:[n.jsx("span",{className:"text-blue-700",children:"Temp:"}),n.jsxs("span",{className:"ml-1 text-blue-900",children:[E.temperatura,"°C"]})]})]})]})]}),n.jsxs("div",{className:"ml-4 flex flex-col gap-2",children:[n.jsxs("button",{onClick:()=>w(E.id),className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[n.jsx(Ys,{className:"h-4 w-4"}),"Ver Completa"]}),n.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors text-sm",title:"Descargar reporte (próximamente)",children:[n.jsx(AF,{className:"h-4 w-4"}),"Descargar"]})]})]})},E.id)})}):n.jsxs("div",{className:"bg-white shadow rounded-lg p-12 border border-gray-200 text-center",children:[n.jsx(rs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"No se encontraron registros"}),n.jsx("p",{className:"text-gray-600",children:c.trim()?"No hay historias clínicas que coincidan con la búsqueda":"Aún no tienes registros médicos en el sistema"})]}),t.length>0&&n.jsxs("div",{className:"mt-8 bg-white shadow rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Resumen de Historia Clínica"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.length}),n.jsx("p",{className:"text-sm text-gray-600",children:"Total de Consultas"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:new Set(t.map(E=>E.doctorId)).size}),n.jsx("p",{className:"text-sm text-gray-600",children:"Doctores Diferentes"})]}),n.jsxs("div",{className:"text-center",children:[n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:t.length>0?N(t[0].fechaCreacion).split(",")[0]:"—"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Última Consulta"})]})]})]})]})}function OB(){const[t,e]=S.useState({nombres:"",apellidos:"",email:"",telefono:"",fechaNacimiento:"",tipoDocumento:"CC",numeroDocumento:"",direccion:"",ciudad:"",departamento:"",foto:""}),[s,r]=S.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[a,o]=S.useState({file:null,preview:null,uploading:!1,progress:0}),[c,u]=S.useState(!0),[m,f]=S.useState(!1),[x,v]=S.useState({current:!1,new:!1,confirm:!1}),[y,N]=S.useState({type:"",text:""}),[w,E]=S.useState(null),[_,R]=S.useState("personal"),I=S.useRef(null),{user:V}=wt(),z=Je();S.useEffect(()=>{V&&C()},[V]);const F=async B=>{try{const Q=await Ke(we(ne,"usuarios",B));if(!Q.exists())return console.error("Usuario no encontrado en la colección usuarios"),null;const ie=Q.data();return console.log("Datos del usuario:",ie),ie.pacienteId?{userId:B,pacienteId:ie.pacienteId,userData:ie}:(console.error("El usuario no tiene pacienteId asociado"),null)}catch(Q){return console.error("Error al obtener datos del usuario:",Q),null}},P=async B=>{try{const Q=await Ke(we(ne,"pacientes",B));return Q.exists()?{id:Q.id,data:Q.data()}:(console.error("Paciente no encontrado en la colección pacientes"),null)}catch(Q){return console.error("Error al obtener datos del paciente:",Q),null}},C=async()=>{try{u(!0),console.log("Cargando datos del paciente para UID:",V.uid);const B=await F(V.uid);if(!B){N({type:"error",text:"No se pudo encontrar la información del usuario"});return}console.log("PacienteId encontrado:",B.pacienteId);const Q=await P(B.pacienteId);if(!Q){N({type:"error",text:"No se pudo encontrar la información del paciente"});return}console.log("Datos del paciente encontrados:",Q.data),E(B.pacienteId),e({nombres:Q.data.nombres||"",apellidos:Q.data.apellidos||"",email:V.email||"",telefono:Q.data.telefono||"",fechaNacimiento:Q.data.fechaNacimiento||"",tipoDocumento:Q.data.tipoDocumento||"CC",numeroDocumento:Q.data.dni||Q.data.numeroDocumento||"",direccion:Q.data.direccion||"",ciudad:Q.data.ciudad||"",departamento:Q.data.departamento||"",foto:Q.data.foto||""})}catch(B){console.error("❌ Error cargando datos del paciente:",B),N({type:"error",text:"Error al cargar los datos del perfil: "+B.message})}finally{u(!1)}},D=B=>{const{name:Q,value:ie}=B.target;Q!=="email"&&e(ue=>({...ue,[Q]:ie}))},k=B=>{const{name:Q,value:ie}=B.target;r(ue=>({...ue,[Q]:ie}))},O=B=>{const Q=B.target.files[0];if(!Q)return;if(!Q.type.startsWith("image/")){N({type:"error",text:"Por favor selecciona una imagen válida"});return}if(Q.size>5*1024*1024){N({type:"error",text:"La imagen debe ser menor a 5MB"});return}const ie=new FileReader;ie.onload=ue=>{o({file:Q,preview:ue.target.result,uploading:!1,progress:0})},ie.readAsDataURL(Q)},q=async()=>{if(!(!a.file||!w))try{o(ge=>({...ge,uploading:!0,progress:0})),N({type:"",text:""});const B=`pacientes/${w}/foto_${Date.now()}.${a.file.name.split(".").pop()}`,Q=Vl(Ul,B);if(t.foto)try{const ge=Vl(Ul,t.foto);await kb(ge)}catch(ge){console.log("No se pudo eliminar la foto anterior:",ge)}const ie=await Fg(Q,a.file),ue=await Bg(ie.ref),Ee=we(ne,"pacientes",w);await hs(Ee,{foto:ue,fechaActualizacion:new Date().toISOString()}),e(ge=>({...ge,foto:ue})),o({file:null,preview:null,uploading:!1,progress:0}),N({type:"success",text:"Foto de perfil actualizada correctamente"}),setTimeout(()=>{N({type:"",text:""})},3e3)}catch(B){console.error("❌ Error subiendo foto:",B),N({type:"error",text:"Error al subir la foto: "+B.message}),o(Q=>({...Q,uploading:!1,progress:0}))}},M=async()=>{if(!(!t.foto||!w))try{f(!0),N({type:"",text:""});const B=Vl(Ul,t.foto);await kb(B);const Q=we(ne,"pacientes",w);await hs(Q,{foto:"",fechaActualizacion:new Date().toISOString()}),e(ie=>({...ie,foto:""})),N({type:"success",text:"Foto de perfil eliminada correctamente"}),setTimeout(()=>{N({type:"",text:""})},3e3)}catch(B){console.error("❌ Error eliminando foto:",B),N({type:"error",text:"Error al eliminar la foto: "+B.message})}finally{f(!1)}},L=()=>{o({file:null,preview:null,uploading:!1,progress:0}),I.current&&(I.current.value="")},oe=()=>t.nombres.trim()?t.apellidos.trim()?t.numeroDocumento.trim()?!0:(N({type:"error",text:"El número de documento es obligatorio"}),!1):(N({type:"error",text:"Los apellidos son obligatorios"}),!1):(N({type:"error",text:"El nombre es obligatorio"}),!1),ve=()=>s.newPassword&&s.newPassword.length<6?(N({type:"error",text:"La nueva contraseña debe tener al menos 6 caracteres"}),!1):s.newPassword!==s.confirmPassword?(N({type:"error",text:"Las contraseñas no coinciden"}),!1):!0,ee=async B=>{if(B.preventDefault(),!!oe())try{if(f(!0),N({type:"",text:""}),!w){N({type:"error",text:"No se pudo identificar el paciente"});return}console.log("Actualizando paciente con ID:",w);const Q=we(ne,"pacientes",w);await hs(Q,{nombres:t.nombres.trim(),apellidos:t.apellidos.trim(),telefono:t.telefono.trim(),fechaNacimiento:t.fechaNacimiento,tipoDocumento:t.tipoDocumento,dni:t.numeroDocumento.trim(),numeroDocumento:t.numeroDocumento.trim(),direccion:t.direccion.trim(),ciudad:t.ciudad.trim(),departamento:t.departamento.trim(),fechaActualizacion:new Date().toISOString()}),N({type:"success",text:"Perfil actualizado correctamente"}),setTimeout(()=>{N({type:"",text:""})},3e3)}catch(Q){console.error("❌ Error actualizando perfil:",Q),N({type:"error",text:"Error al actualizar el perfil: "+Q.message})}finally{f(!1)}},fe=async B=>{if(B.preventDefault(),!s.newPassword){N({type:"error",text:"Ingresa una nueva contraseña"});return}if(ve())try{f(!0),N({type:"",text:""}),await tA(ya.currentUser,s.newPassword),r({currentPassword:"",newPassword:"",confirmPassword:""}),N({type:"success",text:"Contraseña actualizada correctamente"}),setTimeout(()=>{N({type:"",text:""})},3e3)}catch(Q){console.error("❌ Error cambiando contraseña:",Q),N({type:"error",text:"Error al cambiar la contraseña: "+Q.message})}finally{f(!1)}},ye=B=>{v(Q=>({...Q,[B]:!Q[B]}))},Fe=()=>{const B=t.nombres||"",Q=t.apellidos||"";return`${B.charAt(0)}${Q.charAt(0)}`.toUpperCase()};return c?n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-indigo-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsx("div",{className:"mb-8",children:n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-lg animate-pulse"}),n.jsxs("div",{children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded w-48 mb-2 animate-pulse"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-64 animate-pulse"})]})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsx("div",{className:"bg-white shadow-xl rounded-2xl p-6 border border-gray-100 animate-pulse",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-32 h-32 bg-gray-300 rounded-full mx-auto mb-4"}),n.jsx("div",{className:"h-6 bg-gray-300 rounded w-32 mx-auto mb-2"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-24 mx-auto"})]})})}),n.jsx("div",{className:"lg:col-span-3",children:n.jsx("div",{className:"bg-white shadow-xl rounded-2xl p-8 border border-gray-100 animate-pulse",children:n.jsx("div",{className:"space-y-6",children:[...Array(8)].map((B,Q)=>n.jsx("div",{className:"h-4 bg-gray-300 rounded"},Q))})})})]})]})}):n.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 via-blue-50 to-indigo-50 p-6",children:n.jsxs("div",{className:"max-w-7xl mx-auto",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("button",{onClick:()=>z("/patient/dashboard"),className:"p-3 hover:bg-white/80 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg border border-gray-200",children:n.jsx($t,{className:"h-5 w-5 text-gray-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"Mi Perfil"}),n.jsx("p",{className:"text-gray-600 text-lg",children:"Gestiona tu información personal y configuración"})]})]}),n.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[n.jsx("span",{children:"Portal del Paciente"}),n.jsx("span",{children:"/"}),n.jsx("span",{className:"text-green-600 font-medium",children:"Mi Perfil"})]})]}),y.text&&n.jsx("div",{className:`mb-8 p-4 rounded-xl border-l-4 ${y.type==="success"?"bg-green-50 text-green-800 border-green-400":"bg-red-50 text-red-800 border-red-400"} shadow-md`,children:n.jsxs("div",{className:"flex items-center",children:[y.type==="success"?n.jsx(mF,{className:"h-5 w-5 mr-2"}):n.jsx(Kl,{className:"h-5 w-5 mr-2"}),y.text]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[n.jsx("div",{className:"lg:col-span-1",children:n.jsxs("div",{className:"bg-white shadow-xl rounded-2xl p-6 border border-gray-100 sticky top-6",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsxs("div",{className:"relative inline-block",children:[a.preview?n.jsx("img",{src:a.preview||"/placeholder.svg",alt:"Preview",className:"w-32 h-32 rounded-full border-4 border-green-200 object-cover shadow-lg"}):t.foto?n.jsx("img",{src:t.foto||"/placeholder.svg",alt:"Foto del paciente",className:"w-32 h-32 rounded-full border-4 border-green-200 object-cover shadow-lg",onError:B=>{B.target.style.display="none",B.target.nextSibling.style.display="flex"}}):null,!a.preview&&!t.foto&&n.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-gray-200 bg-gradient-to-br from-green-100 to-blue-100 flex items-center justify-center shadow-lg",children:n.jsx("span",{className:"text-2xl font-bold text-green-600",children:Fe()})}),n.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center shadow-lg",children:n.jsx(OT,{className:"h-4 w-4 text-white"})})]}),n.jsxs("h3",{className:"text-xl font-bold text-gray-800 mt-4",children:[t.nombres," ",t.apellidos]}),n.jsx("p",{className:"text-gray-600",children:V.email}),n.jsxs("div",{className:"flex items-center justify-center mt-2 text-sm text-gray-500",children:[n.jsx(qe,{className:"h-4 w-4 mr-1"}),n.jsx("span",{children:"Paciente Verificado"})]})]}),n.jsx("div",{className:"space-y-3",children:a.file?n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:q,disabled:a.uploading,className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:a.uploading?n.jsxs(n.Fragment,{children:[n.jsx(hf,{className:"h-4 w-4 animate-spin"}),"Subiendo..."]}):n.jsxs(n.Fragment,{children:[n.jsx(bv,{className:"h-4 w-4"}),"Guardar Foto"]})}),n.jsxs("button",{onClick:L,disabled:a.uploading,className:"w-full flex items-center justify-center gap-2 bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:[n.jsx(VT,{className:"h-4 w-4"}),"Cancelar"]})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{ref:I,type:"file",accept:"image/*",onChange:O,className:"hidden"}),n.jsxs("button",{onClick:()=>{var B;return(B=I.current)==null?void 0:B.click()},className:"w-full flex items-center justify-center gap-2 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:[n.jsx(DF,{className:"h-4 w-4"}),t.foto?"Cambiar Foto":"Subir Foto"]}),t.foto&&n.jsxs("button",{onClick:M,disabled:m,className:"w-full flex items-center justify-center gap-2 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[n.jsx(Ra,{className:"h-4 w-4"}),"Eliminar Foto"]})]})}),n.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:n.jsxs("div",{className:"space-y-2 text-sm",children:[n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Documento:"}),n.jsxs("span",{className:"font-medium",children:[t.tipoDocumento," ",t.numeroDocumento]})]}),n.jsxs("div",{className:"flex justify-between",children:[n.jsx("span",{className:"text-gray-500",children:"Teléfono:"}),n.jsx("span",{className:"font-medium",children:t.telefono||"No registrado"})]})]})})]})}),n.jsx("div",{className:"lg:col-span-3",children:n.jsxs("div",{className:"bg-white shadow-xl rounded-2xl border border-gray-100 overflow-hidden",children:[n.jsx("div",{className:"border-b border-gray-200",children:n.jsxs("nav",{className:"flex space-x-8 px-8 pt-6",children:[n.jsx("button",{onClick:()=>R("personal"),className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${_==="personal"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(He,{className:"h-4 w-4"}),"Información Personal"]})}),n.jsx("button",{onClick:()=>R("security"),className:`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${_==="security"?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xi,{className:"h-4 w-4"}),"Seguridad"]})})]})}),n.jsxs("div",{className:"p-8",children:[_==="personal"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Información Personal"}),n.jsx("p",{className:"text-gray-600",children:"Actualiza tus datos personales y de contacto"})]}),n.jsxs("form",{onSubmit:ee,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nombres *"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",name:"nombres",value:t.nombres,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Apellidos *"}),n.jsxs("div",{className:"relative",children:[n.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"text",name:"apellidos",value:t.apellidos,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",required:!0})]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tipo de Documento"}),n.jsxs("select",{name:"tipoDocumento",value:t.tipoDocumento,onChange:D,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",children:[n.jsx("option",{value:"CC",children:"Cédula de Ciudadanía"}),n.jsx("option",{value:"DNI",children:"Documento Nacional de Identidad"}),n.jsx("option",{value:"CE",children:"Cédula de Extranjería"}),n.jsx("option",{value:"PP",children:"Pasaporte"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Número de Documento *"}),n.jsx("input",{type:"text",name:"numeroDocumento",value:t.numeroDocumento,onChange:D,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",required:!0})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Email *",n.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"(No editable)"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(lo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"email",name:"email",value:V.email||"",readOnly:!0,className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-xl bg-gray-50 text-gray-600 cursor-not-allowed transition-all duration-200",title:"El email no puede ser modificado"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Este es el email con el que te registraste y no puede ser modificado"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Teléfono"}),n.jsxs("div",{className:"relative",children:[n.jsx(Mr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"tel",name:"telefono",value:t.telefono,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Fecha de Nacimiento"}),n.jsxs("div",{className:"relative max-w-md",children:[n.jsx(lt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:"date",name:"fechaNacimiento",value:t.fechaNacimiento,onChange:D,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Dirección"}),n.jsxs("div",{className:"relative",children:[n.jsx(qg,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),n.jsx("textarea",{name:"direccion",value:t.direccion,onChange:D,rows:"3",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Dirección completa"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ciudad"}),n.jsx("input",{type:"text",name:"ciudad",value:t.ciudad,onChange:D,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Departamento"}),n.jsx("input",{type:"text",name:"departamento",value:t.departamento,onChange:D,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200"})]})]}),n.jsx("div",{className:"pt-6",children:n.jsx("button",{type:"submit",disabled:m,className:"w-full md:w-auto flex items-center justify-center gap-2 bg-gradient-to-r from-green-600 to-blue-600 text-white py-3 px-8 rounded-xl hover:from-green-700 hover:to-blue-700 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl disabled:opacity-50",children:m?n.jsxs(n.Fragment,{children:[n.jsx(hf,{className:"h-4 w-4 animate-spin"}),"Guardando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(fs,{className:"h-4 w-4"}),"Guardar Cambios"]})})})]})]}),_==="security"&&n.jsxs("div",{children:[n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Seguridad"}),n.jsx("p",{className:"text-gray-600",children:"Cambia tu contraseña para mantener tu cuenta segura"})]}),n.jsxs("form",{onSubmit:fe,className:"space-y-6 max-w-md",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nueva Contraseña"}),n.jsxs("div",{className:"relative",children:[n.jsx(xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:x.new?"text":"password",name:"newPassword",value:s.newPassword,onChange:k,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Mínimo 6 caracteres"}),n.jsx("button",{type:"button",onClick:()=>ye("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:x.new?n.jsx(Ca,{className:"h-4 w-4"}):n.jsx(Ys,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmar Nueva Contraseña"}),n.jsxs("div",{className:"relative",children:[n.jsx(xi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),n.jsx("input",{type:x.confirm?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:k,className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200",placeholder:"Repetir nueva contraseña"}),n.jsx("button",{type:"button",onClick:()=>ye("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition-colors",children:x.confirm?n.jsx(Ca,{className:"h-4 w-4"}):n.jsx(Ys,{className:"h-4 w-4"})})]})]}),n.jsx("div",{className:"pt-4",children:n.jsx("button",{type:"submit",disabled:m||!s.newPassword,className:"w-full flex items-center justify-center gap-2 bg-gradient-to-r from-red-600 to-pink-600 text-white py-3 px-6 rounded-xl hover:from-red-700 hover:to-pink-700 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl disabled:opacity-50",children:m?n.jsxs(n.Fragment,{children:[n.jsx(hf,{className:"h-4 w-4 animate-spin"}),"Cambiando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(xi,{className:"h-4 w-4"}),"Cambiar Contraseña"]})})}),n.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200",children:[n.jsx("h4",{className:"font-semibold text-blue-800 mb-2",children:"Consejos de Seguridad"}),n.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[n.jsx("li",{children:"• Usa al menos 6 caracteres"}),n.jsx("li",{children:"• Incluye números y letras"}),n.jsx("li",{children:"• No uses información personal"}),n.jsx("li",{children:"• Cambia tu contraseña regularmente"})]})]})]})]})]})]})})]})]})})}function LB(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState([]),[c,u]=S.useState({nombre:"",especialidad:""}),[m,f]=S.useState(!0),{user:x}=wt();S.useEffect(()=>{v()},[x]),S.useEffect(()=>{y()},[t,c]);const v=async()=>{try{f(!0);const z=Oe(be(ne,"citas"),Re("pacienteId","==",x.uid)),F=await Ce(z),P=[],C=new Set;if(F.forEach(D=>{const k=D.data();P.push({id:D.id,...k}),k.doctorId&&C.add(k.doctorId)}),o(P),C.size>0){const D=Oe(be(ne,"doctores")),k=await Ce(D),O=[];k.forEach(q=>{const M=q.data();C.has(q.id)&&!M._placeholder&&O.push({id:q.id,...M})}),e(O)}console.log(`✅ ${C.size} doctores cargados`)}catch(z){console.error("❌ Error al cargar doctores:",z),W.error("Error al cargar la información de doctores")}finally{f(!1)}},y=()=>{let z=[...t];c.nombre&&(z=z.filter(F=>{var P;return(P=F.nombre)==null?void 0:P.toLowerCase().includes(c.nombre.toLowerCase())})),c.especialidad&&(z=z.filter(F=>{var P;return(P=F.especialidad)==null?void 0:P.toLowerCase().includes(c.especialidad.toLowerCase())})),r(z)},N=z=>{const{name:F,value:P}=z.target;u(C=>({...C,[F]:P}))},w=()=>{u({nombre:"",especialidad:""})},E=z=>a.filter(F=>F.doctorId===z),_=z=>{const F=E(z);return F.length===0?null:F.filter(P=>P.estado==="completada").sort((P,C)=>new Date(C.fecha)-new Date(P.fecha))[0]},R=z=>{const F=E(z);return F.length===0?null:F.filter(P=>["pendiente","confirmada"].includes(P.estado)).sort((P,C)=>new Date(P.fecha)-new Date(C.fecha))[0]},I=z=>z?new Date(z).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric"}):"-",V=z=>z||"-";return m?n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6 animate-pulse"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((z,F)=>n.jsxs("div",{className:"bg-white rounded-lg shadow p-6 animate-pulse",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded mb-4"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded mb-2"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded"})]},F))})]}):n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(_i,{className:"h-8 w-8 text-blue-600"}),"Mis Doctores"]})}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(MT,{className:"h-5 w-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-800",children:"Filtros"})]}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nombre del Doctor"}),n.jsx("input",{type:"text",name:"nombre",value:c.nombre,onChange:N,placeholder:"Buscar por nombre",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Especialidad"}),n.jsx("input",{type:"text",name:"especialidad",value:c.especialidad,onChange:N,placeholder:"Buscar por especialidad",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),(c.nombre||c.especialidad)&&n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:w,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition text-sm",children:"Limpiar filtros"})})]})]}),s.length===0?n.jsx("div",{className:"bg-white rounded-lg shadow p-8",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Pb,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:t.length===0?"No tienes doctores asignados":"No se encontraron doctores"}),n.jsx("p",{className:"text-gray-500",children:t.length===0?"Cuando tengas citas médicas, aquí aparecerán tus doctores.":"Intenta ajustar los filtros de búsqueda."})]})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(z=>{const F=_(z.id),P=R(z.id),C=E(z.id).length;return n.jsxs("div",{className:"bg-white rounded-lg shadow border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:[n.jsxs("div",{className:"flex items-start gap-4 mb-4",children:[n.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center",children:n.jsx(_i,{className:"h-8 w-8 text-blue-600"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:z.nombre}),n.jsxs("div",{className:"flex items-center gap-1 text-blue-600 mb-1",children:[n.jsx(Mb,{className:"h-4 w-4"}),n.jsx("span",{className:"text-sm font-medium",children:z.especialidad})]}),n.jsxs("div",{className:"flex items-center gap-1 text-gray-500",children:[n.jsx(OU,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}),n.jsxs("span",{className:"text-sm",children:[C," consulta",C!==1?"s":""]})]})]})]}),n.jsxs("div",{className:"space-y-2 mb-4",children:[z.telefono&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(DU,{className:"h-4 w-4"}),n.jsx("span",{children:z.telefono})]}),z.email&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(xU,{className:"h-4 w-4"}),n.jsx("span",{children:z.email})]}),z.direccion&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[n.jsx(AU,{className:"h-4 w-4"}),n.jsx("span",{children:z.direccion})]})]}),n.jsxs("div",{className:"border-t pt-4 space-y-3",children:[F&&n.jsxs("div",{className:"bg-green-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(pc,{className:"h-4 w-4 text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-800",children:"Última Consulta"})]}),n.jsxs("p",{className:"text-sm text-green-700",children:[I(F.fecha)," - ",V(F.hora)]}),F.motivo&&n.jsx("p",{className:"text-xs text-green-600 mt-1",children:F.motivo})]}),P&&n.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Lu,{className:"h-4 w-4 text-blue-600"}),n.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Próxima Cita"})]}),n.jsxs("p",{className:"text-sm text-blue-700",children:[I(P.fecha)," - ",V(P.hora)]}),P.motivo&&n.jsx("p",{className:"text-xs text-blue-600 mt-1",children:P.motivo}),n.jsx("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium mt-2 ${P.estado==="confirmada"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:P.estado==="confirmada"?"Confirmada":"Pendiente"})]}),!F&&!P&&n.jsx("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:n.jsx("p",{className:"text-sm text-gray-500",children:"No hay citas registradas"})})]})]},z.id)})}),t.length>0&&n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsx("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(_i,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Doctores"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(pc,{className:"h-6 w-6 text-green-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Consultas"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.length})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(Mb,{className:"h-6 w-6 text-purple-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Especialidades"}),n.jsx("p",{className:"text-2xl font-bold text-purple-600",children:new Set(t.map(z=>z.especialidad)).size})]})]})})]})]})}function Rx(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState({fecha:"",dni:"",estado:""}),[c,u]=S.useState(!0),{user:m}=wt(),f=Je();S.useEffect(()=>{x()},[m]),S.useEffect(()=>{v()},[t,a]);const x=async()=>{try{u(!0);let F;m!=null&&m.clinicId?(F=Oe(be(ne,"citas"),Re("clinicId","==",m.clinicId)),console.log(`🏥 Cargando citas para clínica: ${m.clinicId}`)):(F=Oe(be(ne,"citas")),console.log("👤 Usuario legacy: cargando todas las citas"));const P=await Ce(F),C=[];for(const D of P.docs){const k=D.data();if(!k._placeholder){if(k.id=D.id,k.pacienteId)try{const O=we(ne,"pacientes",k.pacienteId),q=await Ke(O);if(q.exists()){const M=q.data();k.dni=M.dni||"-",k.telefono=M.telefono||null}else k.dni="-"}catch(O){console.error("Error al obtener datos del paciente:",O),k.dni="-"}else k.dni="-";C.push(k)}}console.log(`✅ ${C.length} citas cargadas`),e(C)}catch(F){console.error("❌ Error al cargar citas:",F),W.error("Error al cargar las citas")}finally{u(!1)}},v=()=>{let F=[...t];a.fecha&&(F=F.filter(P=>P.fecha===a.fecha)),a.dni&&(F=F.filter(P=>{var C;return(C=P.dni)==null?void 0:C.toLowerCase().includes(a.dni.toLowerCase())})),a.estado&&(F=F.filter(P=>P.estado===a.estado)),r(F)},y=F=>{const{name:P,value:C}=F.target;o(D=>({...D,[P]:C}))},N=()=>{o({fecha:"",dni:"",estado:""})},w=async(F,P)=>{if(window.confirm(`¿Estás seguro de eliminar la cita de "${P}"?`))try{await qc(we(ne,"citas",F)),W.success("✅ Cita eliminada correctamente"),x()}catch(C){console.error("❌ Error al eliminar cita:",C),W.error("❌ No se pudo eliminar la cita")}},E=F=>{f(`/recepcion/citas/editar/${F}`)},_=()=>{f("/recepcion/citas/crear")},R=async F=>{if(!F.telefono){W.error("❌ No se encontró el número del paciente");return}const P=F.telefono.startsWith("+")?F.telefono:`+51${F.telefono}`,C=`Hola ${F.paciente}, te recordamos tu cita para el día ${F.fecha} a las ${F.hora}.`;try{(await fetch("https://us-central1-sysmedic-71cec.cloudfunctions.net/enviarRecordatorioSMS",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({telefono:P,mensaje:C})})).ok?W.success("✅ Recordatorio enviado correctamente"):W.error("❌ Error al enviar el mensaje")}catch(D){console.error("Error al enviar recordatorio:",D),W.error("❌ Ocurrió un error inesperado")}},I=F=>{const C={pendiente:{bg:"bg-yellow-100",text:"text-yellow-800",icon:"⏳"},atendido:{bg:"bg-green-100",text:"text-green-800",icon:"✅"},cancelado:{bg:"bg-red-100",text:"text-red-800",icon:"❌"}}[F]||{bg:"bg-gray-100",text:"text-gray-800",icon:"❓"};return n.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${C.bg} ${C.text}`,children:[C.icon," ",(F==null?void 0:F.charAt(0).toUpperCase())+(F==null?void 0:F.slice(1))]})},V=F=>F?new Date(F).toLocaleDateString("es-ES",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"-",z=F=>F||"-";return c?n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6 animate-pulse"}),n.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[n.jsx("div",{className:"h-10 w-40 bg-gray-300 rounded animate-pulse"}),n.jsx("div",{className:"h-10 w-40 bg-gray-300 rounded animate-pulse"}),n.jsx("div",{className:"h-10 w-40 bg-gray-300 rounded animate-pulse"})]}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"bg-gray-100 h-12"}),[...Array(5)].map((F,P)=>n.jsx("div",{className:"border-t border-gray-200 h-16 bg-gray-50"},P))]})})]}):n.jsxs("div",{className:"p-6",children:[m!=null&&m.clinicId?n.jsx("div",{className:"mb-6 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(qe,{className:"w-5 h-5 text-green-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-green-800",children:"Vista Multi-Tenant Activa"}),n.jsxs("p",{className:"text-sm text-green-700",children:["Mostrando solo citas de tu clínica:"," ",n.jsx("span",{className:"font-semibold",children:m.clinicName||m.clinicId})]})]})]})}):n.jsx("div",{className:"mb-6 bg-gradient-to-r from-orange-50 to-red-50 border border-orange-200 rounded-xl p-4",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(Tt,{className:"w-5 h-5 text-orange-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-orange-800",children:"Usuario Legacy"}),n.jsx("p",{className:"text-sm text-orange-700",children:"Acceso completo a todas las citas del sistema"})]})]})}),n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(lt,{className:"h-8 w-8 text-blue-600"}),m!=null&&m.clinicId?"Citas de tu Clínica":"Listado de Citas"]}),n.jsxs("button",{onClick:_,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2",children:[n.jsx(Ta,{className:"h-4 w-4"}),"Registrar Cita"]})]}),n.jsxs("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Cc,{className:"h-5 w-5 text-gray-600"}),n.jsx("h3",{className:"font-semibold text-gray-800",children:"Filtros"})]}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),n.jsx("input",{type:"date",name:"fecha",value:a.fecha,onChange:y,className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"DNI Paciente"}),n.jsx("input",{type:"text",name:"dni",value:a.dni,onChange:y,placeholder:"Buscar por DNI",className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),n.jsxs("select",{name:"estado",value:a.estado,onChange:y,className:"border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",children:[n.jsx("option",{value:"",children:"Todos"}),n.jsx("option",{value:"pendiente",children:"Pendiente"}),n.jsx("option",{value:"atendido",children:"Atendido"}),n.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),(a.fecha||a.dni||a.estado)&&n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:N,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition text-sm",children:"Limpiar filtros"})})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"min-w-full",children:[n.jsx("thead",{className:"bg-gray-100 text-gray-700",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"DNI"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Paciente"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Especialidad"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Doctor"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Fecha"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Hora"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Estado"}),!(m!=null&&m.clinicId)&&n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Clínica"}),n.jsx("th",{className:"px-4 py-3 text-left font-semibold",children:"Acciones"})]})}),n.jsx("tbody",{className:"text-gray-800",children:s.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:m!=null&&m.clinicId?"8":"9",className:"text-center py-8 text-gray-500",children:n.jsxs("div",{className:"flex flex-col items-center gap-2",children:[n.jsx(vn,{className:"h-12 w-12 text-gray-300"}),n.jsx("p",{className:"text-lg font-medium",children:"No se encontraron citas"}),n.jsx("p",{className:"text-sm",children:t.length===0?m!=null&&m.clinicId?"No hay citas registradas en tu clínica":"No hay citas registradas":"Intenta ajustar los filtros"})]})})}):s.map(F=>n.jsxs("tr",{className:"border-t border-gray-200 hover:bg-gray-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3 font-medium",children:F.dni}),n.jsx("td",{className:"px-4 py-3",children:F.paciente||"-"}),n.jsx("td",{className:"px-4 py-3",children:F.especialidad||"-"}),n.jsx("td",{className:"px-4 py-3",children:F.doctor||"-"}),n.jsx("td",{className:"px-4 py-3",children:V(F.fecha)}),n.jsx("td",{className:"px-4 py-3",children:z(F.hora)}),n.jsx("td",{className:"px-4 py-3",children:I(F.estado)}),!(m!=null&&m.clinicId)&&n.jsx("td",{className:"px-4 py-3",children:F.clinicId?n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[n.jsx(yn,{className:"w-3 h-3 mr-1"}),F.clinicName||F.clinicId]}):n.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:[n.jsx(Tt,{className:"w-3 h-3 mr-1"}),"Legacy"]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>E(F.id),className:"text-blue-600 hover:text-blue-800 p-1 transition",title:"Editar cita",children:n.jsx(Hn,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>w(F.id,F.paciente),className:"text-red-600 hover:text-red-800 p-1 transition",title:"Eliminar cita",children:n.jsx(Ra,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>R(F),className:"text-green-600 hover:text-green-800 p-1 transition",title:"Enviar recordatorio",children:n.jsx(QF,{className:"h-4 w-4"})})]})})]},F.id))})]})})}),t.length>0&&n.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(lt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:m!=null&&m.clinicId?"Citas de tu Clínica":"Total Citas"}),n.jsx("p",{className:"text-2xl font-bold text-blue-600",children:t.length})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg",children:n.jsx("span",{className:"text-2xl",children:"⏳"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pendientes"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:t.filter(F=>F.estado==="pendiente").length})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx("span",{className:"text-2xl",children:"✅"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Atendidas"}),n.jsx("p",{className:"text-2xl font-bold text-green-600",children:t.filter(F=>F.estado==="atendido").length})]})]})}),n.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:n.jsx("span",{className:"text-2xl",children:"❌"})}),n.jsxs("div",{className:"ml-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Canceladas"}),n.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.filter(F=>F.estado==="cancelado").length})]})]})})]})]})}function Dx(){const[t,e]=S.useState({pacienteId:"",especialidadId:"",doctorId:"",fecha:"",hora:""}),[s,r]=S.useState([]),[a,o]=S.useState([]),[c,u]=S.useState([]),[m,f]=S.useState(!1),[x,v]=S.useState(!0),y=Je();S.useEffect(()=>{N()},[]);const N=async()=>{try{v(!0),await Promise.all([w(),E()])}catch(P){console.error("Error al cargar datos iniciales:",P),W.error("Error al cargar los datos")}finally{v(!1)}},w=async()=>{try{const C=(await Ce(be(ne,"pacientes"))).docs.map(D=>({id:D.id,...D.data()}));r(C)}catch(P){console.error("Error al cargar pacientes:",P),W.error("Error al cargar pacientes")}},E=async()=>{try{const C=(await Ce(be(ne,"especialidades"))).docs.map(D=>({id:D.id,...D.data()}));o(C)}catch(P){console.error("Error al cargar especialidades:",P),W.error("Error al cargar especialidades")}},_=async P=>{try{const C=a.find(q=>q.id===P),D=(C==null?void 0:C.nombres)||"",k=await Ce(be(ne,"doctores")),O=[];k.forEach(q=>{var L;const M=q.data();((L=M==null?void 0:M.especialidades)==null?void 0:L.nombres)===D&&O.push({id:q.id,...M})}),u(O)}catch(C){console.error("Error al cargar doctores:",C),W.error("Error al cargar doctores")}},R=P=>{const{name:C,value:D}=P.target;e(k=>({...k,[C]:D})),C==="especialidadId"&&D&&(_(D),e(k=>({...k,doctorId:""})))},I=()=>{const{pacienteId:P,especialidadId:C,doctorId:D,fecha:k,hora:O}=t;if(!P||!C||!D||!k||!O)return W.error("⚠️ Completa todos los campos"),!1;if(new Date(`${k} ${O}`)<new Date)return W.error("⚠️ No se puede registrar una cita en el pasado"),!1;const[L]=O.split(":").map(Number);return L<7||L>=22?(W.error("⚠️ La hora está fuera del horario (07:00 a 22:00)"),!1):!0},V=async()=>{try{const P=Oe(be(ne,"citas"),Re("doctorId","==",t.doctorId),Re("fecha","==",t.fecha),Re("hora","==",t.hora));return!(await Ce(P)).empty}catch(P){return console.error("Error al verificar conflictos:",P),!1}},z=async P=>{if(P.preventDefault(),!!I()){f(!0);try{if(await V()){W.error("⚠️ El doctor ya tiene una cita en ese horario"),f(!1);return}const D=s.find(M=>M.id===t.pacienteId),k=a.find(M=>M.id===t.especialidadId),O=c.find(M=>M.id===t.doctorId),q={pacienteId:t.pacienteId,especialidadId:t.especialidadId,doctorId:t.doctorId,fecha:t.fecha,hora:t.hora,estado:"pendiente",paciente:`${D.nombres} ${D.apellidos}`,especialidad:k.nombres,doctor:O.nombres,creado:new Date};await Gl(be(ne,"citas"),q),await Gl(be(ne,"horarios"),{...q,tipo:"cita"}),W.success("✅ Cita registrada correctamente"),setTimeout(()=>{y("/recepcion/citas")},1500)}catch(C){console.error("❌ Error al registrar cita:",C),W.error("❌ No se pudo guardar la cita")}finally{f(!1)}}},F=()=>{y("/recepcion/citas")};return x?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-6 w-2/3"})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(3)].map((P,C)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(3)].map((D,k)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-100 rounded"})]},k))})]},C))})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(lt,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Nueva Cita Médica"}),n.jsx("p",{className:"text-gray-600",children:"Registra una nueva cita para un paciente"})]})]}),n.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[n.jsx("span",{children:"Recepción"}),n.jsx("span",{children:"/"}),n.jsx("span",{children:"Citas"}),n.jsx("span",{children:"/"}),n.jsx("span",{className:"text-blue-600 font-medium",children:"Nueva Cita"})]})]}),n.jsxs("form",{onSubmit:z,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(He,{className:"h-5 w-5 text-green-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Información del Paciente"})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(Lt,{className:"h-4 w-4 inline mr-1"}),"Seleccionar Paciente"]}),n.jsxs("select",{name:"pacienteId",value:t.pacienteId,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[n.jsx("option",{value:"",children:"Buscar y seleccionar paciente..."}),s.map(P=>n.jsxs("option",{value:P.id,children:[P.nombres," ",P.apellidos," - DNI: ",P.dni]},P.id))]}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"💡 Busca por nombre o DNI del paciente"})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(ot,{className:"h-5 w-5 text-purple-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Información Médica"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especialidad Médica"}),n.jsxs("select",{name:"especialidadId",value:t.especialidadId,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar especialidad..."}),a.map(P=>n.jsx("option",{value:P.id,children:P.nombres},P.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Asignado"}),n.jsxs("select",{name:"doctorId",value:t.doctorId,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",required:!0,disabled:!t.especialidadId,children:[n.jsx("option",{value:"",children:t.especialidadId?"Seleccionar doctor...":"Primero selecciona una especialidad"}),c.map(P=>n.jsxs("option",{value:P.id,children:["Dr. ",P.nombres," ",P.apellidos||""]},P.id))]}),!t.especialidadId&&n.jsxs("p",{className:"text-xs text-amber-600 mt-1 flex items-center gap-1",children:[n.jsx(Kl,{className:"h-3 w-3"}),"Selecciona una especialidad para ver los doctores disponibles"]})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(ms,{className:"h-5 w-5 text-orange-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Programación de la Cita"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(lt,{className:"h-4 w-4 inline mr-1"}),"Fecha de la Cita"]}),n.jsx("input",{type:"date",name:"fecha",value:t.fecha,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",min:new Date().toISOString().split("T")[0],required:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"📅 No se pueden programar citas en fechas pasadas"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ms,{className:"h-4 w-4 inline mr-1"}),"Hora de la Cita"]}),n.jsx("input",{type:"time",name:"hora",value:t.hora,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",min:"07:00",max:"21:59",required:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"🕐 Horario de atención: 07:00 a 22:00"})]})]}),n.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(_t,{className:"h-5 w-5 text-blue-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"Información Importante"}),n.jsxs("ul",{className:"text-xs text-blue-700 mt-1 space-y-1",children:[n.jsx("li",{children:"• La cita se registrará automáticamente en el sistema"}),n.jsx("li",{children:"• Se verificará la disponibilidad del doctor antes de confirmar"}),n.jsx("li",{children:"• El paciente recibirá una notificación de confirmación"})]})]})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("button",{type:"button",onClick:F,className:"w-full sm:w-auto bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-2 font-medium",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:m,className:"w-full sm:w-auto bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(fs,{className:"h-4 w-4"}),m?"Guardando...":"Registrar Cita"]})]})})]})]})})}function Ix(){const[t,e]=S.useState({pacienteId:"",especialidadId:"",doctorId:"",fecha:"",hora:"",estado:"pendiente"}),[s,r]=S.useState(null),[a,o]=S.useState([]),[c,u]=S.useState([]),[m,f]=S.useState(!1),[x,v]=S.useState(!0),y=Je(),{id:N}=En();S.useEffect(()=>{w()},[N]);const w=async()=>{try{v(!0);const C=we(ne,"citas",N),D=await Ke(C);if(!D.exists()){W.error("❌ No se pudo cargar la cita"),y("/recepcion/citas");return}const k=D.data();if(k.pacienteId){const O=we(ne,"pacientes",k.pacienteId),q=await Ke(O);q.exists()&&r(q.data())}await E(),e({pacienteId:k.pacienteId||"",especialidadId:k.especialidadId||"",doctorId:k.doctorId||"",fecha:k.fecha||"",hora:k.hora||"",estado:k.estado||"pendiente"}),k.especialidadId&&await _(k.especialidadId,k.doctorId)}catch(C){console.error("❌ Error al cargar datos de la cita:",C),W.error("❌ Error al cargar los datos"),y("/recepcion/citas")}finally{v(!1)}},E=async()=>{try{const D=(await Ce(be(ne,"especialidades"))).docs.map(k=>({id:k.id,...k.data()}));o(D)}catch(C){console.error("Error al cargar especialidades:",C),W.error("Error al cargar especialidades")}},_=async(C,D=null)=>{try{const k=a.find(L=>L.id===C),O=(k==null?void 0:k.nombres)||"",q=await Ce(be(ne,"doctores")),M=[];q.forEach(L=>{var ve;const oe=L.data();((ve=oe==null?void 0:oe.especialidades)==null?void 0:ve.nombres)===O&&M.push({id:L.id,...oe})}),u(M)}catch(k){console.error("Error al cargar doctores:",k),W.error("Error al cargar doctores")}},R=C=>{const{name:D,value:k}=C.target;e(O=>({...O,[D]:k})),D==="especialidadId"&&k&&(_(k),e(O=>({...O,doctorId:""})))},I=()=>{const{especialidadId:C,doctorId:D,fecha:k,hora:O}=t;return!C||!D||!k||!O?(W.error("❌ Completa todos los campos"),!1):!0},V=async()=>{try{const C=Oe(be(ne,"citas"),Re("doctorId","==",t.doctorId),Re("fecha","==",t.fecha),Re("hora","==",t.hora)),D=await Ce(C);let k=!1;return D.forEach(O=>{O.id!==N&&(k=!0)}),k}catch(C){return console.error("Error al verificar conflictos:",C),!1}},z=async C=>{if(C.preventDefault(),!!I()){f(!0);try{if(await V()){W.error("❌ El doctor ya tiene una cita en ese horario"),f(!1);return}const k=a.find(M=>M.id===t.especialidadId),O=c.find(M=>M.id===t.doctorId),q=we(ne,"citas",N);await hs(q,{especialidadId:t.especialidadId,doctorId:t.doctorId,fecha:t.fecha,hora:t.hora,estado:t.estado,especialidad:k.nombres,doctor:O.nombres,actualizado:new Date}),W.success("✅ Cita actualizada correctamente"),setTimeout(()=>{y("/recepcion/citas")},1500)}catch(D){console.error("❌ Error al actualizar cita:",D),W.error("❌ No se pudo actualizar la cita")}finally{f(!1)}}},F=()=>{y("/recepcion/citas")},P=C=>{const D={pendiente:"bg-yellow-100 text-yellow-800 border-yellow-200",atendido:"bg-green-100 text-green-800 border-green-200",cancelado:"bg-red-100 text-red-800 border-red-200"};return D[C]||D.pendiente};return x?n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsx("div",{className:"max-w-4xl mx-auto",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-4"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-6 w-2/3"})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[...Array(3)].map((C,D)=>n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsx("div",{className:"h-6 bg-gray-300 rounded mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(3)].map((k,O)=>n.jsxs("div",{children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-10 bg-gray-100 rounded"})]},O))})]},D))})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:n.jsxs("div",{className:"max-w-4xl mx-auto",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(KF,{className:"h-6 w-6 text-blue-600"})}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Editar Cita Médica"}),n.jsx("p",{className:"text-gray-600",children:"Modifica los detalles de la cita programada"})]})]}),n.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[n.jsx("span",{children:"Recepción"}),n.jsx("span",{children:"/"}),n.jsx("span",{children:"Citas"}),n.jsx("span",{children:"/"}),n.jsx("span",{className:"text-blue-600 font-medium",children:"Editar Cita"})]})]}),n.jsxs("form",{onSubmit:z,className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:n.jsx(He,{className:"h-5 w-5 text-green-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Información del Paciente"}),n.jsx("div",{className:"ml-auto",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:[n.jsx(qe,{className:"h-3 w-3"}),"Solo lectura"]})})]}),n.jsx("div",{className:"space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paciente Asignado"}),n.jsx("div",{className:"w-full border border-gray-200 rounded-lg px-4 py-3 bg-gray-50 text-gray-700",children:s?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(He,{className:"h-4 w-4 text-gray-500"}),n.jsxs("span",{className:"font-medium",children:[s.nombres," ",s.apellidos]}),n.jsxs("span",{className:"text-gray-500",children:["- DNI: ",s.dni]})]}):"Cargando información del paciente..."}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"🔒 La información del paciente no puede ser modificada"})]})})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:n.jsx(_t,{className:"h-5 w-5 text-indigo-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Estado de la Cita"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado Actual"}),n.jsxs("select",{name:"estado",value:t.estado,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[n.jsx("option",{value:"pendiente",children:"🟡 Pendiente"}),n.jsx("option",{value:"atendido",children:"🟢 Atendido"}),n.jsx("option",{value:"cancelado",children:"🔴 Cancelado"})]})]}),n.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Vista previa del estado:"}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${P(t.estado)}`,children:t.estado.charAt(0).toUpperCase()+t.estado.slice(1)})]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:n.jsx(ot,{className:"h-5 w-5 text-purple-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Información Médica"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Especialidad Médica"}),n.jsxs("select",{name:"especialidadId",value:t.especialidadId,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0,children:[n.jsx("option",{value:"",children:"Seleccionar especialidad..."}),a.map(C=>n.jsx("option",{value:C.id,children:C.nombres},C.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Doctor Asignado"}),n.jsxs("select",{name:"doctorId",value:t.doctorId,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors disabled:bg-gray-100 disabled:cursor-not-allowed",required:!0,disabled:!t.especialidadId,children:[n.jsx("option",{value:"",children:t.especialidadId?"Seleccionar doctor...":"Primero selecciona una especialidad"}),c.map(C=>n.jsxs("option",{value:C.id,children:["Dr. ",C.nombres," ",C.apellidos||""]},C.id))]}),!t.especialidadId&&n.jsxs("p",{className:"text-xs text-amber-600 mt-1 flex items-center gap-1",children:[n.jsx(Kl,{className:"h-3 w-3"}),"Selecciona una especialidad para ver los doctores disponibles"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:n.jsx(ms,{className:"h-5 w-5 text-orange-600"})}),n.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Reprogramar Cita"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(lt,{className:"h-4 w-4 inline mr-1"}),"Nueva Fecha"]}),n.jsx("input",{type:"date",name:"fecha",value:t.fecha,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"📅 Puedes cambiar la fecha de la cita"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[n.jsx(ms,{className:"h-4 w-4 inline mr-1"}),"Nueva Hora"]}),n.jsx("input",{type:"time",name:"hora",value:t.hora,onChange:R,className:"w-full border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",required:!0}),n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"🕐 Horario de atención: 07:00 a 22:00"})]})]}),n.jsx("div",{className:"mt-6 p-4 bg-amber-50 rounded-lg border border-amber-200",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(Kl,{className:"h-5 w-5 text-amber-600 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-medium text-amber-900",children:"Importante"}),n.jsxs("ul",{className:"text-xs text-amber-700 mt-1 space-y-1",children:[n.jsx("li",{children:"• Se verificará la disponibilidad del doctor en el nuevo horario"}),n.jsx("li",{children:"• Los cambios se reflejarán inmediatamente en el sistema"}),n.jsx("li",{children:"• El paciente será notificado de cualquier cambio"})]})]})]})})]}),n.jsx("div",{className:"bg-white rounded-xl shadow-sm p-6",children:n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsxs("button",{type:"button",onClick:F,className:"w-full sm:w-auto bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors flex items-center justify-center gap-2 font-medium",children:[n.jsx($t,{className:"h-4 w-4"}),"Cancelar"]}),n.jsxs("button",{type:"submit",disabled:m,className:"w-full sm:w-auto bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(fs,{className:"h-4 w-4"}),m?"Guardando...":"Guardar Cambios"]})]})})]})]})})}var Gg,Ie,UT,FT,Dc,Dl,BE,BT,HT,Gf={},zT=[],VB=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function bi(t,e){for(var s in e)t[s]=e[s];return t}function qT(t){var e=t.parentNode;e&&e.removeChild(t)}function G(t,e,s){var r,a,o,c={};for(o in e)o=="key"?r=e[o]:o=="ref"?a=e[o]:c[o]=e[o];if(arguments.length>2&&(c.children=arguments.length>3?Gg.call(arguments,2):s),typeof t=="function"&&t.defaultProps!=null)for(o in t.defaultProps)c[o]===void 0&&(c[o]=t.defaultProps[o]);return ff(t,c,r,a,null)}function ff(t,e,s,r,a){var o={type:t,props:e,key:s,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:a??++UT};return a==null&&Ie.vnode!=null&&Ie.vnode(o),o}function Qs(){return{current:null}}function At(t){return t.children}function UB(t,e,s,r,a){var o;for(o in s)o==="children"||o==="key"||o in e||Wf(t,o,null,s[o],r);for(o in e)a&&typeof e[o]!="function"||o==="children"||o==="key"||o==="value"||o==="checked"||s[o]===e[o]||Wf(t,o,e[o],s[o],r)}function HE(t,e,s){e[0]==="-"?t.setProperty(e,s??""):t[e]=s==null?"":typeof s!="number"||VB.test(e)?s:s+"px"}function Wf(t,e,s,r,a){var o;e:if(e==="style")if(typeof s=="string")t.style.cssText=s;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)s&&e in s||HE(t.style,e,"");if(s)for(e in s)r&&s[e]===r[e]||HE(t.style,e,s[e])}else if(e[0]==="o"&&e[1]==="n")o=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+o]=s,s?r||t.addEventListener(e,o?qE:zE,o):t.removeEventListener(e,o?qE:zE,o);else if(e!=="dangerouslySetInnerHTML"){if(a)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=s??"";break e}catch{}typeof s=="function"||(s==null||s===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,s))}}function zE(t){Dc=!0;try{return this.l[t.type+!1](Ie.event?Ie.event(t):t)}finally{Dc=!1}}function qE(t){Dc=!0;try{return this.l[t.type+!0](Ie.event?Ie.event(t):t)}finally{Dc=!1}}function wn(t,e){this.props=t,this.context=e}function Vu(t,e){if(e==null)return t.__?Vu(t.__,t.__.__k.indexOf(t)+1):null;for(var s;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null)return s.__e;return typeof t.type=="function"?Vu(t):null}function $T(t){var e,s;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((s=t.__k[e])!=null&&s.__e!=null){t.__e=t.__c.base=s.__e;break}return $T(t)}}function FB(t){Dc?setTimeout(t):BT(t)}function Ub(t){(!t.__d&&(t.__d=!0)&&Dl.push(t)&&!Qf.__r++||BE!==Ie.debounceRendering)&&((BE=Ie.debounceRendering)||FB)(Qf)}function Qf(){var t,e,s,r,a,o,c,u;for(Dl.sort(function(m,f){return m.__v.__b-f.__v.__b});t=Dl.shift();)t.__d&&(e=Dl.length,r=void 0,a=void 0,c=(o=(s=t).__v).__e,(u=s.__P)&&(r=[],(a=bi({},o)).__v=o.__v+1,yv(u,o,a,s.__n,u.ownerSVGElement!==void 0,o.__h!=null?[c]:null,r,c??Vu(o),o.__h),KT(r,o),o.__e!=c&&$T(o)),Dl.length>e&&Dl.sort(function(m,f){return m.__v.__b-f.__v.__b}));Qf.__r=0}function GT(t,e,s,r,a,o,c,u,m,f){var x,v,y,N,w,E,_,R=r&&r.__k||zT,I=R.length;for(s.__k=[],x=0;x<e.length;x++)if((N=s.__k[x]=(N=e[x])==null||typeof N=="boolean"?null:typeof N=="string"||typeof N=="number"||typeof N=="bigint"?ff(null,N,null,null,N):Array.isArray(N)?ff(At,{children:N},null,null,null):N.__b>0?ff(N.type,N.props,N.key,N.ref?N.ref:null,N.__v):N)!=null){if(N.__=s,N.__b=s.__b+1,(y=R[x])===null||y&&N.key==y.key&&N.type===y.type)R[x]=void 0;else for(v=0;v<I;v++){if((y=R[v])&&N.key==y.key&&N.type===y.type){R[v]=void 0;break}y=null}yv(t,N,y=y||Gf,a,o,c,u,m,f),w=N.__e,(v=N.ref)&&y.ref!=v&&(_||(_=[]),y.ref&&_.push(y.ref,null,N),_.push(v,N.__c||w,N)),w!=null?(E==null&&(E=w),typeof N.type=="function"&&N.__k===y.__k?N.__d=m=WT(N,m,t):m=QT(t,N,y,R,w,m),typeof s.type=="function"&&(s.__d=m)):m&&y.__e==m&&m.parentNode!=t&&(m=Vu(y))}for(s.__e=E,x=I;x--;)R[x]!=null&&(typeof s.type=="function"&&R[x].__e!=null&&R[x].__e==s.__d&&(s.__d=YT(r).nextSibling),ZT(R[x],R[x]));if(_)for(x=0;x<_.length;x++)XT(_[x],_[++x],_[++x])}function WT(t,e,s){for(var r,a=t.__k,o=0;a&&o<a.length;o++)(r=a[o])&&(r.__=t,e=typeof r.type=="function"?WT(r,e,s):QT(s,r,r,a,r.__e,e));return e}function Yf(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(s){Yf(s,e)}):e.push(t)),e}function QT(t,e,s,r,a,o){var c,u,m;if(e.__d!==void 0)c=e.__d,e.__d=void 0;else if(s==null||a!=o||a.parentNode==null)e:if(o==null||o.parentNode!==t)t.appendChild(a),c=null;else{for(u=o,m=0;(u=u.nextSibling)&&m<r.length;m+=1)if(u==a)break e;t.insertBefore(a,o),c=o}return c!==void 0?c:a.nextSibling}function YT(t){var e,s,r;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((s=t.__k[e])&&(r=YT(s)))return r}return null}function yv(t,e,s,r,a,o,c,u,m){var f,x,v,y,N,w,E,_,R,I,V,z,F,P,C,D=e.type;if(e.constructor!==void 0)return null;s.__h!=null&&(m=s.__h,u=e.__e=s.__e,e.__h=null,o=[u]),(f=Ie.__b)&&f(e);try{e:if(typeof D=="function"){if(_=e.props,R=(f=D.contextType)&&r[f.__c],I=f?R?R.props.value:f.__:r,s.__c?E=(x=e.__c=s.__c).__=x.__E:("prototype"in D&&D.prototype.render?e.__c=x=new D(_,I):(e.__c=x=new wn(_,I),x.constructor=D,x.render=HB),R&&R.sub(x),x.props=_,x.state||(x.state={}),x.context=I,x.__n=r,v=x.__d=!0,x.__h=[],x._sb=[]),x.__s==null&&(x.__s=x.state),D.getDerivedStateFromProps!=null&&(x.__s==x.state&&(x.__s=bi({},x.__s)),bi(x.__s,D.getDerivedStateFromProps(_,x.__s))),y=x.props,N=x.state,x.__v=e,v)D.getDerivedStateFromProps==null&&x.componentWillMount!=null&&x.componentWillMount(),x.componentDidMount!=null&&x.__h.push(x.componentDidMount);else{if(D.getDerivedStateFromProps==null&&_!==y&&x.componentWillReceiveProps!=null&&x.componentWillReceiveProps(_,I),!x.__e&&x.shouldComponentUpdate!=null&&x.shouldComponentUpdate(_,x.__s,I)===!1||e.__v===s.__v){for(e.__v!==s.__v&&(x.props=_,x.state=x.__s,x.__d=!1),e.__e=s.__e,e.__k=s.__k,e.__k.forEach(function(k){k&&(k.__=e)}),V=0;V<x._sb.length;V++)x.__h.push(x._sb[V]);x._sb=[],x.__h.length&&c.push(x);break e}x.componentWillUpdate!=null&&x.componentWillUpdate(_,x.__s,I),x.componentDidUpdate!=null&&x.__h.push(function(){x.componentDidUpdate(y,N,w)})}if(x.context=I,x.props=_,x.__P=t,z=Ie.__r,F=0,"prototype"in D&&D.prototype.render){for(x.state=x.__s,x.__d=!1,z&&z(e),f=x.render(x.props,x.state,x.context),P=0;P<x._sb.length;P++)x.__h.push(x._sb[P]);x._sb=[]}else do x.__d=!1,z&&z(e),f=x.render(x.props,x.state,x.context),x.state=x.__s;while(x.__d&&++F<25);x.state=x.__s,x.getChildContext!=null&&(r=bi(bi({},r),x.getChildContext())),v||x.getSnapshotBeforeUpdate==null||(w=x.getSnapshotBeforeUpdate(y,N)),C=f!=null&&f.type===At&&f.key==null?f.props.children:f,GT(t,Array.isArray(C)?C:[C],e,s,r,a,o,c,u,m),x.base=e.__e,e.__h=null,x.__h.length&&c.push(x),E&&(x.__E=x.__=null),x.__e=!1}else o==null&&e.__v===s.__v?(e.__k=s.__k,e.__e=s.__e):e.__e=BB(s.__e,e,s,r,a,o,c,m);(f=Ie.diffed)&&f(e)}catch(k){e.__v=null,(m||o!=null)&&(e.__e=u,e.__h=!!m,o[o.indexOf(u)]=null),Ie.__e(k,e,s)}}function KT(t,e){Ie.__c&&Ie.__c(e,t),t.some(function(s){try{t=s.__h,s.__h=[],t.some(function(r){r.call(s)})}catch(r){Ie.__e(r,s.__v)}})}function BB(t,e,s,r,a,o,c,u){var m,f,x,v=s.props,y=e.props,N=e.type,w=0;if(N==="svg"&&(a=!0),o!=null){for(;w<o.length;w++)if((m=o[w])&&"setAttribute"in m==!!N&&(N?m.localName===N:m.nodeType===3)){t=m,o[w]=null;break}}if(t==null){if(N===null)return document.createTextNode(y);t=a?document.createElementNS("http://www.w3.org/2000/svg",N):document.createElement(N,y.is&&y),o=null,u=!1}if(N===null)v===y||u&&t.data===y||(t.data=y);else{if(o=o&&Gg.call(t.childNodes),f=(v=s.props||Gf).dangerouslySetInnerHTML,x=y.dangerouslySetInnerHTML,!u){if(o!=null)for(v={},w=0;w<t.attributes.length;w++)v[t.attributes[w].name]=t.attributes[w].value;(x||f)&&(x&&(f&&x.__html==f.__html||x.__html===t.innerHTML)||(t.innerHTML=x&&x.__html||""))}if(UB(t,y,v,a,u),x)e.__k=[];else if(w=e.props.children,GT(t,Array.isArray(w)?w:[w],e,s,r,a&&N!=="foreignObject",o,c,o?o[0]:s.__k&&Vu(s,0),u),o!=null)for(w=o.length;w--;)o[w]!=null&&qT(o[w]);u||("value"in y&&(w=y.value)!==void 0&&(w!==t.value||N==="progress"&&!w||N==="option"&&w!==v.value)&&Wf(t,"value",w,v.value,!1),"checked"in y&&(w=y.checked)!==void 0&&w!==t.checked&&Wf(t,"checked",w,v.checked,!1))}return t}function XT(t,e,s){try{typeof t=="function"?t(e):t.current=e}catch(r){Ie.__e(r,s)}}function ZT(t,e,s){var r,a;if(Ie.unmount&&Ie.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||XT(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(o){Ie.__e(o,e)}r.base=r.__P=null,t.__c=void 0}if(r=t.__k)for(a=0;a<r.length;a++)r[a]&&ZT(r[a],e,s||typeof t.type!="function");s||t.__e==null||qT(t.__e),t.__=t.__e=t.__d=void 0}function HB(t,e,s){return this.constructor(t,s)}function Uu(t,e,s){var r,a,o;Ie.__&&Ie.__(t,e),a=(r=!1)?null:e.__k,o=[],yv(e,t=e.__k=G(At,null,[t]),a||Gf,Gf,e.ownerSVGElement!==void 0,a?null:e.firstChild?Gg.call(e.childNodes):null,o,a?a.__e:e.firstChild,r),KT(o,t)}function zB(t,e){var s={__c:e="__cC"+HT++,__:t,Consumer:function(r,a){return r.children(a)},Provider:function(r){var a,o;return this.getChildContext||(a=[],(o={})[e]=this,this.getChildContext=function(){return o},this.shouldComponentUpdate=function(c){this.props.value!==c.value&&a.some(function(u){u.__e=!0,Ub(u)})},this.sub=function(c){a.push(c);var u=c.componentWillUnmount;c.componentWillUnmount=function(){a.splice(a.indexOf(c),1),u&&u.call(c)}}),r.children}};return s.Provider.__=s.Consumer.contextType=s}Gg=zT.slice,Ie={__e:function(t,e,s,r){for(var a,o,c;e=e.__;)if((a=e.__c)&&!a.__)try{if((o=a.constructor)&&o.getDerivedStateFromError!=null&&(a.setState(o.getDerivedStateFromError(t)),c=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,r||{}),c=a.__d),c)return a.__E=a}catch(u){t=u}throw t}},UT=0,FT=function(t){return t!=null&&t.constructor===void 0},Dc=!1,wn.prototype.setState=function(t,e){var s;s=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=bi({},this.state),typeof t=="function"&&(t=t(bi({},s),this.props)),t&&bi(s,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ub(this))},wn.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ub(this))},wn.prototype.render=At,Dl=[],BT=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Qf.__r=0,HT=0;var _r,kx,$E,JT=[],Mx=[],GE=Ie.__b,WE=Ie.__r,QE=Ie.diffed,YE=Ie.__c,KE=Ie.unmount;function qB(){for(var t;t=JT.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(gf),t.__H.__h.forEach(Fb),t.__H.__h=[]}catch(e){t.__H.__h=[],Ie.__e(e,t.__v)}}Ie.__b=function(t){_r=null,GE&&GE(t)},Ie.__r=function(t){WE&&WE(t);var e=(_r=t.__c).__H;e&&(kx===_r?(e.__h=[],_r.__h=[],e.__.forEach(function(s){s.__N&&(s.__=s.__N),s.__V=Mx,s.__N=s.i=void 0})):(e.__h.forEach(gf),e.__h.forEach(Fb),e.__h=[])),kx=_r},Ie.diffed=function(t){QE&&QE(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(JT.push(e)!==1&&$E===Ie.requestAnimationFrame||(($E=Ie.requestAnimationFrame)||$B)(qB)),e.__H.__.forEach(function(s){s.i&&(s.__H=s.i),s.__V!==Mx&&(s.__=s.__V),s.i=void 0,s.__V=Mx})),kx=_r=null},Ie.__c=function(t,e){e.some(function(s){try{s.__h.forEach(gf),s.__h=s.__h.filter(function(r){return!r.__||Fb(r)})}catch(r){e.some(function(a){a.__h&&(a.__h=[])}),e=[],Ie.__e(r,s.__v)}}),YE&&YE(t,e)},Ie.unmount=function(t){KE&&KE(t);var e,s=t.__c;s&&s.__H&&(s.__H.__.forEach(function(r){try{gf(r)}catch(a){e=a}}),s.__H=void 0,e&&Ie.__e(e,s.__v))};var XE=typeof requestAnimationFrame=="function";function $B(t){var e,s=function(){clearTimeout(r),XE&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(s,100);XE&&(e=requestAnimationFrame(s))}function gf(t){var e=_r,s=t.__c;typeof s=="function"&&(t.__c=void 0,s()),_r=e}function Fb(t){var e=_r;t.__c=t.__(),_r=e}function GB(t,e){for(var s in e)t[s]=e[s];return t}function ZE(t,e){for(var s in t)if(s!=="__source"&&!(s in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function JE(t){this.props=t}(JE.prototype=new wn).isPureReactComponent=!0,JE.prototype.shouldComponentUpdate=function(t,e){return ZE(this.props,t)||ZE(this.state,e)};var e_=Ie.__b;Ie.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),e_&&e_(t)};var WB=Ie.__e;Ie.__e=function(t,e,s,r){if(t.then){for(var a,o=e;o=o.__;)if((a=o.__c)&&a.__c)return e.__e==null&&(e.__e=s.__e,e.__k=s.__k),a.__c(t,e)}WB(t,e,s,r)};var t_=Ie.unmount;function e6(t,e,s){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=GB({},t)).__c!=null&&(t.__c.__P===s&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return e6(r,e,s)})),t}function t6(t,e,s){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return t6(r,e,s)}),t.__c&&t.__c.__P===e&&(t.__e&&s.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=s)),t}function Px(){this.__u=0,this.t=null,this.__b=null}function s6(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function qm(){this.u=null,this.o=null}Ie.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),t_&&t_(t)},(Px.prototype=new wn).__c=function(t,e){var s=e.__c,r=this;r.t==null&&(r.t=[]),r.t.push(s);var a=s6(r.__v),o=!1,c=function(){o||(o=!0,s.__R=null,a?a(u):u())};s.__R=c;var u=function(){if(!--r.__u){if(r.state.__a){var f=r.state.__a;r.__v.__k[0]=t6(f,f.__c.__P,f.__c.__O)}var x;for(r.setState({__a:r.__b=null});x=r.t.pop();)x.forceUpdate()}},m=e.__h===!0;r.__u++||m||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(c,c)},Px.prototype.componentWillUnmount=function(){this.t=[]},Px.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var s=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=e6(this.__b,s,r.__O=r.__P)}this.__b=null}var a=e.__a&&G(At,null,t.fallback);return a&&(a.__h=null),[G(At,null,e.__a?null:t.children),a]};var s_=function(t,e,s){if(++s[1]===s[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(s=t.u;s;){for(;s.length>3;)s.pop()();if(s[1]<s[0])break;t.u=s=s[2]}};function QB(t){return this.getChildContext=function(){return t.context},t.children}function YB(t){var e=this,s=t.i;e.componentWillUnmount=function(){Uu(null,e.l),e.l=null,e.i=null},e.i&&e.i!==s&&e.componentWillUnmount(),t.__v?(e.l||(e.i=s,e.l={nodeType:1,parentNode:s,childNodes:[],appendChild:function(r){this.childNodes.push(r),e.i.appendChild(r)},insertBefore:function(r,a){this.childNodes.push(r),e.i.appendChild(r)},removeChild:function(r){this.childNodes.splice(this.childNodes.indexOf(r)>>>1,1),e.i.removeChild(r)}}),Uu(G(QB,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function KB(t,e){var s=G(YB,{__v:t,i:e});return s.containerInfo=e,s}(qm.prototype=new wn).__a=function(t){var e=this,s=s6(e.__v),r=e.o.get(t);return r[0]++,function(a){var o=function(){e.props.revealOrder?(r.push(a),s_(e,t,r)):a()};s?s(o):o()}},qm.prototype.render=function(t){this.u=null,this.o=new Map;var e=Yf(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var s=e.length;s--;)this.o.set(e[s],this.u=[1,0,this.u]);return t.children},qm.prototype.componentDidUpdate=qm.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,s){s_(t,s,e)})};var XB=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ZB=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,JB=typeof document<"u",eH=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};wn.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(wn.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var n_=Ie.event;function tH(){}function sH(){return this.cancelBubble}function nH(){return this.defaultPrevented}Ie.event=function(t){return n_&&(t=n_(t)),t.persist=tH,t.isPropagationStopped=sH,t.isDefaultPrevented=nH,t.nativeEvent=t};var r_={configurable:!0,get:function(){return this.class}},a_=Ie.vnode;Ie.vnode=function(t){var e=t.type,s=t.props,r=s;if(typeof e=="string"){var a=e.indexOf("-")===-1;for(var o in r={},s){var c=s[o];JB&&o==="children"&&e==="noscript"||o==="value"&&"defaultValue"in s&&c==null||(o==="defaultValue"&&"value"in s&&s.value==null?o="value":o==="download"&&c===!0?c="":/ondoubleclick/i.test(o)?o="ondblclick":/^onchange(textarea|input)/i.test(o+e)&&!eH(s.type)?o="oninput":/^onfocus$/i.test(o)?o="onfocusin":/^onblur$/i.test(o)?o="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(o)?o=o.toLowerCase():a&&ZB.test(o)?o=o.replace(/[A-Z0-9]/g,"-$&").toLowerCase():c===null&&(c=void 0),/^oninput$/i.test(o)&&(o=o.toLowerCase(),r[o]&&(o="oninputCapture")),r[o]=c)}e=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=Yf(s.children).forEach(function(u){u.props.selected=r.value.indexOf(u.props.value)!=-1})),e=="select"&&r.defaultValue!=null&&(r.value=Yf(s.children).forEach(function(u){u.props.selected=r.multiple?r.defaultValue.indexOf(u.props.value)!=-1:r.defaultValue==u.props.value})),t.props=r,s.class!=s.className&&(r_.enumerable="className"in s,s.className!=null&&(r.class=s.className),Object.defineProperty(r,"className",r_))}t.$$typeof=XB,a_&&a_(t)};var i_=Ie.__r;Ie.__r=function(t){i_&&i_(t),t.__c};const n6=[],Bb=new Map;function vv(t){n6.push(t),Bb.forEach(e=>{a6(e,t)})}function rH(t){t.isConnected&&t.getRootNode&&r6(t.getRootNode())}function r6(t){let e=Bb.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const s=iH();s&&(e.nonce=s);const r=t===document?document.head:t,a=t===document?r.querySelector("script,link[rel=stylesheet],link[as=style],style"):r.firstChild;r.insertBefore(e,a)}Bb.set(t,e),aH(e)}}function aH(t){for(const e of n6)a6(t,e)}function a6(t,e){const{sheet:s}=t,r=s.cssRules.length;e.split("}").forEach((a,o)=>{a=a.trim(),a&&s.insertRule(a+"}",r+o)})}let Ox;function iH(){return Ox===void 0&&(Ox=lH()),Ox}function lH(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&r6(document);var oH=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';vv(oH);class Nv{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:s}=this;s[e]=(s[e]||0)+1,this.clearTimeout()}resume(e="",s){let{pauseDepths:r}=this;e in r&&(s?delete r[e]:(r[e]-=1,r[e]<=0&&delete r[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function wv(t){t.parentNode&&t.parentNode.removeChild(t)}function Vs(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(cH(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function cH(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function dH(t,e){let s=t instanceof HTMLElement?[t]:t,r=[];for(let a=0;a<s.length;a+=1){let o=s[a].querySelectorAll(e);for(let c=0;c<o.length;c+=1)r.push(o[c])}return r}const uH=/(top|left|right|bottom|width|height)$/i;function ju(t,e){for(let s in e)i6(t,s,e[s])}function i6(t,e,s){s==null?t.style[e]="":typeof s=="number"&&uH.test(e)?t.style[e]=`${s}px`:t.style[e]=s}function l6(t){var e,s;return(s=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&s!==void 0?s:t.target}let l_=0;function Wg(){return l_+=1,"fc-dom-"+l_}function Qg(t){t.preventDefault()}function hH(t,e){return s=>{let r=Vs(s.target,t);r&&e.call(r,s,r)}}function o6(t,e,s,r){let a=hH(s,r);return t.addEventListener(e,a),()=>{t.removeEventListener(e,a)}}function mH(t,e,s,r){let a;return o6(t,"mouseover",e,(o,c)=>{if(c!==a){a=c,s(o,c);let u=m=>{a=null,r(m,c),c.removeEventListener("mouseleave",u)};c.addEventListener("mouseleave",u)}})}const o_=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function fH(t,e){let s=r=>{e(r),o_.forEach(a=>{t.removeEventListener(a,s)})};o_.forEach(r=>{t.addEventListener(r,s)})}function c6(t){return Object.assign({onClick:t},d6(t))}function d6(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let c_=0;function oo(){return c_+=1,String(c_)}function jv(){document.body.classList.add("fc-not-allowed")}function Ev(){document.body.classList.remove("fc-not-allowed")}function gH(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Qg)}function pH(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Qg)}function xH(t){t.addEventListener("contextmenu",Qg)}function bH(t){t.removeEventListener("contextmenu",Qg)}function yH(t){let e=[],s=[],r,a;for(typeof t=="string"?s=t.split(/\s*,\s*/):typeof t=="function"?s=[t]:Array.isArray(t)&&(s=t),r=0;r<s.length;r+=1)a=s[r],typeof a=="string"?e.push(a.charAt(0)==="-"?{field:a.substring(1),order:-1}:{field:a,order:1}):typeof a=="function"&&e.push({func:a});return e}function vH(t,e,s){let r,a;for(r=0;r<s.length;r+=1)if(a=NH(t,e,s[r]),a)return a;return 0}function NH(t,e,s){return s.func?s.func(t,e):wH(t[s.field],e[s.field])*(s.order||1)}function wH(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function bc(t,e){let s=String(t);return"000".substr(0,e-s.length)+s}function Eu(t,e,s){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((r,a,o)=>r.replace("$"+o,a||""),t):s}function jH(t,e){return t-e}function pf(t){return t%1===0}function EH(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),s=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!s)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+s.getBoundingClientRect().width}const d_=["years","months","days","milliseconds"],_H=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function st(t,e){return typeof t=="string"?SH(t):typeof t=="object"&&t?u_(t):typeof t=="number"?u_({[e||"milliseconds"]:t}):null}function SH(t){let e=_H.exec(t);if(e){let s=e[1]?-1:1;return{years:0,months:0,days:s*(e[2]?parseInt(e[2],10):0),milliseconds:s*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function u_(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},s=t.weeks||t.week;return s&&(e.days+=s*7,e.specifiedWeeks=!0),e}function AH(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function Hb(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function CH(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function TH(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function RH(t){return yc(t)/365}function DH(t){return yc(t)/30}function yc(t){return er(t)/864e5}function er(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function _v(t,e){let s=null;for(let r=0;r<d_.length;r+=1){let a=d_[r];if(e[a]){let o=t[a]/e[a];if(!pf(o)||s!==null&&s!==o)return null;s=o}else if(t[a])return null}return s}function zb(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function Mi(t,e,s){if(t===e)return!0;let r=t.length,a;if(r!==e.length)return!1;for(a=0;a<r;a+=1)if(!(s?s(t[a],e[a]):t[a]===e[a]))return!1;return!0}const IH=["sun","mon","tue","wed","thu","fri","sat"];function h_(t,e){let s=yi(t);return s[2]+=e*7,nn(s)}function Fs(t,e){let s=yi(t);return s[2]+=e,nn(s)}function Pi(t,e){let s=yi(t);return s[6]+=e,nn(s)}function kH(t,e){return co(t,e)/7}function co(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function MH(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function PH(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function OH(t,e){return(e.valueOf()-t.valueOf())/1e3}function LH(t,e){let s=Ct(t),r=Ct(e);return{years:0,months:0,days:Math.round(co(s,r)),milliseconds:e.valueOf()-r.valueOf()-(t.valueOf()-s.valueOf())}}function VH(t,e){let s=Kf(t,e);return s!==null&&s%7===0?s/7:null}function Kf(t,e){return vi(t)===vi(e)?Math.round(co(t,e)):null}function Ct(t){return nn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function UH(t){return nn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function FH(t){return nn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function BH(t){return nn([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function HH(t,e,s){let r=t.getUTCFullYear(),a=Lx(t,r,e,s);if(a<1)return Lx(t,r-1,e,s);let o=Lx(t,r+1,e,s);return o>=1?Math.min(a,o):a}function Lx(t,e,s,r){let a=nn([e,0,1+zH(e,s,r)]),o=Ct(t),c=Math.round(co(a,o));return Math.floor(c/7)+1}function zH(t,e,s){let r=7+e-s;return-((7+nn([t,0,r]).getUTCDay()-e)%7)+r-1}function m_(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function f_(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function yi(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function nn(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function u6(t){return!isNaN(t.valueOf())}function vi(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function h6(t,e,s=!1){let r=t.toISOString();return r=r.replace(".000",""),s&&(r=r.replace("T00:00:00Z","")),r.length>10&&(e==null?r=r.replace("Z",""):e!==0&&(r=r.replace("Z",Av(e,!0)))),r}function Sv(t){return t.toISOString().replace(/T.*$/,"")}function qH(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function $H(t){return bc(t.getUTCHours(),2)+":"+bc(t.getUTCMinutes(),2)+":"+bc(t.getUTCSeconds(),2)}function Av(t,e=!1){let s=t<0?"-":"+",r=Math.abs(t),a=Math.floor(r/60),o=Math.round(r%60);return e?`${s+bc(a,2)}:${bc(o,2)}`:`GMT${s}${a}${o?`:${bc(o,2)}`:""}`}function Me(t,e,s){let r,a;return function(...o){if(!r)a=t.apply(this,o);else if(!Mi(r,o)){let c=t.apply(this,o);(!e||!e(c,a))&&(a=c)}return r=o,a}}function xf(t,e,s){let r,a;return o=>(r?ar(r,o)||(a=t.call(this,o)):a=t.call(this,o),r=o,a)}const Vx={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Xf={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},$m=/\s*([ap])\.?m\.?/i,GH=/,/g,WH=/\s+/g,QH=/\u200e/g,YH=/UTC|GMT/;class KH{constructor(e){let s={},r={},a=9;for(let o in e)o in Vx?(r[o]=e[o],Vx[o]<9&&(a=Math.min(Vx[o],a))):(s[o]=e[o],o in Xf&&(a=Math.min(Xf[o],a)));this.standardDateProps=s,this.extendedSettings=r,this.smallestUnitNum=a,this.buildFormattingFunc=Me(g_)}format(e,s){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,s)(e)}formatRange(e,s,r,a){let{standardDateProps:o,extendedSettings:c}=this,u=sz(e.marker,s.marker,r.calendarSystem);if(!u)return this.format(e,r);let m=u;m>1&&(o.year==="numeric"||o.year==="2-digit")&&(o.month==="numeric"||o.month==="2-digit")&&(o.day==="numeric"||o.day==="2-digit")&&(m=1);let f=this.format(e,r),x=this.format(s,r);if(f===x)return f;let v=nz(o,m),y=g_(v,c,r),N=y(e),w=y(s),E=rz(f,N,x,w),_=c.separator||a||r.defaultSeparator||"";return E?E.before+N+_+w+E.after:f+_+x}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function g_(t,e,s){let r=Object.keys(t).length;return r===1&&t.timeZoneName==="short"?a=>Av(a.timeZoneOffset):r===0&&e.week?a=>tz(s.computeWeekNumber(a.marker),s.weekText,s.weekTextLong,s.locale,e.week):XH(t,e,s)}function XH(t,e,s){t=Object.assign({},t),e=Object.assign({},e),ZH(t,e),t.timeZone="UTC";let r=new Intl.DateTimeFormat(s.locale.codes,t),a;if(e.omitZeroMinute){let o=Object.assign({},t);delete o.minute,a=new Intl.DateTimeFormat(s.locale.codes,o)}return o=>{let{marker:c}=o,u;a&&!c.getUTCMinutes()?u=a:u=r;let m=u.format(c);return JH(m,o,t,e,s)}}function ZH(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function JH(t,e,s,r,a){return t=t.replace(QH,""),s.timeZoneName==="short"&&(t=ez(t,a.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":Av(e.timeZoneOffset))),r.omitCommas&&(t=t.replace(GH,"").trim()),r.omitZeroMinute&&(t=t.replace(":00","")),r.meridiem===!1?t=t.replace($m,"").trim():r.meridiem==="narrow"?t=t.replace($m,(o,c)=>c.toLocaleLowerCase()):r.meridiem==="short"?t=t.replace($m,(o,c)=>`${c.toLocaleLowerCase()}m`):r.meridiem==="lowercase"&&(t=t.replace($m,o=>o.toLocaleLowerCase())),t=t.replace(WH," "),t=t.trim(),t}function ez(t,e){let s=!1;return t=t.replace(YH,()=>(s=!0,e)),s||(t+=` ${e}`),t}function tz(t,e,s,r,a){let o=[];return a==="long"?o.push(s):(a==="short"||a==="narrow")&&o.push(e),(a==="long"||a==="short")&&o.push(" "),o.push(r.simpleNumberFormat.format(t)),r.options.direction==="rtl"&&o.reverse(),o.join("")}function sz(t,e,s){return s.getMarkerYear(t)!==s.getMarkerYear(e)?5:s.getMarkerMonth(t)!==s.getMarkerMonth(e)?4:s.getMarkerDay(t)!==s.getMarkerDay(e)?2:vi(t)!==vi(e)?1:0}function nz(t,e){let s={};for(let r in t)(!(r in Xf)||Xf[r]<=e)&&(s[r]=t[r]);return s}function rz(t,e,s,r){let a=0;for(;a<t.length;){let o=t.indexOf(e,a);if(o===-1)break;let c=t.substr(0,o);a=o+e.length;let u=t.substr(a),m=0;for(;m<s.length;){let f=s.indexOf(r,m);if(f===-1)break;let x=s.substr(0,f);m=f+r.length;let v=s.substr(m);if(c===x&&u===v)return{before:c,after:u}}}return null}function p_(t,e){let s=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:s,year:s[0],month:s[1],day:s[2],hour:s[3],minute:s[4],second:s[5],millisecond:s[6]}}function Zf(t,e,s,r){let a=p_(t,s.calendarSystem),o=e?p_(e,s.calendarSystem):null;return{date:a,start:a,end:o,timeZone:s.timeZone,localeCodes:s.locale.codes,defaultSeparator:r||s.defaultSeparator}}class az{constructor(e){this.cmdStr=e}format(e,s,r){return s.cmdFormatter(this.cmdStr,Zf(e,null,s,r))}formatRange(e,s,r,a){return r.cmdFormatter(this.cmdStr,Zf(e,s,r,a))}}class iz{constructor(e){this.func=e}format(e,s,r){return this.func(Zf(e,null,s,r))}formatRange(e,s,r,a){return this.func(Zf(e,s,r,a))}}function Vt(t){return typeof t=="object"&&t?new KH(t):typeof t=="string"?new az(t):typeof t=="function"?new iz(t):null}const x_={navLinkDayClick:re,navLinkWeekClick:re,duration:st,bootstrapFontAwesome:re,buttonIcons:re,customButtons:re,defaultAllDayEventDuration:st,defaultTimedEventDuration:st,nextDayThreshold:st,scrollTime:st,scrollTimeReset:Boolean,slotMinTime:st,slotMaxTime:st,dayPopoverFormat:Vt,slotDuration:st,snapDuration:st,headerToolbar:re,footerToolbar:re,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:Vt,dayHeaderClassNames:re,dayHeaderContent:re,dayHeaderDidMount:re,dayHeaderWillUnmount:re,dayCellClassNames:re,dayCellContent:re,dayCellDidMount:re,dayCellWillUnmount:re,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:re,weekNumbers:Boolean,weekNumberClassNames:re,weekNumberContent:re,weekNumberDidMount:re,weekNumberWillUnmount:re,editable:Boolean,viewClassNames:re,viewDidMount:re,viewWillUnmount:re,nowIndicator:Boolean,nowIndicatorClassNames:re,nowIndicatorContent:re,nowIndicatorDidMount:re,nowIndicatorWillUnmount:re,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:re,locale:re,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:re,eventOrder:yH,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:re,contentHeight:re,direction:String,weekNumberFormat:Vt,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:re,initialDate:re,now:re,eventDataTransform:re,stickyHeaderDates:re,stickyFooterScrollbar:re,viewHeight:re,defaultAllDay:Boolean,eventSourceFailure:re,eventSourceSuccess:re,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:re,eventConstraint:re,eventAllow:re,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:re,eventContent:re,eventDidMount:re,eventWillUnmount:re,selectConstraint:re,selectOverlap:re,selectAllow:re,droppable:Boolean,unselectCancel:String,slotLabelFormat:re,slotLaneClassNames:re,slotLaneContent:re,slotLaneDidMount:re,slotLaneWillUnmount:re,slotLabelClassNames:re,slotLabelContent:re,slotLabelDidMount:re,slotLabelWillUnmount:re,dayMaxEvents:re,dayMaxEventRows:re,dayMinWidth:Number,slotLabelInterval:st,allDayText:String,allDayClassNames:re,allDayContent:re,allDayDidMount:re,allDayWillUnmount:re,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:Vt,rerenderDelay:Number,moreLinkText:re,moreLinkHint:re,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:re,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:st,hiddenDays:re,fixedWeekCount:Boolean,validRange:re,visibleRange:re,titleFormat:re,eventInteractive:Boolean,noEventsText:String,viewHint:re,navLinkHint:re,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:re,moreLinkClassNames:re,moreLinkContent:re,moreLinkDidMount:re,moreLinkWillUnmount:re,monthStartFormat:Vt,handleCustomRendering:re,customRenderingMetaMap:re,customRenderingReplaces:Boolean},_u={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:" – ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"}},b_={datesSet:re,eventsSet:re,eventAdd:re,eventChange:re,eventRemove:re,windowResize:re,eventClick:re,eventMouseEnter:re,eventMouseLeave:re,select:re,unselect:re,loading:re,_unmount:re,_beforeprint:re,_afterprint:re,_noEventDrop:re,_noEventResize:re,_resize:re,_scrollRequest:re},y_={buttonText:re,buttonHints:re,views:re,plugins:re,initialEvents:re,events:re,eventSources:re},Tl={headerToolbar:Rl,footerToolbar:Rl,buttonText:Rl,buttonHints:Rl,buttonIcons:Rl,dateIncrement:Rl,plugins:Gm,events:Gm,eventSources:Gm,resources:Gm};function Rl(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?ar(t,e):t===e}function Gm(t,e){return Array.isArray(t)&&Array.isArray(e)?Mi(t,e):t===e}const lz={type:String,component:re,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:re,usesMinMaxTime:Boolean,classNames:re,content:re,didMount:re,willUnmount:re};function Ux(t){return Tv(t,Tl)}function Cv(t,e){let s={},r={};for(let a in e)a in t&&(s[a]=e[a](t[a]));for(let a in t)a in e||(r[a]=t[a]);return{refined:s,extra:r}}function re(t){return t}const{hasOwnProperty:Jf}=Object.prototype;function Tv(t,e){let s={};if(e){for(let r in e)if(e[r]===Rl){let a=[];for(let o=t.length-1;o>=0;o-=1){let c=t[o][r];if(typeof c=="object"&&c)a.unshift(c);else if(c!==void 0){s[r]=c;break}}a.length&&(s[r]=Tv(a))}}for(let r=t.length-1;r>=0;r-=1){let a=t[r];for(let o in a)o in s||(s[o]=a[o])}return s}function Zl(t,e){let s={};for(let r in t)e(t[r],r)&&(s[r]=t[r]);return s}function Da(t,e){let s={};for(let r in t)s[r]=e(t[r],r);return s}function m6(t){let e={};for(let s of t)e[s]=!0;return e}function Rv(t){let e=[];for(let s in t)e.push(t[s]);return e}function ar(t,e){if(t===e)return!0;for(let s in t)if(Jf.call(t,s)&&!(s in e))return!1;for(let s in e)if(Jf.call(e,s)&&t[s]!==e[s])return!1;return!0}const oz=/^on[A-Z]/;function cz(t,e){const s=dz(t,e);for(let r of s)if(!oz.test(r))return!1;return!0}function dz(t,e){let s=[];for(let r in t)Jf.call(t,r)&&(r in e||s.push(r));for(let r in e)Jf.call(e,r)&&t[r]!==e[r]&&s.push(r);return s}function Fx(t,e,s={}){if(t===e)return!0;for(let r in e)if(!(r in t&&uz(t[r],e[r],s[r])))return!1;for(let r in t)if(!(r in e))return!1;return!0}function uz(t,e,s){return t===e||s===!0?!0:s?s(t,e):!1}function hz(t,e=0,s,r=1){let a=[];s==null&&(s=Object.keys(t).length);for(let o=e;o<s;o+=r){let c=t[o];c!==void 0&&a.push(c)}return a}let f6={};function mz(t,e){f6[t]=e}function fz(t){return new f6[t]}class gz{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return nn(e)}markerToArray(e){return yi(e)}}mz("gregory",gz);const pz=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function xz(t){let e=pz.exec(t);if(e){let s=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(u6(s)){let r=null;return e[13]&&(r=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:s,isTimeUnspecified:!e[6],timeZoneOffset:r}}}return null}class bz{constructor(e){let s=this.timeZone=e.timeZone,r=s!=="local"&&s!=="UTC";e.namedTimeZoneImpl&&r&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(s)),this.canComputeOffset=!!(!r||this.namedTimeZoneImpl),this.calendarSystem=fz(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let s=this.createMarkerMeta(e);return s===null?null:s.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):nn(m_(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let s=null;return typeof e=="number"?s=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(s=this.timestampToMarker(e))):Array.isArray(e)&&(s=nn(e)),s===null||!u6(s)?null:{marker:s,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let s=xz(e);if(s===null)return null;let{marker:r}=s,a=null;return s.timeZoneOffset!==null&&(this.canComputeOffset?r=this.timestampToMarker(r.valueOf()-s.timeZoneOffset*60*1e3):a=s.timeZoneOffset),{marker:r,isTimeUnspecified:s.isTimeUnspecified,forcedTzo:a}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,s){let r=this.calendarSystem.markerToArray(e);return r[0]+=s.years,r[1]+=s.months,r[2]+=s.days,r[6]+=s.milliseconds,this.calendarSystem.arrayToMarker(r)}subtract(e,s){let r=this.calendarSystem.markerToArray(e);return r[0]-=s.years,r[1]-=s.months,r[2]-=s.days,r[6]-=s.milliseconds,this.calendarSystem.arrayToMarker(r)}addYears(e,s){let r=this.calendarSystem.markerToArray(e);return r[0]+=s,this.calendarSystem.arrayToMarker(r)}addMonths(e,s){let r=this.calendarSystem.markerToArray(e);return r[1]+=s,this.calendarSystem.arrayToMarker(r)}diffWholeYears(e,s){let{calendarSystem:r}=this;return vi(e)===vi(s)&&r.getMarkerDay(e)===r.getMarkerDay(s)&&r.getMarkerMonth(e)===r.getMarkerMonth(s)?r.getMarkerYear(s)-r.getMarkerYear(e):null}diffWholeMonths(e,s){let{calendarSystem:r}=this;return vi(e)===vi(s)&&r.getMarkerDay(e)===r.getMarkerDay(s)?r.getMarkerMonth(s)-r.getMarkerMonth(e)+(r.getMarkerYear(s)-r.getMarkerYear(e))*12:null}greatestWholeUnit(e,s){let r=this.diffWholeYears(e,s);return r!==null?{unit:"year",value:r}:(r=this.diffWholeMonths(e,s),r!==null?{unit:"month",value:r}:(r=VH(e,s),r!==null?{unit:"week",value:r}:(r=Kf(e,s),r!==null?{unit:"day",value:r}:(r=MH(e,s),pf(r)?{unit:"hour",value:r}:(r=PH(e,s),pf(r)?{unit:"minute",value:r}:(r=OH(e,s),pf(r)?{unit:"second",value:r}:{unit:"millisecond",value:s.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,s,r){let a;return r.years&&(a=this.diffWholeYears(e,s),a!==null)?a/RH(r):r.months&&(a=this.diffWholeMonths(e,s),a!==null)?a/DH(r):r.days&&(a=Kf(e,s),a!==null)?a/yc(r):(s.valueOf()-e.valueOf())/er(r)}startOf(e,s){return s==="year"?this.startOfYear(e):s==="month"?this.startOfMonth(e):s==="week"?this.startOfWeek(e):s==="day"?Ct(e):s==="hour"?UH(e):s==="minute"?FH(e):s==="second"?BH(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):HH(e,this.weekDow,this.weekDoy)}format(e,s,r={}){return s.format({marker:e,timeZoneOffset:r.forcedTzo!=null?r.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,s,r,a={}){return a.isEndExclusive&&(s=Pi(s,-1)),r.formatRange({marker:e,timeZoneOffset:a.forcedStartTzo!=null?a.forcedStartTzo:this.offsetForMarker(e)},{marker:s,timeZoneOffset:a.forcedEndTzo!=null?a.forcedEndTzo:this.offsetForMarker(s)},this,a.defaultSeparator)}formatIso(e,s={}){let r=null;return s.omitTimeZoneOffset||(s.forcedTzo!=null?r=s.forcedTzo:r=this.offsetForMarker(e)),h6(e,r,s.omitTime)}timestampToMarker(e){return this.timeZone==="local"?nn(m_(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):nn(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-f_(yi(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(yi(e)):null}toDate(e,s){return this.timeZone==="local"?f_(yi(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(yi(e))*1e3*60):new Date(e.valueOf()-(s||0))}}class sh{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let s,r;if(typeof e=="object"&&e){s=Object.assign({},this.iconClasses);for(r in e)s[r]=this.applyIconOverridePrefix(e[r]);this.iconClasses=s}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let s=this.iconOverridePrefix;return s&&e.indexOf(s)!==0&&(e=s+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,s){let r;return s&&this.rtlIconClasses?r=this.rtlIconClasses[e]||this.iconClasses[e]:r=this.iconClasses[e],r?`${this.baseIconClass} ${r}`:""}getCustomButtonIconClass(e){let s;return this.iconOverrideCustomButtonOption&&(s=e[this.iconOverrideCustomButtonOption],s)?`${this.baseIconClass} ${this.applyIconOverridePrefix(s)}`:""}}sh.prototype.classes={};sh.prototype.iconClasses={};sh.prototype.baseIconClass="";sh.prototype.iconOverridePrefix="";function eg(t){t();let e=Ie.debounceRendering,s=[];function r(a){s.push(a)}for(Ie.debounceRendering=r,Uu(G(yz,{}),document.createElement("div"));s.length;)s.shift()();Ie.debounceRendering=e}class yz extends wn{render(){return G("div",{})}componentDidMount(){this.setState({})}}function g6(t){let e=zB(t),s=e.Provider;return e.Provider=function(){let r=!this.getChildContext,a=s.apply(this,arguments);if(r){let o=[];this.shouldComponentUpdate=c=>{this.props.value!==c.value&&o.forEach(u=>{u.context=c.value,u.forceUpdate()})},this.sub=c=>{o.push(c);let u=c.componentWillUnmount;c.componentWillUnmount=()=>{o.splice(o.indexOf(c),1),u&&u.call(c)}}}return a},e}class vz{constructor(e,s,r,a){this.execFunc=e,this.emitter=s,this.scrollTime=r,this.scrollTimeReset=a,this.handleScrollRequest=o=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},o),this.drain()},s.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const ka=g6({});function Nz(t,e,s,r,a,o,c,u,m,f,x,v,y,N){return{dateEnv:a,nowManager:o,options:s,pluginHooks:u,emitter:x,dispatch:m,getCurrentData:f,calendarApi:v,viewSpec:t,viewApi:e,dateProfileGenerator:r,theme:c,isRtl:s.direction==="rtl",addResizeHandler(w){x.on("_resize",w)},removeResizeHandler(w){x.off("_resize",w)},createScrollResponder(w){return new vz(w,x,st(s.scrollTime),s.scrollTimeReset)},registerInteractiveComponent:y,unregisterInteractiveComponent:N}}class uo extends wn{shouldComponentUpdate(e,s){return!Fx(this.props,e,this.propEquality)||!Fx(this.state,s,this.stateEquality)}safeSetState(e){Fx(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}uo.addPropsEquality=wz;uo.addStateEquality=jz;uo.contextType=ka;uo.prototype.propEquality={};uo.prototype.stateEquality={};class ft extends uo{}ft.contextType=ka;function wz(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function jz(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Pr(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class Dv extends ft{constructor(){super(...arguments),this.id=oo(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:s}=this.context,{generatorName:r}=this.props;(!s.customRenderingReplaces||!qb(r,s))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Pr(this.props.elRef,e)}}render(){const{props:e,context:s}=this,{options:r}=s,{customGenerator:a,defaultGenerator:o,renderProps:c}=e,u=p6(e,[],this.handleEl);let m=!1,f,x=[],v;if(a!=null){const y=typeof a=="function"?a(c,G):a;if(y===!0)m=!0;else{const N=y&&typeof y=="object";N&&"html"in y?u.dangerouslySetInnerHTML={__html:y.html}:N&&"domNodes"in y?x=Array.prototype.slice.call(y.domNodes):(N?FT(y):typeof y!="function")?f=y:v=y}}else m=!qb(e.generatorName,r);return m&&o&&(f=o(c)),this.queuedDomNodes=x,this.currentGeneratorMeta=v,G(e.elTag,u,f)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var s;const{props:r,context:a}=this,{handleCustomRendering:o,customRenderingMetaMap:c}=a.options;if(o){const u=(s=this.currentGeneratorMeta)!==null&&s!==void 0?s:c==null?void 0:c[r.generatorName];u&&o(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:u},r),{elClasses:(r.elClasses||[]).filter(Ez)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:s}=this,r=this.base;if(!Mi(e,s)){s.forEach(wv);for(let a of e)r.appendChild(a);this.currentDomNodes=e}}}Dv.addPropsEquality({elClasses:Mi,elStyle:ar,elAttrs:cz,renderProps:ar});function qb(t,e){var s;return!!(e.handleCustomRendering&&t&&(!((s=e.customRenderingMetaMap)===null||s===void 0)&&s[t]))}function p6(t,e,s){const r=Object.assign(Object.assign({},t.elAttrs),{ref:s});return(t.elClasses||e)&&(r.className=(t.elClasses||[]).concat(e||[]).concat(r.className||[]).filter(Boolean).join(" ")),t.elStyle&&(r.style=t.elStyle),r}function Ez(t){return!!t}const x6=g6(0);class _n extends wn{constructor(){super(...arguments),this.InnerContent=_z.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Pr(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,s=Sz(e.classNameGenerator,e.renderProps);if(e.children){const r=p6(e,s,this.handleEl),a=e.children(this.InnerContent,e.renderProps,r);return e.elTag?G(e.elTag,r,a):a}else return G(Dv,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(s),renderId:this.context}))}componentDidMount(){var e,s;this.el?(s=(e=this.props).didMount)===null||s===void 0||s.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,s;(s=(e=this.props).willUnmount)===null||s===void 0||s.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}_n.contextType=x6;function _z(t,e){const s=t.props;return G(Dv,Object.assign({renderProps:s.renderProps,generatorName:s.generatorName,customGenerator:s.customGenerator,defaultGenerator:s.defaultGenerator,renderId:t.context},e))}function Sz(t,e){const s=typeof t=="function"?t(e):t||[];return typeof s=="string"?[s]:s}class tg extends ft{render(){let{props:e,context:s}=this,{options:r}=s,a={view:s.viewApi};return G(_n,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...b6(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,classNameGenerator:r.viewClassNames,generatorName:void 0,didMount:r.viewDidMount,willUnmount:r.viewWillUnmount},()=>e.children)}}function b6(t){return[`fc-${t.type}-view`,"fc-view"]}function Az(t,e){let s=null,r=null;return t.start&&(s=e.createMarker(t.start)),t.end&&(r=e.createMarker(t.end)),!s&&!r||s&&r&&r<s?null:{start:s,end:r}}function v_(t,e){let s=[],{start:r}=e,a,o;for(t.sort(Cz),a=0;a<t.length;a+=1)o=t[a],o.start>r&&s.push({start:r,end:o.start}),o.end>r&&(r=o.end);return r<e.end&&s.push({start:r,end:e.end}),s}function Cz(t,e){return t.start.valueOf()-e.start.valueOf()}function Jl(t,e){let{start:s,end:r}=t,a=null;return e.start!==null&&(s===null?s=e.start:s=new Date(Math.max(s.valueOf(),e.start.valueOf()))),e.end!=null&&(r===null?r=e.end:r=new Date(Math.min(r.valueOf(),e.end.valueOf()))),(s===null||r===null||s<r)&&(a={start:s,end:r}),a}function Tz(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function Iv(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function Yg(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function va(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function Rz(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function y6(t){let e=Math.floor(co(t.start,t.end))||1,s=Ct(t.start),r=Fs(s,e);return{start:s,end:r}}function v6(t,e=st(0)){let s=null,r=null;if(t.end){r=Ct(t.end);let a=t.end.valueOf()-r.valueOf();a&&a>=er(e)&&(r=Fs(r,1))}return t.start&&(s=Ct(t.start),r&&r<=s&&(r=Fs(s,1))),{start:s,end:r}}function dc(t,e,s,r){return r==="year"?st(s.diffWholeYears(t,e),"year"):r==="month"?st(s.diffWholeMonths(t,e),"month"):LH(t,e)}class N6{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,s,r){let{dateEnv:a}=this.props,o=a.subtract(a.startOf(s,e.currentRangeUnit),e.dateIncrement);return this.build(o,-1,r)}buildNext(e,s,r){let{dateEnv:a}=this.props,o=a.add(a.startOf(s,e.currentRangeUnit),e.dateIncrement);return this.build(o,1,r)}build(e,s,r=!0){let{props:a}=this,o,c,u,m,f,x;return o=this.buildValidRange(),o=this.trimHiddenDays(o),r&&(e=Rz(e,o)),c=this.buildCurrentRangeInfo(e,s),u=/^(year|month|week|day)$/.test(c.unit),m=this.buildRenderRange(this.trimHiddenDays(c.range),c.unit,u),m=this.trimHiddenDays(m),f=m,a.showNonCurrentDates||(f=Jl(f,c.range)),f=this.adjustActiveRange(f),f=Jl(f,o),x=Iv(c.range,o),va(m,e)||(e=m.start),{currentDate:e,validRange:o,currentRange:c.range,currentRangeUnit:c.unit,isRangeAllDay:u,activeRange:f,renderRange:m,slotMinTime:a.slotMinTime,slotMaxTime:a.slotMaxTime,isValid:x,dateIncrement:this.buildDateIncrement(c.duration)}}buildValidRange(){let e=this.props.validRangeInput,s=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(s)||{start:null,end:null}}buildCurrentRangeInfo(e,s){let{props:r}=this,a=null,o=null,c=null,u;return r.duration?(a=r.duration,o=r.durationUnit,c=this.buildRangeFromDuration(e,s,a,o)):(u=this.props.dayCount)?(o="day",c=this.buildRangeFromDayCount(e,s,u)):(c=this.buildCustomVisibleRange(e))?o=r.dateEnv.greatestWholeUnit(c.start,c.end).unit:(a=this.getFallbackDuration(),o=zb(a).unit,c=this.buildRangeFromDuration(e,s,a,o)),{duration:a,unit:o,range:c}}getFallbackDuration(){return st({day:1})}adjustActiveRange(e){let{dateEnv:s,usesMinMaxTime:r,slotMinTime:a,slotMaxTime:o}=this.props,{start:c,end:u}=e;return r&&(yc(a)<0&&(c=Ct(c),c=s.add(c,a)),yc(o)>1&&(u=Ct(u),u=Fs(u,-1),u=s.add(u,o))),{start:c,end:u}}buildRangeFromDuration(e,s,r,a){let{dateEnv:o,dateAlignment:c}=this.props,u,m,f;if(!c){let{dateIncrement:v}=this.props;v&&er(v)<er(r)?c=zb(v).unit:c=a}yc(r)<=1&&this.isHiddenDay(u)&&(u=this.skipHiddenDays(u,s),u=Ct(u));function x(){u=o.startOf(e,c),m=o.add(u,r),f={start:u,end:m}}return x(),this.trimHiddenDays(f)||(e=this.skipHiddenDays(e,s),x()),f}buildRangeFromDayCount(e,s,r){let{dateEnv:a,dateAlignment:o}=this.props,c=0,u=e,m;o&&(u=a.startOf(u,o)),u=Ct(u),u=this.skipHiddenDays(u,s),m=u;do m=Fs(m,1),this.isHiddenDay(m)||(c+=1);while(c<r);return{start:u,end:m}}buildCustomVisibleRange(e){let{props:s}=this,r=s.visibleRangeInput,a=typeof r=="function"?r.call(s.calendarApi,s.dateEnv.toDate(e)):r,o=this.refineRange(a);return o&&(o.start==null||o.end==null)?null:o}buildRenderRange(e,s,r){return e}buildDateIncrement(e){let{dateIncrement:s}=this.props,r;return s||((r=this.props.dateAlignment)?st(1,r):e||st({days:1}))}refineRange(e){if(e){let s=Az(e,this.props.dateEnv);return s&&(s=v6(s)),s}return null}initHiddenDays(){let e=this.props.hiddenDays||[],s=[],r=0,a;for(this.props.weekends===!1&&e.push(0,6),a=0;a<7;a+=1)(s[a]=e.indexOf(a)!==-1)||(r+=1);if(!r)throw new Error("invalid hiddenDays");this.isHiddenDayHash=s}trimHiddenDays(e){let{start:s,end:r}=e;return s&&(s=this.skipHiddenDays(s)),r&&(r=this.skipHiddenDays(r,-1,!0)),s==null||r==null||s<r?{start:s,end:r}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,s=1,r=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(r?s:0)+7)%7];)e=Fs(e,s);return e}}function kv(t,e,s,r){return{instanceId:oo(),defId:t,range:e,forcedStartTzo:s??null,forcedEndTzo:r??null}}function Dz(t,e,s,r){for(let a=0;a<r.length;a+=1){let o=r[a].parse(t,s);if(o){let{allDay:c}=t;return c==null&&(c=e,c==null&&(c=o.allDayGuess,c==null&&(c=!1))),{allDay:c,duration:o.duration,typeData:o.typeData,typeId:a}}}return null}function eo(t,e,s){let{dateEnv:r,pluginHooks:a,options:o}=s,{defs:c,instances:u}=t;u=Zl(u,m=>!c[m.defId].recurringDef);for(let m in c){let f=c[m];if(f.recurringDef){let{duration:x}=f.recurringDef;x||(x=f.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration);let v=Iz(f,x,e,r,a.recurringTypes);for(let y of v){let N=kv(m,{start:y,end:r.add(y,x)});u[N.instanceId]=N}}}return{defs:c,instances:u}}function Iz(t,e,s,r,a){let c=a[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:r.subtract(s.start,e),end:s.end},r);return t.allDay&&(c=c.map(Ct)),c}const bf={id:String,groupId:String,title:String,url:String,interactive:Boolean},w6={start:re,end:re,date:re,allDay:Boolean},kz=Object.assign(Object.assign(Object.assign({},bf),w6),{extendedProps:re});function j6(t,e,s,r,a=Mv(s),o,c){let{refined:u,extra:m}=E6(t,s,a),f=Pz(e,s),x=Dz(u,f,s.dateEnv,s.pluginHooks.recurringTypes);if(x){let y=$b(u,m,e?e.sourceId:"",x.allDay,!!x.duration,s,o);return y.recurringDef={typeId:x.typeId,typeData:x.typeData,duration:x.duration},{def:y,instance:null}}let v=Mz(u,f,s,r);if(v){let y=$b(u,m,e?e.sourceId:"",v.allDay,v.hasEnd,s,o),N=kv(y.defId,v.range,v.forcedStartTzo,v.forcedEndTzo);return c&&y.publicId&&c[y.publicId]&&(N.instanceId=c[y.publicId]),{def:y,instance:N}}return null}function E6(t,e,s=Mv(e)){return Cv(t,s)}function Mv(t){return Object.assign(Object.assign(Object.assign({},sg),kz),t.pluginHooks.eventRefiners)}function $b(t,e,s,r,a,o,c){let u={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(c&&t.id?c[t.id]:"")||oo(),sourceId:s,allDay:r,hasEnd:a,interactive:t.interactive,ui:ng(t,o),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let m of o.pluginHooks.eventDefMemberAdders)Object.assign(u,m(t));return Object.freeze(u.ui.classNames),Object.freeze(u.extendedProps),u}function Mz(t,e,s,r){let{allDay:a}=t,o,c=null,u=!1,m,f=null,x=t.start!=null?t.start:t.date;if(o=s.dateEnv.createMarkerMeta(x),o)c=o.marker;else if(!r)return null;return t.end!=null&&(m=s.dateEnv.createMarkerMeta(t.end)),a==null&&(e!=null?a=e:a=(!o||o.isTimeUnspecified)&&(!m||m.isTimeUnspecified)),a&&c&&(c=Ct(c)),m&&(f=m.marker,a&&(f=Ct(f)),c&&f<=c&&(f=null)),f?u=!0:r||(u=s.options.forceEventDuration||!1,f=s.dateEnv.add(c,a?s.options.defaultAllDayEventDuration:s.options.defaultTimedEventDuration)),{allDay:a,hasEnd:u,range:{start:c,end:f},forcedStartTzo:o?o.forcedTzo:null,forcedEndTzo:m?m.forcedTzo:null}}function Pz(t,e){let s=null;return t&&(s=t.defaultAllDay),s==null&&(s=e.options.defaultAllDay),s}function Fu(t,e,s,r,a,o){let c=jn(),u=Mv(s);for(let m of t){let f=j6(m,e,s,r,u,a,o);f&&Gb(f,c)}return c}function Gb(t,e=jn()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function Pv(t,e){let s=t.instances[e];if(s){let r=t.defs[s.defId],a=Kg(t,o=>Oz(r,o));return a.defs[r.defId]=r,a.instances[s.instanceId]=s,a}return jn()}function Oz(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function jn(){return{defs:{},instances:{}}}function Ov(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function Kg(t,e){let s=Zl(t.defs,e),r=Zl(t.instances,a=>s[a.defId]);return{defs:s,instances:r}}function Lz(t,e){let{defs:s,instances:r}=t,a={},o={};for(let c in s)e.defs[c]||(a[c]=s[c]);for(let c in r)!e.instances[c]&&a[r[c].defId]&&(o[c]=r[c]);return{defs:a,instances:o}}function Vz(t,e){return Array.isArray(t)?Fu(t,null,e,!0):typeof t=="object"&&t?Fu([t],null,e,!0):t!=null?String(t):null}function N_(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const sg={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:re,overlap:re,allow:re,className:N_,classNames:N_,color:String,backgroundColor:String,borderColor:String,textColor:String},Uz={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function ng(t,e){let s=Vz(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:s!=null?[s]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function _6(t){return t.reduce(Fz,Uz)}function Fz(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const Bz={id:String,defaultAllDay:Boolean,url:String,format:String,events:re,eventDataTransform:re,success:re,failure:re};function S6(t,e,s=A6(e)){let r;if(typeof t=="string"?r={url:t}:typeof t=="function"||Array.isArray(t)?r={events:t}:typeof t=="object"&&t&&(r=t),r){let{refined:a,extra:o}=Cv(r,s),c=Hz(a,e);if(c)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:a.defaultAllDay,eventDataTransform:a.eventDataTransform,success:a.success,failure:a.failure,publicId:a.id||"",sourceId:oo(),sourceDefId:c.sourceDefId,meta:c.meta,ui:ng(a,e),extendedProps:o}}return null}function A6(t){return Object.assign(Object.assign(Object.assign({},sg),Bz),t.pluginHooks.eventSourceRefiners)}function Hz(t,e){let s=e.pluginHooks.eventSourceDefs;for(let r=s.length-1;r>=0;r-=1){let o=s[r].parseMeta(t);if(o)return{sourceDefId:r,meta:o}}return null}function zz(t,e,s,r,a){switch(e.type){case"RECEIVE_EVENTS":return qz(t,s[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,a);case"RESET_RAW_EVENTS":return $z(t,s[e.sourceId],e.rawEvents,r.activeRange,a);case"ADD_EVENTS":return Gz(t,e.eventStore,r?r.activeRange:null,a);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return Ov(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return r?eo(t,r.activeRange,a):t;case"REMOVE_EVENTS":return Lz(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return T6(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Kg(t,o=>!o.sourceId);case"REMOVE_ALL_EVENTS":return jn();default:return t}}function qz(t,e,s,r,a,o){if(e&&s===e.latestFetchId){let c=Fu(C6(a,e,o),e,o);return r&&(c=eo(c,r,o)),Ov(T6(t,e.sourceId),c)}return t}function $z(t,e,s,r,a){const{defIdMap:o,instanceIdMap:c}=Qz(t);let u=Fu(C6(s,e,a),e,a,!1,o,c);return eo(u,r,a)}function C6(t,e,s){let r=s.options.eventDataTransform,a=e?e.eventDataTransform:null;return a&&(t=w_(t,a)),r&&(t=w_(t,r)),t}function w_(t,e){let s;if(!e)s=t;else{s=[];for(let r of t){let a=e(r);a?s.push(a):a==null&&s.push(r)}}return s}function Gz(t,e,s,r){return s&&(e=eo(e,s,r)),Ov(t,e)}function j_(t,e,s){let{defs:r}=t,a=Da(t.instances,o=>r[o.defId].allDay?o:Object.assign(Object.assign({},o),{range:{start:s.createMarker(e.toDate(o.range.start,o.forcedStartTzo)),end:s.createMarker(e.toDate(o.range.end,o.forcedEndTzo))},forcedStartTzo:s.canComputeOffset?null:o.forcedStartTzo,forcedEndTzo:s.canComputeOffset?null:o.forcedEndTzo}));return{defs:r,instances:a}}function T6(t,e){return Kg(t,s=>s.sourceId!==e)}function Wz(t,e){return{defs:t.defs,instances:Zl(t.instances,s=>!e[s.instanceId])}}function Qz(t){const{defs:e,instances:s}=t,r={},a={};for(let o in e){const c=e[o],{publicId:u}=c;u&&(r[u]=o)}for(let o in s){const c=s[o],u=e[c.defId],{publicId:m}=u;m&&(a[m]=o)}return{defIdMap:r,instanceIdMap:a}}class Xg{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,s){Yz(this.handlers,e,s)}off(e,s){Kz(this.handlers,e,s)}trigger(e,...s){let r=this.handlers[e]||[],a=this.options&&this.options[e],o=[].concat(a||[],r);for(let c of o)c.apply(this.thisContext,s)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function Yz(t,e,s){(t[e]||(t[e]=[])).push(s)}function Kz(t,e,s){s?t[e]&&(t[e]=t[e].filter(r=>r!==s)):delete t[e]}const Xz={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function Zz(t,e){return Fu(Jz(t),null,e)}function Jz(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(s=>s.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(s=>Object.assign(Object.assign({},Xz),s)),e}function R6(t,e,s){s.emitter.trigger("select",Object.assign(Object.assign({},Lv(t,s)),{jsEvent:e?e.origEvent:null,view:s.viewApi||s.calendarApi.view}))}function eq(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function Lv(t,e){let s={};for(let r of e.pluginHooks.dateSpanTransforms)Object.assign(s,r(t,e));return Object.assign(s,fq(t,e.dateEnv)),s}function E_(t,e,s){let{dateEnv:r,options:a}=s,o=e;return t?(o=Ct(o),o=r.add(o,a.defaultAllDayEventDuration)):o=r.add(o,a.defaultTimedEventDuration),o}function Vv(t,e,s,r){let a=rg(t.defs,e),o=jn();for(let c in t.defs){let u=t.defs[c];o.defs[c]=tq(u,a[c],s,r)}for(let c in t.instances){let u=t.instances[c],m=o.defs[u.defId];o.instances[c]=sq(u,m,a[u.defId],s,r)}return o}function tq(t,e,s,r){let a=s.standardProps||{};a.hasEnd==null&&e.durationEditable&&(s.startDelta||s.endDelta)&&(a.hasEnd=!0);let o=Object.assign(Object.assign(Object.assign({},t),a),{ui:Object.assign(Object.assign({},t.ui),a.ui)});s.extendedProps&&(o.extendedProps=Object.assign(Object.assign({},o.extendedProps),s.extendedProps));for(let c of r.pluginHooks.eventDefMutationAppliers)c(o,s,r);return!o.hasEnd&&r.options.forceEventDuration&&(o.hasEnd=!0),o}function sq(t,e,s,r,a){let{dateEnv:o}=a,c=r.standardProps&&r.standardProps.allDay===!0,u=r.standardProps&&r.standardProps.hasEnd===!1,m=Object.assign({},t);return c&&(m.range=y6(m.range)),r.datesDelta&&s.startEditable&&(m.range={start:o.add(m.range.start,r.datesDelta),end:o.add(m.range.end,r.datesDelta)}),r.startDelta&&s.durationEditable&&(m.range={start:o.add(m.range.start,r.startDelta),end:m.range.end}),r.endDelta&&s.durationEditable&&(m.range={start:m.range.start,end:o.add(m.range.end,r.endDelta)}),u&&(m.range={start:m.range.start,end:E_(e.allDay,m.range.start,a)}),e.allDay&&(m.range={start:Ct(m.range.start),end:Ct(m.range.end)}),m.range.end<m.range.start&&(m.range.end=E_(e.allDay,m.range.start,a)),m}class cc{constructor(e,s){this.context=e,this.internalEventSource=s}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Mt{constructor(e,s,r){this._context=e,this._def=s,this._instance=r||null}setProp(e,s){if(e in w6)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")s=bf[e](s),this.mutate({standardProps:{publicId:s}});else if(e in bf)s=bf[e](s),this.mutate({standardProps:{[e]:s}});else if(e in sg){let r=sg[e](s);e==="color"?r={backgroundColor:s,borderColor:s}:e==="editable"?r={startEditable:s,durationEditable:s}:r={[e]:s},this.mutate({standardProps:{ui:r}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,s){this.mutate({extendedProps:{[e]:s}})}setStart(e,s={}){let{dateEnv:r}=this._context,a=r.createMarker(e);if(a&&this._instance){let o=this._instance.range,c=dc(o.start,a,r,s.granularity);s.maintainDuration?this.mutate({datesDelta:c}):this.mutate({startDelta:c})}}setEnd(e,s={}){let{dateEnv:r}=this._context,a;if(!(e!=null&&(a=r.createMarker(e),!a))&&this._instance)if(a){let o=dc(this._instance.range.end,a,r,s.granularity);this.mutate({endDelta:o})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,s,r={}){let{dateEnv:a}=this._context,o={allDay:r.allDay},c=a.createMarker(e),u;if(c&&!(s!=null&&(u=a.createMarker(s),!u))&&this._instance){let m=this._instance.range;r.allDay===!0&&(m=y6(m));let f=dc(m.start,c,a,r.granularity);if(u){let x=dc(m.end,u,a,r.granularity);AH(f,x)?this.mutate({datesDelta:f,standardProps:o}):this.mutate({startDelta:f,endDelta:x,standardProps:o})}else o.hasEnd=!1,this.mutate({datesDelta:f,standardProps:o})}}moveStart(e){let s=st(e);s&&this.mutate({startDelta:s})}moveEnd(e){let s=st(e);s&&this.mutate({endDelta:s})}moveDates(e){let s=st(e);s&&this.mutate({datesDelta:s})}setAllDay(e,s={}){let r={allDay:e},{maintainDuration:a}=s;a==null&&(a=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(r.hasEnd=a),this.mutate({standardProps:r})}formatRange(e){let{dateEnv:s}=this._context,r=this._instance,a=Vt(e);return this._def.hasEnd?s.formatRange(r.range.start,r.range.end,a,{forcedStartTzo:r.forcedStartTzo,forcedEndTzo:r.forcedEndTzo}):s.format(r.range.start,a,{forcedTzo:r.forcedStartTzo})}mutate(e){let s=this._instance;if(s){let r=this._def,a=this._context,{eventStore:o}=a.getCurrentData(),c=Pv(o,s.instanceId);c=Vv(c,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,a);let m=new Mt(a,r,s);this._def=c.defs[r.defId],this._instance=c.instances[s.instanceId],a.dispatch({type:"MERGE_EVENTS",eventStore:c}),a.emitter.trigger("eventChange",{oldEvent:m,event:this,relatedEvents:Fl(c,a,s),revert(){a.dispatch({type:"RESET_EVENTS",eventStore:o})}})}}remove(){let e=this._context,s=D6(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:s}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:s})}})}get source(){let{sourceId:e}=this._def;return e?new cc(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let s=this._def,{ui:r}=s,{startStr:a,endStr:o}=this,c={allDay:s.allDay};return s.title&&(c.title=s.title),a&&(c.start=a),o&&(c.end=o),s.publicId&&(c.id=s.publicId),s.groupId&&(c.groupId=s.groupId),s.url&&(c.url=s.url),r.display&&r.display!=="auto"&&(c.display=r.display),e.collapseColor&&r.backgroundColor&&r.backgroundColor===r.borderColor?c.color=r.backgroundColor:(r.backgroundColor&&(c.backgroundColor=r.backgroundColor),r.borderColor&&(c.borderColor=r.borderColor)),r.textColor&&(c.textColor=r.textColor),r.classNames.length&&(c.classNames=r.classNames),Object.keys(s.extendedProps).length&&(e.collapseExtendedProps?Object.assign(c,s.extendedProps):c.extendedProps=s.extendedProps),c}toJSON(){return this.toPlainObject()}}function D6(t){let e=t._def,s=t._instance;return{defs:{[e.defId]:e},instances:s?{[s.instanceId]:s}:{}}}function Fl(t,e,s){let{defs:r,instances:a}=t,o=[],c=s?s.instanceId:"";for(let u in a){let m=a[u],f=r[m.defId];m.instanceId!==c&&o.push(new Mt(e,f,m))}return o}function __(t,e,s,r){let a={},o={},c={},u=[],m=[],f=rg(t.defs,e);for(let x in t.defs){let v=t.defs[x];f[v.defId].display==="inverse-background"&&(v.groupId?(a[v.groupId]=[],c[v.groupId]||(c[v.groupId]=v)):o[x]=[])}for(let x in t.instances){let v=t.instances[x],y=t.defs[v.defId],N=f[y.defId],w=v.range,E=!y.allDay&&r?v6(w,r):w,_=Jl(E,s);_&&(N.display==="inverse-background"?y.groupId?a[y.groupId].push(_):o[v.defId].push(_):N.display!=="none"&&(N.display==="background"?u:m).push({def:y,ui:N,instance:v,range:_,isStart:E.start&&E.start.valueOf()===_.start.valueOf(),isEnd:E.end&&E.end.valueOf()===_.end.valueOf()}))}for(let x in a){let v=a[x],y=v_(v,s);for(let N of y){let w=c[x],E=f[w.defId];u.push({def:w,ui:E,instance:null,range:N,isStart:!1,isEnd:!1})}}for(let x in o){let v=o[x],y=v_(v,s);for(let N of y)u.push({def:t.defs[x],ui:f[x],instance:null,range:N,isStart:!1,isEnd:!1})}return{bg:u,fg:m}}function nq(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function S_(t,e){t.fcSeg=e}function Ic(t){return t.fcSeg||t.parentNode.fcSeg||null}function rg(t,e){return Da(t,s=>I6(s,e))}function I6(t,e){let s=[];return e[""]&&s.push(e[""]),e[t.defId]&&s.push(e[t.defId]),s.push(t.ui),_6(s)}function k6(t,e){let s=t.map(rq);return s.sort((r,a)=>vH(r,a,e)),s.map(r=>r._seg)}function rq(t){let{eventRange:e}=t,s=e.def,r=e.instance?e.instance.range:e.range,a=r.start?r.start.valueOf():0,o=r.end?r.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},s.extendedProps),s),{id:s.publicId,start:a,end:o,duration:o-a,allDay:Number(s.allDay),_seg:t})}function aq(t,e){let{pluginHooks:s}=e,r=s.isDraggableTransformers,{def:a,ui:o}=t.eventRange,c=o.startEditable;for(let u of r)c=u(c,a,o,e);return c}function iq(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function lq(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function M6(t,e,s,r,a,o,c){let{dateEnv:u,options:m}=s,{displayEventTime:f,displayEventEnd:x}=m,v=t.eventRange.def,y=t.eventRange.instance;f==null&&(f=r!==!1),x==null&&(x=a!==!1);let N=y.range.start,w=y.range.end,E=t.start||t.eventRange.range.start,_=t.end||t.eventRange.range.end,R=Ct(N).valueOf()===Ct(E).valueOf(),I=Ct(Pi(w,-1)).valueOf()===Ct(Pi(_,-1)).valueOf();return f&&!v.allDay&&(R||I)?(E=R?N:E,_=I?w:_,x&&v.hasEnd?u.formatRange(E,_,e,{forcedStartTzo:y.forcedStartTzo,forcedEndTzo:y.forcedEndTzo}):u.format(E,e,{forcedTzo:y.forcedStartTzo})):""}function Si(t,e,s){let r=t.eventRange.range;return{isPast:r.end<=(s||e.start),isFuture:r.start>=(s||e.end),isToday:e&&va(e,r.start)}}function oq(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function P6(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function O6(t,e){let{def:s,instance:r}=t.eventRange,{url:a}=s;if(a)return{href:a};let{emitter:o,options:c}=e,{eventInteractive:u}=c;return u==null&&(u=s.interactive,u==null&&(u=!!o.hasHandlers("eventClick"))),u?d6(m=>{o.trigger("eventClick",{el:m.target,event:new Mt(e,s,r),jsEvent:m,view:e.viewApi})}):{}}const cq={start:re,end:re,allDay:Boolean};function dq(t,e,s){let r=uq(t,e),{range:a}=r;if(!a.start)return null;if(!a.end){if(s==null)return null;a.end=e.add(a.start,s)}return r}function uq(t,e){let{refined:s,extra:r}=Cv(t,cq),a=s.start?e.createMarkerMeta(s.start):null,o=s.end?e.createMarkerMeta(s.end):null,{allDay:c}=s;return c==null&&(c=a&&a.isTimeUnspecified&&(!o||o.isTimeUnspecified)),Object.assign({range:{start:a?a.marker:null,end:o?o.marker:null},allDay:c},r)}function hq(t,e){return Tz(t.range,e.range)&&t.allDay===e.allDay&&mq(t,e)}function mq(t,e){for(let s in e)if(s!=="range"&&s!=="allDay"&&t[s]!==e[s])return!1;for(let s in t)if(!(s in e))return!1;return!0}function fq(t,e){return Object.assign(Object.assign({},V6(t.range,e,t.allDay)),{allDay:t.allDay})}function L6(t,e,s){return Object.assign(Object.assign({},V6(t,e,s)),{timeZone:e.timeZone})}function V6(t,e,s){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:s}),endStr:e.formatIso(t.end,{omitTime:s})}}function gq(t,e,s){let r=E6({editable:!1},s),a=$b(r.refined,r.extra,"",t.allDay,!0,s);return{def:a,ui:I6(a,e),instance:kv(a.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function pq(t,e,s){let r=!1,a=function(u){r||(r=!0,e(u))},o=function(u){r||(r=!0,s(u))},c=t(a,o);c&&typeof c.then=="function"&&c.then(a,o)}class A_ extends Error{constructor(e,s){super(e),this.response=s}}function xq(t,e,s){t=t.toUpperCase();const r={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(s):(r.body=new URLSearchParams(s),r.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,r).then(a=>{if(a.ok)return a.json().then(o=>[o,a],()=>{throw new A_("Failure parsing JSON",a)});throw new A_("Request failed",a)})}let Bx;function U6(){return Bx==null&&(Bx=bq()),Bx}function bq(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let s=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),s}class yq extends ft{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{eg(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{eg(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:s}=e,{forPrint:r}=this.state,a=r||s.height==="auto"||s.contentHeight==="auto",o=!a&&s.height!=null?s.height:"",c=["fc",r?"fc-media-print":"fc-media-screen",`fc-direction-${s.direction}`,e.theme.getClass("root")];return U6()||c.push("fc-liquid-hack"),e.children(c,o,a,r)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class $c{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function vq(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function Uv(t){return{[t.component.uid]:t}}const Wb={};class Gc extends wn{constructor(e,s){super(e,s),this.handleRefresh=()=>{let r=this.computeTiming();r.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(r.state),this.clearTimeout(),this.setTimeout(r.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:s}=this;return e.children(s.nowDate,s.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:s}=this,r=s.nowManager.getDateMarker(),a=s.dateEnv.startOf(r,e.unit),c=s.dateEnv.add(a,st(1,e.unit)).valueOf()-r.valueOf();return c=Math.min(1e3*60*60*24,c),{state:{nowDate:a,todayRange:Nq(a)},waitMs:c}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const s=this.computeTiming();this.setState(s.state,()=>{this.setTimeout(s.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Gc.contextType=ka;function Nq(t){let e=Ct(t),s=Fs(e,1);return{start:e,end:s}}class wq{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,s){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:s})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,s){let{currentDataManager:r}=this;r.currentCalendarOptionsRefiners[e]?r.emitter.on(e,s):console.warn(`Unknown listener name '${e}'`)}off(e,s){this.currentDataManager.emitter.off(e,s)}trigger(e,...s){this.currentDataManager.emitter.trigger(e,...s)}changeView(e,s){this.batchRendering(()=>{if(this.unselect(),s)if(s.start&&s.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:s});else{let{dateEnv:r}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:r.createMarker(s)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,s){let r=this.getCurrentData(),a;s=s||"day",a=r.viewSpecs[s]||this.getUnitViewSpec(s),this.unselect(),a?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:a.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:s,toolbarConfig:r}=this.getCurrentData(),a=[].concat(r.header?r.header.viewsWithButtons:[],r.footer?r.footer.viewsWithButtons:[]),o,c;for(let u in s)a.push(u);for(o=0;o<a.length;o+=1)if(c=s[a[o]],c&&c.singleUnit===e)return c;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let s=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:s.dateEnv.createMarker(e)})}incrementDate(e){let s=this.getCurrentData(),r=st(e);r&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:s.dateEnv.add(s.currentDate,r)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,s){let{dateEnv:r}=this.getCurrentData();return r.format(r.createMarker(e),Vt(s))}formatRange(e,s,r){let{dateEnv:a}=this.getCurrentData();return a.formatRange(a.createMarker(e),a.createMarker(s),Vt(r),r)}formatIso(e,s){let{dateEnv:r}=this.getCurrentData();return r.formatIso(r.createMarker(e),{omitTime:s})}select(e,s){let r;s==null?e.start!=null?r=e:r={start:e,end:null}:r={start:e,end:s};let a=this.getCurrentData(),o=dq(r,a.dateEnv,st({days:1}));o&&(this.dispatch({type:"SELECT_DATES",selection:o}),R6(o,null,a))}unselect(e){let s=this.getCurrentData();s.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),eq(e,s))}addEvent(e,s){if(e instanceof Mt){let c=e._def,u=e._instance;return this.getCurrentData().eventStore.defs[c.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Gb({def:c,instance:u})}),this.triggerEventAdd(e)),e}let r=this.getCurrentData(),a;if(s instanceof cc)a=s.internalEventSource;else if(typeof s=="boolean")s&&([a]=Rv(r.eventSources));else if(s!=null){let c=this.getEventSourceById(s);if(!c)return console.warn(`Could not find an event source with ID "${s}"`),null;a=c.internalEventSource}let o=j6(e,a,r,!1);if(o){let c=new Mt(r,o.def,o.def.recurringDef?null:o.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Gb(o)}),this.triggerEventAdd(c),c}return null}triggerEventAdd(e){let{emitter:s}=this.getCurrentData();s.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:D6(e)})}})}getEventById(e){let s=this.getCurrentData(),{defs:r,instances:a}=s.eventStore;e=String(e);for(let o in r){let c=r[o];if(c.publicId===e){if(c.recurringDef)return new Mt(s,c,null);for(let u in a){let m=a[u];if(m.defId===c.defId)return new Mt(s,c,m)}}}return null}getEvents(){let e=this.getCurrentData();return Fl(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),s=e.eventSources,r=[];for(let a in s)r.push(new cc(e,s[a]));return r}getEventSourceById(e){let s=this.getCurrentData(),r=s.eventSources;e=String(e);for(let a in r)if(r[a].publicId===e)return new cc(s,r[a]);return null}addEventSource(e){let s=this.getCurrentData();if(e instanceof cc)return s.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let r=S6(e,s);return r?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[r]}),new cc(s,r)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let s=st(e);s&&this.trigger("_scrollRequest",{time:s})}}function jq(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function F6(t,e){let s={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return s.left<s.right&&s.top<s.bottom?s:!1}function Eq(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function _q(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function Sq(t,e){return{left:t.left-e.left,top:t.top-e.top}}const Hx=jn();class Aq{constructor(){this.getKeysForEventDefs=Me(this._getKeysForEventDefs),this.splitDateSelection=Me(this._splitDateSpan),this.splitEventStore=Me(this._splitEventStore),this.splitIndividualUi=Me(this._splitIndividualUi),this.splitEventDrag=Me(this._splitInteraction),this.splitEventResize=Me(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let s=this.getKeyInfo(e),r=this.getKeysForEventDefs(e.eventStore),a=this.splitDateSelection(e.dateSelection),o=this.splitIndividualUi(e.eventUiBases,r),c=this.splitEventStore(e.eventStore,r),u=this.splitEventDrag(e.eventDrag),m=this.splitEventResize(e.eventResize),f={};this.eventUiBuilders=Da(s,(x,v)=>this.eventUiBuilders[v]||Me(Cq));for(let x in s){let v=s[x],y=c[x]||Hx,N=this.eventUiBuilders[x];f[x]={businessHours:v.businessHours||e.businessHours,dateSelection:a[x]||null,eventStore:y,eventUiBases:N(e.eventUiBases[""],v.ui,o[x]),eventSelection:y.instances[e.eventSelection]?e.eventSelection:"",eventDrag:u[x]||null,eventResize:m[x]||null}}return f}_splitDateSpan(e){let s={};if(e){let r=this.getKeysForDateSpan(e);for(let a of r)s[a]=e}return s}_getKeysForEventDefs(e){return Da(e.defs,s=>this.getKeysForEventDef(s))}_splitEventStore(e,s){let{defs:r,instances:a}=e,o={};for(let c in r)for(let u of s[c])o[u]||(o[u]=jn()),o[u].defs[c]=r[c];for(let c in a){let u=a[c];for(let m of s[u.defId])o[m]&&(o[m].instances[c]=u)}return o}_splitIndividualUi(e,s){let r={};for(let a in e)if(a)for(let o of s[a])r[o]||(r[o]={}),r[o][a]=e[a];return r}_splitInteraction(e){let s={};if(e){let r=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),a=this._getKeysForEventDefs(e.mutatedEvents),o=this._splitEventStore(e.mutatedEvents,a),c=u=>{s[u]||(s[u]={affectedEvents:r[u]||Hx,mutatedEvents:o[u]||Hx,isEvent:e.isEvent})};for(let u in r)c(u);for(let u in o)c(u)}return s}}function Cq(t,e,s){let r=[];t&&r.push(t),e&&r.push(e);let a={"":_6(r)};return s&&Object.assign(a,s),a}function B6(t,e,s,r){return{dow:t.getUTCDay(),isDisabled:!!(r&&(!r.activeRange||!va(r.activeRange,t))),isOther:!!(r&&!va(r.currentRange,t)),isToday:!!(e&&va(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function Fv(t,e){let s=["fc-day",`fc-day-${IH[t.dow]}`];return t.isDisabled?s.push("fc-day-disabled"):(t.isToday&&(s.push("fc-day-today"),s.push(e.getClass("today"))),t.isPast&&s.push("fc-day-past"),t.isFuture&&s.push("fc-day-future"),t.isOther&&s.push("fc-day-other")),s}const Tq=Vt({year:"numeric",month:"long",day:"numeric"}),Rq=Vt({week:"long"});function ag(t,e,s="day",r=!0){const{dateEnv:a,options:o,calendarApi:c}=t;let u=a.format(e,s==="week"?Rq:Tq);if(o.navLinks){let m=a.toDate(e);const f=x=>{let v=s==="day"?o.navLinkDayClick:s==="week"?o.navLinkWeekClick:null;typeof v=="function"?v.call(c,a.toDate(e),x):(typeof v=="string"&&(s=v),c.zoomTo(e,s))};return Object.assign({title:Eu(o.navLinkHint,[u,m],u),"data-navlink":""},r?c6(f):{onClick:f})}return{"aria-label":u}}let zx=null;function Dq(){return zx===null&&(zx=Iq()),zx}function Iq(){let t=document.createElement("div");ju(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let s=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return wv(t),s}let qx;function kq(){return qx||(qx=Mq()),qx}function Mq(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=H6(t);return document.body.removeChild(t),e}function H6(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function Pq(t,e=!1){let s=window.getComputedStyle(t),r=parseInt(s.borderLeftWidth,10)||0,a=parseInt(s.borderRightWidth,10)||0,o=parseInt(s.borderTopWidth,10)||0,c=parseInt(s.borderBottomWidth,10)||0,u=H6(t),m=u.y-r-a,f=u.x-o-c,x={borderLeft:r,borderRight:a,borderTop:o,borderBottom:c,scrollbarBottom:f,scrollbarLeft:0,scrollbarRight:0};return Dq()&&s.direction==="rtl"?x.scrollbarLeft=m:x.scrollbarRight=m,e&&(x.paddingLeft=parseInt(s.paddingLeft,10)||0,x.paddingRight=parseInt(s.paddingRight,10)||0,x.paddingTop=parseInt(s.paddingTop,10)||0,x.paddingBottom=parseInt(s.paddingBottom,10)||0),x}function Oq(t,e=!1,s){let r=Bv(t),a=Pq(t,e),o={left:r.left+a.borderLeft+a.scrollbarLeft,right:r.right-a.borderRight-a.scrollbarRight,top:r.top+a.borderTop,bottom:r.bottom-a.borderBottom-a.scrollbarBottom};return e&&(o.left+=a.paddingLeft,o.right-=a.paddingRight,o.top+=a.paddingTop,o.bottom-=a.paddingBottom),o}function Bv(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function Lq(t){let e=z6(t),s=t.getBoundingClientRect();for(let r of e){let a=F6(s,r.getBoundingClientRect());if(a)s=a;else return null}return s}function z6(t){let e=[];for(;t instanceof HTMLElement;){let s=window.getComputedStyle(t);if(s.position==="fixed")break;/(auto|scroll)/.test(s.overflow+s.overflowY+s.overflowX)&&e.push(t),t=t.parentNode}return e}class kc{constructor(e,s,r,a){this.els=s;let o=this.originClientRect=e.getBoundingClientRect();r&&this.buildElHorizontals(o.left),a&&this.buildElVerticals(o.top)}buildElHorizontals(e){let s=[],r=[];for(let a of this.els){let o=a.getBoundingClientRect();s.push(o.left-e),r.push(o.right-e)}this.lefts=s,this.rights=r}buildElVerticals(e){let s=[],r=[];for(let a of this.els){let o=a.getBoundingClientRect();s.push(o.top-e),r.push(o.bottom-e)}this.tops=s,this.bottoms=r}leftToIndex(e){let{lefts:s,rights:r}=this,a=s.length,o;for(o=0;o<a;o+=1)if(e>=s[o]&&e<r[o])return o}topToIndex(e){let{tops:s,bottoms:r}=this,a=s.length,o;for(o=0;o<a;o+=1)if(e>=s[o]&&e<r[o])return o}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return Wm(this.tops||[],e.tops||[])&&Wm(this.bottoms||[],e.bottoms||[])&&Wm(this.lefts||[],e.lefts||[])&&Wm(this.rights||[],e.rights||[])}}function Wm(t,e){const s=t.length;if(s!==e.length)return!1;for(let r=0;r<s;r++)if(Math.round(t[r])!==Math.round(e[r]))return!1;return!0}class Hv{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class Vq extends Hv{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class Uq extends Hv{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Lr extends ft{constructor(){super(...arguments),this.uid=oo()}prepareHits(){}queryHit(e,s,r,a){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Vs(e,".fc-event-mirror")}isValidDateDownEl(e){return!Vs(e,".fc-event:not(.fc-bg-event)")&&!Vs(e,".fc-more-link")&&!Vs(e,"a[data-navlink]")&&!Vs(e,".fc-popover")}}class q6{constructor(e=s=>s.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let s=[];for(let r of e)this.insertEntry(r,s);return s}insertEntry(e,s){let r=this.findInsertion(e);this.isInsertionValid(r,e)?this.insertEntryAt(e,r):this.handleInvalidInsertion(r,e,s)}isInsertionValid(e,s){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(s)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,s,r){if(this.allowReslicing&&e.touchingEntry){const a=Object.assign(Object.assign({},s),{span:zv(s.span,e.touchingEntry.span)});r.push(a),this.splitEntry(s,e.touchingEntry,r)}else r.push(s)}splitEntry(e,s,r){let a=e.span,o=s.span;a.start<o.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.start,end:o.start}},r),a.end>o.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:o.end,end:a.end}},r)}insertEntryAt(e,s){let{entriesByLevel:r,levelCoords:a}=this;s.lateral===-1?($x(a,s.level,s.levelCoord),$x(r,s.level,[e])):$x(r[s.level],s.lateral,e),this.stackCnts[Bl(e)]=s.stackCnt}findInsertion(e){let{levelCoords:s,entriesByLevel:r,strictOrder:a,stackCnts:o}=this,c=s.length,u=0,m=-1,f=-1,x=null,v=0;for(let w=0;w<c;w+=1){const E=s[w];if(!a&&E>=u+this.getEntryThickness(e))break;let _=r[w],R,I=Yb(_,e.span.start,Qb),V=I[0]+I[1];for(;(R=_[V])&&R.span.start<e.span.end;){let z=E+this.getEntryThickness(R);z>u&&(u=z,x=R,m=w,f=V),z===u&&(v=Math.max(v,o[Bl(R)]+1)),V+=1}}let y=0;if(x)for(y=m+1;y<c&&s[y]<u;)y+=1;let N=-1;return y<c&&s[y]===u&&(N=Yb(r[y],e.span.end,Qb)[0]),{touchingLevel:m,touchingLateral:f,touchingEntry:x,stackCnt:v,levelCoord:u,level:y,lateral:N}}toRects(){let{entriesByLevel:e,levelCoords:s}=this,r=e.length,a=[];for(let o=0;o<r;o+=1){let c=e[o],u=s[o];for(let m of c)a.push(Object.assign(Object.assign({},m),{thickness:this.getEntryThickness(m),levelCoord:u}))}return a}}function Qb(t){return t.span.end}function Bl(t){return t.index+":"+t.span.start}function Fq(t){let e=[];for(let s of t){let r=[],a={span:s.span,entries:[s]};for(let o of e)zv(o.span,a.span)?a={entries:o.entries.concat(a.entries),span:Bq(o.span,a.span)}:r.push(o);r.push(a),e=r}return e}function Bq(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function zv(t,e){let s=Math.max(t.start,e.start),r=Math.min(t.end,e.end);return s<r?{start:s,end:r}:null}function $x(t,e,s){t.splice(e,0,s)}function Yb(t,e,s){let r=0,a=t.length;if(!a||e<s(t[r]))return[0,0];if(e>s(t[a-1]))return[a,0];for(;r<a;){let o=Math.floor(r+(a-r)/2),c=s(t[o]);if(e<c)a=o;else if(e>c)r=o+1;else return[o,1]}return[r,0]}class Hq{constructor(e,s){this.emitter=new Xg}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const qv={};function zq(t,e){return!t||e>10?Vt({weekday:"short"}):e>1?Vt({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):Vt({weekday:"long"})}const $6="fc-col-header-cell";function G6(t){return t.text}class qq extends ft{render(){let{dateEnv:e,options:s,theme:r,viewApi:a}=this.context,{props:o}=this,{date:c,dateProfile:u}=o,m=B6(c,o.todayRange,null,u),f=[$6].concat(Fv(m,r)),x=e.format(c,o.dayHeaderFormat),v=!m.isDisabled&&o.colCnt>1?ag(this.context,c):{},y=e.toDate(c);e.namedTimeZoneImpl&&(y=Pi(y,36e5));let N=Object.assign(Object.assign(Object.assign({date:y,view:a},o.extraRenderProps),{text:x}),m);return G(_n,{elTag:"th",elClasses:f,elAttrs:Object.assign({role:"columnheader",colSpan:o.colSpan,"data-date":m.isDisabled?void 0:Sv(c)},o.extraDataAttrs),renderProps:N,generatorName:"dayHeaderContent",customGenerator:s.dayHeaderContent,defaultGenerator:G6,classNameGenerator:s.dayHeaderClassNames,didMount:s.dayHeaderDidMount,willUnmount:s.dayHeaderWillUnmount},w=>G("div",{className:"fc-scrollgrid-sync-inner"},!m.isDisabled&&G(w,{elTag:"a",elAttrs:v,elClasses:["fc-col-header-cell-cushion",o.isSticky&&"fc-sticky"]})))}}const $q=Vt({weekday:"long"});class Gq extends ft{render(){let{props:e}=this,{dateEnv:s,theme:r,viewApi:a,options:o}=this.context,c=Fs(new Date(2592e5),e.dow),u={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},m=s.format(c,e.dayHeaderFormat),f=Object.assign(Object.assign(Object.assign(Object.assign({date:c},u),{view:a}),e.extraRenderProps),{text:m});return G(_n,{elTag:"th",elClasses:[$6,...Fv(u,r),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:f,generatorName:"dayHeaderContent",customGenerator:o.dayHeaderContent,defaultGenerator:G6,classNameGenerator:o.dayHeaderClassNames,didMount:o.dayHeaderDidMount,willUnmount:o.dayHeaderWillUnmount},x=>G("div",{className:"fc-scrollgrid-sync-inner"},G(x,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":s.format(c,$q)}})))}}class W6 extends ft{constructor(){super(...arguments),this.createDayHeaderFormatter=Me(Wq)}render(){let{context:e}=this,{dates:s,dateProfile:r,datesRepDistinctDays:a,renderIntro:o}=this.props,c=this.createDayHeaderFormatter(e.options.dayHeaderFormat,a,s.length);return G(Gc,{unit:"day"},(u,m)=>G("tr",{role:"row"},o&&o("day"),s.map(f=>a?G(qq,{key:f.toISOString(),date:f,dateProfile:r,todayRange:m,colCnt:s.length,dayHeaderFormat:c}):G(Gq,{key:f.getUTCDay(),dow:f.getUTCDay(),dayHeaderFormat:c}))))}}function Wq(t,e,s){return t||zq(e,s)}class Q6{constructor(e,s){let r=e.start,{end:a}=e,o=[],c=[],u=-1;for(;r<a;)s.isHiddenDay(r)?o.push(u+.5):(u+=1,o.push(u),c.push(r)),r=Fs(r,1);this.dates=c,this.indices=o,this.cnt=c.length}sliceRange(e){let s=this.getDateDayIndex(e.start),r=this.getDateDayIndex(Fs(e.end,-1)),a=Math.max(0,s),o=Math.min(this.cnt-1,r);return a=Math.ceil(a),o=Math.floor(o),a<=o?{firstIndex:a,lastIndex:o,isStart:s===a,isEnd:r===o}:null}getDateDayIndex(e){let{indices:s}=this,r=Math.floor(co(this.dates[0],e));return r<0?s[0]-1:r>=s.length?s[s.length-1]+1:s[r]}}class Y6{constructor(e,s){let{dates:r}=e,a,o,c;if(s){for(o=r[0].getUTCDay(),a=1;a<r.length&&r[a].getUTCDay()!==o;a+=1);c=Math.ceil(r.length/a)}else c=1,a=r.length;this.rowCnt=c,this.colCnt=a,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let s=0;s<this.rowCnt;s+=1){let r=[];for(let a=0;a<this.colCnt;a+=1)r.push(this.buildCell(s,a));e.push(r)}return e}buildCell(e,s){let r=this.daySeries.dates[e*this.colCnt+s];return{key:r.toISOString(),date:r}}buildHeaderDates(){let e=[];for(let s=0;s<this.colCnt;s+=1)e.push(this.cells[0][s].date);return e}sliceRange(e){let{colCnt:s}=this,r=this.daySeries.sliceRange(e),a=[];if(r){let{firstIndex:o,lastIndex:c}=r,u=o;for(;u<=c;){let m=Math.floor(u/s),f=Math.min((m+1)*s,c+1);a.push({row:m,firstCol:u%s,lastCol:(f-1)%s,isStart:r.isStart&&u===o,isEnd:r.isEnd&&f-1===c}),u=f}}return a}}class K6{constructor(){this.sliceBusinessHours=Me(this._sliceBusinessHours),this.sliceDateSelection=Me(this._sliceDateSpan),this.sliceEventStore=Me(this._sliceEventStore),this.sliceEventDrag=Me(this._sliceInteraction),this.sliceEventResize=Me(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,s,r,a,...o){let{eventUiBases:c}=e,u=this.sliceEventStore(e.eventStore,c,s,r,...o);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,s,r,c,a,...o),businessHourSegs:this.sliceBusinessHours(e.businessHours,s,r,a,...o),fgEventSegs:u.fg,bgEventSegs:u.bg,eventDrag:this.sliceEventDrag(e.eventDrag,c,s,r,...o),eventResize:this.sliceEventResize(e.eventResize,c,s,r,...o),eventSelection:e.eventSelection}}sliceNowDate(e,s,r,a,...o){return this._sliceDateSpan({range:{start:e,end:Pi(e,1)},allDay:!1},s,r,{},a,...o)}_sliceBusinessHours(e,s,r,a,...o){return e?this._sliceEventStore(eo(e,Qm(s,!!r),a),{},s,r,...o).bg:[]}_sliceEventStore(e,s,r,a,...o){if(e){let c=__(e,s,Qm(r,!!a),a);return{bg:this.sliceEventRanges(c.bg,o),fg:this.sliceEventRanges(c.fg,o)}}return{bg:[],fg:[]}}_sliceInteraction(e,s,r,a,...o){if(!e)return null;let c=__(e.mutatedEvents,s,Qm(r,!!a),a);return{segs:this.sliceEventRanges(c.fg,o),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,s,r,a,o,...c){if(!e)return[];let u=Qm(s,!!r),m=Jl(e.range,u);if(m){e=Object.assign(Object.assign({},e),{range:m});let f=gq(e,a,o),x=this.sliceRange(e.range,...c);for(let v of x)v.eventRange=f;return x}return[]}sliceEventRanges(e,s){let r=[];for(let a of e)r.push(...this.sliceEventRange(a,s));return r}sliceEventRange(e,s){let r=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(r={start:r.start,end:Fs(r.start,1)});let a=this.sliceRange(r,...s);for(let o of a)o.eventRange=e,o.isStart=e.isStart&&o.isStart,o.isEnd=e.isEnd&&o.isEnd;return a}}function Qm(t,e){let s=t.activeRange;return e?s:{start:Pi(s.start,t.slotMinTime.milliseconds),end:Pi(s.end,t.slotMaxTime.milliseconds-864e5)}}function X6(t,e,s){let{instances:r}=t.mutatedEvents;for(let a in r)if(!Yg(e.validRange,r[a].range))return!1;return Z6({eventDrag:t},s)}function Qq(t,e,s){return Yg(e.validRange,t.range)?Z6({dateSelection:t},s):!1}function Z6(t,e){let s=e.getCurrentData(),r=Object.assign({businessHours:s.businessHours,dateSelection:"",eventStore:s.eventStore,eventUiBases:s.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||Yq)(r,e)}function Yq(t,e,s={},r){return!(t.eventDrag&&!Kq(t,e,s,r)||t.dateSelection&&!Xq(t,e,s,r))}function Kq(t,e,s,r){let a=e.getCurrentData(),o=t.eventDrag,c=o.mutatedEvents,u=c.defs,m=c.instances,f=rg(u,o.isEvent?t.eventUiBases:{"":a.selectionConfig});r&&(f=Da(f,r));let x=Wz(t.eventStore,o.affectedEvents.instances),v=x.defs,y=x.instances,N=rg(v,t.eventUiBases);for(let w in m){let E=m[w],_=E.range,R=f[E.defId],I=u[E.defId];if(!J6(R.constraints,_,x,t.businessHours,e))return!1;let{eventOverlap:V}=e.options,z=typeof V=="function"?V:null;for(let P in y){let C=y[P];if(Iv(_,C.range)&&(N[C.defId].overlap===!1&&o.isEvent||R.overlap===!1||z&&!z(new Mt(e,v[C.defId],C),new Mt(e,I,E))))return!1}let F=a.eventStore;for(let P of R.allows){let C=Object.assign(Object.assign({},s),{range:E.range,allDay:I.allDay}),D=F.defs[I.defId],k=F.instances[w],O;if(D?O=new Mt(e,D,k):O=new Mt(e,I),!P(Lv(C,e),O))return!1}}return!0}function Xq(t,e,s,r){let a=t.eventStore,o=a.defs,c=a.instances,u=t.dateSelection,m=u.range,{selectionConfig:f}=e.getCurrentData();if(r&&(f=r(f)),!J6(f.constraints,m,a,t.businessHours,e))return!1;let{selectOverlap:x}=e.options,v=typeof x=="function"?x:null;for(let y in c){let N=c[y];if(Iv(m,N.range)&&(f.overlap===!1||v&&!v(new Mt(e,o[N.defId],N),null)))return!1}for(let y of f.allows){let N=Object.assign(Object.assign({},s),u);if(!y(Lv(N,e),null))return!1}return!0}function J6(t,e,s,r,a){for(let o of t)if(!Jq(Zq(o,e,s,r,a),e))return!1;return!0}function Zq(t,e,s,r,a){return t==="businessHours"?Gx(eo(r,e,a)):typeof t=="string"?Gx(Kg(s,o=>o.groupId===t)):typeof t=="object"&&t?Gx(eo(t,e,a)):[]}function Gx(t){let{instances:e}=t,s=[];for(let r in e)s.push(e[r].range);return s}function Jq(t,e){for(let s of t)if(Yg(s,e))return!0;return!1}const Ym=/^(visible|hidden)$/;class e$ extends ft{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Pr(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:s,liquidIsAbsolute:r}=e,a=s&&r,o=["fc-scroller"];return s&&(r?o.push("fc-scroller-liquid-absolute"):o.push("fc-scroller-liquid")),G("div",{ref:this.handleEl,className:o.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:a&&-(e.overcomeLeft||0)||"",right:a&&-(e.overcomeRight||0)||"",bottom:a&&-(e.overcomeBottom||0)||"",marginLeft:!a&&-(e.overcomeLeft||0)||"",marginRight:!a&&-(e.overcomeRight||0)||"",marginBottom:!a&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(Ym.test(this.props.overflowX))return!1;let{el:e}=this,s=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:r}=e;for(let a=0;a<r.length;a+=1)if(r[a].getBoundingClientRect().width>s)return!0;return!1}needsYScrolling(){if(Ym.test(this.props.overflowY))return!1;let{el:e}=this,s=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:r}=e;for(let a=0;a<r.length;a+=1)if(r[a].getBoundingClientRect().height>s)return!0;return!1}getXScrollbarWidth(){return Ym.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return Ym.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class ga{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(s,r)=>{let{depths:a,currentMap:o}=this,c=!1,u=!1;s!==null?(c=r in o,o[r]=s,a[r]=(a[r]||0)+1,u=!0):(a[r]-=1,a[r]||(delete o[r],delete this.callbackMap[r],c=!0)),this.masterCallback&&(c&&this.masterCallback(null,String(r)),u&&this.masterCallback(s,String(r)))}}createRef(e){let s=this.callbackMap[e];return s||(s=this.callbackMap[e]=r=>{this.handleValue(r,String(e))}),s}collect(e,s,r){return hz(this.currentMap,e,s,r)}getAll(){return Rv(this.currentMap)}}function t$(t){let e=dH(t,".fc-scrollgrid-shrink"),s=0;for(let r of e)s=Math.max(s,EH(r));return Math.ceil(s)}function eR(t,e){return t.liquid&&e.liquid}function s$(t,e){return e.maxHeight!=null||eR(t,e)}function n$(t,e,s,r){let{expandRows:a}=s;return typeof e.content=="function"?e.content(s):G("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:s.tableMinWidth,width:s.clientWidth,height:a?s.clientHeight:""}},s.tableColGroupNode,G(r?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(s):e.rowContent))}function r$(t,e){return Mi(t,e,ar)}function a$(t,e){let s=[];for(let r of t){let a=r.span||1;for(let o=0;o<a;o+=1)s.push(G("col",{style:{width:r.width==="shrink"?i$(e):r.width||"",minWidth:r.minWidth||""}}))}return G("colgroup",{},...s)}function i$(t){return t??4}function l$(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function o$(t,e){let s=["fc-scrollgrid",e.theme.getClass("table")];return t&&s.push("fc-scrollgrid-liquid"),s}function c$(t,e){let s=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&s.push("fc-scrollgrid-section-liquid"),t.isSticky&&s.push("fc-scrollgrid-section-sticky"),s}function Kb(t){return G("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function ig(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function tR(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class $v extends ft{constructor(){super(...arguments),this.processCols=Me(e=>e,r$),this.renderMicroColGroup=Me(a$),this.scrollerRefs=new ga,this.scrollerElRefs=new ga(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:s,context:r}=this,a=e.sections||[],o=this.processCols(e.cols),c=this.renderMicroColGroup(o,s.shrinkWidth),u=o$(e.liquid,r);e.collapsibleWidth&&u.push("fc-scrollgrid-collapsible");let m=a.length,f=0,x,v=[],y=[],N=[];for(;f<m&&(x=a[f]).type==="header";)v.push(this.renderSection(x,c,!0)),f+=1;for(;f<m&&(x=a[f]).type==="body";)y.push(this.renderSection(x,c,!1)),f+=1;for(;f<m&&(x=a[f]).type==="footer";)N.push(this.renderSection(x,c,!0)),f+=1;let w=!U6();const E={role:"rowgroup"};return G("table",{role:"grid",className:u.join(" "),style:{height:e.height}},!!(!w&&v.length)&&G("thead",E,...v),!!(!w&&y.length)&&G("tbody",E,...y),!!(!w&&N.length)&&G("tfoot",E,...N),w&&G("tbody",E,...v,...y,...N))}renderSection(e,s,r){return"outerContent"in e?G(At,{key:e.key},e.outerContent):G("tr",{key:e.key,role:"presentation",className:c$(e,this.props.liquid).join(" ")},this.renderChunkTd(e,s,e.chunk,r))}renderChunkTd(e,s,r,a){if("outerContent"in r)return r.outerContent;let{props:o}=this,{forceYScrollbars:c,scrollerClientWidths:u,scrollerClientHeights:m}=this.state,f=s$(o,e),x=eR(o,e),v=o.liquid?c?"scroll":f?"auto":"hidden":"visible",y=e.key,N=n$(e,r,{tableColGroupNode:s,tableMinWidth:"",clientWidth:!o.collapsibleWidth&&u[y]!==void 0?u[y]:null,clientHeight:m[y]!==void 0?m[y]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},a);return G(a?"th":"td",{ref:r.elRef,role:"presentation"},G("div",{className:`fc-scroller-harness${x?" fc-scroller-harness-liquid":""}`},G(e$,{ref:this.scrollerRefs.createRef(y),elRef:this.scrollerElRefs.createRef(y),overflowY:v,overflowX:o.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:x,liquidIsAbsolute:!0},N)))}_handleScrollerEl(e,s){let r=d$(this.props.sections,s);r&&Pr(r.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return l$(this.props.cols)?t$(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=kq(),{scrollerRefs:s,scrollerElRefs:r}=this,a=!1,o={},c={};for(let u in s.currentMap){let m=s.currentMap[u];if(m&&m.needsYScrolling()){a=!0;break}}for(let u of this.props.sections){let m=u.key,f=r.currentMap[m];if(f){let x=f.parentNode;o[m]=Math.floor(x.getBoundingClientRect().width-(a?e.y:0)),c[m]=Math.floor(x.getBoundingClientRect().height)}}return{forceYScrollbars:a,scrollerClientWidths:o,scrollerClientHeights:c}}}$v.addStateEquality({scrollerClientWidths:ar,scrollerClientHeights:ar});function d$(t,e){for(let s of t)if(s.key===e)return s;return null}class Gv extends ft{constructor(){super(...arguments),this.buildPublicEvent=Me((e,s,r)=>new Mt(e,s,r)),this.handleEl=e=>{this.el=e,Pr(this.props.elRef,e),e&&S_(e,this.props.seg)}}render(){const{props:e,context:s}=this,{options:r}=s,{seg:a}=e,{eventRange:o}=a,{ui:c}=o,u={event:this.buildPublicEvent(s,o.def,o.instance),view:s.viewApi,timeText:e.timeText,textColor:c.textColor,backgroundColor:c.backgroundColor,borderColor:c.borderColor,isDraggable:!e.disableDragging&&aq(a,s),isStartResizable:!e.disableResizing&&iq(a,s),isEndResizable:!e.disableResizing&&lq(a),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!a.isStart,isEnd:!!a.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return G(_n,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...oq(u),...a.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:u,generatorName:"eventContent",customGenerator:r.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.eventClassNames,didMount:r.eventDidMount,willUnmount:r.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&S_(this.el,this.props.seg)}}class Wv extends ft{render(){let{props:e,context:s}=this,{options:r}=s,{seg:a}=e,{ui:o}=a.eventRange,c=r.eventTimeFormat||e.defaultTimeFormat,u=M6(a,c,s,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return G(Gv,Object.assign({},e,{elTag:"a",elStyle:{borderColor:o.borderColor,backgroundColor:o.backgroundColor},elAttrs:O6(a,s),defaultGenerator:u$,timeText:u}),(m,f)=>G(At,null,G(m,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:f.textColor}}),!!f.isStartResizable&&G("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!f.isEndResizable&&G("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}Wv.addPropsEquality({seg:ar});function u$(t){return G("div",{className:"fc-event-main-frame"},t.timeText&&G("div",{className:"fc-event-time"},t.timeText),G("div",{className:"fc-event-title-container"},G("div",{className:"fc-event-title fc-sticky"},t.event.title||G(At,null," "))))}const Qv=t=>G(ka.Consumer,null,e=>{let{options:s}=e,r={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return G(_n,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:r,generatorName:"nowIndicatorContent",customGenerator:s.nowIndicatorContent,classNameGenerator:s.nowIndicatorClassNames,didMount:s.nowIndicatorDidMount,willUnmount:s.nowIndicatorWillUnmount},t.children)}),h$=Vt({day:"numeric"});class Yv extends ft{constructor(){super(...arguments),this.refineRenderProps=xf(m$)}render(){let{props:e,context:s}=this,{options:r}=s,a=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:s.viewApi,dateEnv:s.dateEnv,monthStartFormat:r.monthStartFormat});return G(_n,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),a.isDisabled?{}:{"data-date":Sv(e.date)}),elClasses:[...Fv(a,s.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:a,generatorName:"dayCellContent",customGenerator:r.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:a.isDisabled?void 0:r.dayCellClassNames,didMount:r.dayCellDidMount,willUnmount:r.dayCellWillUnmount},e.children)}}function Kv(t){return!!(t.dayCellContent||qb("dayCellContent",t))}function m$(t){let{date:e,dateEnv:s,dateProfile:r,isMonthStart:a}=t,o=B6(e,t.todayRange,null,r),c=t.showDayNumber?s.format(e,a?t.monthStartFormat:h$):"";return Object.assign(Object.assign(Object.assign({date:s.toDate(e),view:t.viewApi},o),{isMonthStart:a,dayNumberText:c}),t.extraRenderProps)}class sR extends ft{render(){let{props:e}=this,{seg:s}=e;return G(Gv,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:s.eventRange.ui.backgroundColor},defaultGenerator:f$,seg:s,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function f$(t){let{title:e}=t.event;return e&&G("div",{className:"fc-event-title"},t.event.title)}function nR(t){return G("div",{className:`fc-${t}`})}const rR=t=>G(ka.Consumer,null,e=>{let{dateEnv:s,options:r}=e,{date:a}=t,o=r.weekNumberFormat||t.defaultFormat,c=s.computeWeekNumber(a),u=s.format(a,o),m={num:c,text:u,date:a};return G(_n,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:m,generatorName:"weekNumberContent",customGenerator:r.weekNumberContent,defaultGenerator:g$,classNameGenerator:r.weekNumberClassNames,didMount:r.weekNumberDidMount,willUnmount:r.weekNumberWillUnmount},t.children)});function g$(t){return t.text}const Wx=10;class p$ extends ft{constructor(){super(...arguments),this.state={titleId:Wg()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Pr(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const s=l6(e);this.rootEl.contains(s)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:s}=this.context,{props:r,state:a}=this,o=["fc-popover",e.getClass("popover")].concat(r.extraClassNames||[]);return KB(G("div",Object.assign({},r.extraAttrs,{id:r.id,className:o.join(" "),"aria-labelledby":a.titleId,ref:this.handleRootEl}),G("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},G("span",{className:"fc-popover-title",id:a.titleId},r.title),G("span",{className:"fc-popover-close "+e.getIconClass("close"),title:s.closeHint,onClick:this.handleCloseClick})),G("div",{className:"fc-popover-body "+e.getClass("popoverContent")},r.children)),r.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:s,alignGridTop:r}=this.props,{rootEl:a}=this,o=Lq(s);if(o){let c=a.getBoundingClientRect(),u=r?Vs(s,".fc-scrollgrid").getBoundingClientRect().top:o.top,m=e?o.right-c.width:o.left;u=Math.max(u,Wx),m=Math.min(m,document.documentElement.clientWidth-Wx-c.width),m=Math.max(m,Wx);let f=a.offsetParent.getBoundingClientRect();ju(a,{top:u-f.top,left:m-f.left})}}}class x$ extends Lr{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:s}=this.context,{props:r}=this,{startDate:a,todayRange:o,dateProfile:c}=r,u=s.format(a,e.dayPopoverFormat);return G(Yv,{elRef:this.handleRootEl,date:a,dateProfile:c,todayRange:o},(m,f,x)=>G(p$,{elRef:x.ref,id:r.id,title:u,extraClassNames:["fc-more-popover"].concat(x.className||[]),extraAttrs:x,parentEl:r.parentEl,alignmentEl:r.alignmentEl,alignGridTop:r.alignGridTop,onClose:r.onClose},Kv(e)&&G(m,{elTag:"div",elClasses:["fc-more-popover-misc"]}),r.children))}queryHit(e,s,r,a){let{rootEl:o,props:c}=this;return e>=0&&e<r&&s>=0&&s<a?{dateProfile:c.dateProfile,dateSpan:Object.assign({allDay:!c.forceTimed,range:{start:c.startDate,end:c.endDate}},c.extraDateSpan),dayEl:o,rect:{left:0,top:0,right:r,bottom:a},layer:1}:null}}class aR extends ft{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:Wg()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Pr(this.props.elRef,e)},this.handleClick=e=>{let{props:s,context:r}=this,{moreLinkClick:a}=r.options,o=C_(s).start;function c(u){let{def:m,instance:f,range:x}=u.eventRange;return{event:new Mt(r,m,f),start:r.dateEnv.toDate(x.start),end:r.dateEnv.toDate(x.end),isStart:u.isStart,isEnd:u.isEnd}}typeof a=="function"&&(a=a({date:o,allDay:!!s.allDayDate,allSegs:s.allSegs.map(c),hiddenSegs:s.hiddenSegs.map(c),jsEvent:e,view:r.viewApi})),!a||a==="popover"?this.setState({isPopoverOpen:!0}):typeof a=="string"&&r.calendarApi.zoomTo(o,a)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:s}=this;return G(ka.Consumer,null,r=>{let{viewApi:a,options:o,calendarApi:c}=r,{moreLinkText:u}=o,{moreCnt:m}=e,f=C_(e),x=typeof u=="function"?u.call(c,m):`+${m} ${u}`,v=Eu(o.moreLinkHint,[m],x),y={num:m,shortText:`+${m}`,text:x,view:a};return G(At,null,!!e.moreCnt&&G(_n,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),c6(this.handleClick)),{title:v,"aria-expanded":s.isPopoverOpen,"aria-controls":s.isPopoverOpen?s.popoverId:""}),renderProps:y,generatorName:"moreLinkContent",customGenerator:o.moreLinkContent,defaultGenerator:e.defaultGenerator||b$,classNameGenerator:o.moreLinkClassNames,didMount:o.moreLinkDidMount,willUnmount:o.moreLinkWillUnmount},e.children),s.isPopoverOpen&&G(x$,{id:s.popoverId,startDate:f.start,endDate:f.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Vs(this.linkEl,".fc-view-harness"))}}function b$(t){return t.text}function C_(t){if(t.allDayDate)return{start:t.allDayDate,end:Fs(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:iR(e),end:v$(e)}}function iR(t){return t.reduce(y$).eventRange.range.start}function y$(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function v$(t){return t.reduce(N$).eventRange.range.end}function N$(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class w${constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let s of this.handlers)s(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class j$ extends w${constructor(){super(...arguments),this.map=new Map}handle(e){const{map:s}=this;let r=!1;e.isActive?(s.set(e.id,e),r=!0):s.has(e.id)&&(s.delete(e.id),r=!0),r&&this.set(s)}}const E$=[],lR={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},oR=Object.assign(Object.assign({},lR),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function _$(t){let e=t.length>0?t[0].code:"en",s=E$.concat(t),r={en:oR};for(let a of s)r[a.code]=a;return{map:r,defaultCode:e}}function cR(t,e){return typeof t=="object"&&!Array.isArray(t)?dR(t.code,[t.code],t):S$(t,e)}function S$(t,e){let s=[].concat(t||[]),r=A$(s,e)||oR;return dR(t,s,r)}function A$(t,e){for(let s=0;s<t.length;s+=1){let r=t[s].toLocaleLowerCase().split("-");for(let a=r.length;a>0;a-=1){let o=r.slice(0,a).join("-");if(e[o])return e[o]}}return null}function dR(t,e,s){let r=Tv([lR,s],["buttonText"]);delete r.code;let{week:a}=r;return delete r.week,{codeArg:t,codes:e,week:a,simpleNumberFormat:new Intl.NumberFormat(t),options:r}}function Ma(t){return{id:oo(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function C$(t,e){let s={},r={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function a(o){for(let c of o){const u=c.name,m=s[u];m===void 0?(s[u]=c.id,a(c.deps),r=R$(r,c)):m!==c.id&&console.warn(`Duplicate plugin '${u}'`)}}return t&&a(t),a(e),r}function T$(){let t=[],e=[],s;return(r,a)=>((!s||!Mi(r,t)||!Mi(a,e))&&(s=C$(r,a)),t=r,e=a,s)}function R$(t,e){return{premiumReleaseDate:D$(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function D$(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class qi extends sh{}qi.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};qi.prototype.baseIconClass="fc-icon";qi.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};qi.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};qi.prototype.iconOverrideOption="buttonIcons";qi.prototype.iconOverrideCustomButtonOption="icon";qi.prototype.iconOverridePrefix="fc-icon-";function I$(t,e){let s={},r;for(r in t)Xb(r,s,t,e);for(r in e)Xb(r,s,t,e);return s}function Xb(t,e,s,r){if(e[t])return e[t];let a=k$(t,e,s,r);return a&&(e[t]=a),a}function k$(t,e,s,r){let a=s[t],o=r[t],c=x=>a&&a[x]!==null?a[x]:o&&o[x]!==null?o[x]:null,u=c("component"),m=c("superType"),f=null;if(m){if(m===t)throw new Error("Can't have a custom view type that references itself");f=Xb(m,e,s,r)}return!u&&f&&(u=f.component),u?{type:t,component:u,defaults:Object.assign(Object.assign({},f?f.defaults:{}),a?a.rawOptions:{}),overrides:Object.assign(Object.assign({},f?f.overrides:{}),o?o.rawOptions:{})}:null}function T_(t){return Da(t,M$)}function M$(t){let e=typeof t=="function"?{component:t}:t,{component:s}=e;return e.content?s=R_(e):s&&!(s.prototype instanceof ft)&&(s=R_(Object.assign(Object.assign({},e),{content:s}))),{superType:e.type,component:s,rawOptions:e}}function R_(t){return e=>G(ka.Consumer,null,s=>G(_n,{elTag:"div",elClasses:b6(s.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:s.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function P$(t,e,s,r){let a=T_(t),o=T_(e.views),c=I$(a,o);return Da(c,u=>O$(u,o,e,s,r))}function O$(t,e,s,r,a){let o=t.overrides.duration||t.defaults.duration||r.duration||s.duration,c=null,u="",m="",f={};if(o&&(c=L$(o),c)){let y=zb(c);u=y.unit,y.value===1&&(m=u,f=e[u]?e[u].rawOptions:{})}let x=y=>{let N=y.buttonText||{},w=t.defaults.buttonTextKey;return w!=null&&N[w]!=null?N[w]:N[t.type]!=null?N[t.type]:N[m]!=null?N[m]:null},v=y=>{let N=y.buttonHints||{},w=t.defaults.buttonTextKey;return w!=null&&N[w]!=null?N[w]:N[t.type]!=null?N[t.type]:N[m]!=null?N[m]:null};return{type:t.type,component:t.component,duration:c,durationUnit:u,singleUnit:m,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},f),t.overrides),buttonTextOverride:x(r)||x(s)||t.overrides.buttonText,buttonTextDefault:x(a)||t.defaults.buttonText||x(_u)||t.type,buttonTitleOverride:v(r)||v(s)||t.overrides.buttonHint,buttonTitleDefault:v(a)||t.defaults.buttonHint||v(_u)}}let D_={};function L$(t){let e=JSON.stringify(t),s=D_[e];return s===void 0&&(s=st(t),D_[e]=s),s}function V$(t,e){switch(e.type){case"CHANGE_VIEW_TYPE":t=e.viewType}return t}function U$(t,e){switch(e.type){case"CHANGE_DATE":return e.dateMarker;default:return t}}function F$(t,e,s){let r=t.initialDate;return r!=null?e.createMarker(r):s.getDateMarker()}function B$(t,e){switch(e.type){case"SET_OPTION":return Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue});default:return t}}function H$(t,e,s,r){let a;switch(e.type){case"CHANGE_VIEW_TYPE":return r.build(e.dateMarker||s);case"CHANGE_DATE":return r.build(e.dateMarker);case"PREV":if(a=r.buildPrev(t,s),a.isValid)return a;break;case"NEXT":if(a=r.buildNext(t,s),a.isValid)return a;break}return t}function z$(t,e,s){let r=e?e.activeRange:null;return hR({},K$(t,s),r,s)}function q$(t,e,s,r){let a=s?s.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return hR(t,e.sources,a,r);case"REMOVE_EVENT_SOURCE":return G$(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return s?mR(t,a,r):t;case"FETCH_EVENT_SOURCES":return Xv(t,e.sourceIds?m6(e.sourceIds):fR(t,r),a,e.isRefetch||!1,r);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return Y$(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function $$(t,e,s){let r=e?e.activeRange:null;return Xv(t,fR(t,s),r,!0,s)}function uR(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function hR(t,e,s,r){let a={};for(let o of e)a[o.sourceId]=o;return s&&(a=mR(a,s,r)),Object.assign(Object.assign({},t),a)}function G$(t,e){return Zl(t,s=>s.sourceId!==e)}function mR(t,e,s){return Xv(t,Zl(t,r=>W$(r,e,s)),e,!1,s)}function W$(t,e,s){return gR(t,s)?!s.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function Xv(t,e,s,r,a){let o={};for(let c in t){let u=t[c];e[c]?o[c]=Q$(u,s,r,a):o[c]=u}return o}function Q$(t,e,s,r){let{options:a,calendarApi:o}=r,c=r.pluginHooks.eventSourceDefs[t.sourceDefId],u=oo();return c.fetch({eventSource:t,range:e,isRefetch:s,context:r},m=>{let{rawEvents:f}=m;a.eventSourceSuccess&&(f=a.eventSourceSuccess.call(o,f,m.response)||f),t.success&&(f=t.success.call(o,f,m.response)||f),r.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:u,fetchRange:e,rawEvents:f})},m=>{let f=!1;a.eventSourceFailure&&(a.eventSourceFailure.call(o,m),f=!0),t.failure&&(t.failure(m),f=!0),f||console.warn(m.message,m),r.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:u,fetchRange:e,error:m})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:u})}function Y$(t,e,s,r){let a=t[e];return a&&s===a.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},a),{isFetching:!1,fetchRange:r})}):t}function fR(t,e){return Zl(t,s=>gR(s,e))}function K$(t,e){let s=A6(e),r=[].concat(t.eventSources||[]),a=[];t.initialEvents&&r.unshift(t.initialEvents),t.events&&r.unshift(t.events);for(let o of r){let c=S6(o,e,s);c&&a.push(c)}return a}function gR(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function X$(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function Z$(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function J$(t,e){let s;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return s=e.state,{affectedEvents:s.affectedEvents,mutatedEvents:s.mutatedEvents,isEvent:s.isEvent};default:return t}}function eG(t,e){let s;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return s=e.state,{affectedEvents:s.affectedEvents,mutatedEvents:s.mutatedEvents,isEvent:s.isEvent};default:return t}}function tG(t,e,s,r,a){let o=t.headerToolbar?I_(t.headerToolbar,t,e,s,r,a):null,c=t.footerToolbar?I_(t.footerToolbar,t,e,s,r,a):null;return{header:o,footer:c}}function I_(t,e,s,r,a,o){let c={},u=[],m=!1;for(let f in t){let x=t[f],v=sG(x,e,s,r,a,o);c[f]=v.widgets,u.push(...v.viewsWithButtons),m=m||v.hasTitle}return{sectionWidgets:c,viewsWithButtons:u,hasTitle:m}}function sG(t,e,s,r,a,o){let c=e.direction==="rtl",u=e.customButtons||{},m=s.buttonText||{},f=e.buttonText||{},x=s.buttonHints||{},v=e.buttonHints||{},y=t?t.split(" "):[],N=[],w=!1;return{widgets:y.map(_=>_.split(",").map(R=>{if(R==="title")return w=!0,{buttonName:R};let I,V,z,F,P,C;if(I=u[R])z=D=>{I.click&&I.click.call(D.target,D,D.target)},(F=r.getCustomButtonIconClass(I))||(F=r.getIconClass(R,c))||(P=I.text),C=I.hint||I.text;else if(V=a[R]){N.push(R),z=()=>{o.changeView(R)},(P=V.buttonTextOverride)||(F=r.getIconClass(R,c))||(P=V.buttonTextDefault);let D=V.buttonTextOverride||V.buttonTextDefault;C=Eu(V.buttonTitleOverride||V.buttonTitleDefault||e.viewHint,[D,R],D)}else if(o[R])if(z=()=>{o[R]()},(P=m[R])||(F=r.getIconClass(R,c))||(P=f[R]),R==="prevYear"||R==="nextYear"){let D=R==="prevYear"?"prev":"next";C=Eu(x[D]||v[D],[f.year||"year","year"],f[R])}else C=D=>Eu(x[R]||v[R],[f[D]||D,D],f[R]);return{buttonName:R,buttonClick:z,buttonIcon:F,buttonText:P,buttonHint:C}})),viewsWithButtons:N,hasTitle:w}}class nG{constructor(e,s,r){this.type=e,this.getCurrentData=s,this.dateEnv=r}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let rG={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const aG=Ma({name:"array-event-source",eventSourceDefs:[rG]});let iG={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,s){const{dateEnv:r}=t.context,a=t.eventSource.meta;pq(a.bind(null,L6(t.range,r)),o=>e({rawEvents:o}),s)}};const lG=Ma({name:"func-event-source",eventSourceDefs:[iG]}),oG={method:String,extraParams:re,startParam:String,endParam:String,timeZoneParam:String};let cG={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,s){const{meta:r}=t.eventSource,a=uG(r,t.range,t.context);xq(r.method,r.url,a).then(([o,c])=>{e({rawEvents:o,response:c})},s)}};const dG=Ma({name:"json-event-source",eventSourceRefiners:oG,eventSourceDefs:[cG]});function uG(t,e,s){let{dateEnv:r,options:a}=s,o,c,u,m,f={};return o=t.startParam,o==null&&(o=a.startParam),c=t.endParam,c==null&&(c=a.endParam),u=t.timeZoneParam,u==null&&(u=a.timeZoneParam),typeof t.extraParams=="function"?m=t.extraParams():m=t.extraParams||{},Object.assign(f,m),f[o]=r.formatIso(e.start),f[c]=r.formatIso(e.end),r.timeZone!=="local"&&(f[u]=r.timeZone),f}const hG={daysOfWeek:re,startTime:st,endTime:st,duration:st,startRecur:re,endRecur:re};let mG={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let s={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},r;return t.duration&&(r=t.duration),!r&&t.startTime&&t.endTime&&(r=CH(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:r,typeData:s}}return null},expand(t,e,s){let r=Jl(e,{start:t.startRecur,end:t.endRecur});return r?gG(t.daysOfWeek,t.startTime,t.dateEnv,s,r):[]}};const fG=Ma({name:"simple-recurring-event",recurringTypes:[mG],eventRefiners:hG});function gG(t,e,s,r,a){let o=t?m6(t):null,c=Ct(a.start),u=a.end,m=[];for(;c<u;){let f;(!o||o[c.getUTCDay()])&&(e?f=r.add(c,e):f=c,m.push(r.createMarker(s.toDate(f)))),c=Fs(c,1)}return m}const pG=Ma({name:"change-handler",optionChangeHandlers:{events(t,e){k_([t],e)},eventSources:k_}});function k_(t,e){let s=Rv(e.getCurrentData().eventSources);if(s.length===1&&t.length===1&&Array.isArray(s[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:s[0].sourceId,rawEvents:t[0]});return}let r=[];for(let a of t){let o=!1;for(let c=0;c<s.length;c+=1)if(s[c]._raw===a){s.splice(c,1),o=!0;break}o||r.push(a)}for(let a of s)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:a.sourceId});for(let a of r)e.calendarApi.addEventSource(a)}function xG(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},L6(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function bG(t,e){let{emitter:s}=e;s.hasHandlers("eventsSet")&&s.trigger("eventsSet",Fl(t,e))}const yG=[aG,lG,dG,fG,pG,Ma({name:"misc",isLoadingFuncs:[t=>uR(t.eventSources)],propSetHandlers:{dateProfile:xG,eventStore:bG}})];class vG{constructor(e,s){this.runTaskOption=e,this.drainedOption=s,this.queue=[],this.delayedRunner=new Nv(this.drain.bind(this))}request(e,s){this.queue.push(e),this.delayedRunner.request(s)}pause(e){this.delayedRunner.pause(e)}resume(e,s){this.delayedRunner.resume(e,s)}drain(){let{queue:e}=this;for(;e.length;){let s=[],r;for(;r=e.shift();)this.runTask(r),s.push(r);this.drained(s)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function NG(t,e,s){let r;return/^(year|month)$/.test(t.currentRangeUnit)?r=t.currentRange:r=t.activeRange,s.formatRange(r.start,r.end,Vt(e.titleFormat||wG(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function wG(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let s=Kf(t.currentRange.start,t.currentRange.end);return s!==null&&s>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class M_{constructor(){this.resetListeners=new Set}handleInput(e,s){const r=this.dateEnv;if(e!==r&&(typeof s=="function"?this.nowFn=s:r||(this.nowAnchorDate=e.toDate(s?e.createMarker(s):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,r))for(const a of this.resetListeners.values())a()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class jG{constructor(e){this.computeCurrentViewData=Me(this._computeCurrentViewData),this.organizeRawLocales=Me(_$),this.buildLocale=Me(cR),this.buildPluginHooks=T$(),this.buildDateEnv=Me(EG),this.buildTheme=Me(_G),this.parseToolbars=Me(tG),this.buildViewSpecs=Me(P$),this.buildDateProfileGenerator=xf(SG),this.buildViewApi=Me(AG),this.buildViewUiProps=xf(RG),this.buildEventUiBySource=Me(CG,ar),this.buildEventUiBases=Me(TG),this.parseContextBusinessHours=xf(DG),this.buildTitle=Me(NG),this.nowManager=new M_,this.emitter=new Xg,this.actionRunner=new vG(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=y=>{this.actionRunner.request(y)},this.props=e,this.actionRunner.pause(),this.nowManager=new M_;let s={},r=this.computeOptionsData(e.optionOverrides,s,e.calendarApi),a=r.calendarOptions.initialView||r.pluginHooks.initialView,o=this.computeCurrentViewData(a,r,e.optionOverrides,s);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(o.options);let c={nowManager:this.nowManager,dateEnv:r.dateEnv,options:r.calendarOptions,pluginHooks:r.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},u=F$(r.calendarOptions,r.dateEnv,this.nowManager),m=o.dateProfileGenerator.build(u);va(m.activeRange,u)||(u=m.currentRange.start);for(let y of r.pluginHooks.contextInit)y(c);let f=z$(r.calendarOptions,m,c),x={dynamicOptionOverrides:s,currentViewType:a,currentDate:u,dateProfile:m,businessHours:this.parseContextBusinessHours(c),eventSources:f,eventUiBases:{},eventStore:jn(),renderableEventStore:jn(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(c).selectionConfig},v=Object.assign(Object.assign({},c),x);for(let y of r.pluginHooks.reducers)Object.assign(x,y(null,null,v));Qx(x,c)&&this.emitter.trigger("loading",!0),this.state=x,this.updateData(),this.actionRunner.resume()}resetOptions(e,s){let{props:r}=this;s===void 0?r.optionOverrides=e:(r.optionOverrides=Object.assign(Object.assign({},r.optionOverrides||{}),e),this.optionsForRefining.push(...s)),(s===void 0||s.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:s,state:r,emitter:a}=this,o=B$(r.dynamicOptionOverrides,e),c=this.computeOptionsData(s.optionOverrides,o,s.calendarApi),u=V$(r.currentViewType,e),m=this.computeCurrentViewData(u,c,s.optionOverrides,o);s.calendarApi.currentDataManager=this,a.setThisContext(s.calendarApi),a.setOptions(m.options);let f={nowManager:this.nowManager,dateEnv:c.dateEnv,options:c.calendarOptions,pluginHooks:c.pluginHooks,calendarApi:s.calendarApi,dispatch:this.dispatch,emitter:a,getCurrentData:this.getCurrentData},{currentDate:x,dateProfile:v}=r;this.data&&this.data.dateProfileGenerator!==m.dateProfileGenerator&&(v=m.dateProfileGenerator.build(x)),x=U$(x,e),v=H$(v,e,x,m.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!va(v.currentRange,x))&&(x=v.currentRange.start);let y=q$(r.eventSources,e,v,f),N=zz(r.eventStore,e,y,v,f),E=uR(y)&&!m.options.progressiveEventRendering&&r.renderableEventStore||N,{eventUiSingleBase:_,selectionConfig:R}=this.buildViewUiProps(f),I=this.buildEventUiBySource(y),V=this.buildEventUiBases(E.defs,_,I),z={dynamicOptionOverrides:o,currentViewType:u,currentDate:x,dateProfile:v,eventSources:y,eventStore:N,renderableEventStore:E,selectionConfig:R,eventUiBases:V,businessHours:this.parseContextBusinessHours(f),dateSelection:X$(r.dateSelection,e),eventSelection:Z$(r.eventSelection,e),eventDrag:J$(r.eventDrag,e),eventResize:eG(r.eventResize,e)},F=Object.assign(Object.assign({},f),z);for(let D of c.pluginHooks.reducers)Object.assign(z,D(r,e,F));let P=Qx(r,f),C=Qx(z,f);!P&&C?a.trigger("loading",!0):P&&!C&&a.trigger("loading",!1),this.state=z,s.onAction&&s.onAction(e)}updateData(){let{props:e,state:s}=this,r=this.data,a=this.computeOptionsData(e.optionOverrides,s.dynamicOptionOverrides,e.calendarApi),o=this.computeCurrentViewData(s.currentViewType,a,e.optionOverrides,s.dynamicOptionOverrides),c=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(s.dateProfile,o.options,a.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},a),o),s),u=a.pluginHooks.optionChangeHandlers,m=r&&r.calendarOptions,f=a.calendarOptions;if(m&&m!==f){m.timeZone!==f.timeZone&&(s.eventSources=c.eventSources=$$(c.eventSources,s.dateProfile,c),s.eventStore=c.eventStore=j_(c.eventStore,r.dateEnv,c.dateEnv),s.renderableEventStore=c.renderableEventStore=j_(c.renderableEventStore,r.dateEnv,c.dateEnv));for(let x in u)(this.optionsForHandling.indexOf(x)!==-1||m[x]!==f[x])&&u[x](f[x],c)}this.optionsForHandling=[],e.onData&&e.onData(c)}computeOptionsData(e,s,r){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&s===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:a,pluginHooks:o,localeDefaults:c,availableLocaleData:u,extra:m}=this.processRawCalendarOptions(e,s);P_(m);let f=this.buildDateEnv(a.timeZone,a.locale,a.weekNumberCalculation,a.firstDay,a.weekText,o,u,a.defaultRangeSeparator),x=this.buildViewSpecs(o.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,c),v=this.buildTheme(a,o),y=this.parseToolbars(a,this.stableOptionOverrides,v,x,r);return this.stableCalendarOptionsData={calendarOptions:a,pluginHooks:o,dateEnv:f,viewSpecs:x,theme:v,toolbarConfig:y,localeDefaults:c,availableRawLocales:u.map}}processRawCalendarOptions(e,s){let{locales:r,locale:a}=Ux([_u,e,s]),o=this.organizeRawLocales(r),c=o.map,u=this.buildLocale(a||o.defaultCode,c).options,m=this.buildPluginHooks(e.plugins||[],yG),f=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},x_),b_),y_),m.listenerRefiners),m.optionRefiners),x={},v=Ux([_u,u,e,s]),y={},N=this.currentCalendarOptionsInput,w=this.currentCalendarOptionsRefined,E=!1;for(let _ in v)this.optionsForRefining.indexOf(_)===-1&&(v[_]===N[_]||Tl[_]&&_ in N&&Tl[_](N[_],v[_]))?y[_]=w[_]:f[_]?(y[_]=f[_](v[_]),E=!0):x[_]=N[_];return E&&(this.currentCalendarOptionsInput=v,this.currentCalendarOptionsRefined=y,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=s),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:m,availableLocaleData:o,localeDefaults:u,extra:x}}_computeCurrentViewData(e,s,r,a){let o=s.viewSpecs[e];if(!o)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:c,extra:u}=this.processRawViewOptions(o,s.pluginHooks,s.localeDefaults,r,a);P_(u),this.nowManager.handleInput(s.dateEnv,c.now);let m=this.buildDateProfileGenerator({dateProfileGeneratorClass:o.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:o.duration,durationUnit:o.durationUnit,usesMinMaxTime:o.optionDefaults.usesMinMaxTime,dateEnv:s.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:c.slotMinTime,slotMaxTime:c.slotMaxTime,showNonCurrentDates:c.showNonCurrentDates,dayCount:c.dayCount,dateAlignment:c.dateAlignment,dateIncrement:c.dateIncrement,hiddenDays:c.hiddenDays,weekends:c.weekends,validRangeInput:c.validRange,visibleRangeInput:c.visibleRange,fixedWeekCount:c.fixedWeekCount}),f=this.buildViewApi(e,this.getCurrentData,s.dateEnv);return{viewSpec:o,options:c,dateProfileGenerator:m,viewApi:f}}processRawViewOptions(e,s,r,a,o){let c=Ux([_u,e.optionDefaults,r,a,e.optionOverrides,o]),u=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},x_),b_),y_),lz),s.listenerRefiners),s.optionRefiners),m={},f=this.currentViewOptionsInput,x=this.currentViewOptionsRefined,v=!1,y={};for(let N in c)c[N]===f[N]||Tl[N]&&Tl[N](c[N],f[N])?m[N]=x[N]:(c[N]===this.currentCalendarOptionsInput[N]||Tl[N]&&Tl[N](c[N],this.currentCalendarOptionsInput[N])?N in this.currentCalendarOptionsRefined&&(m[N]=this.currentCalendarOptionsRefined[N]):u[N]?m[N]=u[N](c[N]):y[N]=c[N],v=!0);return v&&(this.currentViewOptionsInput=c,this.currentViewOptionsRefined=m),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:y}}}function EG(t,e,s,r,a,o,c,u){let m=cR(e||c.defaultCode,c.map);return new bz({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:o.namedTimeZonedImpl,locale:m,weekNumberCalculation:s,firstDay:r,weekText:a,cmdFormatter:o.cmdFormatter,defaultSeparator:u})}function _G(t,e){let s=e.themeClasses[t.themeSystem]||qi;return new s(t)}function SG(t){let e=t.dateProfileGeneratorClass||N6;return new e(t)}function AG(t,e,s){return new nG(t,e,s)}function CG(t){return Da(t,e=>e.ui)}function TG(t,e,s){let r={"":e};for(let a in t){let o=t[a];o.sourceId&&s[o.sourceId]&&(r[a]=s[o.sourceId])}return r}function RG(t){let{options:e}=t;return{eventUiSingleBase:ng({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:ng({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Qx(t,e){for(let s of e.pluginHooks.isLoadingFuncs)if(s(t))return!0;return!1}function DG(t){return Zz(t.options.businessHours,t)}function P_(t,e){for(let s in t)console.warn(`Unknown option '${s}'`)}class IG extends ft{render(){let e=this.props.widgetGroups.map(s=>this.renderWidgetGroup(s));return G("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:s}=this,{theme:r}=this.context,a=[],o=!0;for(let c of e){let{buttonName:u,buttonClick:m,buttonText:f,buttonIcon:x,buttonHint:v}=c;if(u==="title")o=!1,a.push(G("h2",{className:"fc-toolbar-title",id:s.titleId},s.title));else{let y=u===s.activeButton,N=!s.isTodayEnabled&&u==="today"||!s.isPrevEnabled&&u==="prev"||!s.isNextEnabled&&u==="next",w=[`fc-${u}-button`,r.getClass("button")];y&&w.push(r.getClass("buttonActive")),a.push(G("button",{type:"button",title:typeof v=="function"?v(s.navUnit):v,disabled:N,"aria-pressed":y,className:w.join(" "),onClick:m},f||(x?G("span",{className:x,role:"img"}):"")))}}if(a.length>1){let c=o&&r.getClass("buttonGroup")||"";return G("div",{className:c},...a)}return a[0]}}class O_ extends ft{render(){let{model:e,extraClassName:s}=this.props,r=!1,a,o,c=e.sectionWidgets,u=c.center;return c.left?(r=!0,a=c.left):a=c.start,c.right?(r=!0,o=c.right):o=c.end,G("div",{className:[s||"","fc-toolbar",r?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",a||[]),this.renderSection("center",u||[]),this.renderSection("end",o||[]))}renderSection(e,s){let{props:r}=this;return G(IG,{key:e,widgetGroups:s,title:r.title,navUnit:r.navUnit,activeButton:r.activeButton,isTodayEnabled:r.isTodayEnabled,isPrevEnabled:r.isPrevEnabled,isNextEnabled:r.isNextEnabled,titleId:r.titleId})}}class kG extends ft{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Pr(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:s}=this,{aspectRatio:r}=e,a=["fc-view-harness",r||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],o="",c="";return r?s.availableWidth!==null?o=s.availableWidth/r:c=`${1/r*100}%`:o=e.height||"",G("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:a.join(" "),style:{height:o,paddingBottom:c}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class MG extends $c{constructor(e){super(e),this.handleSegClick=(s,r)=>{let{component:a}=this,{context:o}=a,c=Ic(r);if(c&&a.isValidSegDownEl(s.target)){let u=Vs(s.target,".fc-event-forced-url"),m=u?u.querySelector("a[href]").href:"";o.emitter.trigger("eventClick",{el:r,event:new Mt(a.context,c.eventRange.def,c.eventRange.instance),jsEvent:s,view:o.viewApi}),m&&!s.defaultPrevented&&(window.location.href=m)}},this.destroy=o6(e.el,"click",".fc-event",this.handleSegClick)}}class PG extends $c{constructor(e){super(e),this.handleEventElRemove=s=>{s===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(s,r)=>{Ic(r)&&(this.currentSegEl=r,this.triggerEvent("eventMouseEnter",s,r))},this.handleSegLeave=(s,r)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",s,r))},this.removeHoverListeners=mH(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,s,r){let{component:a}=this,{context:o}=a,c=Ic(r);(!s||a.isValidSegDownEl(s.target))&&o.emitter.trigger(e,{el:r,event:new Mt(o,c.eventRange.def,c.eventRange.instance),jsEvent:s,view:o.viewApi})}}class OG extends uo{constructor(){super(...arguments),this.buildViewContext=Me(Nz),this.buildViewPropTransformers=Me(VG),this.buildToolbarProps=Me(LG),this.headerRef=Qs(),this.footerRef=Qs(),this.interactionsStore={},this.state={viewLabelId:Wg()},this.registerInteractiveComponent=(e,s)=>{let r=vq(e,s),c=[MG,PG].concat(this.props.pluginHooks.componentInteractions).map(u=>new u(r));this.interactionsStore[e.uid]=c,Wb[e.uid]=r},this.unregisterInteractiveComponent=e=>{let s=this.interactionsStore[e.uid];if(s){for(let r of s)r.destroy();delete this.interactionsStore[e.uid]}delete Wb[e.uid]},this.resizeRunner=new Nv(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:s}=this.props;s.handleWindowResize&&e.target===window&&this.resizeRunner.request(s.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:s,options:r}=e,a=!1,o="",c;e.isHeightAuto||e.forPrint?o="":r.height!=null?a=!0:r.contentHeight!=null?o=r.contentHeight:c=Math.max(r.aspectRatio,.5);let u=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),m=s.header&&s.header.hasTitle?this.state.viewLabelId:void 0;return G(ka.Provider,{value:u},G(Gc,{unit:"day"},f=>{let x=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,f,e.viewTitle);return G(At,null,s.header&&G(O_,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:s.header,titleId:m},x)),G(kG,{liquid:a,height:o,aspectRatio:c,labeledById:m},this.renderView(e),this.buildAppendContent()),s.footer&&G(O_,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:s.footer,titleId:""},x)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(r=>new r(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:s}=e.pluginHooks;for(let r in s)s[r](e[r],e)}componentDidUpdate(e){let{props:s}=this,{propSetHandlers:r}=s.pluginHooks;for(let a in r)s[a]!==e[a]&&r[a](s[a],s)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,s=e.pluginHooks.viewContainerAppends.map(r=>r(e));return G(At,{},...s)}renderView(e){let{pluginHooks:s}=e,{viewSpec:r}=e,a={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},o=this.buildViewPropTransformers(s.viewPropsTransformers);for(let u of o)Object.assign(a,u.transform(a,e));let c=r.component;return G(c,Object.assign({},a))}}function LG(t,e,s,r,a,o){let c=s.build(a,void 0,!1),u=s.buildPrev(e,r,!1),m=s.buildNext(e,r,!1);return{title:o,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:c.isValid&&!va(e.currentRange,a),isPrevEnabled:u.isValid,isNextEnabled:m.isValid}}function VG(t){return t.map(e=>new e)}class UG extends wq{constructor(e,s={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=r=>{switch(r.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=r=>{this.currentData=r,this.renderRunner.request(r.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:r}=this;eg(()=>{Uu(G(yq,{options:r.calendarOptions,theme:r.theme,emitter:r.emitter},(a,o,c,u)=>(this.setClassNames(a),this.setHeight(o),G(x6.Provider,{value:this.customContentRenderId},G(OG,Object.assign({isHeightAuto:c,forPrint:u},r))))),this.el)})}else this.isRendered&&(this.isRendered=!1,Uu(null,this.el),this.setClassNames([]),this.setHeight(""))},rH(e),this.el=e,this.renderRunner=new Nv(this.handleRenderRequest),new jG({optionOverrides:s,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){eg(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,s){this.currentDataManager.resetOptions(e,s)}setClassNames(e){if(!Mi(e,this.currentClassNames)){let{classList:s}=this.el;for(let r of this.currentClassNames)s.remove(r);for(let r of e)s.add(r);this.currentClassNames=e}}setHeight(e){i6(this.el,"height",e)}}const FG=parseInt(String(as.version).split(".")[0]),BG=FG<18;class pR extends S.Component{constructor(){super(...arguments),this.elRef=S.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const s of this.state.customRenderingMap.values())e.push(as.createElement(HG,{key:s.id,customRendering:s}));return as.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new j$;this.handleCustomRendering=e.handle.bind(e),this.calendar=new UG(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Zx.flushSync(()=>{})});let s;e.subscribe(r=>{const a=Date.now(),o=!s;(BG||o||this.isUpdating||this.isUnmounting||a-s<100?xR:Zx.flushSync)(()=>{this.setState({customRenderingMap:r},()=>{s=a,o?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}pR.act=xR;class HG extends S.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:s}=e,r=typeof s=="function"?s(e.renderProps):s;return Zx.createPortal(r,e.containerEl)}}function xR(t){t()}class zG extends Lr{constructor(){super(...arguments),this.headerElRef=Qs()}renderSimpleLayout(e,s){let{props:r,context:a}=this,o=[],c=ig(a.options);return e&&o.push({type:"header",key:"header",isSticky:c,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),o.push({type:"body",key:"body",liquid:!0,chunk:{content:s}}),G(tg,{elClasses:["fc-daygrid"],viewSpec:a.viewSpec},G($v,{liquid:!r.isHeightAuto&&!r.forPrint,collapsibleWidth:r.forPrint,cols:[],sections:o}))}renderHScrollLayout(e,s,r,a){let o=this.context.pluginHooks.scrollGridImpl;if(!o)throw new Error("No ScrollGrid implementation");let{props:c,context:u}=this,m=!c.forPrint&&ig(u.options),f=!c.forPrint&&tR(u.options),x=[];return e&&x.push({type:"header",key:"header",isSticky:m,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),x.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:s}]}),f&&x.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Kb}]}),G(tg,{elClasses:["fc-daygrid"],viewSpec:u.viewSpec},G(o,{liquid:!c.isHeightAuto&&!c.forPrint,forPrint:c.forPrint,collapsibleWidth:c.forPrint,colGroups:[{cols:[{span:r,minWidth:a}]}],sections:x}))}}function yf(t,e){let s=[];for(let r=0;r<e;r+=1)s[r]=[];for(let r of t)s[r.row].push(r);return s}function Km(t,e){let s=[];for(let r=0;r<e;r+=1)s[r]=[];for(let r of t)s[r.firstCol].push(r);return s}function L_(t,e){let s=[];if(t){for(let r=0;r<e;r+=1)s[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)s[r.row].segs.push(r)}else for(let r=0;r<e;r+=1)s[r]=null;return s}const bR=Vt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function yR(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class vR extends ft{render(){let{props:e}=this;return G(Wv,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:bR,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class NR extends ft{render(){let{props:e,context:s}=this,{options:r}=s,{seg:a}=e,o=r.eventTimeFormat||bR,c=M6(a,o,s,!0,e.defaultDisplayEventEnd);return G(Gv,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:O6(e.seg,s),defaultGenerator:qG,timeText:c,isResizing:!1,isDateSelecting:!1}))}}function qG(t){return G(At,null,G("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&G("div",{className:"fc-event-time"},t.timeText),G("div",{className:"fc-event-title"},t.event.title||G(At,null," ")))}class $G extends ft{constructor(){super(...arguments),this.compileSegs=Me(GG)}render(){let{props:e}=this,{allSegs:s,invisibleSegs:r}=this.compileSegs(e.singlePlacements);return G(aR,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:s,hiddenSegs:r,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let a=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return G(At,null,s.map(o=>{let c=o.eventRange.instance.instanceId;return G("div",{className:"fc-daygrid-event-harness",key:c,style:{visibility:a[c]?"hidden":""}},yR(o)?G(NR,Object.assign({seg:o,isDragging:!1,isSelected:c===e.eventSelection,defaultDisplayEventEnd:!1},Si(o,e.todayRange))):G(vR,Object.assign({seg:o,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:c===e.eventSelection,defaultDisplayEventEnd:!1},Si(o,e.todayRange))))}))}})}}function GG(t){let e=[],s=[];for(let r of t)e.push(r.seg),r.isVisible||s.push(r.seg);return{allSegs:e,invisibleSegs:s}}const WG=Vt({week:"narrow"});class QG extends Lr{constructor(){super(...arguments),this.rootElRef=Qs(),this.state={dayNumberId:Wg()},this.handleRootEl=e=>{Pr(this.rootElRef,e),Pr(this.props.elRef,e)}}render(){let{context:e,props:s,state:r,rootElRef:a}=this,{options:o,dateEnv:c}=e,{date:u,dateProfile:m}=s;const f=s.showDayNumber&&KG(u,m.currentRange,c);return G(Yv,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...s.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},s.extraDataAttrs),s.showDayNumber?{"aria-labelledby":r.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:YG,date:u,dateProfile:m,todayRange:s.todayRange,showDayNumber:s.showDayNumber,isMonthStart:f,extraRenderProps:s.extraRenderProps},(x,v)=>G("div",{ref:s.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:s.minHeight}},s.showWeekNumber&&G(rR,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:ag(e,u,"week"),date:u,defaultFormat:WG}),!v.isDisabled&&(s.showDayNumber||Kv(o)||s.forceDayTop)?G("div",{className:"fc-daygrid-day-top"},G(x,{elTag:"a",elClasses:["fc-daygrid-day-number",f&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},ag(e,u)),{id:r.dayNumberId})})):s.showDayNumber?G("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},G("a",{className:"fc-daygrid-day-number"}," ")):void 0,G("div",{className:"fc-daygrid-day-events",ref:s.fgContentElRef},s.fgContent,G("div",{className:"fc-daygrid-day-bottom",style:{marginTop:s.moreMarginTop}},G($G,{allDayDate:u,singlePlacements:s.singlePlacements,moreCnt:s.moreCnt,alignmentElRef:a,alignGridTop:!s.showDayNumber,extraDateSpan:s.extraDateSpan,dateProfile:s.dateProfile,eventSelection:s.eventSelection,eventDrag:s.eventDrag,eventResize:s.eventResize,todayRange:s.todayRange}))),G("div",{className:"fc-daygrid-day-bg"},s.bgContent)))}}function YG(t){return t.dayNumberText||G(At,null," ")}function KG(t,e,s){const{start:r,end:a}=e,o=Pi(a,-1),c=s.getYear(r),u=s.getMonth(r),m=s.getYear(o),f=s.getMonth(o);return!(c===m&&u===f)&&(t.valueOf()===r.valueOf()||s.getDay(t)===1&&t.valueOf()<a.valueOf())}function wR(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function jR(t){return wR(t)+":"+t.lastCol}function XG(t,e,s,r,a,o,c){let u=new eW(R=>{let I=t[R.index].eventRange.instance.instanceId+":"+R.span.start+":"+(R.span.end-1);return a[I]||1});u.allowReslicing=!0,u.strictOrder=r,e===!0||s===!0?(u.maxCoord=o,u.hiddenConsumes=!0):typeof e=="number"?u.maxStackCnt=e:typeof s=="number"&&(u.maxStackCnt=s,u.hiddenConsumes=!0);let m=[],f=[];for(let R=0;R<t.length;R+=1){let I=t[R],V=jR(I);a[V]!=null?m.push({index:R,span:{start:I.firstCol,end:I.lastCol+1}}):f.push(I)}let x=u.addSegs(m),v=u.toRects(),{singleColPlacements:y,multiColPlacements:N,leftoverMargins:w}=ZG(v,t,c),E=[],_=[];for(let R of f){N[R.firstCol].push({seg:R,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let I=R.firstCol;I<=R.lastCol;I+=1)y[I].push({seg:vc(R,I,I+1,c),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let R=0;R<c.length;R+=1)E.push(0);for(let R of x){let I=t[R.index],V=R.span;N[V.start].push({seg:vc(I,V.start,V.end,c),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let z=V.start;z<V.end;z+=1)E[z]+=1,y[z].push({seg:vc(I,z,z+1,c),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let R=0;R<c.length;R+=1)_.push(w[R]);return{singleColPlacements:y,multiColPlacements:N,moreCnts:E,moreMarginTops:_}}function ZG(t,e,s){let r=JG(t,s.length),a=[],o=[],c=[];for(let u=0;u<s.length;u+=1){let m=r[u],f=[],x=0,v=0;for(let N of m){let w=e[N.index];f.push({seg:vc(w,u,u+1,s),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:N.levelCoord-x}),x=N.levelCoord+N.thickness}let y=[];x=0,v=0;for(let N of m){let w=e[N.index],E=N.span.end-N.span.start>1,_=N.span.start===u;v+=N.levelCoord-x,x=N.levelCoord+N.thickness,E?(v+=N.thickness,_&&y.push({seg:vc(w,N.span.start,N.span.end,s),isVisible:!0,isAbsolute:!0,absoluteTop:N.levelCoord,marginTop:0})):_&&(y.push({seg:vc(w,N.span.start,N.span.end,s),isVisible:!0,isAbsolute:!1,absoluteTop:N.levelCoord,marginTop:v}),v=0)}a.push(f),o.push(y),c.push(v)}return{singleColPlacements:a,multiColPlacements:o,leftoverMargins:c}}function JG(t,e){let s=[];for(let r=0;r<e;r+=1)s.push([]);for(let r of t)for(let a=r.span.start;a<r.span.end;a+=1)s[a].push(r);return s}function vc(t,e,s,r){if(t.firstCol===e&&t.lastCol===s-1)return t;let a=t.eventRange,o=a.range,c=Jl(o,{start:r[e].date,end:Fs(r[s-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:s-1,eventRange:{def:a.def,ui:Object.assign(Object.assign({},a.ui),{durationEditable:!1}),instance:a.instance,range:c},isStart:t.isStart&&c.start.valueOf()===o.start.valueOf(),isEnd:t.isEnd&&c.end.valueOf()===o.end.valueOf()})}class eW extends q6{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const s=super.addSegs(e),{entriesByLevel:r}=this,a=o=>!this.forceHidden[Bl(o)];for(let o=0;o<r.length;o+=1)r[o]=r[o].filter(a);return s}handleInvalidInsertion(e,s,r){const{entriesByLevel:a,forceHidden:o}=this,{touchingEntry:c,touchingLevel:u,touchingLateral:m}=e;if(this.hiddenConsumes&&c){const f=Bl(c);if(!o[f])if(this.allowReslicing){const x=Object.assign(Object.assign({},c),{span:zv(c.span,s.span)}),v=Bl(x);o[v]=!0,a[u][m]=x,r.push(x),this.splitEntry(c,s,r)}else o[f]=!0,r.push(c)}super.handleInvalidInsertion(e,s,r)}}class ER extends Lr{constructor(){super(...arguments),this.cellElRefs=new ga,this.frameElRefs=new ga,this.fgElRefs=new ga,this.segHarnessRefs=new ga,this.rootElRef=Qs(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:s,context:r}=this,{options:a}=r,o=e.cells.length,c=Km(e.businessHourSegs,o),u=Km(e.bgEventSegs,o),m=Km(this.getHighlightSegs(),o),f=Km(this.getMirrorSegs(),o),{singleColPlacements:x,multiColPlacements:v,moreCnts:y,moreMarginTops:N}=XG(k6(e.fgEventSegs,a.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,a.eventOrderStrict,s.segHeights,s.maxContentHeight,e.cells),w=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return G("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((E,_)=>{let R=this.renderFgSegs(_,e.forPrint?x[_]:v[_],e.todayRange,w),I=this.renderFgSegs(_,tW(f[_],v),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return G(QG,{key:E.key,elRef:this.cellElRefs.createRef(E.key),innerElRef:this.frameElRefs.createRef(E.key),dateProfile:e.dateProfile,date:E.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&_===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:E.extraRenderProps,extraDataAttrs:E.extraDataAttrs,extraClassNames:E.extraClassNames,extraDateSpan:E.extraDateSpan,moreCnt:y[_],moreMarginTop:N[_],singlePlacements:x[_],fgContentElRef:this.fgElRefs.createRef(E.key),fgContent:G(At,null,G(At,null,R),G(At,null,I)),bgContent:G(At,null,this.renderFillSegs(m[_],"highlight"),this.renderFillSegs(c[_],"non-business"),this.renderFillSegs(u[_],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,s){let r=this.props;this.updateSizing(!ar(e,r))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,s,r,a,o,c,u){let{context:m}=this,{eventSelection:f}=this.props,{framePositions:x}=this.state,v=this.props.cells.length===1,y=o||c||u,N=[];if(x)for(let w of s){let{seg:E}=w,{instanceId:_}=E.eventRange.instance,R=w.isVisible&&!a[_],I=w.isAbsolute,V="",z="";I&&(m.isRtl?(z=0,V=x.lefts[E.lastCol]-x.lefts[E.firstCol]):(V=0,z=x.rights[E.firstCol]-x.rights[E.lastCol])),N.push(G("div",{className:"fc-daygrid-event-harness"+(I?" fc-daygrid-event-harness-abs":""),key:wR(E),ref:y?null:this.segHarnessRefs.createRef(jR(E)),style:{visibility:R?"":"hidden",marginTop:I?"":w.marginTop,top:I?w.absoluteTop:"",left:V,right:z}},yR(E)?G(NR,Object.assign({seg:E,isDragging:o,isSelected:_===f,defaultDisplayEventEnd:v},Si(E,r))):G(vR,Object.assign({seg:E,isDragging:o,isResizing:c,isDateSelecting:u,isSelected:_===f,defaultDisplayEventEnd:v},Si(E,r)))))}return N}renderFillSegs(e,s){let{isRtl:r}=this.context,{todayRange:a}=this.props,{framePositions:o}=this.state,c=[];if(o)for(let u of e){let m=r?{right:0,left:o.lefts[u.lastCol]-o.lefts[u.firstCol]}:{left:0,right:o.rights[u.firstCol]-o.rights[u.lastCol]};c.push(G("div",{key:P6(u.eventRange),className:"fc-daygrid-bg-harness",style:m},s==="bg-event"?G(sR,Object.assign({seg:u},Si(u,a))):nR(s)))}return G(At,{},...c)}updateSizing(e){let{props:s,state:r,frameElRefs:a}=this;if(!s.forPrint&&s.clientWidth!==null){if(e){let m=s.cells.map(f=>a.currentMap[f.key]);if(m.length){let f=this.rootElRef.current,x=new kc(f,m,!0,!1);(!r.framePositions||!r.framePositions.similarTo(x))&&this.setState({framePositions:new kc(f,m,!0,!1)})}}const o=this.state.segHeights,c=this.querySegHeights(),u=s.dayMaxEvents===!0||s.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},o),c),maxContentHeight:u?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,s={};for(let r in e){let a=Math.round(e[r].getBoundingClientRect().height);s[r]=Math.max(s[r]||0,a)}return s}computeMaxContentHeight(){let e=this.props.cells[0].key,s=this.cellElRefs.currentMap[e],r=this.fgElRefs.currentMap[e];return s.getBoundingClientRect().bottom-r.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(s=>e[s.key])}}ER.addStateEquality({segHeights:ar});function tW(t,e){if(!t.length)return[];let s=sW(e);return t.map(r=>({seg:r,isVisible:!0,isAbsolute:!0,absoluteTop:s[r.eventRange.instance.instanceId],marginTop:0}))}function sW(t){let e={};for(let s of t)for(let r of s)e[r.seg.eventRange.instance.instanceId]=r.absoluteTop;return e}class nW extends Lr{constructor(){super(...arguments),this.splitBusinessHourSegs=Me(yf),this.splitBgEventSegs=Me(rW),this.splitFgEventSegs=Me(yf),this.splitDateSelectionSegs=Me(yf),this.splitEventDrag=Me(L_),this.splitEventResize=Me(L_),this.rowRefs=new ga}render(){let{props:e,context:s}=this,r=e.cells.length,a=this.splitBusinessHourSegs(e.businessHourSegs,r),o=this.splitBgEventSegs(e.bgEventSegs,r),c=this.splitFgEventSegs(e.fgEventSegs,r),u=this.splitDateSelectionSegs(e.dateSelectionSegs,r),m=this.splitEventDrag(e.eventDrag,r),f=this.splitEventResize(e.eventResize,r),x=r>=7&&e.clientWidth?e.clientWidth/s.options.aspectRatio/6:null;return G(Gc,{unit:"day"},(v,y)=>G(At,null,e.cells.map((N,w)=>G(ER,{ref:this.rowRefs.createRef(w),key:N.length?N[0].date.toISOString():w,showDayNumbers:r>1,showWeekNumbers:e.showWeekNumbers,todayRange:y,dateProfile:e.dateProfile,cells:N,renderIntro:e.renderRowIntro,businessHourSegs:a[w],eventSelection:e.eventSelection,bgEventSegs:o[w],fgEventSegs:c[w],dateSelectionSegs:u[w],eventDrag:m[w],eventResize:f[w],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:x,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],s=e?e.closest(".fc-daygrid-body"):null;s&&(this.rootEl=s,this.context.registerInteractiveComponent(this,{el:s,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new kc(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new kc(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,s){let{colPositions:r,rowPositions:a}=this,o=r.leftToIndex(e),c=a.topToIndex(s);if(c!=null&&o!=null){let u=this.props.cells[c][o];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(c,o),allDay:!0},u.extraDateSpan),dayEl:this.getCellEl(c,o),rect:{left:r.lefts[o],right:r.rights[o],top:a.tops[c],bottom:a.bottoms[c]},layer:0}}return null}getCellEl(e,s){return this.rowRefs.currentMap[e].getCellEls()[s]}getCellRange(e,s){let r=this.props.cells[e][s].date,a=Fs(r,1);return{start:r,end:a}}}function rW(t,e){return yf(t.filter(aW),e)}function aW(t){return t.eventRange.def.allDay}class iW extends Lr{constructor(){super(...arguments),this.elRef=Qs(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:s,dayMaxEvents:r,expandRows:a}=e,o=r===!0||s===!0;o&&!a&&(o=!1,s=null,r=null);let c=["fc-daygrid-body",o?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",a?"":"fc-daygrid-body-natural"];return G("div",{ref:this.elRef,className:c.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},G("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:a?e.clientHeight:""}},e.colGroupNode,G("tbody",{role:"presentation"},G(nW,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:r,dayMaxEventRows:s,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=lW(this.elRef.current,this.props.dateProfile);if(e){const s=e.closest(".fc-daygrid-body"),r=s.closest(".fc-scroller"),a=e.getBoundingClientRect().top-s.getBoundingClientRect().top;r.scrollTop=a?a+1:0}this.needsScrollReset=!1}}}function lW(t,e){let s;return e.currentRangeUnit.match(/year|month/)&&(s=t.querySelector(`[data-date="${qH(e.currentDate)}-01"]`)),s||(s=t.querySelector(`[data-date="${Sv(e.currentDate)}"]`)),s}class oW extends K6{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,s){return s.sliceRange(e)}}class _R extends Lr{constructor(){super(...arguments),this.slicer=new oW,this.tableRef=Qs()}render(){let{props:e,context:s}=this;return G(iW,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,s,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class cW extends zG{constructor(){super(...arguments),this.buildDayTableModel=Me(dW),this.headerRef=Qs(),this.tableRef=Qs()}render(){let{options:e,dateProfileGenerator:s}=this.context,{props:r}=this,a=this.buildDayTableModel(r.dateProfile,s),o=e.dayHeaders&&G(W6,{ref:this.headerRef,dateProfile:r.dateProfile,dates:a.headerDates,datesRepDistinctDays:a.rowCnt===1}),c=u=>G(_R,{ref:this.tableRef,dateProfile:r.dateProfile,dayTableModel:a,businessHours:r.businessHours,dateSelection:r.dateSelection,eventStore:r.eventStore,eventUiBases:r.eventUiBases,eventSelection:r.eventSelection,eventDrag:r.eventDrag,eventResize:r.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:u.tableColGroupNode,tableMinWidth:u.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!r.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:u.clientWidth,clientHeight:u.clientHeight,forPrint:r.forPrint});return e.dayMinWidth?this.renderHScrollLayout(o,c,a.colCnt,e.dayMinWidth):this.renderSimpleLayout(o,c)}}function dW(t,e){let s=new Q6(t.renderRange,e);return new Y6(s,/year|month|week/.test(t.currentRangeUnit))}class uW extends N6{buildRenderRange(e,s,r){let a=super.buildRenderRange(e,s,r),{props:o}=this;return hW({currentRange:a,snapToWeek:/^(year|month)$/.test(s),fixedWeekCount:o.fixedWeekCount,dateEnv:o.dateEnv})}}function hW(t){let{dateEnv:e,currentRange:s}=t,{start:r,end:a}=s,o;if(t.snapToWeek&&(r=e.startOfWeek(r),o=e.startOfWeek(a),o.valueOf()!==a.valueOf()&&(a=h_(o,1))),t.fixedWeekCount){let c=e.startOfWeek(e.startOfMonth(Fs(s.end,-1))),u=Math.ceil(kH(c,a));a=h_(a,6-u)}return{start:r,end:a}}var mW=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';vv(mW);var fW=Ma({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:cW,dateProfileGeneratorClass:uW},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class gW extends Aq{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?nq(e)?["timed","allDay"]:["allDay"]:["timed"]}}const pW=Vt({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function SR(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return G(ka.Consumer,null,s=>{if(!t.isLabeled)return G("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:r,options:a,viewApi:o}=s,c=a.slotLabelFormat==null?pW:Array.isArray(a.slotLabelFormat)?Vt(a.slotLabelFormat[0]):Vt(a.slotLabelFormat),u={level:0,time:t.time,date:r.toDate(t.date),view:o,text:r.format(t.date,c)};return G(_n,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:u,generatorName:"slotLabelContent",customGenerator:a.slotLabelContent,defaultGenerator:xW,classNameGenerator:a.slotLabelClassNames,didMount:a.slotLabelDidMount,willUnmount:a.slotLabelWillUnmount},m=>G("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},G(m,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function xW(t){return t.text}class bW extends ft{render(){return this.props.slatMetas.map(e=>G("tr",{key:e.key},G(SR,Object.assign({},e))))}}const yW=Vt({week:"short"}),vW=5;class NW extends Lr{constructor(){super(...arguments),this.allDaySplitter=new gW,this.headerElRef=Qs(),this.rootElRef=Qs(),this.scrollerElRef=Qs(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let s=this.scrollerElRef.current;s&&(s.scrollTop=e)},this.renderHeadAxis=(e,s="")=>{let{options:r}=this.context,{dateProfile:a}=this.props,o=a.renderRange,u=co(o.start,o.end)===1?ag(this.context,o.start,"week"):{};return r.weekNumbers&&e==="day"?G(rR,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:o.start,defaultFormat:yW},m=>G("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:s}},G(m,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:u}))):G("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},G("div",{className:"fc-timegrid-axis-frame",style:{height:s}}))},this.renderTableRowAxis=e=>{let{options:s,viewApi:r}=this.context,a={text:s.allDayText,view:r};return G(_n,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:a,generatorName:"allDayContent",customGenerator:s.allDayContent,defaultGenerator:wW,classNameGenerator:s.allDayClassNames,didMount:s.allDayDidMount,willUnmount:s.allDayWillUnmount},o=>G("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},G(o,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,s,r){let{context:a,props:o}=this,c=[],u=ig(a.options);return e&&c.push({type:"header",key:"header",isSticky:u,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),s&&(c.push({type:"body",key:"all-day",chunk:{content:s}}),c.push({type:"body",key:"all-day-divider",outerContent:G("tr",{role:"presentation",className:"fc-scrollgrid-section"},G("td",{className:"fc-timegrid-divider "+a.theme.getClass("tableCellShaded")}))})),c.push({type:"body",key:"body",liquid:!0,expandRows:!!a.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:r}}),G(tg,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:a.viewSpec},G($v,{liquid:!o.isHeightAuto&&!o.forPrint,collapsibleWidth:o.forPrint,cols:[{width:"shrink"}],sections:c}))}renderHScrollLayout(e,s,r,a,o,c,u){let m=this.context.pluginHooks.scrollGridImpl;if(!m)throw new Error("No ScrollGrid implementation");let{context:f,props:x}=this,v=!x.forPrint&&ig(f.options),y=!x.forPrint&&tR(f.options),N=[];e&&N.push({type:"header",key:"header",isSticky:v,syncRowHeights:!0,chunks:[{key:"axis",rowContent:E=>G("tr",{role:"presentation"},this.renderHeadAxis("day",E.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),s&&(N.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:E=>G("tr",{role:"presentation"},this.renderTableRowAxis(E.rowSyncHeights[0]))},{key:"cols",content:s}]}),N.push({key:"all-day-divider",type:"body",outerContent:G("tr",{role:"presentation",className:"fc-scrollgrid-section"},G("td",{colSpan:2,className:"fc-timegrid-divider "+f.theme.getClass("tableCellShaded")}))}));let w=f.options.nowIndicator;return N.push({type:"body",key:"body",liquid:!0,expandRows:!!f.options.expandRows,chunks:[{key:"axis",content:E=>G("div",{className:"fc-timegrid-axis-chunk"},G("table",{"aria-hidden":!0,style:{height:E.expandRows?E.clientHeight:""}},E.tableColGroupNode,G("tbody",null,G(bW,{slatMetas:c}))),G("div",{className:"fc-timegrid-now-indicator-container"},G(Gc,{unit:w?"minute":"day"},_=>{let R=w&&u&&u.safeComputeTop(_);return typeof R=="number"?G(Qv,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:R},isAxis:!0,date:_}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:r}]}),y&&N.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Kb},{key:"cols",content:Kb}]}),G(tg,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:f.viewSpec},G(m,{liquid:!x.isHeightAuto&&!x.forPrint,forPrint:x.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:a,minWidth:o}]}],sections:N}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:s}=this.context.options;return(e===!0||s===!0)&&(e=void 0,s=vW),{dayMaxEvents:e,dayMaxEventRows:s}}}function wW(t){return t.text}class jW{constructor(e,s,r){this.positions=e,this.dateProfile=s,this.slotDuration=r}safeComputeTop(e){let{dateProfile:s}=this;if(va(s.currentRange,e)){let r=Ct(e),a=e.valueOf()-r.valueOf();if(a>=er(s.slotMinTime)&&a<er(s.slotMaxTime))return this.computeTimeTop(st(a))}return null}computeDateTop(e,s){return s||(s=Ct(e)),this.computeTimeTop(st(e.valueOf()-s.valueOf()))}computeTimeTop(e){let{positions:s,dateProfile:r}=this,a=s.els.length,o=(e.milliseconds-er(r.slotMinTime))/er(this.slotDuration),c,u;return o=Math.max(0,o),o=Math.min(a,o),c=Math.floor(o),c=Math.min(c,a-1),u=o-c,s.tops[c]+s.getHeight(c)*u}}class EW extends ft{render(){let{props:e,context:s}=this,{options:r}=s,{slatElRefs:a}=e;return G("tbody",null,e.slatMetas.map((o,c)=>{let u={time:o.time,date:s.dateEnv.toDate(o.date),view:s.viewApi};return G("tr",{key:o.key,ref:a.createRef(o.key)},e.axis&&G(SR,Object.assign({},o)),G(_n,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!o.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":o.isoTimeStr},renderProps:u,generatorName:"slotLaneContent",customGenerator:r.slotLaneContent,classNameGenerator:r.slotLaneClassNames,didMount:r.slotLaneDidMount,willUnmount:r.slotLaneWillUnmount}))}))}}class _W extends ft{constructor(){super(...arguments),this.rootElRef=Qs(),this.slatElRefs=new ga}render(){let{props:e,context:s}=this;return G("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},G("table",{"aria-hidden":!0,className:s.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,G(EW,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:s}=this;s.onCoords&&s.clientWidth!==null&&this.rootElRef.current.offsetHeight&&s.onCoords(new jW(new kc(this.rootElRef.current,SW(this.slatElRefs.currentMap,s.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function SW(t,e){return e.map(s=>t[s.key])}function iu(t,e){let s=[],r;for(r=0;r<e;r+=1)s.push([]);if(t)for(r=0;r<t.length;r+=1)s[t[r].col].push(t[r]);return s}function V_(t,e){let s=[];if(t){for(let r=0;r<e;r+=1)s[r]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let r of t.segs)s[r.col].segs.push(r)}else for(let r=0;r<e;r+=1)s[r]=null;return s}class AW extends ft{render(){let{props:e}=this;return G(aR,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>CR(e.hiddenSegs,e),defaultGenerator:CW,forceTimed:!0},s=>G(s,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function CW(t){return t.shortText}function TW(t,e,s){let r=new q6;e!=null&&(r.strictOrder=e),s!=null&&(r.maxStackCnt=s);let a=r.addSegs(t),o=Fq(a),c=RW(r);return c=MW(c,1),{segRects:PW(c),hiddenGroups:o}}function RW(t){const{entriesByLevel:e}=t,s=Zv((r,a)=>r+":"+a,(r,a)=>{let o=kW(t,r,a),c=U_(o,s),u=e[r][a];return[Object.assign(Object.assign({},u),{nextLevelNodes:c[0]}),u.thickness+c[1]]});return U_(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,s)[0]}function U_(t,e){if(!t)return[[],0];let{level:s,lateralStart:r,lateralEnd:a}=t,o=r,c=[];for(;o<a;)c.push(e(s,o)),o+=1;return c.sort(DW),[c.map(IW),c[0][1]]}function DW(t,e){return e[1]-t[1]}function IW(t){return t[0]}function kW(t,e,s){let{levelCoords:r,entriesByLevel:a}=t,o=a[e][s],c=r[e]+o.thickness,u=r.length,m=e;for(;m<u&&r[m]<c;m+=1);for(;m<u;m+=1){let f=a[m],x,v=Yb(f,o.span.start,Qb),y=v[0]+v[1],N=y;for(;(x=f[N])&&x.span.start<o.span.end;)N+=1;if(y<N)return{level:m,lateralStart:y,lateralEnd:N}}return null}function MW(t,e){const s=Zv((r,a,o)=>Bl(r),(r,a,o)=>{let{nextLevelNodes:c,thickness:u}=r,m=u+o,f=u/m,x,v=[];if(!c.length)x=e;else for(let N of c)if(x===void 0){let w=s(N,a,m);x=w[0],v.push(w[1])}else{let w=s(N,x,0);v.push(w[1])}let y=(x-a)*f;return[x-y,Object.assign(Object.assign({},r),{thickness:y,nextLevelNodes:v})]});return t.map(r=>s(r,0,0)[1])}function PW(t){let e=[];const s=Zv((a,o,c)=>Bl(a),(a,o,c)=>{let u=Object.assign(Object.assign({},a),{levelCoord:o,stackDepth:c,stackForward:0});return e.push(u),u.stackForward=r(a.nextLevelNodes,o+a.thickness,c+1)+1});function r(a,o,c){let u=0;for(let m of a)u=Math.max(s(m,o,c),u);return u}return r(t,0,0),e}function Zv(t,e){const s={};return(...r)=>{let a=t(...r);return a in s?s[a]:s[a]=e(...r)}}function F_(t,e,s=null,r=0){let a=[];if(s)for(let o=0;o<t.length;o+=1){let c=t[o],u=s.computeDateTop(c.start,e),m=Math.max(u+(r||0),s.computeDateTop(c.end,e));a.push({start:Math.round(u),end:Math.round(m)})}return a}function OW(t,e,s,r){let a=[],o=[];for(let f=0;f<t.length;f+=1){let x=e[f];x?a.push({index:f,thickness:1,span:x}):o.push(t[f])}let{segRects:c,hiddenGroups:u}=TW(a,s,r),m=[];for(let f of c)m.push({seg:t[f.index],rect:f});for(let f of o)m.push({seg:f,rect:null});return{segPlacements:m,hiddenGroups:u}}const LW=Vt({hour:"numeric",minute:"2-digit",meridiem:!1});class AR extends ft{render(){return G(Wv,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:LW}))}}class VW extends ft{constructor(){super(...arguments),this.sortEventSegs=Me(k6)}render(){let{props:e,context:s}=this,{options:r}=s,a=r.selectMirror,o=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||a&&e.dateSelectionSegs||[],c=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},u=this.sortEventSegs(e.fgEventSegs,r.eventOrder);return G(Yv,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},m=>G("div",{className:"fc-timegrid-col-frame"},G("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),G("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(u,c,!1,!1,!1)),G("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(o,{},!!e.eventDrag,!!e.eventResize,!!a,"mirror")),G("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),Kv(r)&&G(m,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,s,r,a,o,c){let{props:u}=this;return u.forPrint?CR(e,u):this.renderPositionedFgSegs(e,s,r,a,o,c)}renderPositionedFgSegs(e,s,r,a,o,c){let{eventMaxStack:u,eventShortHeight:m,eventOrderStrict:f,eventMinHeight:x}=this.context.options,{date:v,slatCoords:y,eventSelection:N,todayRange:w,nowDate:E}=this.props,_=r||a||o,R=F_(e,v,y,x),{segPlacements:I,hiddenGroups:V}=OW(e,R,f,u);return G(At,null,this.renderHiddenGroups(V,e),I.map(z=>{let{seg:F,rect:P}=z,C=F.eventRange.instance.instanceId,D=_||!!(!s[C]&&P),k=Yx(P&&P.span),O=!_&&P?this.computeSegHStyle(P):{left:0,right:0},q=!!P&&P.stackForward>0,M=!!P&&P.span.end-P.span.start<m;return G("div",{className:"fc-timegrid-event-harness"+(q?" fc-timegrid-event-harness-inset":""),key:c||C,style:Object.assign(Object.assign({visibility:D?"":"hidden"},k),O)},G(AR,Object.assign({seg:F,isDragging:r,isResizing:a,isDateSelecting:o,isSelected:C===N,isShort:M},Si(F,w,E))))}))}renderHiddenGroups(e,s){let{extraDateSpan:r,dateProfile:a,todayRange:o,nowDate:c,eventSelection:u,eventDrag:m,eventResize:f}=this.props;return G(At,null,e.map(x=>{let v=Yx(x.span),y=UW(x.entries,s);return G(AW,{key:h6(iR(y)),hiddenSegs:y,top:v.top,bottom:v.bottom,extraDateSpan:r,dateProfile:a,todayRange:o,nowDate:c,eventSelection:u,eventDrag:m,eventResize:f})}))}renderFillSegs(e,s){let{props:r,context:a}=this,c=F_(e,r.date,r.slatCoords,a.options.eventMinHeight).map((u,m)=>{let f=e[m];return G("div",{key:P6(f.eventRange),className:"fc-timegrid-bg-harness",style:Yx(u)},s==="bg-event"?G(sR,Object.assign({seg:f},Si(f,r.todayRange,r.nowDate))):nR(s))});return G(At,null,c)}renderNowIndicator(e){let{slatCoords:s,date:r}=this.props;return s?e.map((a,o)=>G(Qv,{key:o,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:s.computeDateTop(a.start,r)},isAxis:!1,date:r})):null}computeSegHStyle(e){let{isRtl:s,options:r}=this.context,a=r.slotEventOverlap,o=e.levelCoord,c=e.levelCoord+e.thickness,u,m;a&&(c=Math.min(1,o+(c-o)*2)),s?(u=1-c,m=o):(u=o,m=1-c);let f={zIndex:e.stackDepth+1,left:u*100+"%",right:m*100+"%"};return a&&!e.stackForward&&(f[s?"marginLeft":"marginRight"]=10*2),f}}function CR(t,{todayRange:e,nowDate:s,eventSelection:r,eventDrag:a,eventResize:o}){let c=(a?a.affectedInstances:null)||(o?o.affectedInstances:null)||{};return G(At,null,t.map(u=>{let m=u.eventRange.instance.instanceId;return G("div",{key:m,style:{visibility:c[m]?"hidden":""}},G(AR,Object.assign({seg:u,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:m===r,isShort:!1},Si(u,e,s))))}))}function Yx(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function UW(t,e){return t.map(s=>e[s.index])}class FW extends ft{constructor(){super(...arguments),this.splitFgEventSegs=Me(iu),this.splitBgEventSegs=Me(iu),this.splitBusinessHourSegs=Me(iu),this.splitNowIndicatorSegs=Me(iu),this.splitDateSelectionSegs=Me(iu),this.splitEventDrag=Me(V_),this.splitEventResize=Me(V_),this.rootElRef=Qs(),this.cellElRefs=new ga}render(){let{props:e,context:s}=this,r=s.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),a=e.cells.length,o=this.splitFgEventSegs(e.fgEventSegs,a),c=this.splitBgEventSegs(e.bgEventSegs,a),u=this.splitBusinessHourSegs(e.businessHourSegs,a),m=this.splitNowIndicatorSegs(e.nowIndicatorSegs,a),f=this.splitDateSelectionSegs(e.dateSelectionSegs,a),x=this.splitEventDrag(e.eventDrag,a),v=this.splitEventResize(e.eventResize,a);return G("div",{className:"fc-timegrid-cols",ref:this.rootElRef},G("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,G("tbody",{role:"presentation"},G("tr",{role:"row"},e.axis&&G("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},G("div",{className:"fc-timegrid-col-frame"},G("div",{className:"fc-timegrid-now-indicator-container"},typeof r=="number"&&G(Qv,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:r},isAxis:!0,date:e.nowDate})))),e.cells.map((y,N)=>G(VW,{key:y.key,elRef:this.cellElRefs.createRef(y.key),dateProfile:e.dateProfile,date:y.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:y.extraRenderProps,extraDataAttrs:y.extraDataAttrs,extraClassNames:y.extraClassNames,extraDateSpan:y.extraDateSpan,fgEventSegs:o[N],bgEventSegs:c[N],businessHourSegs:u[N],nowIndicatorSegs:m[N],dateSelectionSegs:f[N],eventDrag:x[N],eventResize:v[N],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new kc(this.rootElRef.current,BW(this.cellElRefs.currentMap,e.cells),!0,!1))}}function BW(t,e){return e.map(s=>t[s.key])}class HW extends Lr{constructor(){super(...arguments),this.processSlotOptions=Me(zW),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:s}=this.props,{slatCoords:r}=this.state;if(s&&r){if(e.time){let a=r.computeTimeTop(e.time);a=Math.ceil(a),a&&(a+=1),s(a)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:s}=this;return G("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},G(_W,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),G(FW,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:s.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,s){let{dateEnv:r,options:a}=this.context,{colCoords:o}=this,{dateProfile:c}=this.props,{slatCoords:u}=this.state,{snapDuration:m,snapsPerSlot:f}=this.processSlotOptions(this.props.slotDuration,a.snapDuration),x=o.leftToIndex(e),v=u.positions.topToIndex(s);if(x!=null&&v!=null){let y=this.props.cells[x],N=u.positions.tops[v],w=u.positions.getHeight(v),E=(s-N)/w,_=Math.floor(E*f),R=v*f+_,I=this.props.cells[x].date,V=Hb(c.slotMinTime,TH(m,R)),z=r.add(I,V),F=r.add(z,m);return{dateProfile:c,dateSpan:Object.assign({range:{start:z,end:F},allDay:!1},y.extraDateSpan),dayEl:o.els[x],rect:{left:o.lefts[x],right:o.rights[x],top:N,bottom:N+w},layer:0}}return null}}function zW(t,e){let s=e||t,r=_v(t,s);return r===null&&(s=t,r=1),{snapDuration:s,snapsPerSlot:r}}class qW extends K6{sliceRange(e,s){let r=[];for(let a=0;a<s.length;a+=1){let o=Jl(e,s[a]);o&&r.push({start:o.start,end:o.end,isStart:o.start.valueOf()===e.start.valueOf(),isEnd:o.end.valueOf()===e.end.valueOf(),col:a})}return r}}class $W extends Lr{constructor(){super(...arguments),this.buildDayRanges=Me(GW),this.slicer=new qW,this.timeColsRef=Qs()}render(){let{props:e,context:s}=this,{dateProfile:r,dayTableModel:a}=e,{nowIndicator:o,nextDayThreshold:c}=s.options,u=this.buildDayRanges(a,r,s.dateEnv);return G(Gc,{unit:o?"minute":"day"},(m,f)=>G(HW,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,r,null,s,u),{forPrint:e.forPrint,axis:e.axis,dateProfile:r,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:a.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:m,nowIndicatorSegs:o&&this.slicer.sliceNowDate(m,r,c,s,u),todayRange:f,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function GW(t,e,s){let r=[];for(let a of t.headerDates)r.push({start:s.add(a,e.slotMinTime),end:s.add(a,e.slotMaxTime)});return r}const B_=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function WW(t,e,s,r,a){let o=new Date(0),c=t,u=st(0),m=s||QW(r),f=[];for(;er(c)<er(e);){let x=a.add(o,c),v=_v(u,m)!==null;f.push({date:x,time:c,key:x.toISOString(),isoTimeStr:$H(x),isLabeled:v}),c=Hb(c,r),u=Hb(u,r)}return f}function QW(t){let e,s,r;for(e=B_.length-1;e>=0;e-=1)if(s=st(B_[e]),r=_v(s,t),r!==null&&r>1)return s;return t}class YW extends NW{constructor(){super(...arguments),this.buildTimeColsModel=Me(KW),this.buildSlatMetas=Me(WW)}render(){let{options:e,dateEnv:s,dateProfileGenerator:r}=this.context,{props:a}=this,{dateProfile:o}=a,c=this.buildTimeColsModel(o,r),u=this.allDaySplitter.splitProps(a),m=this.buildSlatMetas(o.slotMinTime,o.slotMaxTime,e.slotLabelInterval,e.slotDuration,s),{dayMinWidth:f}=e,x=!f,v=f,y=e.dayHeaders&&G(W6,{dates:c.headerDates,dateProfile:o,datesRepDistinctDays:!0,renderIntro:x?this.renderHeadAxis:null}),N=e.allDaySlot!==!1&&(E=>G(_R,Object.assign({},u.allDay,{dateProfile:o,dayTableModel:c,nextDayThreshold:e.nextDayThreshold,tableMinWidth:E.tableMinWidth,colGroupNode:E.tableColGroupNode,renderRowIntro:x?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:E.clientWidth,clientHeight:E.clientHeight,forPrint:a.forPrint},this.getAllDayMaxEventProps()))),w=E=>G($W,Object.assign({},u.timed,{dayTableModel:c,dateProfile:o,axis:x,slotDuration:e.slotDuration,slatMetas:m,forPrint:a.forPrint,tableColGroupNode:E.tableColGroupNode,tableMinWidth:E.tableMinWidth,clientWidth:E.clientWidth,clientHeight:E.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:E.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return v?this.renderHScrollLayout(y,N,w,c.colCnt,f,m,this.state.slatCoords):this.renderSimpleLayout(y,N,w)}}function KW(t,e){let s=new Q6(t.renderRange,e);return new Y6(s,!1)}var XW='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';vv(XW);const ZW={allDaySlot:Boolean};var JW=Ma({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:ZW,views:{timeGrid:{component:YW,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});qv.touchMouseIgnoreWait=500;let Zb=0,lg=0,Jb=!1;class TR{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=s=>{if(!this.shouldIgnoreMouse()&&eQ(s)&&this.tryStart(s)){let r=this.createEventFromMouse(s,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=s=>{let r=this.createEventFromMouse(s);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleMouseUp=s=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(s)),this.cleanup()},this.handleTouchStart=s=>{if(this.tryStart(s)){this.isTouchDragging=!0;let r=this.createEventFromTouch(s,!0);this.emitter.trigger("pointerdown",r),this.initScrollWatch(r);let a=s.target;this.shouldIgnoreMove||a.addEventListener("touchmove",this.handleTouchMove),a.addEventListener("touchend",this.handleTouchEnd),a.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=s=>{let r=this.createEventFromTouch(s);this.recordCoords(r),this.emitter.trigger("pointermove",r)},this.handleTouchEnd=s=>{if(this.isDragging){let r=s.target;r.removeEventListener("touchmove",this.handleTouchMove),r.removeEventListener("touchend",this.handleTouchEnd),r.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(s)),this.cleanup(),this.isTouchDragging=!1,tQ()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=s=>{if(!this.shouldIgnoreMove){let r=window.scrollX-this.prevScrollX+this.prevPageX,a=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:s,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:r,pageY:a,deltaX:r-this.origPageX,deltaY:a-this.origPageY})}},this.containerEl=e,this.emitter=new Xg,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),sQ()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),nQ()}tryStart(e){let s=this.querySubjectEl(e),r=e.target;return s&&(!this.handleSelector||Vs(r,this.handleSelector))?(this.subjectEl=s,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){Jb=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Vs(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Zb||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(Jb=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,s){let r=0,a=0;return s?(this.origPageX=e.pageX,this.origPageY=e.pageY):(r=e.pageX-this.origPageX,a=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:r,deltaY:a}}createEventFromTouch(e,s){let r=e.touches,a,o,c=0,u=0;return r&&r.length?(a=r[0].pageX,o=r[0].pageY):(a=e.pageX,o=e.pageY),s?(this.origPageX=a,this.origPageY=o):(c=a-this.origPageX,u=o-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:a,pageY:o,deltaX:c,deltaY:u}}}function eQ(t){return t.button===0&&!t.ctrlKey}function tQ(){Zb+=1,setTimeout(()=>{Zb-=1},qv.touchMouseIgnoreWait)}function sQ(){lg+=1,lg===1&&window.addEventListener("touchmove",RR,{passive:!1})}function nQ(){lg-=1,lg||window.removeEventListener("touchmove",RR,{passive:!1})}function RR(t){Jb&&t.preventDefault()}class rQ{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,s,r){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=s-window.scrollX,this.origScreenY=r-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,s){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=s-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,s){let r=()=>{this.cleanup(),s()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(r,this.revertDuration):setTimeout(r,0)}doRevertAnimation(e,s){let r=this.mirrorEl,a=this.sourceEl.getBoundingClientRect();r.style.transition="top "+s+"ms,left "+s+"ms",ju(r,{left:a.left,top:a.top}),fH(r,()=>{r.style.transition="",e()})}cleanup(){this.mirrorEl&&(wv(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&ju(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,s=this.mirrorEl;return s||(s=this.mirrorEl=this.sourceEl.cloneNode(!0),s.style.userSelect="none",s.style.webkitUserSelect="none",s.style.pointerEvents="none",s.classList.add("fc-event-dragging"),ju(s,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(s)),s}}class DR extends Hv{constructor(e,s){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=s,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class IR extends DR{constructor(e,s){super(new Vq(e),s)}getEventTarget(){return this.scrollController.el}computeClientRect(){return Oq(this.scrollController.el)}}class aQ extends DR{constructor(e){super(new Uq,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const H_=typeof performance=="function"?performance.now:Date.now;class iQ{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let s=H_();this.handleSide(e,(s-this.msSinceRequest)/1e3),this.requestAnimation(s)}else this.isAnimating=!1}}}start(e,s,r){this.isEnabled&&(this.scrollCaches=this.buildCaches(r),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,s))}handleMove(e,s){if(this.isEnabled){let r=e-window.scrollX,a=s-window.scrollY,o=this.pointerScreenY===null?0:a-this.pointerScreenY,c=this.pointerScreenX===null?0:r-this.pointerScreenX;o<0?this.everMovedUp=!0:o>0&&(this.everMovedDown=!0),c<0?this.everMovedLeft=!0:c>0&&(this.everMovedRight=!0),this.pointerScreenX=r,this.pointerScreenY=a,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(H_()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,s){let{scrollCache:r}=e,{edgeThreshold:a}=this,o=a-e.distance,c=o*o/(a*a)*this.maxVelocity*s,u=1;switch(e.name){case"left":u=-1;case"right":r.setScrollLeft(r.getScrollLeft()+c*u);break;case"top":u=-1;case"bottom":r.setScrollTop(r.getScrollTop()+c*u);break}}computeBestEdge(e,s){let{edgeThreshold:r}=this,a=null,o=this.scrollCaches||[];for(let c of o){let u=c.clientRect,m=e-u.left,f=u.right-e,x=s-u.top,v=u.bottom-s;m>=0&&f>=0&&x>=0&&v>=0&&(x<=r&&this.everMovedUp&&c.canScrollUp()&&(!a||a.distance>x)&&(a={scrollCache:c,name:"top",distance:x}),v<=r&&this.everMovedDown&&c.canScrollDown()&&(!a||a.distance>v)&&(a={scrollCache:c,name:"bottom",distance:v}),m<=r&&this.everMovedLeft&&c.canScrollLeft()&&(!a||a.distance>m)&&(a={scrollCache:c,name:"left",distance:m}),f<=r&&this.everMovedRight&&c.canScrollRight()&&(!a||a.distance>f)&&(a={scrollCache:c,name:"right",distance:f}))}return a}buildCaches(e){return this.queryScrollEls(e).map(s=>s===window?new aQ(!1):new IR(s,!1))}queryScrollEls(e){let s=[];for(let r of this.scrollQuery)typeof r=="object"?s.push(r):s.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(r)));return s}}class nh extends Hq{constructor(e,s){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=a=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,gH(document.body),xH(document.body),a.isTouch||a.origEvent.preventDefault(),this.emitter.trigger("pointerdown",a),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(a.subjectEl,a.pageX,a.pageY),this.startDelay(a),this.minDistance||this.handleDistanceSurpassed(a)))},this.onPointerMove=a=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",a),!this.isDistanceSurpassed){let o=this.minDistance,c,{deltaX:u,deltaY:m}=a;c=u*u+m*m,c>=o*o&&this.handleDistanceSurpassed(a)}this.isDragging&&(a.origEvent.type!=="scroll"&&(this.mirror.handleMove(a.pageX,a.pageY),this.autoScroller.handleMove(a.pageX,a.pageY)),this.emitter.trigger("dragmove",a))}},this.onPointerUp=a=>{this.isInteracting&&(this.isInteracting=!1,pH(document.body),bH(document.body),this.emitter.trigger("pointerup",a),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(a)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let r=this.pointer=new TR(e);r.emitter.on("pointerdown",this.onPointerDown),r.emitter.on("pointermove",this.onPointerMove),r.emitter.on("pointerup",this.onPointerUp),s&&(r.selector=s),this.mirror=new rQ,this.autoScroller=new iQ}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class lQ{constructor(e){this.el=e,this.origRect=Bv(e),this.scrollCaches=z6(e).map(s=>new IR(s,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let s of this.scrollCaches)e+=s.origScrollLeft-s.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let s of this.scrollCaches)e+=s.origScrollTop-s.getScrollTop();return e}isWithinClipping(e,s){let r={left:e,top:s};for(let a of this.scrollCaches)if(!oQ(a.getEventTarget())&&!jq(r,a.clientRect))return!1;return!0}}function oQ(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Zg{constructor(e,s){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=r=>{let{dragging:a}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(r),this.initialHit||!this.requireInitial?(a.setIgnoreMove(!1),this.emitter.trigger("pointerdown",r)):a.setIgnoreMove(!0)},this.handleDragStart=r=>{this.emitter.trigger("dragstart",r),this.handleMove(r,!0)},this.handleDragMove=r=>{this.emitter.trigger("dragmove",r),this.handleMove(r)},this.handlePointerUp=r=>{this.releaseHits(),this.emitter.trigger("pointerup",r)},this.handleDragEnd=r=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,r),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",r)},this.droppableStore=s,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Xg}processFirstCoord(e){let s={left:e.pageX,top:e.pageY},r=s,a=e.subjectEl,o;a instanceof HTMLElement&&(o=Bv(a),r=Eq(r,o));let c=this.initialHit=this.queryHitForOffset(r.left,r.top);if(c){if(this.useSubjectCenter&&o){let u=F6(o,c.rect);u&&(r=_q(u))}this.coordAdjust=Sq(r,s)}else this.coordAdjust={left:0,top:0}}handleMove(e,s){let r=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(s||!Jg(this.movingHit,r))&&(this.movingHit=r,this.emitter.trigger("hitupdate",r,!1,e))}prepareHits(){this.offsetTrackers=Da(this.droppableStore,e=>(e.component.prepareHits(),new lQ(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let s in e)e[s].destroy();this.offsetTrackers={}}queryHitForOffset(e,s){let{droppableStore:r,offsetTrackers:a}=this,o=null;for(let c in r){let u=r[c].component,m=a[c];if(m&&m.isWithinClipping(e,s)){let f=m.computeLeft(),x=m.computeTop(),v=e-f,y=s-x,{origRect:N}=m,w=N.right-N.left,E=N.bottom-N.top;if(v>=0&&v<w&&y>=0&&y<E){let _=u.queryHit(v,y,w,E);_&&Yg(_.dateProfile.activeRange,_.dateSpan.range)&&(this.disablePointCheck||m.el.contains(m.el.getRootNode().elementFromPoint(v+f-window.scrollX,y+x-window.scrollY)))&&(!o||_.layer>o.layer)&&(_.componentId=c,_.context=u.context,_.rect.left+=f,_.rect.right+=f,_.rect.top+=x,_.rect.bottom+=x,o=_)}}}return o}}function Jg(t,e){return!t&&!e?!0:!!t!=!!e?!1:hq(t.dateSpan,e.dateSpan)}function kR(t,e){let s={};for(let r of e.pluginHooks.datePointTransforms)Object.assign(s,r(t,e));return Object.assign(s,cQ(t,e.dateEnv)),s}function cQ(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class dQ extends $c{constructor(e){super(e),this.handlePointerDown=r=>{let{dragging:a}=this,o=r.origEvent.target;a.setIgnoreMove(!this.component.isValidDateDownEl(o))},this.handleDragEnd=r=>{let{component:a}=this,{pointer:o}=this.dragging;if(!o.wasTouchScroll){let{initialHit:c,finalHit:u}=this.hitDragging;if(c&&u&&Jg(c,u)){let{context:m}=a,f=Object.assign(Object.assign({},kR(c.dateSpan,m)),{dayEl:c.dayEl,jsEvent:r.origEvent,view:m.viewApi||m.calendarApi.view});m.emitter.trigger("dateClick",f)}}},this.dragging=new nh(e.el),this.dragging.autoScroller.isEnabled=!1;let s=this.hitDragging=new Zg(this.dragging,Uv(e));s.emitter.on("pointerdown",this.handlePointerDown),s.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class uQ extends $c{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=c=>{let{component:u,dragging:m}=this,{options:f}=u.context,x=f.selectable&&u.isValidDateDownEl(c.origEvent.target);m.setIgnoreMove(!x),m.delay=c.isTouch?hQ(u):null},this.handleDragStart=c=>{this.component.context.calendarApi.unselect(c)},this.handleHitUpdate=(c,u)=>{let{context:m}=this.component,f=null,x=!1;if(c){let v=this.hitDragging.initialHit;c.componentId===v.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(v,c)||(f=mQ(v,c,m.pluginHooks.dateSelectionTransformers)),(!f||!Qq(f,c.dateProfile,m))&&(x=!0,f=null)}f?m.dispatch({type:"SELECT_DATES",selection:f}):u||m.dispatch({type:"UNSELECT_DATES"}),x?jv():Ev(),u||(this.dragSelection=f)},this.handlePointerUp=c=>{this.dragSelection&&(R6(this.dragSelection,c,this.component.context),this.dragSelection=null)};let{component:s}=e,{options:r}=s.context,a=this.dragging=new nh(e.el);a.touchScrollAllowed=!1,a.minDistance=r.selectMinDistance||0,a.autoScroller.isEnabled=r.dragScroll;let o=this.hitDragging=new Zg(this.dragging,Uv(e));o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function hQ(t){let{options:e}=t.context,s=e.selectLongPressDelay;return s==null&&(s=e.longPressDelay),s}function mQ(t,e,s){let r=t.dateSpan,a=e.dateSpan,o=[r.range.start,r.range.end,a.range.start,a.range.end];o.sort(jH);let c={};for(let u of s){let m=u(t,e);if(m===!1)return null;m&&Object.assign(c,m)}return c.range={start:o[0],end:o[3]},c.allDay=r.allDay,c}class rh extends $c{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=c=>{let u=c.origEvent.target,{component:m,dragging:f}=this,{mirror:x}=f,{options:v}=m.context,y=m.context;this.subjectEl=c.subjectEl;let N=this.subjectSeg=Ic(c.subjectEl),E=(this.eventRange=N.eventRange).instance.instanceId;this.relevantEvents=Pv(y.getCurrentData().eventStore,E),f.minDistance=c.isTouch?0:v.eventDragMinDistance,f.delay=c.isTouch&&E!==m.props.eventSelection?gQ(m):null,v.fixedMirrorParent?x.parentNode=v.fixedMirrorParent:x.parentNode=Vs(u,".fc"),x.revertDuration=v.dragRevertDuration;let _=m.isValidSegDownEl(u)&&!Vs(u,".fc-event-resizer");f.setIgnoreMove(!_),this.isDragging=_&&c.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=c=>{let u=this.component.context,m=this.eventRange,f=m.instance.instanceId;c.isTouch?f!==this.component.props.eventSelection&&u.dispatch({type:"SELECT_EVENT",eventInstanceId:f}):u.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(u.calendarApi.unselect(c),u.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Mt(u,m.def,m.instance),jsEvent:c.origEvent,view:u.viewApi}))},this.handleHitUpdate=(c,u)=>{if(!this.isDragging)return;let m=this.relevantEvents,f=this.hitDragging.initialHit,x=this.component.context,v=null,y=null,N=null,w=!1,E={affectedEvents:m,mutatedEvents:jn(),isEvent:!0};if(c){v=c.context;let _=v.options;x===v||_.editable&&_.droppable?(y=fQ(f,c,this.eventRange.instance.range.start,v.getCurrentData().pluginHooks.eventDragMutationMassagers),y&&(N=Vv(m,v.getCurrentData().eventUiBases,y,v),E.mutatedEvents=N,X6(E,c.dateProfile,v)||(w=!0,y=null,N=null,E.mutatedEvents=jn()))):v=null}this.displayDrag(v,E),w?jv():Ev(),u||(x===v&&Jg(f,c)&&(y=null),this.dragging.setMirrorNeedsRevert(!y),this.dragging.setMirrorIsVisible(!c||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=v,this.validMutation=y,this.mutatedRelevantEvents=N)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=c=>{if(this.isDragging){let u=this.component.context,m=u.viewApi,{receivingContext:f,validMutation:x}=this,v=this.eventRange.def,y=this.eventRange.instance,N=new Mt(u,v,y),w=this.relevantEvents,E=this.mutatedRelevantEvents,{finalHit:_}=this.hitDragging;if(this.clearDrag(),u.emitter.trigger("eventDragStop",{el:this.subjectEl,event:N,jsEvent:c.origEvent,view:m}),x){if(f===u){let R=new Mt(u,E.defs[v.defId],y?E.instances[y.instanceId]:null);u.dispatch({type:"MERGE_EVENTS",eventStore:E});let I={oldEvent:N,event:R,relatedEvents:Fl(E,u,y),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:w})}},V={};for(let z of u.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(V,z(x,u));u.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},I),V),{el:c.subjectEl,delta:x.datesDelta,jsEvent:c.origEvent,view:m})),u.emitter.trigger("eventChange",I)}else if(f){let R={event:N,relatedEvents:Fl(w,u,y),revert(){u.dispatch({type:"MERGE_EVENTS",eventStore:w})}};u.emitter.trigger("eventLeave",Object.assign(Object.assign({},R),{draggedEl:c.subjectEl,view:m})),u.dispatch({type:"REMOVE_EVENTS",eventStore:w}),u.emitter.trigger("eventRemove",R);let I=E.defs[v.defId],V=E.instances[y.instanceId],z=new Mt(f,I,V);f.dispatch({type:"MERGE_EVENTS",eventStore:E});let F={event:z,relatedEvents:Fl(E,f,V),revert(){f.dispatch({type:"REMOVE_EVENTS",eventStore:E})}};f.emitter.trigger("eventAdd",F),c.isTouch&&f.dispatch({type:"SELECT_EVENT",eventInstanceId:y.instanceId}),f.emitter.trigger("drop",Object.assign(Object.assign({},kR(_.dateSpan,f)),{draggedEl:c.subjectEl,jsEvent:c.origEvent,view:_.context.viewApi})),f.emitter.trigger("eventReceive",Object.assign(Object.assign({},F),{draggedEl:c.subjectEl,view:_.context.viewApi}))}}else u.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:s}=this,{options:r}=s.context,a=this.dragging=new nh(e.el);a.pointer.selector=rh.SELECTOR,a.touchScrollAllowed=!1,a.autoScroller.isEnabled=r.dragScroll;let o=this.hitDragging=new Zg(this.dragging,Wb);o.useSubjectCenter=e.useEventCenter,o.emitter.on("pointerdown",this.handlePointerDown),o.emitter.on("dragstart",this.handleDragStart),o.emitter.on("hitupdate",this.handleHitUpdate),o.emitter.on("pointerup",this.handlePointerUp),o.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,s){let r=this.component.context,a=this.receivingContext;a&&a!==e&&(a===r?a.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:s.affectedEvents,mutatedEvents:jn(),isEvent:!0}}):a.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:s})}clearDrag(){let e=this.component.context,{receivingContext:s}=this;s&&s.dispatch({type:"UNSET_EVENT_DRAG"}),e!==s&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}rh.SELECTOR=".fc-event-draggable, .fc-event-resizable";function fQ(t,e,s,r){let a=t.dateSpan,o=e.dateSpan,c=a.range.start,u=o.range.start,m={};a.allDay!==o.allDay&&(m.allDay=o.allDay,m.hasEnd=e.context.options.allDayMaintainDuration,o.allDay?c=Ct(s):c=s);let f=dc(c,u,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);f.milliseconds&&(m.allDay=!1);let x={datesDelta:f,standardProps:m};for(let v of r)v(x,t,e);return x}function gQ(t){let{options:e}=t.context,s=e.eventLongPressDelay;return s==null&&(s=e.longPressDelay),s}class pQ extends $c{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=o=>{let{component:c}=this,u=this.querySegEl(o),m=Ic(u),f=this.eventRange=m.eventRange;this.dragging.minDistance=c.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(o.origEvent.target)||o.isTouch&&this.component.props.eventSelection!==f.instance.instanceId)},this.handleDragStart=o=>{let{context:c}=this.component,u=this.eventRange;this.relevantEvents=Pv(c.getCurrentData().eventStore,this.eventRange.instance.instanceId);let m=this.querySegEl(o);this.draggingSegEl=m,this.draggingSeg=Ic(m),c.calendarApi.unselect(),c.emitter.trigger("eventResizeStart",{el:m,event:new Mt(c,u.def,u.instance),jsEvent:o.origEvent,view:c.viewApi})},this.handleHitUpdate=(o,c,u)=>{let{context:m}=this.component,f=this.relevantEvents,x=this.hitDragging.initialHit,v=this.eventRange.instance,y=null,N=null,w=!1,E={affectedEvents:f,mutatedEvents:jn(),isEvent:!0};o&&(o.componentId===x.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(x,o)||(y=xQ(x,o,u.subjectEl.classList.contains("fc-event-resizer-start"),v.range))),y&&(N=Vv(f,m.getCurrentData().eventUiBases,y,m),E.mutatedEvents=N,X6(E,o.dateProfile,m)||(w=!0,y=null,N=null,E.mutatedEvents=null)),N?m.dispatch({type:"SET_EVENT_RESIZE",state:E}):m.dispatch({type:"UNSET_EVENT_RESIZE"}),w?jv():Ev(),c||(y&&Jg(x,o)&&(y=null),this.validMutation=y,this.mutatedRelevantEvents=N)},this.handleDragEnd=o=>{let{context:c}=this.component,u=this.eventRange.def,m=this.eventRange.instance,f=new Mt(c,u,m),x=this.relevantEvents,v=this.mutatedRelevantEvents;if(c.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:f,jsEvent:o.origEvent,view:c.viewApi}),this.validMutation){let y=new Mt(c,v.defs[u.defId],m?v.instances[m.instanceId]:null);c.dispatch({type:"MERGE_EVENTS",eventStore:v});let N={oldEvent:f,event:y,relatedEvents:Fl(v,c,m),revert(){c.dispatch({type:"MERGE_EVENTS",eventStore:x})}};c.emitter.trigger("eventResize",Object.assign(Object.assign({},N),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||st(0),endDelta:this.validMutation.endDelta||st(0),jsEvent:o.origEvent,view:c.viewApi})),c.emitter.trigger("eventChange",N)}else c.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:s}=e,r=this.dragging=new nh(e.el);r.pointer.selector=".fc-event-resizer",r.touchScrollAllowed=!1,r.autoScroller.isEnabled=s.context.options.dragScroll;let a=this.hitDragging=new Zg(this.dragging,Uv(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Vs(e.subjectEl,".fc-event")}}function xQ(t,e,s,r){let a=t.context.dateEnv,o=t.dateSpan.range.start,c=e.dateSpan.range.start,u=dc(o,c,a,t.largeUnit);if(s){if(a.add(r.start,u)<r.end)return{startDelta:u}}else if(a.add(r.end,u)>r.start)return{endDelta:u};return null}class bQ{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=r=>{r.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=r=>{let a=this.context.options.unselectCancel,o=l6(r.origEvent);this.matchesCancel=!!Vs(o,a),this.matchesEvent=!!Vs(o,rh.SELECTOR)},this.onDocumentPointerUp=r=>{let{context:a}=this,{documentPointer:o}=this,c=a.getCurrentData();if(!o.wasTouchScroll){if(c.dateSelection&&!this.isRecentPointerDateSelect){let u=a.options.unselectAuto;u&&(!u||!this.matchesCancel)&&a.calendarApi.unselect(r)}c.eventSelection&&!this.matchesEvent&&a.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let s=this.documentPointer=new TR(document);s.shouldIgnoreMove=!0,s.shouldWatchScroll=!1,s.emitter.on("pointerdown",this.onDocumentPointerDown),s.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const yQ={fixedMirrorParent:re},vQ={dateClick:re,eventDragStart:re,eventDragStop:re,eventDrop:re,eventResizeStart:re,eventResizeStop:re,eventResize:re,drop:re,eventReceive:re,eventLeave:re};qv.dataAttrPrefix="";var NQ=Ma({name:"@fullcalendar/interaction",componentInteractions:[dQ,uQ,rh,pQ],calendarInteractions:[bQ],elementDraggingImpl:nh,optionRefiners:yQ,listenerRefiners:vQ}),wQ={code:"es",week:{dow:1,doy:4},buttonText:{prev:"Ant",next:"Sig",today:"Hoy",year:"Año",month:"Mes",week:"Semana",day:"Día",list:"Agenda"},buttonHints:{prev:"$0 antes",next:"$0 siguiente",today(t){return t==="Día"?"Hoy":(t==="Semana"?"Esta":"Este")+" "+t.toLocaleLowerCase()}},viewHint(t){return"Vista "+(t==="Semana"?"de la":"del")+" "+t.toLocaleLowerCase()},weekText:"Sm",weekTextLong:"Semana",allDayText:"Todo el día",moreLinkText:"más",moreLinkHint(t){return`Mostrar ${t} eventos más`},noEventsText:"No hay eventos para mostrar",navLinkHint:"Ir al $0",closeHint:"Cerrar",timeHint:"La hora",eventHint:"Evento"};function Xm(){const[t,e]=S.useState([]),[s,r]=S.useState(!0),[a,o]=S.useState(null),[c,u]=S.useState(!1);S.useEffect(()=>{m()},[]);const m=async()=>{try{r(!0);const E=await Ce(be(ne,"citas")),_=[];for(const R of E.docs){const I=R.data();if(I.fecha&&I.hora){let V=I.paciente||"Sin nombre";if(I.pacienteId)try{const F=we(ne,"pacientes",I.pacienteId),P=await Ke(F);if(P.exists()){const C=P.data();V=`${C.nombres} ${C.apellidos}`}}catch(F){console.warn("Error al cargar paciente:",F)}let z=I.doctor||"Sin asignar";if(I.doctorId)try{const F=we(ne,"doctores",I.doctorId),P=await Ke(F);P.exists()&&(z=P.data().nombres||"Sin nombre")}catch(F){console.warn("Error al cargar doctor:",F)}_.push({id:R.id,title:V,start:`${I.fecha}T${I.hora}`,backgroundColor:f(I.estado),borderColor:f(I.estado),extendedProps:{paciente:V,doctor:z,especialidad:I.especialidad||"Sin especialidad",hora:I.hora||"",estado:I.estado||"pendiente",fecha:I.fecha||"",observaciones:I.observaciones||""}})}}e(_)}catch(E){console.error("❌ Error al cargar citas:",E),W.error("Error al cargar las citas")}finally{r(!1)}},f=E=>{switch(E){case"pendiente":return"#facc15";case"atendido":return"#4ade80";case"cancelado":return"#f87171";default:return"#60a5fa"}},x=E=>{switch(E){case"pendiente":return"⏳";case"atendido":return"✅";case"cancelado":return"❌";default:return"📅"}},v=E=>{o(E.event),u(!0)},y=()=>{u(!1),o(null)},N=E=>E||"-",w=E=>E?new Date(E).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"-";return s?n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"flex items-center justify-between mb-6",children:n.jsx("div",{className:"h-8 bg-gray-300 rounded w-64 animate-pulse"})}),n.jsx("div",{className:"mb-4",children:n.jsx("div",{className:"h-4 bg-gray-300 rounded w-96 animate-pulse"})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsx("div",{className:"animate-pulse",children:n.jsx("div",{className:"h-96 bg-gray-300 rounded"})})})]}):n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(lt,{className:"h-8 w-8 text-blue-600"}),"Horarios de Citas"]}),n.jsxs("div",{className:"text-sm text-gray-600",children:["Total citas: ",n.jsx("span",{className:"font-semibold",children:t.length})]})]}),n.jsx("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:n.jsxs("div",{className:"flex items-center gap-2 text-blue-800",children:[n.jsx(ms,{className:"h-5 w-5"}),n.jsx("strong",{children:"Horario de atención:"})," Lunes a Viernes de 07:00 a 20:00 hrs."]})}),n.jsxs("div",{className:"mb-6 bg-white p-4 rounded-lg shadow",children:[n.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:"Leyenda de Estados"}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#facc15"}}),n.jsx("span",{className:"text-sm text-gray-700",children:"⏳ Pendiente"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#4ade80"}}),n.jsx("span",{className:"text-sm text-gray-700",children:"✅ Atendido"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#f87171"}}),n.jsx("span",{className:"text-sm text-gray-700",children:"❌ Cancelado"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:"#60a5fa"}}),n.jsx("span",{className:"text-sm text-gray-700",children:"📅 Otros"})]})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:n.jsx(pR,{plugins:[fW,JW,NQ],initialView:"timeGridWeek",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},events:t,locale:wQ,allDaySlot:!1,slotMinTime:"07:00:00",slotMaxTime:"22:00:00",height:"auto",eventClick:v,eventContent:E=>{const _=E.event.title,R=E.timeText,I=E.event.extendedProps.doctor,V=E.event.extendedProps.especialidad,z=E.event.extendedProps.estado;return{html:`
                <div class="p-1 text-xs leading-tight cursor-pointer hover:opacity-80 transition-opacity">
                  <div class="font-semibold">${R} - ${_}</div>
                  <div class="text-gray-700">${I}</div>
                  <div class="text-gray-600">${V}</div>
                  <div class="flex items-center gap-1 mt-1">
                    <span>${x(z)}</span>
                    <span class="capitalize">${z}</span>
                  </div>
                </div>
              `}}})}),c&&a&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 flex items-center gap-2",children:[n.jsx(Ys,{className:"h-5 w-5 text-blue-600"}),"Detalles de la Cita"]}),n.jsx("button",{onClick:y,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(VT,{className:"h-5 w-5"})})]}),n.jsxs("div",{className:"p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(He,{className:"h-4 w-4 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Paciente:"}),n.jsx("span",{className:"ml-2 text-gray-800",children:a.extendedProps.paciente})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ot,{className:"h-4 w-4 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Doctor:"}),n.jsx("span",{className:"ml-2 text-gray-800",children:a.extendedProps.doctor})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(lt,{className:"h-4 w-4 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Fecha:"}),n.jsx("span",{className:"ml-2 text-gray-800",children:w(a.extendedProps.fecha)})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ms,{className:"h-4 w-4 text-gray-600"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Hora:"}),n.jsx("span",{className:"ml-2 text-gray-800",children:N(a.extendedProps.hora)})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"h-4 w-4 rounded",style:{backgroundColor:a.backgroundColor}}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Estado:"}),n.jsxs("span",{className:"ml-2 text-gray-800 capitalize flex items-center gap-1",children:[x(a.extendedProps.estado),a.extendedProps.estado]})]})]}),n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"h-4 w-4 mt-0.5",children:"📋"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Especialidad:"}),n.jsx("span",{className:"ml-2 text-gray-800",children:a.extendedProps.especialidad})]})]}),a.extendedProps.observaciones&&n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx("div",{className:"h-4 w-4 mt-0.5",children:"📝"}),n.jsxs("div",{children:[n.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Observaciones:"}),n.jsx("p",{className:"ml-2 text-gray-800 text-sm mt-1",children:a.extendedProps.observaciones})]})]})]}),n.jsx("div",{className:"p-4 border-t bg-gray-50 rounded-b-lg",children:n.jsx("button",{onClick:y,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Cerrar"})})]})})]})}function jQ(){const[t,e]=S.useState([]),[s,r]=S.useState([]),[a,o]=S.useState({}),[c,u]=S.useState({paciente:"",prioridad:"",estado:"",fecha:""}),[m,f]=S.useState(!0),{user:x}=wt(),v=Je();S.useEffect(()=>{y()},[x]),S.useEffect(()=>{N()},[t,c]);const y=async()=>{try{f(!0);let O;x!=null&&x.clinicId?O=Oe(be(ne,"triajes"),Re("clinicId","==",x.clinicId),Bn("fechaCreacion","desc")):O=Oe(be(ne,"triajes"),Bn("fechaCreacion","desc"));const q=await Ce(O),M=[],L=new Set;if(q.forEach(oe=>{const ve=oe.data();ve._placeholder||(M.push({id:oe.id,...ve}),ve.pacienteId&&L.add(ve.pacienteId))}),L.size>0){const oe=Oe(be(ne,"pacientes")),ve=await Ce(oe),ee={};ve.forEach(fe=>{const ye=fe.data();L.has(fe.id)&&(ee[fe.id]={id:fe.id,...ye})}),o(ee)}console.log(`✅ ${M.length} triajes cargados`),e(M)}catch(O){console.error("❌ Error al cargar triajes:",O),W.error("Error al cargar los triajes")}finally{f(!1)}},N=()=>{let O=[...t];c.paciente&&(O=O.filter(q=>{var L,oe;const M=a[q.pacienteId];return((L=M==null?void 0:M.nombre)==null?void 0:L.toLowerCase().includes(c.paciente.toLowerCase()))||((oe=M==null?void 0:M.dni)==null?void 0:oe.toLowerCase().includes(c.paciente.toLowerCase()))})),c.prioridad&&(O=O.filter(q=>q.prioridad===c.prioridad)),c.estado&&(O=O.filter(q=>q.estado===c.estado)),c.fecha&&(O=O.filter(q=>new Date(q.fechaCreacion).toISOString().split("T")[0]===c.fecha)),r(O)},w=O=>{const{name:q,value:M}=O.target;u(L=>({...L,[q]:M}))},E=()=>{u({paciente:"",prioridad:"",estado:"",fecha:""})},_=async(O,q)=>{if(window.confirm(`¿Estás seguro de eliminar el triaje de "${q}"?`))try{await qc(we(ne,"triajes",O)),W.success("✅ Triaje eliminado correctamente"),y()}catch(M){console.error("❌ Error al eliminar triaje:",M),W.error("❌ No se pudo eliminar el triaje")}},R=O=>{v(`/recepcion/triaje/editar/${O}`)},I=O=>{v(`/recepcion/triaje/ver/${O}`)},V=()=>{v("/recepcion/triaje/crear")},z=O=>O?new Date(O).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",F=O=>{switch(O){case"alta":return"bg-red-50 text-red-700 ring-red-600/20";case"media":return"bg-yellow-50 text-yellow-700 ring-yellow-600/20";case"baja":return"bg-green-50 text-green-700 ring-green-600/20";default:return"bg-gray-50 text-gray-700 ring-gray-600/20"}},P=O=>{switch(O){case"pendiente":return"bg-yellow-50 text-yellow-700 ring-yellow-600/20";case"en_proceso":return"bg-blue-50 text-blue-700 ring-blue-600/20";case"completado":return"bg-green-50 text-green-700 ring-green-600/20";case"cancelado":return"bg-red-50 text-red-700 ring-red-600/20";default:return"bg-gray-50 text-gray-700 ring-gray-600/20"}},C=O=>{switch(O){case"alta":return n.jsx(vE,{className:"h-4 w-4"});case"media":return n.jsx(Lu,{className:"h-4 w-4"});case"baja":return n.jsx(yE,{className:"h-4 w-4"});default:return n.jsx(xc,{className:"h-4 w-4"})}},k=(()=>{const O=t.length,q=t.filter(oe=>oe.prioridad==="alta").length,M=t.filter(oe=>oe.estado==="pendiente").length,L=t.filter(oe=>oe.estado==="completado").length;return{total:O,alta:q,pendientes:M,completados:L}})();return m?n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-8"}),n.jsx("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[...Array(4)].map((O,q)=>n.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:n.jsxs("div",{className:"p-5",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded mb-2"}),n.jsx("div",{className:"h-8 bg-gray-200 rounded"})]})},q))}),n.jsx("div",{className:"bg-white shadow rounded-lg",children:n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),n.jsx("div",{className:"space-y-3",children:[...Array(5)].map((O,q)=>n.jsx("div",{className:"h-16 bg-gray-200 rounded"},q))})]})})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold leading-tight text-gray-900 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(xc,{className:"h-8 w-8 text-blue-600"})}),"Triaje de Pacientes"]}),n.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Gestiona y prioriza la atención de pacientes según su estado de salud"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsxs("button",{onClick:V,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[n.jsx(NE,{className:"h-4 w-4 mr-2"}),"Nuevo Triaje"]})})]}),n.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 mb-8",children:[n.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:n.jsx("div",{className:"p-5",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(oU,{className:"h-6 w-6 text-blue-400"})}),n.jsx("div",{className:"ml-5 w-0 flex-1",children:n.jsxs("dl",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Triajes"}),n.jsx("dd",{className:"text-lg font-medium text-gray-900",children:k.total})]})})]})})}),n.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:n.jsx("div",{className:"p-5",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(vE,{className:"h-6 w-6 text-red-400"})}),n.jsx("div",{className:"ml-5 w-0 flex-1",children:n.jsxs("dl",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Prioridad Alta"}),n.jsx("dd",{className:"text-lg font-medium text-gray-900",children:k.alta})]})})]})})}),n.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:n.jsx("div",{className:"p-5",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(Lu,{className:"h-6 w-6 text-yellow-400"})}),n.jsx("div",{className:"ml-5 w-0 flex-1",children:n.jsxs("dl",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Pendientes"}),n.jsx("dd",{className:"text-lg font-medium text-gray-900",children:k.pendientes})]})})]})})}),n.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:n.jsx("div",{className:"p-5",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx(yE,{className:"h-6 w-6 text-green-400"})}),n.jsx("div",{className:"ml-5 w-0 flex-1",children:n.jsxs("dl",{children:[n.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Completados"}),n.jsx("dd",{className:"text-lg font-medium text-gray-900",children:k.completados})]})})]})})})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg mb-6",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("div",{className:"flex items-center",children:[n.jsx(MT,{className:"h-5 w-5 text-gray-400 mr-2"}),n.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filtros"})]})}),n.jsxs("div",{className:"px-6 py-4",children:[n.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"paciente",className:"block text-sm font-medium text-gray-700 mb-1",children:"Paciente"}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:n.jsx(Pb,{className:"h-4 w-4 text-gray-400"})}),n.jsx("input",{type:"text",name:"paciente",id:"paciente",value:c.paciente,onChange:w,placeholder:"Buscar por nombre o DNI",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"prioridad",className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioridad"}),n.jsxs("select",{name:"prioridad",id:"prioridad",value:c.prioridad,onChange:w,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Todas las prioridades"}),n.jsx("option",{value:"alta",children:"Alta"}),n.jsx("option",{value:"media",children:"Media"}),n.jsx("option",{value:"baja",children:"Baja"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-gray-700 mb-1",children:"Estado"}),n.jsxs("select",{name:"estado",id:"estado",value:c.estado,onChange:w,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Todos los estados"}),n.jsx("option",{value:"pendiente",children:"Pendiente"}),n.jsx("option",{value:"en_proceso",children:"En Proceso"}),n.jsx("option",{value:"completado",children:"Completado"}),n.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"fecha",className:"block text-sm font-medium text-gray-700 mb-1",children:"Fecha"}),n.jsx("input",{type:"date",name:"fecha",id:"fecha",value:c.fecha,onChange:w,className:"block w-full px-3 py-2 border border-gray-300 rounded-md leading-5 bg-white focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"})]})]}),(c.paciente||c.prioridad||c.estado||c.fecha)&&n.jsx("div",{className:"mt-4",children:n.jsx("button",{onClick:E,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Limpiar filtros"})})]})]}),n.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:["Lista de Triajes (",s.length,")"]})}),n.jsx("ul",{className:"divide-y divide-gray-200",children:s.length===0?n.jsx("li",{className:"px-6 py-12",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Pb,{className:"mx-auto h-12 w-12 text-gray-400"}),n.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No se encontraron triajes"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500",children:t.length===0?"No hay triajes registrados":"Intenta ajustar los filtros"}),t.length===0&&n.jsx("div",{className:"mt-6",children:n.jsxs("button",{onClick:V,className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[n.jsx(NE,{className:"h-4 w-4 mr-2"}),"Crear primer triaje"]})})]})}):s.map(O=>{var M,L;const q=a[O.pacienteId];return n.jsx("li",{className:"px-6 py-4 hover:bg-gray-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center space-x-4",children:[n.jsx("div",{className:"flex-shrink-0",children:n.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:n.jsx(_i,{className:"h-5 w-5 text-gray-500"})})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center space-x-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:(q==null?void 0:q.nombre)||"Paciente no encontrado"}),n.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ring-1 ring-inset ${F(O.prioridad)}`,children:[C(O.prioridad),n.jsx("span",{className:"ml-1",children:((M=O.prioridad)==null?void 0:M.charAt(0).toUpperCase())+((L=O.prioridad)==null?void 0:L.slice(1))||"-"})]}),n.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ring-1 ring-inset ${P(O.estado)}`,children:[O.estado==="pendiente"&&"Pendiente",O.estado==="en_proceso"&&"En Proceso",O.estado==="completado"&&"Completado",O.estado==="cancelado"&&"Cancelado"]})]}),n.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-sm text-gray-500",children:[n.jsxs("span",{children:["DNI: ",(q==null?void 0:q.dni)||"-"]}),n.jsxs("span",{className:"flex items-center",children:[n.jsx(pc,{className:"h-4 w-4 mr-1"}),z(O.fechaCreacion)]}),n.jsx("span",{children:O.motivo||"-"})]}),O.signosVitales&&n.jsxs("div",{className:"mt-1 flex items-center space-x-4 text-xs text-gray-400",children:[O.signosVitales.presionArterial&&n.jsxs("span",{children:["PA: ",O.signosVitales.presionArterial]}),O.signosVitales.temperatura&&n.jsxs("span",{children:["T°: ",O.signosVitales.temperatura,"°C"]}),O.signosVitales.pulso&&n.jsxs("span",{children:["Pulso: ",O.signosVitales.pulso," bpm"]})]})]})]}),n.jsxs("div",{className:"flex items-center space-x-2",children:[n.jsx("button",{onClick:()=>I(O.id),className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",title:"Ver triaje",children:n.jsx(vU,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>R(O.id),className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",title:"Editar triaje",children:n.jsx(TU,{className:"h-4 w-4"})}),n.jsx("button",{onClick:()=>_(O.id,q==null?void 0:q.nombre),className:"inline-flex items-center p-2 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",title:"Eliminar triaje",children:n.jsx(VU,{className:"h-4 w-4"})})]})]})},O.id)})})]})]})})}function EQ(){const[t,e]=S.useState({pacienteId:"",motivo:"",prioridad:"media",estado:"pendiente",signosVitales:{presionArterial:"",temperatura:"",pulso:"",respiracion:"",saturacionOxigeno:"",peso:"",talla:""},sintomas:"",observaciones:"",fechaCreacion:new Date().toISOString()}),[s,r]=S.useState([]),[a,o]=S.useState(!1),[c,u]=S.useState(!0),{user:m}=wt(),f=Je();S.useEffect(()=>{x()},[m]);const x=async()=>{try{u(!0);let w;m!=null&&m.clinicId?w=Oe(be(ne,"pacientes"),Re("clinicId","==",m.clinicId)):w=Oe(be(ne,"pacientes"));const E=await Ce(w),_=[];E.forEach(R=>{const I=R.data();I._placeholder||_.push({id:R.id,...I})}),r(_.sort((R,I)=>{var V;return(V=R.nombre)==null?void 0:V.localeCompare(I.nombre)}))}catch(w){console.error("❌ Error al cargar pacientes:",w),W.error("Error al cargar los pacientes")}finally{u(!1)}},v=w=>{const{name:E,value:_}=w.target;if(E.startsWith("signosVitales.")){const R=E.split(".")[1];e(I=>({...I,signosVitales:{...I.signosVitales,[R]:_}}))}else e(R=>({...R,[E]:_}))},y=async w=>{if(w.preventDefault(),!t.pacienteId){W.error("Por favor selecciona un paciente");return}if(!t.motivo.trim()){W.error("Por favor ingresa el motivo de consulta");return}try{o(!0);const E={...t,clinicId:(m==null?void 0:m.clinicId)||null,creadoPor:m.uid,fechaCreacion:new Date().toISOString(),fechaActualizacion:new Date().toISOString()};await Gl(be(ne,"triajes"),E),W.success("✅ Triaje creado correctamente"),f("/recepcion/triaje")}catch(E){console.error("❌ Error al crear triaje:",E),W.error("❌ No se pudo crear el triaje")}finally{o(!1)}},N=()=>{f("/recepcion/triaje")};return c?n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsx("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:n.jsxs("div",{className:"animate-pulse",children:[n.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mb-8"}),n.jsx("div",{className:"bg-white shadow rounded-lg p-6",children:n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),n.jsx("div",{className:"h-10 bg-gray-200 rounded"}),n.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),n.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})})]})})}):n.jsx("div",{className:"min-h-screen bg-gray-50",children:n.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 py-8",children:[n.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between mb-8",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-3xl font-bold leading-tight text-gray-900 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(xc,{className:"h-8 w-8 text-blue-600"})}),"Nuevo Triaje"]}),n.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Registra la evaluación inicial del paciente y asigna prioridad de atención"})]}),n.jsx("div",{className:"mt-4 sm:mt-0",children:n.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[n.jsx(tU,{className:"h-4 w-4 mr-2"}),"Volver"]})})]}),n.jsxs("form",{onSubmit:y,className:"space-y-6",children:[n.jsxs("div",{className:"bg-white shadow rounded-lg",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[n.jsx(_i,{className:"h-5 w-5 text-blue-600"}),"Información del Paciente"]})}),n.jsx("div",{className:"px-6 py-4",children:n.jsx("div",{className:"grid grid-cols-1 gap-6",children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pacienteId",className:"block text-sm font-medium text-gray-700 mb-2",children:"Paciente *"}),n.jsxs("select",{name:"pacienteId",id:"pacienteId",value:t.pacienteId,onChange:v,required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"",children:"Seleccionar paciente..."}),s.map(w=>n.jsxs("option",{value:w.id,children:[w.nombre," - DNI: ",w.dni]},w.id))]})]})})})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[n.jsx(Lu,{className:"h-5 w-5 text-green-600"}),"Evaluación Inicial"]})}),n.jsx("div",{className:"px-6 py-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{htmlFor:"motivo",className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo de Consulta *"}),n.jsx("textarea",{name:"motivo",id:"motivo",value:t.motivo,onChange:v,required:!0,rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe el motivo de la consulta..."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"sintomas",className:"block text-sm font-medium text-gray-700 mb-2",children:"Síntomas"}),n.jsx("textarea",{name:"sintomas",id:"sintomas",value:t.sintomas,onChange:v,rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe los síntomas del paciente..."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"observaciones",className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaciones"}),n.jsx("textarea",{name:"observaciones",id:"observaciones",value:t.observaciones,onChange:v,rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Observaciones adicionales del triaje..."})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"prioridad",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad *"}),n.jsxs("select",{name:"prioridad",id:"prioridad",value:t.prioridad,onChange:v,required:!0,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"baja",children:"🟢 Baja - No urgente"}),n.jsx("option",{value:"media",children:"🟡 Media - Moderada"}),n.jsx("option",{value:"alta",children:"🔴 Alta - Urgente"})]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"estado",className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),n.jsxs("select",{name:"estado",id:"estado",value:t.estado,onChange:v,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[n.jsx("option",{value:"pendiente",children:"Pendiente"}),n.jsx("option",{value:"en_proceso",children:"En Proceso"}),n.jsx("option",{value:"completado",children:"Completado"}),n.jsx("option",{value:"cancelado",children:"Cancelado"})]})]})]})})]}),n.jsxs("div",{className:"bg-white shadow rounded-lg",children:[n.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:n.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center gap-2",children:[n.jsx(jU,{className:"h-5 w-5 text-red-600"}),"Signos Vitales"]})}),n.jsx("div",{className:"px-6 py-4",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"presionArterial",className:"block text-sm font-medium text-gray-700 mb-2",children:"Presión Arterial"}),n.jsx("input",{type:"text",name:"signosVitales.presionArterial",id:"presionArterial",value:t.signosVitales.presionArterial,onChange:v,placeholder:"120/80",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"temperatura",className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperatura (°C)"}),n.jsx("input",{type:"number",step:"0.1",name:"signosVitales.temperatura",id:"temperatura",value:t.signosVitales.temperatura,onChange:v,placeholder:"36.5",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"pulso",className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulso (bpm)"}),n.jsx("input",{type:"number",name:"signosVitales.pulso",id:"pulso",value:t.signosVitales.pulso,onChange:v,placeholder:"80",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"respiracion",className:"block text-sm font-medium text-gray-700 mb-2",children:"Respiración (rpm)"}),n.jsx("input",{type:"number",name:"signosVitales.respiracion",id:"respiracion",value:t.signosVitales.respiracion,onChange:v,placeholder:"20",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"saturacionOxigeno",className:"block text-sm font-medium text-gray-700 mb-2",children:"Saturación O₂ (%)"}),n.jsx("input",{type:"number",name:"signosVitales.saturacionOxigeno",id:"saturacionOxigeno",value:t.signosVitales.saturacionOxigeno,onChange:v,placeholder:"98",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"peso",className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-1",children:[n.jsx(MU,{className:"h-4 w-4"}),"Peso (kg)"]}),n.jsx("input",{type:"number",step:"0.1",name:"signosVitales.peso",id:"peso",value:t.signosVitales.peso,onChange:v,placeholder:"70.5",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),n.jsxs("div",{className:"md:col-span-2 lg:col-span-1",children:[n.jsx("label",{htmlFor:"talla",className:"block text-sm font-medium text-gray-700 mb-2",children:"Talla (cm)"}),n.jsx("input",{type:"number",name:"signosVitales.talla",id:"talla",value:t.signosVitales.talla,onChange:v,placeholder:"170",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})})]}),n.jsxs("div",{className:"flex justify-end space-x-3",children:[n.jsx("button",{type:"button",onClick:N,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancelar"}),n.jsxs("button",{type:"submit",disabled:a,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(aU,{className:"h-4 w-4 mr-2"}),a?"Guardando...":"Guardar Triaje"]})]})]})]})})}function _Q(){const[t,e]=S.useState({pacienteId:"",motivo:"",prioridad:"media",estado:"pendiente",signosVitales:{presionArterial:"",temperatura:"",pulso:"",respiracion:"",saturacionOxigeno:"",peso:"",talla:""},sintomas:"",observaciones:""}),[s,r]=S.useState([]),[a,o]=S.useState(!1),[c,u]=S.useState(!0),{user:m}=wt(),f=Je(),{id:x}=En();S.useEffect(()=>{v()},[x,m]);const v=async()=>{var E,_,R,I,V,z,F;try{u(!0);const P=await Ke(we(ne,"triajes",x));if(!P.exists()){W.error("Triaje no encontrado"),f("/recepcion/triaje");return}const C=P.data();e({pacienteId:C.pacienteId||"",motivo:C.motivo||"",prioridad:C.prioridad||"media",estado:C.estado||"pendiente",signosVitales:{presionArterial:((E=C.signosVitales)==null?void 0:E.presionArterial)||"",temperatura:((_=C.signosVitales)==null?void 0:_.temperatura)||"",pulso:((R=C.signosVitales)==null?void 0:R.pulso)||"",respiracion:((I=C.signosVitales)==null?void 0:I.respiracion)||"",saturacionOxigeno:((V=C.signosVitales)==null?void 0:V.saturacionOxigeno)||"",peso:((z=C.signosVitales)==null?void 0:z.peso)||"",talla:((F=C.signosVitales)==null?void 0:F.talla)||""},sintomas:C.sintomas||"",observaciones:C.observaciones||""});let D;m!=null&&m.clinicId?D=Oe(be(ne,"pacientes"),Re("clinicId","==",m.clinicId)):D=Oe(be(ne,"pacientes"));const k=await Ce(D),O=[];k.forEach(q=>{const M=q.data();M._placeholder||O.push({id:q.id,...M})}),r(O.sort((q,M)=>{var L;return(L=q.nombre)==null?void 0:L.localeCompare(M.nombre)}))}catch(P){console.error("❌ Error al cargar datos:",P),W.error("Error al cargar los datos")}finally{u(!1)}},y=E=>{const{name:_,value:R}=E.target;if(_.startsWith("signosVitales.")){const I=_.split(".")[1];e(V=>({...V,signosVitales:{...V.signosVitales,[I]:R}}))}else e(I=>({...I,[_]:R}))},N=async E=>{if(E.preventDefault(),!t.pacienteId){W.error("Por favor selecciona un paciente");return}if(!t.motivo.trim()){W.error("Por favor ingresa el motivo de consulta");return}try{o(!0);const _={...t,fechaActualizacion:new Date().toISOString()};await hs(we(ne,"triajes",x),_),W.success("✅ Triaje actualizado correctamente"),f("/recepcion/triaje")}catch(_){console.error("❌ Error al actualizar triaje:",_),W.error("❌ No se pudo actualizar el triaje")}finally{o(!1)}},w=()=>{f("/recepcion/triaje")};return c?n.jsxs("div",{className:"p-6",children:[n.jsx("div",{className:"h-8 bg-gray-300 rounded mb-6 animate-pulse"}),n.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:n.jsxs("div",{className:"animate-pulse space-y-4",children:[n.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"}),n.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/4"}),n.jsx("div",{className:"h-10 bg-gray-300 rounded"})]})})]}):n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsxs("h2",{className:"text-3xl font-bold text-gray-800 flex items-center gap-2",children:[n.jsx(fB,{className:"h-8 w-8 text-blue-600"}),"Editar Triaje"]}),n.jsxs("button",{onClick:w,className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition flex items-center gap-2",children:[n.jsx($t,{className:"h-4 w-4"}),"Volver"]})]}),n.jsxs("form",{onSubmit:N,className:"bg-white rounded-lg shadow p-6 border border-gray-200",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsx("div",{className:"md:col-span-2",children:n.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[n.jsx(He,{className:"h-5 w-5 text-blue-600"}),"Información del Paciente"]})}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Paciente *"}),n.jsxs("select",{name:"pacienteId",value:t.pacienteId,onChange:y,required:!0,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",children:[n.jsx("option",{value:"",children:"Seleccionar paciente..."}),s.map(E=>n.jsxs("option",{value:E.id,children:[E.nombre," - ",E.dni]},E.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo de Consulta *"}),n.jsx("textarea",{name:"motivo",value:t.motivo,onChange:y,required:!0,rows:3,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Describe el motivo de la consulta..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Síntomas"}),n.jsx("textarea",{name:"sintomas",value:t.sintomas,onChange:y,rows:3,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Describe los síntomas del paciente..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Prioridad *"}),n.jsxs("select",{name:"prioridad",value:t.prioridad,onChange:y,required:!0,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",children:[n.jsx("option",{value:"baja",children:"Baja"}),n.jsx("option",{value:"media",children:"Media"}),n.jsx("option",{value:"alta",children:"Alta"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),n.jsxs("select",{name:"estado",value:t.estado,onChange:y,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",children:[n.jsx("option",{value:"pendiente",children:"Pendiente"}),n.jsx("option",{value:"en_proceso",children:"En Proceso"}),n.jsx("option",{value:"completado",children:"Completado"}),n.jsx("option",{value:"cancelado",children:"Cancelado"})]})]}),n.jsx("div",{className:"md:col-span-2",children:n.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4 mt-6",children:"Signos Vitales"})}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Presión Arterial"}),n.jsx("input",{type:"text",name:"signosVitales.presionArterial",value:t.signosVitales.presionArterial,onChange:y,placeholder:"120/80",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Temperatura (°C)"}),n.jsx("input",{type:"number",step:"0.1",name:"signosVitales.temperatura",value:t.signosVitales.temperatura,onChange:y,placeholder:"36.5",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pulso (bpm)"}),n.jsx("input",{type:"number",name:"signosVitales.pulso",value:t.signosVitales.pulso,onChange:y,placeholder:"80",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Respiración (rpm)"}),n.jsx("input",{type:"number",name:"signosVitales.respiracion",value:t.signosVitales.respiracion,onChange:y,placeholder:"20",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Saturación de Oxígeno (%)"}),n.jsx("input",{type:"number",name:"signosVitales.saturacionOxigeno",value:t.signosVitales.saturacionOxigeno,onChange:y,placeholder:"98",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Peso (kg)"}),n.jsx("input",{type:"number",step:"0.1",name:"signosVitales.peso",value:t.signosVitales.peso,onChange:y,placeholder:"70.5",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Talla (cm)"}),n.jsx("input",{type:"number",name:"signosVitales.talla",value:t.signosVitales.talla,onChange:y,placeholder:"170",className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Observaciones"}),n.jsx("textarea",{name:"observaciones",value:t.observaciones,onChange:y,rows:4,className:"w-full border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",placeholder:"Observaciones adicionales del triaje..."})]})]}),n.jsxs("div",{className:"flex justify-end gap-4 mt-6 pt-6 border-t",children:[n.jsx("button",{type:"button",onClick:w,className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition",children:"Cancelar"}),n.jsxs("button",{type:"submit",disabled:a,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2 disabled:opacity-50",children:[n.jsx(fs,{className:"h-4 w-4"}),a?"Actualizando...":"Actualizar Triaje"]})]})]})]})}function SQ(){const[t,e]=S.useState(""),[s,r]=S.useState(!1),[a,o]=S.useState(null),[c,u]=S.useState(null),[m,f]=S.useState(null),x=["12345678","87654321","11111111","22222222","44444444"],v=async(w=null)=>{const E=w||t.trim();if(!E){W.error("⚠️ Ingresa un DNI para probar");return}if(E.length!==8){W.error("⚠️ El DNI debe tener 8 dígitos");return}if(!/^\d+$/.test(E)){W.error("⚠️ El DNI solo debe contener números");return}r(!0),o(null),u(null),f(null);const _=`https://us-central1-autoclean360-3e0f7.cloudfunctions.net/reniecLookup?dni=${E}`,R=Date.now();try{console.log("🔍 Probando API RENIEC:",_),f({url:_,dni:E,timestamp:new Date().toLocaleString(),status:"loading"});const I=await fetch(_,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}}),z=Date.now()-R;console.log("📡 Respuesta HTTP:",I.status,I.statusText);const F=await I.text();console.log("📄 Respuesta cruda:",F);let P;try{P=JSON.parse(F)}catch(C){throw console.error("❌ Error al parsear JSON:",C),new Error(`Respuesta no es JSON válido: ${F}`)}if(f(C=>({...C,status:I.ok?"success":"error",httpStatus:I.status,responseTime:`${z}ms`,responseSize:`${F.length} chars`})),I.ok)o(P),console.log("✅ Datos recibidos:",P),P.nombres&&P.apellidoPaterno?W.success("✅ DNI encontrado correctamente"):W.error("❌ DNI no encontrado en la base de datos");else throw new Error(`HTTP ${I.status}: ${P.message||P.error||"Error desconocido"}`)}catch(I){console.error("❌ Error en la petición:",I),u({message:I.message,type:I.name,stack:I.stack}),f(V=>({...V,status:"error",error:I.message})),W.error(`❌ Error: ${I.message}`)}finally{r(!1)}},y=w=>{navigator.clipboard.writeText(w),W.success("📋 Copiado al portapapeles")},N=()=>{o(null),u(null),f(null),e("")};return n.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:n.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:n.jsx(vn,{className:"h-8 w-8 text-blue-600"})}),"Prueba API RENIEC"]}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Herramienta para probar la API de consulta de DNI y diagnosticar problemas"})]}),n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Probar DNI"}),n.jsxs("div",{className:"flex gap-4 mb-4",children:[n.jsx("input",{type:"text",value:t,onChange:w=>e(w.target.value),className:"flex-1 border border-gray-300 rounded-lg px-4 py-3 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ingresa 8 dígitos del DNI",maxLength:"8"}),n.jsx("button",{onClick:()=>v(),disabled:s,className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 min-w-[140px] justify-center",children:s?n.jsxs(n.Fragment,{children:[n.jsx($f,{className:"h-4 w-4 animate-spin"}),"Probando..."]}):n.jsxs(n.Fragment,{children:[n.jsx(vn,{className:"h-4 w-4"}),"Probar API"]})}),n.jsxs("button",{onClick:N,className:"bg-gray-100 text-gray-700 px-4 py-3 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2",children:[n.jsx(hf,{className:"h-4 w-4"}),"Limpiar"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"DNIs de Prueba:"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(w=>n.jsx("button",{onClick:()=>{e(w),v(w)},disabled:s,className:"bg-gray-100 text-gray-700 px-3 py-1 rounded text-sm hover:bg-gray-200 transition-colors disabled:opacity-50",children:w},w))})]})]}),m&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(FF,{className:"h-5 w-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Información de la Petición"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"URL:"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs flex-1 break-all",children:m.url}),n.jsx("button",{onClick:()=>y(m.url),className:"text-gray-500 hover:text-gray-700",children:n.jsx(qf,{className:"h-4 w-4"})})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"DNI Consultado:"}),n.jsx("p",{className:"text-gray-600 mt-1",children:m.dni})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Timestamp:"}),n.jsx("p",{className:"text-gray-600 mt-1",children:m.timestamp})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Estado:"}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[m.status==="success"&&n.jsx(_t,{className:"h-4 w-4 text-green-600"}),m.status==="error"&&n.jsx(ha,{className:"h-4 w-4 text-red-600"}),m.status==="loading"&&n.jsx($f,{className:"h-4 w-4 text-blue-600 animate-spin"}),n.jsx("span",{className:`capitalize ${m.status==="success"?"text-green-600":m.status==="error"?"text-red-600":"text-blue-600"}`,children:m.status})]})]}),m.httpStatus&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"HTTP Status:"}),n.jsx("p",{className:"text-gray-600 mt-1",children:m.httpStatus})]}),m.responseTime&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Tiempo de Respuesta:"}),n.jsx("p",{className:"text-gray-600 mt-1",children:m.responseTime})]})]})]}),a&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-green-200 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(_t,{className:"h-5 w-5 text-green-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Respuesta Exitosa"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Nombres:"}),n.jsx("p",{className:"text-gray-900 mt-1",children:a.nombres||"No disponible"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Apellido Paterno:"}),n.jsx("p",{className:"text-gray-900 mt-1",children:a.apellidoPaterno||"No disponible"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Apellido Materno:"}),n.jsx("p",{className:"text-gray-900 mt-1",children:a.apellidoMaterno||"No disponible"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"DNI:"}),n.jsx("p",{className:"text-gray-900 mt-1",children:a.dni||a.numeroDocumento||"No disponible"})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Respuesta JSON Completa:"}),n.jsx("div",{className:"mt-2 bg-gray-50 rounded-lg p-4 overflow-x-auto",children:n.jsx("pre",{className:"text-sm text-gray-800",children:JSON.stringify(a,null,2)})}),n.jsxs("button",{onClick:()=>y(JSON.stringify(a,null,2)),className:"mt-2 text-sm text-blue-600 hover:text-blue-800 flex items-center gap-1",children:[n.jsx(qf,{className:"h-3 w-3"}),"Copiar JSON"]})]})]}),c&&n.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(ha,{className:"h-5 w-5 text-red-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Error en la Petición"})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Mensaje de Error:"}),n.jsx("p",{className:"text-red-600 mt-1",children:c.message})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Tipo de Error:"}),n.jsx("p",{className:"text-gray-600 mt-1",children:c.type})]}),c.stack&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-gray-700",children:"Stack Trace:"}),n.jsx("div",{className:"mt-2 bg-gray-50 rounded-lg p-4 overflow-x-auto",children:n.jsx("pre",{className:"text-xs text-gray-600",children:c.stack})})]})]})]}),n.jsxs("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Rc,{className:"h-5 w-5 text-blue-600"}),n.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Información de Debugging"})]}),n.jsxs("div",{className:"space-y-3 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-900",children:"API Endpoint:"}),n.jsx("p",{className:"text-blue-800",children:"https://us-central1-autoclean360-3e0f7.cloudfunctions.net/reniecLookup"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-900",children:"Método:"}),n.jsx("p",{className:"text-blue-800",children:"GET"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-900",children:"Parámetros:"}),n.jsx("p",{className:"text-blue-800",children:"?dni=[8_digitos]"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-900",children:"Posibles Problemas:"}),n.jsxs("ul",{className:"text-blue-800 mt-1 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"La API puede estar inactiva o con problemas"}),n.jsx("li",{children:"Los DNIs de prueba pueden no existir en la base de datos"}),n.jsx("li",{children:"Puede haber restricciones de CORS"}),n.jsx("li",{children:"La función de Firebase puede tener límites de uso"}),n.jsx("li",{children:"La API puede requerir autenticación adicional"})]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-blue-900",children:"Recomendaciones:"}),n.jsxs("ul",{className:"text-blue-800 mt-1 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Verifica la consola del navegador para más detalles"}),n.jsx("li",{children:"Prueba con diferentes DNIs"}),n.jsx("li",{children:"Contacta al administrador de la API si persisten los errores"}),n.jsx("li",{children:"Considera implementar un fallback manual para casos de error"})]})]})]})]})]})})}function AQ(){return n.jsx(XV,{children:n.jsx(o5,{children:n.jsxs("div",{className:"App",children:[n.jsx(o3,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,theme:{primary:"green",secondary:"black"}}}}),n.jsxs(S1,{children:[n.jsx(pe,{path:"/",element:n.jsx(TB,{})}),n.jsx(pe,{path:"/login",element:n.jsx(AB,{})}),n.jsx(pe,{path:"/register",element:n.jsx(CB,{})}),n.jsx(pe,{path:"/saas-register",element:n.jsx(RB,{})}),n.jsx(pe,{path:"/dashboard/super-admin",element:n.jsx(DB,{})}),n.jsx(pe,{path:"/test/reniec",element:n.jsx(SQ,{})}),n.jsx(pe,{path:"/*",element:n.jsx(ZV,{children:n.jsx(SB,{children:n.jsxs(S1,{children:[n.jsx(pe,{path:"/dashboard/admin",element:n.jsx(_E,{})}),n.jsx(pe,{path:"/dashboard/doctor",element:n.jsx(SE,{})}),n.jsx(pe,{path:"/dashboard/recepcion",element:n.jsx(AE,{})}),n.jsx(pe,{path:"/dashboard/patient",element:n.jsx(CE,{})}),n.jsx(pe,{path:"/admin/dashboard",element:n.jsx(_E,{})}),n.jsx(pe,{path:"/admin/especialidades",element:n.jsx(TE,{})}),n.jsx(pe,{path:"/admin/especialidades/crear",element:n.jsx(RE,{})}),n.jsx(pe,{path:"/admin/especialidades/editar/:id",element:n.jsx(DE,{})}),n.jsx(pe,{path:"/admin/doctores",element:n.jsx(IE,{})}),n.jsx(pe,{path:"/admin/doctores/crear",element:n.jsx(kE,{})}),n.jsx(pe,{path:"/admin/doctores/editar/:id",element:n.jsx(ME,{})}),n.jsx(pe,{path:"/admin/usuarios",element:n.jsx(PE,{})}),n.jsx(pe,{path:"/admin/usuarios/editar/:id",element:n.jsx(OE,{})}),n.jsx(pe,{path:"/admin/pacientes",element:n.jsx(Bm,{})}),n.jsx(pe,{path:"/admin/pacientes/crear",element:n.jsx(Hm,{})}),n.jsx(pe,{path:"/admin/pacientes/editar/:id",element:n.jsx(zm,{})}),n.jsx(pe,{path:"/admin/citas",element:n.jsx(Rx,{})}),n.jsx(pe,{path:"/admin/citas/crear",element:n.jsx(Dx,{})}),n.jsx(pe,{path:"/admin/citas/editar/:id",element:n.jsx(Ix,{})}),n.jsx(pe,{path:"/admin/horarios",element:n.jsx(Xm,{})}),n.jsx(pe,{path:"/admin/historias-clinicas",element:n.jsx(Sx,{})}),n.jsx(pe,{path:"/admin/historias-clinicas/crear",element:n.jsx(Ax,{})}),n.jsx(pe,{path:"/admin/historias-clinicas/editar/:id",element:n.jsx(Cx,{})}),n.jsx(pe,{path:"/admin/historias-clinicas/ver/:id",element:n.jsx(Tx,{})}),n.jsx(pe,{path:"/doctor/dashboard",element:n.jsx(SE,{})}),n.jsx(pe,{path:"/doctor/perfil",element:n.jsx(IB,{})}),n.jsx(pe,{path:"/doctor/citas",element:n.jsx(kB,{})}),n.jsx(pe,{path:"/doctor/pacientes",element:n.jsx(Bm,{})}),n.jsx(pe,{path:"/doctor/pacientes/crear",element:n.jsx(Hm,{})}),n.jsx(pe,{path:"/doctor/pacientes/editar/:id",element:n.jsx(zm,{})}),n.jsx(pe,{path:"/doctor/historia-clinica",element:n.jsx(Sx,{})}),n.jsx(pe,{path:"/doctor/historia-clinica/crear/:id",element:n.jsx(Ax,{})}),n.jsx(pe,{path:"/doctor/historia-clinica/editar/:id",element:n.jsx(Cx,{})}),n.jsx(pe,{path:"/doctor/historia-clinica/ver/:id",element:n.jsx(Tx,{})}),n.jsx(pe,{path:"/doctor/historia-clinica/:id/visitas/crear",element:n.jsx(LE,{})}),n.jsx(pe,{path:"/doctor/historia-clinica/:recordId/visitas/editar/:visitId",element:n.jsx(VE,{})}),n.jsx(pe,{path:"/doctor/historia-clinica/:id/archivos/crear",element:n.jsx(UE,{})}),n.jsx(pe,{path:"/doctor/historia-clinica/:recordId/archivos/editar/:fileId",element:n.jsx(FE,{})}),n.jsx(pe,{path:"/doctor/horarios",element:n.jsx(Xm,{})}),n.jsx(pe,{path:"/recepcion/dashboard",element:n.jsx(AE,{})}),n.jsx(pe,{path:"/recepcion/pacientes",element:n.jsx(Bm,{})}),n.jsx(pe,{path:"/recepcion/pacientes/crear",element:n.jsx(Hm,{})}),n.jsx(pe,{path:"/recepcion/pacientes/editar/:id",element:n.jsx(zm,{})}),n.jsx(pe,{path:"/recepcion/citas",element:n.jsx(Rx,{})}),n.jsx(pe,{path:"/recepcion/citas/crear",element:n.jsx(Dx,{})}),n.jsx(pe,{path:"/recepcion/citas/editar/:id",element:n.jsx(Ix,{})}),n.jsx(pe,{path:"/recepcion/horarios",element:n.jsx(Xm,{})}),n.jsx(pe,{path:"/recepcion/triaje",element:n.jsx(jQ,{})}),n.jsx(pe,{path:"/recepcion/triaje/crear",element:n.jsx(EQ,{})}),n.jsx(pe,{path:"/recepcion/triaje/editar/:id",element:n.jsx(_Q,{})}),n.jsx(pe,{path:"/patient/dashboard",element:n.jsx(CE,{})}),n.jsx(pe,{path:"/patient/citas",element:n.jsx(MB,{})}),n.jsx(pe,{path:"/patient/historia-clinica",element:n.jsx(PB,{})}),n.jsx(pe,{path:"/patient/perfil",element:n.jsx(OB,{})}),n.jsx(pe,{path:"/patient/doctores",element:n.jsx(LB,{})}),n.jsx(pe,{path:"/especialidades",element:n.jsx(TE,{})}),n.jsx(pe,{path:"/especialidades/crear",element:n.jsx(RE,{})}),n.jsx(pe,{path:"/especialidades/editar/:id",element:n.jsx(DE,{})}),n.jsx(pe,{path:"/doctores",element:n.jsx(IE,{})}),n.jsx(pe,{path:"/doctores/crear",element:n.jsx(kE,{})}),n.jsx(pe,{path:"/doctores/editar/:id",element:n.jsx(ME,{})}),n.jsx(pe,{path:"/usuarios",element:n.jsx(PE,{})}),n.jsx(pe,{path:"/usuarios/editar/:id",element:n.jsx(OE,{})}),n.jsx(pe,{path:"/historias-clinicas",element:n.jsx(Sx,{})}),n.jsx(pe,{path:"/historias-clinicas/crear",element:n.jsx(Ax,{})}),n.jsx(pe,{path:"/historias-clinicas/editar/:id",element:n.jsx(Cx,{})}),n.jsx(pe,{path:"/historias-clinicas/ver/:id",element:n.jsx(Tx,{})}),n.jsx(pe,{path:"/historias-clinicas/:id/visitas/crear",element:n.jsx(LE,{})}),n.jsx(pe,{path:"/historias-clinicas/:recordId/visitas/editar/:visitId",element:n.jsx(VE,{})}),n.jsx(pe,{path:"/historias-clinicas/:id/archivos/crear",element:n.jsx(UE,{})}),n.jsx(pe,{path:"/historias-clinicas/:recordId/archivos/editar/:fileId",element:n.jsx(FE,{})}),n.jsx(pe,{path:"/pacientes",element:n.jsx(Bm,{})}),n.jsx(pe,{path:"/pacientes/crear",element:n.jsx(Hm,{})}),n.jsx(pe,{path:"/pacientes/editar/:id",element:n.jsx(zm,{})}),n.jsx(pe,{path:"/citas",element:n.jsx(Rx,{})}),n.jsx(pe,{path:"/citas/crear",element:n.jsx(Dx,{})}),n.jsx(pe,{path:"/citas/editar/:id",element:n.jsx(Ix,{})}),n.jsx(pe,{path:"/horarios",element:n.jsx(Xm,{})}),n.jsx(pe,{path:"/dashboard",element:n.jsx(rc,{to:"/login",replace:!0})}),n.jsx(pe,{path:"/admin",element:n.jsx(rc,{to:"/admin/dashboard",replace:!0})}),n.jsx(pe,{path:"/doctor",element:n.jsx(rc,{to:"/doctor/dashboard",replace:!0})}),n.jsx(pe,{path:"/recepcion",element:n.jsx(rc,{to:"/recepcion/dashboard",replace:!0})}),n.jsx(pe,{path:"/pacientes",element:n.jsx(rc,{to:"/pacientes/dashboard",replace:!0})})]})})})})]})]})})})}mD.createRoot(document.getElementById("root")).render(n.jsx(as.StrictMode,{children:n.jsx(WD,{children:n.jsx(AQ,{})})}));
